define(["../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/app-layout/app-toolbar/app-toolbar.js","../../../@polymer/paper-item/paper-item.js","../../../@polymer/iron-icons/iron-icons.js","../../md-extra-icons/md-extra-icons.js","../../simple-colors/simple-colors.js","./hax-context-item-menu.js","./hax-context-item.js","./hax-context-item-textop.js","./hax-toolbar.js","./hax-shared-styles.js"],function(_polymerLegacy){"use strict";function _templateObject_948723b0499511e9a5428ba375554590(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n        pointer-events: none;\n        background-color: white;\n      }\n      :host [hidden] {\n        display: none;\n      }\n      paper-item {\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n        height: 36px;\n        padding: 0 8px;\n        min-height: 36px;\n      }\n      paper-item:hover {\n        background-color: #d3d3d3;\n        cursor: pointer;\n      }\n      iron-icon {\n        padding: 8px;\n      }\n      paper-item strong {\n        padding: 8px;\n        font-size: 12px;\n      }\n      :host(.hax-context-pin-top) hax-toolbar {\n        position: fixed;\n        top: 64px;\n        opacity: 0.95;\n      }\n      :host(.hax-context-pin-bottom) hax-toolbar {\n        position: fixed;\n        bottom: 0;\n        opacity: 0.95;\n      }\n    </style>\n    <hax-toolbar selected=\"[[selection]]\" hide-transform=\"\" id=\"toolbar\">\n      <hax-context-item-menu\n        slot=\"primary\"\n        selected-value=\"{{selectedValue}}\"\n        id=\"formatsize\"\n        icon=\"text-format\"\n        label=\"Format\"\n        event-name=\"text-tag\"\n      >\n        <paper-item value=\"p\"\n          ><iron-icon icon=\"editor:format-textdirection-l-to-r\"></iron-icon\n          >Normal text <strong>&lt;P&gt;</strong></paper-item\n        >\n        <paper-item value=\"ul\"\n          ><iron-icon icon=\"editor:format-list-bulleted\"></iron-icon>Bulleted\n          list <strong>&lt;UL&gt;</strong></paper-item\n        >\n        <paper-item value=\"ol\"\n          ><iron-icon icon=\"editor:format-list-numbered\"></iron-icon>Numbered\n          list <strong>&lt;OL&gt;</strong></paper-item\n        >\n        <paper-item value=\"h2\"\n          ><iron-icon icon=\"editor:title\"></iron-icon>Title\n          <strong>&lt;H2&gt;</strong></paper-item\n        >\n        <paper-item value=\"h3\"\n          ><iron-icon icon=\"editor:title\"></iron-icon>Content heading\n          <strong>&lt;H3&gt;</strong></paper-item\n        >\n        <paper-item value=\"h4\"\n          ><iron-icon icon=\"editor:text-fields\"></iron-icon>Subheading\n          <strong>&lt;H4&gt;</strong></paper-item\n        >\n        <paper-item value=\"h5\"\n          ><iron-icon icon=\"editor:text-fields\"></iron-icon>Deeper subheading\n          <strong>&lt;H5&gt;</strong></paper-item\n        >\n        <paper-item value=\"blockquote\"\n          ><iron-icon icon=\"editor:format-quote\"></iron-icon>Quote<strong\n            >&lt;blockquote&gt;</strong\n          ></paper-item\n        >\n        <paper-item value=\"code\"\n          ><iron-icon icon=\"icons:code\"></iron-icon>Code block<strong\n            >&lt;code&gt;</strong\n          ></paper-item\n        >\n      </hax-context-item-menu>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-bold\"\n        label=\"Bold\"\n        event-name=\"text-bold\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-italic\"\n        label=\"Italic\"\n        event-name=\"text-italic\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:insert-link\"\n        label=\"Link\"\n        event-name=\"text-link\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-list-bulleted\"\n        event-name=\"text-list-bulleted\"\n        label=\"Bulleted list\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-list-numbered\"\n        label=\"Numbered list\"\n        event-name=\"text-list-numbered\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-indent-decrease\"\n        label=\"Outdent\"\n        event-name=\"text-outdent\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-indent-increase\"\n        label=\"Indent\"\n        event-name=\"text-indent\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-clear\"\n        label=\"Remove format\"\n        event-name=\"text-remove-format\"\n      ></hax-context-item-textop>\n      <hax-context-item\n        slot=\"primary\"\n        icon=\"device:graphic-eq\"\n        label=\"Advanced item\"\n        event-name=\"insert-inline-gizmo\"\n        hidden$=\"[[isSafari]]\"\n      ></hax-context-item>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"device:graphic-eq\"\n        label=\"Advanced item\"\n        event-name=\"insert-inline-gizmo\"\n        hidden$=\"[[!isSafari]]\"\n      ></hax-context-item-textop>\n\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:unlink\"\n        event-name=\"text-unlink\"\n        >Remove link</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:subscript\"\n        event-name=\"text-subscript\"\n        >Subscript</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:superscript\"\n        event-name=\"text-superscript\"\n        >Superscript</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"editor:format-underlined\"\n        event-name=\"text-underline\"\n        >Underline</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"editor:format-strikethrough\"\n        event-name=\"text-strikethrough\"\n        >Cross out</hax-context-item-textop\n      >\n    </hax-toolbar>\n  "],["\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n        pointer-events: none;\n        background-color: white;\n      }\n      :host [hidden] {\n        display: none;\n      }\n      paper-item {\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n        height: 36px;\n        padding: 0 8px;\n        min-height: 36px;\n      }\n      paper-item:hover {\n        background-color: #d3d3d3;\n        cursor: pointer;\n      }\n      iron-icon {\n        padding: 8px;\n      }\n      paper-item strong {\n        padding: 8px;\n        font-size: 12px;\n      }\n      :host(.hax-context-pin-top) hax-toolbar {\n        position: fixed;\n        top: 64px;\n        opacity: 0.95;\n      }\n      :host(.hax-context-pin-bottom) hax-toolbar {\n        position: fixed;\n        bottom: 0;\n        opacity: 0.95;\n      }\n    </style>\n    <hax-toolbar selected=\"[[selection]]\" hide-transform=\"\" id=\"toolbar\">\n      <hax-context-item-menu\n        slot=\"primary\"\n        selected-value=\"{{selectedValue}}\"\n        id=\"formatsize\"\n        icon=\"text-format\"\n        label=\"Format\"\n        event-name=\"text-tag\"\n      >\n        <paper-item value=\"p\"\n          ><iron-icon icon=\"editor:format-textdirection-l-to-r\"></iron-icon\n          >Normal text <strong>&lt;P&gt;</strong></paper-item\n        >\n        <paper-item value=\"ul\"\n          ><iron-icon icon=\"editor:format-list-bulleted\"></iron-icon>Bulleted\n          list <strong>&lt;UL&gt;</strong></paper-item\n        >\n        <paper-item value=\"ol\"\n          ><iron-icon icon=\"editor:format-list-numbered\"></iron-icon>Numbered\n          list <strong>&lt;OL&gt;</strong></paper-item\n        >\n        <paper-item value=\"h2\"\n          ><iron-icon icon=\"editor:title\"></iron-icon>Title\n          <strong>&lt;H2&gt;</strong></paper-item\n        >\n        <paper-item value=\"h3\"\n          ><iron-icon icon=\"editor:title\"></iron-icon>Content heading\n          <strong>&lt;H3&gt;</strong></paper-item\n        >\n        <paper-item value=\"h4\"\n          ><iron-icon icon=\"editor:text-fields\"></iron-icon>Subheading\n          <strong>&lt;H4&gt;</strong></paper-item\n        >\n        <paper-item value=\"h5\"\n          ><iron-icon icon=\"editor:text-fields\"></iron-icon>Deeper subheading\n          <strong>&lt;H5&gt;</strong></paper-item\n        >\n        <paper-item value=\"blockquote\"\n          ><iron-icon icon=\"editor:format-quote\"></iron-icon>Quote<strong\n            >&lt;blockquote&gt;</strong\n          ></paper-item\n        >\n        <paper-item value=\"code\"\n          ><iron-icon icon=\"icons:code\"></iron-icon>Code block<strong\n            >&lt;code&gt;</strong\n          ></paper-item\n        >\n      </hax-context-item-menu>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-bold\"\n        label=\"Bold\"\n        event-name=\"text-bold\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-italic\"\n        label=\"Italic\"\n        event-name=\"text-italic\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:insert-link\"\n        label=\"Link\"\n        event-name=\"text-link\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-list-bulleted\"\n        event-name=\"text-list-bulleted\"\n        label=\"Bulleted list\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-list-numbered\"\n        label=\"Numbered list\"\n        event-name=\"text-list-numbered\"\n        hidden\\$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-indent-decrease\"\n        label=\"Outdent\"\n        event-name=\"text-outdent\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-indent-increase\"\n        label=\"Indent\"\n        event-name=\"text-indent\"\n        hidden$=\"[[!_showIndent]]\"\n      ></hax-context-item-textop>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"editor:format-clear\"\n        label=\"Remove format\"\n        event-name=\"text-remove-format\"\n      ></hax-context-item-textop>\n      <hax-context-item\n        slot=\"primary\"\n        icon=\"device:graphic-eq\"\n        label=\"Advanced item\"\n        event-name=\"insert-inline-gizmo\"\n        hidden$=\"[[isSafari]]\"\n      ></hax-context-item>\n      <hax-context-item-textop\n        slot=\"primary\"\n        icon=\"device:graphic-eq\"\n        label=\"Advanced item\"\n        event-name=\"insert-inline-gizmo\"\n        hidden$=\"[[!isSafari]]\"\n      ></hax-context-item-textop>\n\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:unlink\"\n        event-name=\"text-unlink\"\n        >Remove link</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:subscript\"\n        event-name=\"text-subscript\"\n        >Subscript</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"mdextra:superscript\"\n        event-name=\"text-superscript\"\n        >Superscript</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"editor:format-underlined\"\n        event-name=\"text-underline\"\n        >Underline</hax-context-item-textop\n      >\n      <hax-context-item-textop\n        menu\n        slot=\"more\"\n        icon=\"editor:format-strikethrough\"\n        event-name=\"text-strikethrough\"\n        >Cross out</hax-context-item-textop\n      >\n    </hax-toolbar>\n  "]);_templateObject_948723b0499511e9a5428ba375554590=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_948723b0499511e9a5428ba375554590()),is:"hax-text-context",listeners:{"hax-context-item-selected":"_haxContextOperation"},properties:{_showIndent:{type:Boolean,computed:"_computeShowIndent(selectedValue, polyfillSafe)"},polyfillSafe:{type:Boolean},selectedValue:{type:String,value:"p",notify:!0},selection:{type:Boolean,value:!1},isSafari:{type:Boolean,notify:!0,computed:"_isSafari()"}},_computeShowIndent:function _computeShowIndent(selectedValue,polyfillSafe){if(polyfillSafe&&("ol"===selectedValue||"ul"===selectedValue)){return!0}return!1},attached:function attached(){this.polyfillSafe=window.HaxStore.instance.computePolyfillSafe()},_haxContextOperation:function _haxContextOperation(e){var _this=this,detail=e.detail,selection=window.HaxStore.getSelection();switch(detail.eventName){case"close-menu":setTimeout(function(){_this.$.formatsize.$.menu.hideMenu()},200);break;case"insert-inline-gizmo":if(window.HaxStore._tmpSelection&&window.HaxStore.instance.editMode){var localRange=!1;try{if("HAX-BODY"===window.HaxStore._tmpRange.startContainer.parentNode.parentNode.tagName||"HAX-BODY"===window.HaxStore._tmpRange.startContainer.parentNode.parentNode.parentNode.tagName){window.HaxStore.write("activePlaceHolder",window.HaxStore._tmpRange,this);localRange=window.HaxStore._tmpRange}}catch(err){}}if(localRange||null!=window.HaxStore.instance.activePlaceHolder){var values={text:window.HaxStore.instance.activePlaceHolder.toString()},type="inline",haxElements=window.HaxStore.guessGizmo(type,values);if(0<haxElements.length){window.HaxStore.instance.haxAppPicker.presentOptions(haxElements,type,"Transform selected text to..","gizmo")}}break;case"text-bold":document.execCommand("bold");break;case"text-italic":document.execCommand("italic");break;case"text-underline":document.execCommand("underline");this.$.toolbar.$.moremenu.$.menu.hideMenu();break;case"text-subscript":document.execCommand("subscript");this.$.toolbar.$.moremenu.$.menu.hideMenu();break;case"text-superscript":document.execCommand("superscript");this.$.toolbar.$.moremenu.$.menu.hideMenu();break;case"text-remove-format":document.execCommand("removeFormat");break;case"text-strikethrough":document.execCommand("strikeThrough");this.$.toolbar.$.moremenu.$.menu.hideMenu();break;case"text-link":var href="";if(babelHelpers.typeof(selection.focusNode.parentNode.href)!=="undefined"){href=selection.focusNode.parentNode.href}var url=prompt("Enter a URL:",href);if(url){document.execCommand("createLink",!1,url)}break;case"text-unlink":document.execCommand("unlink");break;case"text-indent":document.execCommand("indent");break;case"text-outdent":document.execCommand("outdent");break;case"text-list-numbered":try{document.execCommand("insertOrderedList")}catch(e){}break;case"text-list-bulleted":try{document.execCommand("insertUnorderedList")}catch(e){}break;}},_isSafari:function _isSafari(){var ua=navigator.userAgent.toLowerCase();if(-1!=ua.indexOf("safari")){if(!(-1<ua.indexOf("chrome"))){return!0}}return!1}})});
define(["meta","../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/polymer/lib/legacy/polymer.dom.js","../../../@polymer/app-layout/app-drawer/app-drawer.js","../../../@polymer/paper-icon-button/paper-icon-button.js","../../../@polymer/iron-icons/iron-icons.js","../../../@polymer/iron-icons/editor-icons.js","../../../@polymer/iron-icons/device-icons.js","../../../@polymer/iron-icons/hardware-icons.js","../../../@polymer/iron-icons/communication-icons.js","../../../@polymer/iron-icons/social-icons.js","../../../@polymer/iron-icons/av-icons.js","../../../@polymer/iron-icons/maps-icons.js","../../simple-colors/simple-colors.js","./hax-panel-item.js","./hax-shared-styles.js"],function(meta,_polymerLegacy){"use strict";meta=babelHelpers.interopRequireWildcard(meta);function _templateObject_50262860499a11e9853aab77594e37fb(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n        position: absolute;\n        z-index: 1000000;\n      }\n      :host *[hidden] {\n        display: none;\n      }\n      app-drawer {\n        z-index: 100001;\n        height: 40px;\n        padding: 8px 16px;\n        left: 0;\n        top: 0;\n        align-items: center;\n        touch-action: auto;\n        visibility: hidden;\n        opacity: 0;\n        display: flex;\n        --app-drawer-width: 100%;\n        --app-drawer-content-container: {\n          align-items: center;\n          width: 100%;\n          left: 0;\n          right: 0;\n          background-color: var(--hax-color-bg);\n          border: 1px solid var(--hax-color-bg-accent);\n          padding: 0 16px;\n          display: flex;\n          touch-action: auto;\n          overflow-x: auto;\n          overflow: visible !important;\n          -webkit-overflow-scrolling: touch;\n          white-space: nowrap;\n        }\n      }\n      hax-panel-item {\n        margin: 8px 4px;\n      }\n      hax-panel-item[right] {\n        float: right;\n      }\n      #haxcancelbutton {\n        margin-right: 48px;\n      }\n      :host([align=\"right\"]) app-drawer {\n        right: 0;\n        left: unset;\n      }\n      :host([edit-mode]) app-drawer {\n        visibility: visible;\n        transition: 0.3s ease opacity;\n        opacity: 1;\n        right: 0;\n        left: 0;\n        top: 0;\n      }\n\n      #button {\n        position: fixed;\n        top: 0;\n        left: 0;\n        visibility: visible;\n        z-index: 10000;\n        transition: all 0.3s ease;\n        margin: 0;\n        border-top-left-radius: 0;\n      }\n      :host([edit-mode]) #button {\n        visibility: hidden;\n        opacity: 0;\n      }\n      #button:hover {\n        opacity: 1;\n      }\n      :host([align=\"right\"]) #button {\n        right: 0;\n        left: unset;\n        border-top-right-radius: 0;\n        border-top-left-radius: unset;\n      }\n      .active-op-name {\n        display: none;\n      }\n      :host([edit-mode]) .active-op-name {\n        display: flex;\n        top: 0;\n        right: 0;\n        z-index: 1000000;\n        position: fixed;\n        font-size: 14px;\n        font-weight: bold;\n        padding: 16px 28px 16px 16px;\n        line-height: 24px;\n        height: 24px;\n        min-width: 120px;\n        justify-content: space-evenly;\n        background-color: var(--hax-color-bg-accent);\n        color: var(--hax-color-text);\n        vertical-align: middle;\n      }\n      @media screen and (max-width: 600px) {\n        :host([edit-mode]) hax-panel-item {\n          margin: 8px 2px;\n        }\n        :host([edit-mode]) .hide-small {\n          display: none;\n        }\n        :host([edit-mode]) app-drawer {\n          padding: 0;\n        }\n      }\n      @media screen and (max-width: 800px) {\n        :host([edit-mode]) #haxcancelbutton {\n          margin-right: 2px;\n        }\n        :host([edit-mode]) .active-op-name {\n          display: none;\n        }\n      }\n    </style>\n    <div hidden$=\"[[hidePanelOps]]\">\n      <hax-panel-item\n        dark\n        large\n        data-opened$=\"[[editMode]]\"\n        on-tap=\"_clickEditButton\"\n        icon=\"create\"\n        id=\"button\"\n        edged=\"[[align]]\"\n        label=\"[[__tipText]]\"\n      ></hax-panel-item>\n    </div>\n    <app-drawer\n      id=\"drawer\"\n      opened=\"{{editMode}}\"\n      disable-swipe\n      persistent\n      transition-duration=\"300\"\n      align=\"[[align]]\"\n    >\n      <hax-panel-item\n        hidden$=\"[[hidePanelOps]]\"\n        on-tap=\"_clickSaveButton\"\n        icon=\"save\"\n        id=\"haxsavebutton\"\n        label=\"[[__tipText]]\"\n        event-name=\"save\"\n        voice-command=\"save content\"\n      ></hax-panel-item>\n      <hax-panel-item\n        hidden$=\"[[hidePanelOps]]\"\n        icon=\"cancel\"\n        id=\"haxcancelbutton\"\n        label=\"Cancel\"\n        event-name=\"cancel\"\n        voice-command=\"cancel hax\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"image:add-to-photos\"\n        label=\"Add\"\n        event-name=\"hax-manager-open\"\n        value=\"0\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"search\"\n        label=\"Find\"\n        event-name=\"hax-manager-open\"\n        value=\"1\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"hardware:toys\"\n        label=\"Make\"\n        event-name=\"hax-manager-open\"\n        value=\"2\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"view-quilt\"\n        label=\"Layouts\"\n        event-name=\"hax-blox-picker-open\"\n        voice-command=\"insert block\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"view-agenda\"\n        label=\"Templates\"\n        event-name=\"hax-stax-picker-open\"\n        voice-command=\"insert stack\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"editor:text-fields\"\n        label=\"Paragraph\"\n        event-name=\"text\"\n        voice-command=\"insert text\"\n        class=\"hide-small\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"editor:title\"\n        label=\"Heading\"\n        event-name=\"header\"\n        voice-command=\"insert heading\"\n        class=\"hide-small\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"editor:space-bar\"\n        label=\"Divider\"\n        event-name=\"divider\"\n        voice-command=\"insert divider\"\n        class=\"hide-small\"\n      ></hax-panel-item>\n      <hax-panel-item\n        icon=\"image:transform\"\n        label=\"Placeholder\"\n        event-name=\"placeholder\"\n        voice-command=\"insert placeholder\"\n        class=\"hide-small\"\n      ></hax-panel-item>\n      <hax-panel-item\n        hidden$=\"[[hideExportButton]]\"\n        on-tap=\"_htmlExportDialog\"\n        icon=\"code\"\n        label=\"Source view\"\n      ></hax-panel-item>\n      <slot></slot>\n      <hax-panel-item\n        right\n        hidden$=\"[[hidePreferencesButton]]\"\n        on-tap=\"_preferencesDialog\"\n        icon=\"settings\"\n        label=\"Preferences\"\n      ></hax-panel-item>\n    </app-drawer>\n    <div class=\"active-op-name\">[[activeOperationName]]</div>\n  "]);_templateObject_50262860499a11e9853aab77594e37fb=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_50262860499a11e9853aab77594e37fb()),is:"hax-panel",listeners:{"hax-item-selected":"_processItemEvent"},observers:["_globalPreferencesChanged(globalPreferences.*)"],properties:{light:{type:Boolean},align:{type:String,reflectToAttribute:!0,value:"left"},editMode:{type:Boolean,reflectToAttribute:!0,observer:"_editModeChanged"},hideExportButton:{type:Boolean,value:!1},haxDeveloperMode:{type:Boolean,value:!1},activeOperationName:{type:String},hidePreferencesButton:{type:Boolean,value:!1},hidePanelOps:{type:Boolean,value:!1},globalPreferences:{type:Object}},attached:function attached(){this.fire("hax-register-panel",this);document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this));document.body.addEventListener("hax-active-hover-name",this._activeNameChange.bind(this));document.body.addEventListener("hax-panel-operation",this._processItemEvent.bind(this))},detached:function detached(){document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this));document.body.removeEventListener("hax-active-hover-name",this._activeNameChange.bind(this));document.body.removeEventListener("hax-panel-operation",this._processItemEvent.bind(this))},_activeNameChange:function _activeNameChange(e){this.activeOperationName=e.detail},_globalPreferencesChanged:function _globalPreferencesChanged(value){if(babelHelpers.typeof(value)!=="undefined"){if(null!=value.value&&babelHelpers.typeof(value.value.haxShowExportButton)!=="undefined"){this.hideExportButton=!value.value.haxShowExportButton}if(null!=value.value&&babelHelpers.typeof(value.value.haxDeveloperMode)!=="undefined"){this.haxDeveloperMode=value.value.haxDeveloperMode}}},_haxStorePropertyUpdated:function _haxStorePropertyUpdated(e){if(e.detail&&babelHelpers.typeof(e.detail.value)!=="undefined"&&e.detail.property){if("object"===babelHelpers.typeof(e.detail.value)){this.set(e.detail.property,null)}this.set(e.detail.property,e.detail.value)}},_processItemEvent:function _processItemEvent(e){var detail=e.detail;switch(detail.eventName){case"open-panel":this._clickButton();break;case"cancel":this.toggle();this.fire("hax-cancel",detail);break;case"text":detail.tag="p";detail.content="";this.fire("hax-insert-content",detail);break;case"divider":detail.tag="hr";detail.content="";detail.properties={style:"width:100%;"};this.fire("hax-insert-content",detail);break;case"header":detail.tag="h2";detail.content="Header";this.fire("hax-insert-content",detail);break;case"placeholder":detail.tag="place-holder";detail.content="";detail.properties={style:"width:50%;"};this.fire("hax-insert-content",detail);break;case"image":detail.tag="img";detail.content="";detail.properties={src:pathFromUrl(decodeURIComponent(meta.url))+window.HaxStore.instance.defaults.image.src,alt:window.HaxStore.instance.defaults.image.alt,style:"width:100%;"};this.fire("hax-insert-content",detail);break;case"iframe":detail.tag="iframe";detail.content="";detail.properties={src:window.HaxStore.instance.defaults.iframe.src,height:"400px",width:"100%",style:"width:100%;"};this.fire("hax-insert-content",detail);break;case"blockquote":detail.tag="blockquote";detail.content="";this.fire("hax-insert-content",detail);break;case"hax-manager-open":window.HaxStore.write("activeHaxElement",{},this);window.HaxStore.instance.haxManager.resetManager(parseInt(detail.value));window.HaxStore.instance.haxManager.toggleDialog(!1);break;case"hax-stax-picker-open":window.HaxStore.instance.haxStaxPicker.toggleDialog();break;case"hax-blox-picker-open":window.HaxStore.instance.haxBloxPicker.toggleDialog();break;case"undo":document.execCommand("undo");break;case"redo":document.execCommand("redo");break;default:break;}},_editModeChanged:function _editModeChanged(newValue){if(babelHelpers.typeof(newValue)!=="undefined"&&newValue){this.__tipText="Save";this.$.button.icon="save"}else{this.__tipText="Edit";this.$.button.icon="create"}},_clickEditButton:function _clickEditButton(){this.toggle()},_clickSaveButton:function _clickSaveButton(e){this.toggle();this.fire("hax-save",e.detail)},_htmlExportDialog:function _htmlExportDialog(){window.HaxStore.instance.haxExport.toggleDialog()},_preferencesDialog:function _preferencesDialog(){window.HaxStore.instance.haxPreferences.toggleDialog()},toggle:function toggle(){window.HaxStore.write("editMode",!this.editMode,this);this.$.drawer.opened=this.editMode;if(!this.$.drawer.opened){window.HaxStore.instance.closeAllDrawers()}}})});
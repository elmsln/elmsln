define(["exports","../../../../../@polymer/polymer/polymer-element.js","../../core/haxcms-site-store.js","../../../../../@polymer/polymer/lib/utils/render-status.js"],function(_exports,_polymerElement,_haxcmsSiteStore,_renderStatus){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.ActiveWhenVisible=void 0;function _templateObject_58bc4230898111e9ba38e33cad2d1624(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: block;\n        }\n        a {\n          height: 10px;\n          width: 10px;\n          float: left;\n          pointer-events: none;\n          background-color: transparent;\n        }\n      </style>\n      <div>\n        <a id=\"a\" href$=\"[[_a]]\" name$=\"#[[itemId]]\" aria-hidden></a>\n        <slot></slot>\n      </div>\n    "]);_templateObject_58bc4230898111e9ba38e33cad2d1624=function _templateObject_58bc4230898111e9ba38e33cad2d1624(){return data};return data}/**
 * `active-when-visible`
 * `Title of the site`
 *
 * @customElement
 * @polymer
 * @demo demo/index.html
 */var ActiveWhenVisible=/*#__PURE__*/function(_PolymerElement){babelHelpers.inherits(ActiveWhenVisible,_PolymerElement);function ActiveWhenVisible(){babelHelpers.classCallCheck(this,ActiveWhenVisible);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ActiveWhenVisible).apply(this,arguments))}babelHelpers.createClass(ActiveWhenVisible,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(ActiveWhenVisible.prototype),"connectedCallback",this).call(this);// setup the intersection observer
(0,_renderStatus.afterNextRender)(this,function(){this.observer=new IntersectionObserver(this.handleIntersectionCallback.bind(this),{root:document.rootElement,rootMargin:this.rootMargin,threshold:this.thresholds});this.observer.observe(this)})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(ActiveWhenVisible.prototype),"disconnectedCallback",this).call(this)}/**
   * Handle this being visible
   */},{key:"handleIntersectionCallback",value:function handleIntersectionCallback(entries){var _this=this,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=entries[Symbol.iterator](),_step,entry;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){entry=_step.value;if((+entry.intersectionRatio).toFixed(2)>=this.visibleLimit){// now we care
if(this.itemId){var item=_haxcmsSiteStore.store.findItem(this.itemId);this._a=item.location.replace("pages/","").replace("/index.html","");this.isVisible=!0;setTimeout(function(){_this.$.a.click()},25)}}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}],[{key:"tag",/**
   * Store the tag name to make it easier to obtain directly.
   * @notice function name must be here for tooling to operate correctly
   */get:function get(){return"active-when-visible"}// render function
},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_58bc4230898111e9ba38e33cad2d1624())}/**
   * Props
   */},{key:"properties",get:function get(){return{itemId:{type:String},_a:{type:String},thresholds:{type:Array,value:[0,.25,.5,.75,1]},rootMargin:{type:String,value:"0px"},visibleLimit:{type:Number,value:.5,reflectToAttribute:!0},isVisible:{type:Boolean,value:!1,notify:!0}}}}]);return ActiveWhenVisible}(_polymerElement.PolymerElement);_exports.ActiveWhenVisible=ActiveWhenVisible;window.customElements.define(ActiveWhenVisible.tag,ActiveWhenVisible)});
define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/polymer/lib/utils/async.js","../../../../@polymer/paper-button/paper-button.js","../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../../json-editor/json-editor.js","../../../editable-outline/editable-outline.js"],function(_polymerLegacy,async){"use strict";async=babelHelpers.interopRequireWildcard(async);function _templateObject_63b7ec60499a11e9853aab77594e37fb(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        height: 60vh;\n        width: 60vw;\n      }\n      .buttons {\n        position: absolute;\n        bottom: 0;\n        z-index: 1000000;\n        background-color: var(--simple-modal-titlebar-background, #ddd);\n        left: 0;\n        right: 0;\n      }\n      paper-dialog-scrollable {\n        padding-bottom: 32px;\n      }\n    </style>\n    <paper-dialog-scrollable>\n      <paper-button id=\"toggle\" on-tap=\"toggleView\">[[viewLabel]]</paper-button>\n      <editable-outline\n        id=\"outline\"\n        edit-mode\n        hidden$=\"[[viewMode]]\"\n        items=\"[[manifest.items]]\"\n      ></editable-outline>\n      <json-editor\n        id=\"editor\"\n        label=\"Outline data\"\n        value=\"[[manifestItems]]\"\n        hidden$=\"[[!viewMode]]\"\n      ></json-editor>\n    </paper-dialog-scrollable>\n    <div class=\"buttons\">\n      <paper-button dialog-confirm on-tap=\"_saveTap\">Save</paper-button>\n      <paper-button dialog-dismiss>Cancel</paper-button>\n    </div>\n  "]);_templateObject_63b7ec60499a11e9853aab77594e37fb=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_63b7ec60499a11e9853aab77594e37fb()),is:"haxcms-outline-editor-dialog",properties:{opened:{type:Boolean,notify:!0},manifest:{type:Object},manifestItems:{type:String},viewLabel:{type:String,computed:"_getViewLabel(viewMode)"},viewMode:{type:Boolean,value:!1,observer:"_viewModeChanged"}},ready:function ready(){var _this=this;document.body.addEventListener("json-outline-schema-changed",this.__jsonOutlineSchemaChanged.bind(this));this.$.editor.addEventListener("current-data-changed",function(e){if(e.detail.value){var outline=window.JSONOutlineSchema.requestAvailability();_this.set("manifest.items",e.detail.value);_this.notifyPath("manifest.items.*");outline.items=e.detail.value;_this.manifestItems=JSON.stringify(e.detail.value,null,2);_this.$.outline.importJsonOutlineSchemaItems()}})},attached:function attached(){var _this2=this;async.microTask.run(function(){if(babelHelpers.typeof(window.cmsSiteEditor.jsonOutlineSchema)!=="undefined"){_this2.set("manifest",window.cmsSiteEditor.jsonOutlineSchema);_this2.notifyPath("manifest.*");_this2.manifestItems=JSON.stringify(_this2.manifest.items,null,2)}})},detached:function detached(){document.body.removeEventListener("json-outline-schema-changed",this.__jsonOutlineSchemaChanged.bind(this))},toggleView:function toggleView(){this.viewMode=!this.viewMode},_getViewLabel:function _getViewLabel(mode){if(mode){return"Outline mode"}else{return"Developer mode"}},_viewModeChanged:function _viewModeChanged(newValue){if(!newValue){this.$.outline.importJsonOutlineSchemaItems()}else{var items=this.$.outline.exportJsonOutlineSchemaItems();this.set("manifest.items",[]);this.set("manifest.items",items);this.notifyPath("manifest.items");this.manifestItems=JSON.stringify(items,null,2)}},__jsonOutlineSchemaChanged:function __jsonOutlineSchemaChanged(e){if(babelHelpers.typeof(e.detail.items)!=="undefined"){this.set("manifest",[]);this.set("manifest",e.detail);this.notifyPath("manifest.*");this.manifestItems=JSON.stringify(this.manifest.items,null,2);this.$.outline.importJsonOutlineSchemaItems()}},_saveTap:function _saveTap(){var items=this.$.outline.exportJsonOutlineSchemaItems();this.set("manifest.items",[]);this.set("manifest.items",items);this.notifyPath("manifest.items");this.manifestItems=JSON.stringify(items,null,2);this.fire("haxcms-save-outline",items)}})});
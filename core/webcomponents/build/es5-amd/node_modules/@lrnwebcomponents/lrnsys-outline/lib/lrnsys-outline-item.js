define(["../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/polymer/lib/legacy/polymer.dom.js","../../../@polymer/iron-list/iron-list.js","../../../@polymer/iron-a11y-keys/iron-a11y-keys.js","../../../@polymer/paper-input/paper-input.js","../../../@polymer/iron-icons/iron-icons.js","../../../@polymer/paper-icon-button/paper-icon-button.js","../../drawing-icons/drawing-icons.js"],function(_polymerLegacy){"use strict";function _templateObject_968c1b70499511e9a5428ba375554590(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        --indent-multiplier: 36px;\n      }\n      :host(.collapse-to-remove) #wrapper {\n        height: 0px;\n        background-color: var(--lrnsys-outline-gap-color, #eeeeee);\n        border: 1px solid #999999;\n        overflow: hidden;\n      }\n      :host #wrapper[data-indent=\"0\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 0);\n      }\n      :host #wrapper[data-indent=\"1\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 1);\n      }\n      :host #wrapper[data-indent=\"2\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 2);\n      }\n      :host #wrapper[data-indent=\"3\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 3);\n      }\n      :host #wrapper[data-indent=\"4\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 4);\n      }\n      :host #wrapper[data-indent=\"5\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 5);\n      }\n      :host #wrapper[data-indent=\"6\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 6);\n      }\n      :host #wrapper[data-indent=\"7\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 7);\n      }\n      :host #wrapper[data-indent=\"8\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 8);\n      }\n      :host #wrapper[data-indent=\"9\"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 9);\n      }\n      :host #input {\n        flex-grow: 1;\n        margin-right: 10px;\n      }\n      :host #wrapper {\n        display: flex;\n        height: 40px;\n        border-radius: 16px;\n        transition: 0.1s all ease;\n        background-color: transparent;\n        border: 1px solid transparent;\n        padding: 8px;\n        transition: 0.3s all linear;\n      }\n      :host([focus-state]) #wrapper,\n      :host(:focus) #wrapper,\n      :host(:hover) #wrapper {\n        cursor: pointer;\n        background-color: var(--lrnsys-outline-gap-color, #eeeeee);\n        border: 1px solid #999999;\n      }\n      #gap {\n        padding: 2px;\n        transition: 0.3s all ease;\n        border-left: solid 4px transparent;\n      }\n      :host([focus-state]) #gap,\n      :host(:focus) #gap,\n      :host(:hover) #gap {\n        border-left: solid 4px var(--lrnsys-outline-gap-color, #aaaaaa);\n      }\n      paper-icon-button {\n        font-size: 16px;\n        height: 36px;\n        padding: 10px;\n        margin: 4px;\n        display: none;\n        border-radius: 0.16px;\n      }\n      :host([focus-state]) paper-icon-button,\n      :host(:focus) paper-icon-button,\n      :host(:hover) paper-icon-button {\n        width: 36px;\n        display: inline-flex;\n      }\n      paper-icon-button#add {\n        width: 36px;\n        margin-right: 2px;\n        color: white;\n        background-color: var(--lrnsys-outline-add-button-color, #018dff);\n      }\n      paper-icon-button#delete {\n        color: white;\n        background-color: var(--lrnsys-outline-delete-button-color, #cc0000);\n      }\n    </style>\n    <div id=\"wrapper\" data-indent$=\"[[indentLevel]]\">\n      <div id=\"gap\"></div>\n      <paper-input\n        id=\"input\"\n        label=\"Enter a page title\"\n        value=\"{{title}}\"\n        no-label-float=\"\"\n      >\n      </paper-input>\n      <paper-icon-button\n        id=\"down\"\n        title=\"Move downwards\"\n        icon=\"icons:arrow-downward\"\n        on-tap=\"moveDown\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"left\"\n        title=\"Outdent\"\n        icon=\"icons:arrow-back\"\n        on-tap=\"moveOut\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"right\"\n        title=\"Indent\"\n        icon=\"icons:arrow-forward\"\n        on-tap=\"moveIn\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"up\"\n        title=\"Move upwards\"\n        icon=\"icons:arrow-upward\"\n        on-tap=\"moveUp\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"add\"\n        title=\"Add Item\"\n        icon=\"icons:add\"\n        on-tap=\"add\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"delete\"\n        title=\"Delete\"\n        icon=\"icons:delete\"\n        on-tap=\"delete\"\n      ></paper-icon-button>\n    </div>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"esc\"\n      on-keys-pressed=\"_onEsc\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"enter\"\n      on-keys-pressed=\"_onEnter\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"backspace\"\n      on-keys-pressed=\"_onBackspace\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"up\"\n      on-keys-pressed=\"_onArrowUp\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"down\"\n      on-keys-pressed=\"_onArrowDown\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"tab\"\n      on-keys-pressed=\"_onTab\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"shift+tab\"\n      on-keys-pressed=\"_onShiftTab\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"shift+up\"\n      on-keys-pressed=\"_onShiftArrowUp\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__inputTarget]]\"\n      keys=\"shift+down\"\n      on-keys-pressed=\"_onShiftArrowDown\"\n    ></iron-a11y-keys>\n  "]);_templateObject_968c1b70499511e9a5428ba375554590=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_968c1b70499511e9a5428ba375554590()),is:"lrnsys-outline-item",listeners:{change:"_onChange"},properties:{indentLevel:{type:Number,value:0},index:{type:Number,value:0},parent:{type:String,value:null},title:{type:String,value:null,notify:!0,reflectToAttribute:!0},focusState:{type:Boolean,value:!1,reflectToAttribute:!0}},_focusin:function _focusin(){this.focusState=!0},_focusout:function _focusout(){this.focusState=!1},attached:function attached(){this.fire("attached-item",{item:this})},ready:function ready(){var _this=this;this.__inputTarget=this.$.input;this.fire("focus-item",this);this.addEventListener("focus",function(){_this.fire("focus-item",_this)});this.addEventListener("mouseover",function(){_this.fire("focus-item",_this)});this.addEventListener("blur",function(){_this.fire("blur-item",_this)});this.addEventListener("mouseout",function(){_this.fire("blur-item",_this)});this.$.input.addEventListener("focused-changed",this._focusin.bind(this));this.addEventListener("focusin",this._focusin.bind(this));this.addEventListener("focusout",this._focusout.bind(this))},detached:function detached(){var _this2=this;this.removeEventListener("focus",function(){_this2.fire("focus-item",_this2)});this.removeEventListener("mouseover",function(){_this2.fire("focus-item",_this2)});this.removeEventListener("blur",function(){_this2.fire("blur-item",_this2)});this.removeEventListener("mouseout",function(){_this2.fire("blur-item",_this2)});this.$.input.removeEventListener("focused-changed",this._focusin.bind(this));this.removeEventListener("focusin",this._focusin.bind(this));this.removeEventListener("focusout",this._focusout.bind(this))},focus:function focus(){this.$.input.focus();return this},value:function value(){this.title=this.$.input.value;return this.title},delete:function _delete(){this.fire("delete-item",{item:this})},setIndent:function setIndent(amount){this.fire("indent-item",{item:this,increase:0<amount})},add:function add(){var i=this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart,j=this.title;this.fire("add-item",{item:this,value:j.slice(0,i),new:j.slice(i,j.length)});this.title=j.slice(0,i)},move:function move(amount){this.fire("move-item",{item:this,moveUp:0>amount})},moveUp:function moveUp(){this.move(-1)},moveDown:function moveDown(){this.move(1)},moveOut:function moveOut(){this.setIndent(-1)},moveIn:function moveIn(){this.setIndent(1)},setSelection:function setSelection(start,end){var s=start!==void 0?start:0,n=end!==void 0?end:s;try{this.$.input.querySelector("input").setSelectionRange(s,n)}catch(e){console.log(e)}this.focus()},_onChange:function _onChange(){this.fire("change-item",{item:this,value:this.title})},_onEsc:function _onEsc(){this.focus();this._focusout()},_onEnter:function _onEnter(){var i=this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart,j=this.title;this.fire("add-item",{item:this,value:j.slice(0,i),new:j.slice(i,j.length)});this.title=j.slice(0,i);this._focusout()},_onBackspace:function _onBackspace(e){if(this._getSelection().toString()==this.title){e.detail.keyboardEvent.preventDefault();this.fire("delete-item",{item:this})}else if(0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart){this.fire("indent-item",{item:this,increase:!1})}},_getSelection:function _getSelection(){if(this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.getSelection){return this.parentNode.parentNode.getSelection()}return window.getSelection()},_onArrowUp:function _onArrowUp(){if(0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart){this.fire("focus-item",{item:this,moveUp:!0})}},_onArrowDown:function _onArrowDown(){if(this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart==this.title.length){this.fire("focus-item",{item:this,moveUp:!1})}},_onShiftTab:function _onShiftTab(){this.setIndent(-1)},_onTab:function _onTab(e){if(0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart){e.preventDefault();this.setIndent(1)}},_onShiftArrowUp:function _onShiftArrowUp(){this.move(-1)},_onShiftArrowDown:function _onShiftArrowDown(){this.move(1)}})});
define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/polymer/lib/legacy/polymer.dom.js","../../../lrnsys-button/lrnsys-button.js","../../../materializecss-styles/materializecss-styles.js","../lrnapp-studio-submission/lrnapp-studio-submission-display.js"],function(_polymerLegacy,_polymerDom){"use strict";function _templateObject_9eb04e20499511e9a5428ba375554590(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style include=\"materializecss-styles\"></style>\n    <style>\n      :host {\n        display: block;\n        align-content: center;\n      }\n      #loading {\n        width: 100%;\n        z-index: 1000;\n        opacity: 0.8;\n        text-align: center;\n        align-content: center;\n        justify-content: center;\n        height: 100vh;\n        position: absolute;\n        background-color: white;\n      }\n      h1.empty-title,\n      h1.project-title {\n        font-size: 2em;\n      }\n      h2.assignment-title {\n        font-size: 1.5em;\n        font-weight: bold;\n        width: 100%;\n        border-bottom: solid 1px grey;\n      }\n      .project-steps {\n        display: flex;\n        align-items: center;\n      }\n      .project-step {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        word-break: break-all;\n        word-wrap: break-word;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[!showSubmissions]]\">\n      <h1 class=\"empty-title black-text\">\n        Please select an Author and Project in order to review their portfolio\n      </h1>\n    </template>\n    <template is=\"dom-if\" if=\"[[showSubmissions]]\">\n      <h1 class=\"project-title black-text\">\n        [[activeProject.attributes.title]]\n      </h1>\n      <div class=\"project-steps\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[activeProject.attributes.steps]]\"\n          as=\"assignment\"\n        >\n          <lrnsys-button\n            icon$=\"[[_getSubmissionIcon(assignment.id)]]\"\n            icon-class$=\"[[_getSubmissionClass(assignment.id)]]\"\n            on-tap=\"_scrollToTarget\"\n            label=\"[[assignment.title]]\"\n            data-assignment-id$=\"[[assignment.id]]\"\n            class=\"project-step\"\n            hover-class=\"blue white-text\"\n            raised=\"\"\n            hidden$=\"[[!assignment.title]]\"\n          ></lrnsys-button>\n        </template>\n      </div>\n      <template is=\"dom-repeat\" items=\"[[renderSubmissions]]\" as=\"submission\">\n        <a\n          name=\"[[submission.relationships.assignment.title]]\"\n          class$=\"assignment-[[submission.relationships.assignment.id]]\"\n          ><h2 class=\"assignment-title\">\n            [[submission.relationships.assignment.title]]\n          </h2></a\n        >\n        <lrnapp-studio-submission-display\n          submission=\"[[submission]]\"\n          class=\"ferpa-protect\"\n        ></lrnapp-studio-submission-display>\n      </template>\n    </template>\n  "],["\n    <style include=\"materializecss-styles\"></style>\n    <style>\n      :host {\n        display: block;\n        align-content: center;\n      }\n      #loading {\n        width: 100%;\n        z-index: 1000;\n        opacity: 0.8;\n        text-align: center;\n        align-content: center;\n        justify-content: center;\n        height: 100vh;\n        position: absolute;\n        background-color: white;\n      }\n      h1.empty-title,\n      h1.project-title {\n        font-size: 2em;\n      }\n      h2.assignment-title {\n        font-size: 1.5em;\n        font-weight: bold;\n        width: 100%;\n        border-bottom: solid 1px grey;\n      }\n      .project-steps {\n        display: flex;\n        align-items: center;\n      }\n      .project-step {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        word-break: break-all;\n        word-wrap: break-word;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[!showSubmissions]]\">\n      <h1 class=\"empty-title black-text\">\n        Please select an Author and Project in order to review their portfolio\n      </h1>\n    </template>\n    <template is=\"dom-if\" if=\"[[showSubmissions]]\">\n      <h1 class=\"project-title black-text\">\n        [[activeProject.attributes.title]]\n      </h1>\n      <div class=\"project-steps\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[activeProject.attributes.steps]]\"\n          as=\"assignment\"\n        >\n          <lrnsys-button\n            icon\\$=\"[[_getSubmissionIcon(assignment.id)]]\"\n            icon-class\\$=\"[[_getSubmissionClass(assignment.id)]]\"\n            on-tap=\"_scrollToTarget\"\n            label=\"[[assignment.title]]\"\n            data-assignment-id\\$=\"[[assignment.id]]\"\n            class=\"project-step\"\n            hover-class=\"blue white-text\"\n            raised=\"\"\n            hidden\\$=\"[[!assignment.title]]\"\n          ></lrnsys-button>\n        </template>\n      </div>\n      <template is=\"dom-repeat\" items=\"[[renderSubmissions]]\" as=\"submission\">\n        <a\n          name=\"[[submission.relationships.assignment.title]]\"\n          class\\$=\"assignment-[[submission.relationships.assignment.id]]\"\n          ><h2 class=\"assignment-title\">\n            [[submission.relationships.assignment.title]]\n          </h2></a\n        >\n        <lrnapp-studio-submission-display\n          submission=\"[[submission]]\"\n          class=\"ferpa-protect\"\n        ></lrnapp-studio-submission-display>\n      </template>\n    </template>\n  "]);_templateObject_9eb04e20499511e9a5428ba375554590=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_9eb04e20499511e9a5428ba375554590()),is:"lrnapp-open-studio-projects",properties:{projects:{type:Array,notify:!0},submissions:{type:Array,notify:!0},renderSubmissions:{type:Array,notify:!0,computed:"_renderSubmissionsCompute(submissions, activeProject, activeAuthorId)"},activeProjectId:{type:String,reflectToAttribute:!0,value:null},activeProject:{type:Object,computed:"_activeProjectCompute(activeProjectId, projects)"},activeAuthorId:{type:String,reflectToAttribute:!0,value:null},showSubmissions:{type:Boolean,computed:"_showSubmissions(activeProjectId, activeAuthorId)",value:!1},sourcePath:{type:String,notify:!0},basePath:{type:String,notify:!0}},_renderSubmissionsCompute:function _renderSubmissionsCompute(submissions,activeProject,activeAuthorId){if(!submissions||!activeProject||!activeAuthorId){return null}var renderSubmissions=[],parentAssignments=activeProject.attributes.steps.map(function(step){return step.id});renderSubmissions=submissions.filter(function(submission){return parentAssignments.includes(submission.relationships.assignment.id)});renderSubmissions.sort(function(a,b){for(index=0;index<activeProject.attributes.steps.length;index++){if(activeProject.attributes.steps[index].id==a.relationships.assignment.id){return-1}if(activeProject.attributes.steps[index].id==b.relationships.assignment.id){return 1}}return 0});return renderSubmissions},_activeProjectCompute:function _activeProjectCompute(activeProjectId,projects){var activeProject=null;if(projects){activeProject=projects.find(function(project){return project.id===activeProjectId})}return activeProject},_showSubmissions:function _showSubmissions(activeProjectId,activeAuthorId){if(activeProjectId&&activeAuthorId){return!0}return!1},_getSubmissionIcon:function _getSubmissionIcon(id){for(var index=0;index<this.renderSubmissions.length;index++){if(this.renderSubmissions[index].relationships.assignment.id==id){return"check"}}return"assignment"},_getSubmissionClass:function _getSubmissionClass(id){for(var index=0;index<this.renderSubmissions.length;index++){if(this.renderSubmissions[index].relationships.assignment.id==id){return"green-text text-darken-2"}}return"grey-text"},_scrollToTarget:function _scrollToTarget(e){var normalizedEvent=(0,_polymerDom.dom)(e),local=normalizedEvent.localTarget,active=local.getAttribute("data-assignment-id");this.shadowRoot.querySelector(".assignment-"+active).scrollIntoView({block:"end",behavior:"smooth"})},_handleResponse:function _handleResponse(){this.$.loading.hidden=!0},_toArray:function _toArray(obj){return Object.keys(obj).map(function(key){return obj[key]})}})});
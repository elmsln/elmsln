define(["../../polymer/polymer-legacy.js","../../iron-flex-layout/iron-flex-layout.js","../../iron-resizable-behavior/iron-resizable-behavior.js","../../polymer/lib/legacy/polymer-fn.js","../../polymer/lib/utils/html-tag.js","../app-scroll-effects/app-scroll-effects-behavior.js"],function(_polymerLegacy,_ironFlexLayout,_ironResizableBehavior,_polymerFn,_htmlTag,_appScrollEffectsBehavior){"use strict";function _templateObject_a1636030499511e9a5428ba375554590(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        position: relative;\n        display: block;\n      }\n\n      #background {\n        @apply --layout-fit;\n        overflow: hidden;\n        height: 100%;\n      }\n\n      #backgroundFrontLayer {\n        min-height: 100%;\n        pointer-events: none;\n        background-size: cover;\n        @apply --app-box-background-front-layer;\n      }\n\n      #contentContainer {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n\n      :host([disabled]),\n      :host([disabled]) #backgroundFrontLayer {\n        transition: none !important;\n      }\n    </style>\n\n    <div id=\"background\">\n      <div id=\"backgroundFrontLayer\">\n        <slot name=\"background\"></slot>\n      </div>\n    </div>\n    <div id=\"contentContainer\">\n      <slot></slot>\n    </div>\n"]);_templateObject_a1636030499511e9a5428ba375554590=function(){return data};return data}(0,_polymerFn.Polymer)({_template:(0,_htmlTag.html)(_templateObject_a1636030499511e9a5428ba375554590()),is:"app-box",behaviors:[_appScrollEffectsBehavior.AppScrollEffectsBehavior,_ironResizableBehavior.IronResizableBehavior],listeners:{"iron-resize":"_resizeHandler"},_progress:0,attached:function attached(){this.resetLayout()},_debounceRaf:function _debounceRaf(fn){var self=this;if(this._raf){window.cancelAnimationFrame(this._raf)}this._raf=window.requestAnimationFrame(function(){self._raf=null;fn.call(self)})},resetLayout:function resetLayout(){this._debounceRaf(function(){if(0===this.offsetWidth&&0===this.offsetHeight){return}var scrollTop=this._clampedScrollTop,savedDisabled=this.disabled;this.disabled=!0;this._elementTop=this._getElementTop();this._elementHeight=this.offsetHeight;this._cachedScrollTargetHeight=this._scrollTargetHeight;this._setUpEffect();this._updateScrollState(scrollTop);this.disabled=savedDisabled})},_getElementTop:function _getElementTop(){var currentNode=this,top=0;while(currentNode&&currentNode!==this.scrollTarget){top+=currentNode.offsetTop;currentNode=currentNode.offsetParent}return top},_updateScrollState:function _updateScrollState(scrollTop){if(this.isOnScreen()){var viewportTop=this._elementTop-scrollTop;this._progress=1-(viewportTop+this._elementHeight)/this._cachedScrollTargetHeight;this._runEffects(this._progress,scrollTop)}},isOnScreen:function isOnScreen(){return this._elementTop<this._scrollTop+this._cachedScrollTargetHeight&&this._elementTop+this._elementHeight>this._scrollTop},_resizeHandler:function _resizeHandler(){this.resetLayout()},_getDOMRef:function _getDOMRef(id){if("background"===id){return this.$.background}if("backgroundFrontLayer"===id){return this.$.backgroundFrontLayer}},getScrollState:function getScrollState(){return{progress:this._progress}}})});
<html><head><link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../app-scroll-effects/app-scroll-effects-behavior.html"><link rel="prefetch" href="../../polymer/polymer-mini.html"><link rel="prefetch" href="../../polymer/polymer-micro.html"><link rel="prefetch" href="../../iron-scroll-target-behavior/iron-scroll-target-behavior.html"><link rel="prefetch" href="../helpers/helpers.html"></head><body><dom-module id="app-box"><template><style>:host{position:relative;display:block;}#background{@apply --layout-fit;overflow:hidden;height:100%;}#backgroundFrontLayer{min-height:100%;pointer-events:none;background-size:cover;@apply --app-box-background-front-layer;}#contentContainer{position:relative;width:100%;height:100%;}:host([disabled]),
      :host([disabled]) #backgroundFrontLayer{transition:none !important;}</style><div id="background"><div id="backgroundFrontLayer"><slot name="background"></slot></div></div><div id="contentContainer"><slot></slot></div></template><script>Polymer({is:"app-box",behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.IronResizableBehavior],listeners:{"iron-resize":"_resizeHandler"},_progress:0,attached:function attached(){this.resetLayout()},_debounceRaf:function _debounceRaf(fn){var self=this;if(this._raf){window.cancelAnimationFrame(this._raf)}this._raf=window.requestAnimationFrame(function(){self._raf=null;fn.call(self)})},resetLayout:function resetLayout(){this._debounceRaf(function(){if(0===this.offsetWidth&&0===this.offsetHeight){return}var scrollTop=this._clampedScrollTop,savedDisabled=this.disabled;this.disabled=!0;this._elementTop=this._getElementTop();this._elementHeight=this.offsetHeight;this._cachedScrollTargetHeight=this._scrollTargetHeight;this._setUpEffect();this._updateScrollState(scrollTop);this.disabled=savedDisabled})},_getElementTop:function _getElementTop(){var currentNode=this,top=0;while(currentNode&&currentNode!==this.scrollTarget){top+=currentNode.offsetTop;currentNode=currentNode.offsetParent}return top},_updateScrollState:function _updateScrollState(scrollTop){if(this.isOnScreen()){var viewportTop=this._elementTop-scrollTop;this._progress=1-(viewportTop+this._elementHeight)/this._cachedScrollTargetHeight;this._runEffects(this._progress,scrollTop)}},isOnScreen:function isOnScreen(){return this._elementTop<this._scrollTop+this._cachedScrollTargetHeight&&this._elementTop+this._elementHeight>this._scrollTop},_resizeHandler:function _resizeHandler(){this.resetLayout()},_getDOMRef:function _getDOMRef(id){if("background"===id){return this.$.background}if("backgroundFrontLayer"===id){return this.$.backgroundFrontLayer}},getScrollState:function getScrollState(){return{progress:this._progress}}});</script></dom-module></body></html>
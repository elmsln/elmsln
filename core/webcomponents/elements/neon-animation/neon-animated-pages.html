<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../iron-selector/iron-selectable.html"><link rel="import" href="neon-animation-runner-behavior.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="neon-animatable-behavior.html"></head><body><dom-module id="neon-animated-pages"><template><style>:host{display:block;position:relative;}:host > ::slotted(*){position:absolute;top:0;left:0;bottom:0;right:0;}:host > ::slotted(:not(.iron-selected):not(.neon-animating)){display:none !important;}:host > ::slotted(.neon-animating){pointer-events:none;}</style><slot id="content"></slot></template></dom-module><script>(function(){Polymer({is:"neon-animated-pages",behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{activateEvent:{type:String,value:""},animateInitialSelection:{type:Boolean,value:!1}},listeners:{"iron-select":"_onIronSelect","neon-animation-finish":"_onNeonAnimationFinish"},_onIronSelect:function _onIronSelect(event){var selectedPage=event.detail.item;if(0>this.items.indexOf(selectedPage)){return}var oldPage=this._valueToItem(this._prevSelected)||!1;this._prevSelected=this.selected;if(!oldPage&&!this.animateInitialSelection){this._completeSelectedChanged();return}this.animationConfig=[];if(this.entryAnimation){this.animationConfig.push({name:this.entryAnimation,node:selectedPage})}else{if(selectedPage.getAnimationConfig){this.animationConfig.push({animatable:selectedPage,type:"entry"})}}if(oldPage){if(oldPage.classList.contains("neon-animating")){this._squelchNextFinishEvent=!0;this.cancelAnimation();this._completeSelectedChanged();this._squelchNextFinishEvent=!1}if(this.exitAnimation){this.animationConfig.push({name:this.exitAnimation,node:oldPage})}else{if(oldPage.getAnimationConfig){this.animationConfig.push({animatable:oldPage,type:"exit"})}}oldPage.classList.add("neon-animating")}selectedPage.classList.add("neon-animating");if(1<=this.animationConfig.length){if(!this.isAttached){this.async(function(){this.playAnimation(void 0,{fromPage:null,toPage:selectedPage})})}else{this.playAnimation(void 0,{fromPage:oldPage,toPage:selectedPage})}}else{this._completeSelectedChanged(oldPage,selectedPage)}},_completeSelectedChanged:function _completeSelectedChanged(oldPage,selectedPage){if(selectedPage){selectedPage.classList.remove("neon-animating")}if(oldPage){oldPage.classList.remove("neon-animating")}if(!selectedPage||!oldPage){for(var nodes=Polymer.dom(this.$.content).getDistributedNodes(),node,index=0;node=nodes[index];index++){node.classList&&node.classList.remove("neon-animating")}}this.async(this._notifyPageResize)},_onNeonAnimationFinish:function _onNeonAnimationFinish(event){if(this._squelchNextFinishEvent){this._squelchNextFinishEvent=!1;return}this._completeSelectedChanged(event.detail.fromPage,event.detail.toPage)},_notifyPageResize:function _notifyPageResize(){var selectedPage=this.selectedItem||this._valueToItem(this.selected);this.resizerShouldNotify=function(element){return element==selectedPage};this.notifyResize()}})})();</script></body></html>
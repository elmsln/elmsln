<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../paper-toast/paper-toast.html"><link rel="import" href="../media-behaviors/media-behaviors.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../iron-ajax/iron-ajax.html"><link rel="import" href="hax-app.html"><link rel="import" href="hax-stax.html"><link rel="import" href="hax-blox.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../iron-ajax/iron-request.html"></head><body><dom-module id="hax-store"><template><style>:host{display:none;}</style><slot></slot><iron-ajax id="appstore" url="[[appStore.url]]" params="[[appStore.params]]" method="GET" content-type="application/json" handle-as="json" last-response="{{__appStoreData}}"></iron-ajax></template><script>(function(){'use strict';Polymer.HaxStore=Polymer({is:'hax-store',behaviors:[MediaBehaviors.Video,HAXBehaviors.PropertiesBehaviors],observers:['_loadAppStoreData(__appStoreData, haxAutoloader, haxManager, haxStaxPicker, haxAppPicker)'],properties:{haxAppPicker:{type:Object},haxStaxPicker:{type:Object},haxManager:{type:Object},haxAutoloader:{type:Object},haxBodies:{type:Array,value:[]},activePlaceHolder:{type:Object,value:null},activeHaxBody:{type:Object},appStore:{type:Object,observer:'_appStoreChanged'},haxToast:{type:Object},haxPanel:{type:Object},haxExport:{type:Object},haxPreferences:{type:Object},activeHaxElement:{type:Object},activeNode:{type:Object},activeContainerNode:{type:Object},editMode:{type:Boolean,value:!1},canSupportUploads:{type:Boolean,value:!1},skipExitTrap:{type:Boolean,value:!1},defaults:{type:Object,value:{image:{src:'stock.jpg',alt:'A beachfront deep in the heart of Alaska.'},iframe:{src:'https://www.wikipedia.org/'}}},gizmoList:{type:Array,value:[]},elementList:{type:Object,value:{}},appList:{type:Array,value:[]},staxList:{type:Array,value:[]},bloxList:{type:Array,value:[]},globalPreferences:{type:Object,value:{}},activeApp:{type:Object,value:{}},validTagList:{type:Array,value:['p','div','ol','ul','li','a','strong','kbd','em','i','b','hr','h1','h2','h3','h4','h5','h6','blockquote','code','figure','img','iframe','video','audio','section','grid-plate','template','webview']},validGizmoTypes:{type:Array,value:['data','video','audio','text','link','file','pdf','image','csv','doc','content','text','inline','*']},_isSandboxed:{type:Boolean,value:function(){var a=document.createElement('webview');return!('function'!==typeof a.reload)}},__appStoreData:{type:Object}},isTextElement:function(a){var b=a.tagName.toLowerCase();return this.validTagList.includes(b)&&['p','ol','ul','li','a','h1','h2','h3','h4','h5','h6','blockquote','code','figure'].includes(b)},isGridPlateElement:function(a){var b=a.tagName.toLowerCase();return this.validTagList.includes(b)&&['p','ol','ul','li','h1','h2','h3','h4','h5','h6','blockquote','code','figure','grid-plate'].includes(b)},_appStoreChanged:function(a){('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&(babelHelpers.typeof(a.apps)==='undefined'?this.$.appstore.generateRequest():this.__appStoreData=a)},_loadAppStoreData:function(a,b){if(('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'){if(babelHelpers.typeof(a.autoloader)!=='undefined')for(var c,d=0;d<a.autoloader.length;d++)c=document.createElement(a.autoloader[d]),Polymer.dom(b).appendChild(c);if(babelHelpers.typeof(a.apps)!=='undefined')for(var e,f=a.apps,d=0;d<f.length;d++)e=document.createElement('hax-app'),e.data=f[d],babelHelpers.typeof(f[d].connection.operations.add)!=='undefined'&&Polymer.HaxStore.write('canSupportUploads',!0,this),Polymer.HaxStore.instance.appendChild(e);if(babelHelpers.typeof(a.stax)!=='undefined')for(var g,h=a.stax,d=0;d<h.length;d++)g=document.createElement('hax-stax'),g.data=h[d],Polymer.HaxStore.instance.appendChild(g);if(babelHelpers.typeof(a.blox)!=='undefined')for(var i,j=a.blox,d=0;d<j.length;d++)i=document.createElement('hax-blox'),i.data=j[d],Polymer.HaxStore.instance.appendChild(i)}},attached:function(){var a=this;window.onbeforeunload=function(){if(!Polymer.HaxStore.instance.skipExitTrap&&Polymer.HaxStore.instance.editMode)return'Are you sure you want to leave? Your work will not be saved!'},window.addEventListener('keypress',function(b){var c=b.key;if(babelHelpers.typeof(Polymer.HaxStore.instance.activeContainerNode)!=='undefined'&&'Enter'===c&&Polymer.HaxStore.instance.editMode&&null!==Polymer.HaxStore.instance.activeNode&&Polymer.HaxStore.instance.activeContainerNode===Polymer.HaxStore.instance.activeNode&&!Polymer.HaxStore.instance.haxAppPicker.opened){var d=Polymer.HaxStore.instance.activeContainerNode.tagName,e=window.getSelection(),f=e.getRangeAt(0).cloneRange(),g=f.commonAncestorContainer.tagName;if(('undefined'===typeof g?'undefined':babelHelpers.typeof(g))==='undefined'&&(g=f.commonAncestorContainer.parentNode.tagName),['P','H1','H2','H3','H4','H5','H6'].includes(d)&&!['UL','OL','LI'].includes(g))if(f.endOffset!==a.activeContainerNode.textContent.length){b.preventDefault(),f.setStart(e.focusNode,f.startOffset);var h=document.createRange().createContextualFragment('<hax-split-point></hax-split-point>');f.insertNode(h);var i=Polymer.HaxStore.instance.activeContainerNode,j=Polymer.dom(Polymer.HaxStore.instance.activeContainerNode).querySelector('hax-split-point');try{a.__splitNode(j,i)}catch(a){}}else b.preventDefault(),Polymer.HaxStore.instance.fire('hax-insert-content',{tag:'p',content:''})}}),this._injectToast(),this._buildPrimitiveDefinitions()},__splitNode:function(a,b){var c=this;Polymer.HaxStore.write('activeNode',null,this),setTimeout(function(){var d=b.parentNode,e=c.__getNodeIndex(d,b),f=a.ownerDocument,g=f.createRange();g.setStart(d,e),g.setEndBefore(a);var h=g.extractContents();Polymer.dom(c.activeHaxBody).insertBefore(h,b),a.parentNode.removeChild(a),Polymer.HaxStore.write('activeNode',b,c)},100)},__getNodeIndex:function(a,b){for(var c=a.childNodes.length;c--&&!(b===a.childNodes[c]););return c},created:function(){Polymer.HaxStore.instance||(Polymer.HaxStore.instance=this),document.body.addEventListener('hax-register-properties',this._haxStoreRegisterProperties.bind(this)),document.body.addEventListener('hax-register-app',this._haxStoreRegisterApp.bind(this)),document.body.addEventListener('hax-register-stax',this._haxStoreRegisterStax.bind(this)),document.body.addEventListener('hax-register-blox',this._haxStoreRegisterBlox.bind(this)),document.body.addEventListener('hax-store-write',this._writeHaxStore.bind(this)),document.body.addEventListener('hax-register-manager',this._haxStoreRegisterManager.bind(this)),document.body.addEventListener('hax-register-autoloader',this._haxStoreRegisterAutoloader.bind(this)),document.body.addEventListener('hax-register-body',this._haxStoreRegisterBody.bind(this)),document.body.addEventListener('hax-register-panel',this._haxStoreRegisterPanel.bind(this)),document.body.addEventListener('hax-register-app-picker',this._haxStoreRegisterAppPicker.bind(this)),document.body.addEventListener('hax-register-stax-picker',this._haxStoreRegisterStaxPicker.bind(this)),document.body.addEventListener('hax-register-blox-picker',this._haxStoreRegisterBloxPicker.bind(this)),document.body.addEventListener('hax-register-preferences',this._haxStoreRegisterPreferences.bind(this)),document.body.addEventListener('hax-register-export',this._haxStoreRegisterExport.bind(this)),document.body.addEventListener('hax-insert-content',this._haxStoreInsertContent.bind(this))},_buildPrimitiveDefinitions:function(){if(Polymer.HaxStore.instance._isSandboxed){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,settings:{quick:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'}],configure:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'}],advanced:[]}},'webview')}this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:'Basic iframe',description:'A basic iframe',icon:'icons:fullscreen',color:'grey',groups:['Content'],handles:[{type:'link',source:'src',height:'height',width:'width'}],meta:{author:'W3C'}},settings:{quick:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'}],configure:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'}],advanced:[]}},'iframe');this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:'Basic image',description:'A basic img tag',icon:'image:image',color:'grey',groups:['Image','Media'],handles:[{type:'link',source:'src'},{type:'image',source:'src',height:'height',width:'width'}],meta:{author:'W3C'}},settings:{quick:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'},{attribute:'alt',title:'Alt text',description:'Useful for screen readers and improved SEO.',inputMethod:'alt',icon:'accessibility'},{attribute:'height',title:'Height',description:'height in pixels of the item',inputMethod:'textfield',icon:'icons:swap-vert'},{attribute:'width',title:'Width',description:'width in pixels of the item',inputMethod:'textfield',icon:'icons:swap-horiz'}],configure:[{attribute:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'},{attribute:'alt',title:'Alt text',description:'Useful for screen readers and improved SEO.',inputMethod:'alt',icon:'accessibility'},{attribute:'height',title:'Height',description:'height in pixels of the item',inputMethod:'textfield',icon:'icons:swap-vert'},{attribute:'width',title:'Width',description:'width in pixels of the item',inputMethod:'textfield',icon:'icons:swap-horiz'}],advanced:[]}},'img');this.setHaxProperties({canScale:!1,canPosition:!1,canEditSource:!1,gizmo:{title:'Basic link',description:'A basic a tag',icon:'icons:link',color:'grey',groups:['Link'],handles:[{type:'link',source:'href',title:'innerText',alt:'title'},{type:'inline',text:'innerText'}],meta:{author:'W3C'}},settings:{quick:[{attribute:'href',title:'Link',description:'The URL for this video.',inputMethod:'textfield',icon:'icons:link',required:!0,validationType:'url'},{attribute:'title',title:'Title text',description:'Useful for screen readers and improved SEO.',inputMethod:'textfield',icon:'icons:accessibility'}],configure:[{attribute:'innerText',title:'Text',description:'Text of the link',inputMethod:'textfield',required:!0},{attribute:'href',title:'Link',description:'The URL for this video.',inputMethod:'textfield',icon:'icons:link',required:!0,validationType:'url'},{attribute:'title',title:'Title text',description:'Useful for screen readers and improved SEO.',inputMethod:'textfield',icon:'icons:accessibility'},{attribute:'target',title:'Target',description:'Where to place the link.',inputMethod:'select',icon:'icons:launch',options:{"":'Same window',_blank:'New window',_top:'Top window',_parent:'Parent window'}}],advanced:[]}},'a');this.setHaxProperties({canScale:!1,canPosition:!1,canEditSource:!0,settings:{quick:[],configure:[],advanced:[]}},'p');this.setHaxProperties({canScale:!0,canPosition:!1,canEditSource:!1,settings:{quick:[],configure:[],advanced:[]}},'hr')},_injectToast:function(){var a=document.createElement('paper-toast');a.id='haxtoast',a.duration=3e3,document.body.appendChild(a),this.haxToast=a},_haxStoreRegisterManager:function(a){a.detail&&babelHelpers.typeof(this.haxManager)==='undefined'&&(this.haxManager=a.detail)},_haxStoreRegisterAutoloader:function(a){a.detail&&babelHelpers.typeof(this.haxAutoloader)==='undefined'&&(this.haxAutoloader=a.detail)},_haxStoreRegisterAppPicker:function(a){a.detail&&babelHelpers.typeof(this.haxAppPicker)==='undefined'&&(this.haxAppPicker=a.detail)},_haxStoreRegisterStaxPicker:function(a){a.detail&&babelHelpers.typeof(this.haxStaxPicker)==='undefined'&&(this.haxStaxPicker=a.detail)},_haxStoreRegisterBloxPicker:function(a){a.detail&&babelHelpers.typeof(this.haxBloxPicker)==='undefined'&&(this.haxBloxPicker=a.detail)},closeAllDrawers:function(){var a=0<arguments.length&&arguments[0]!==void 0&&arguments[0],b=['haxManager','haxBloxPicker','haxStaxPicker','haxPreferences','haxExport'];for(var c in b)a===this[b[c]]?(a.open(),'haxManager'===b[c]?setTimeout(function(){a.querySelector('#activepage .iron-selected paper-input').focus()},200):setTimeout(function(){a.querySelector('paper-checkbox,paper-input,textarea,paper-button').focus()},100)):this[b[c]].close()},_haxStoreInsertContent:function(a){if(a.detail){var b={};if(babelHelpers.typeof(a.detail.properties)!=='undefined'&&(b=a.detail.properties),a.detail.replace&&a.detail.replacement){var c=Polymer.HaxStore.haxElementToNode(a.detail.tag,a.detail.content,b);this.activeNode===this.activeContainerNode?this.activeHaxBody.haxReplaceNode(this.activeNode,c):this.activeHaxBody.haxReplaceNode(this.activeNode,c,this.activeContainerNode)}else if(babelHelpers.typeof(a.detail.__type)!=='undefined'&&'inline'===a.detail.__type){var d=Polymer.HaxStore.haxElementToNode(a.detail.tag,a.detail.content,b);Polymer.HaxStore.instance.activeHaxBody.$.inlinetracker.insertAdjacentElement('beforebegin',d),null!==this.activePlaceHolder&&this.activePlaceHolder.extractContents(),this.activePlaceHolder=null,Polymer.HaxStore.instance.activeHaxBody.$.inlinecontextmenu.opened=!1}else this.activeHaxBody.haxInsert(a.detail.tag,a.detail.content,b)}},_haxStoreRegisterBody:function(a){a.detail&&(this.haxBodies.push(a.detail),this.activeHaxBody=a.detail,Polymer.HaxStore.write('editMode',this.editMode,this))},_haxStoreRegisterPanel:function(a){a.detail&&(this.haxPanel=a.detail)},_haxStoreRegisterExport:function(a){a.detail&&(this.haxExport=a.detail)},_haxStoreRegisterPreferences:function(a){a.detail&&(this.haxPreferences=a.detail)},computePolyfillSafe:function(){return document.head.createShadowRoot||document.head.attachShadow||(console.log('Shadow DOM missing, can\'t safely use list operations.'),!1)},_writeHaxStore:function(a){a.detail&&babelHelpers.typeof(a.detail.value)!=='undefined'&&a.detail.property&&a.detail.owner&&(this.set(a.detail.property,a.detail.value),this.fire('hax-store-property-updated',{property:a.detail.property,value:a.detail.value,owner:a.detail.owner}))},_haxStoreRegisterApp:function(a){a.detail&&(a.detail.index=this.appList.length,this.push('appList',a.detail),Polymer.HaxStore.write('appList',this.appList,this),babelHelpers.typeof(a.target.parentElement)!=='undefined'&&'HAX-STORE'===a.target.parentElement.tagName&&Polymer.dom(a.target.parentElement).removeChild(a.target))},_haxStoreRegisterStax:function(a){a.detail&&(a.detail.index=this.staxList.length,this.push('staxList',a.detail),Polymer.HaxStore.write('staxList',this.staxList,this),babelHelpers.typeof(a.target.parentElement)!=='undefined'&&'HAX-STORE'===a.target.parentElement.tagName&&Polymer.dom(a.target.parentElement).removeChild(a.target))},_haxStoreRegisterBlox:function(a){a.detail&&(a.detail.index=this.bloxList.length,this.push('bloxList',a.detail),Polymer.HaxStore.write('bloxList',this.bloxList,this),babelHelpers.typeof(a.target.parentElement)!=='undefined'&&'HAX-STORE'===a.target.parentElement.tagName&&Polymer.dom(a.target.parentElement).removeChild(a.target))},_haxStoreRegisterProperties:function(a){if(a.detail&&a.detail.properties&&a.detail.tag&&babelHelpers.typeof(this.elementList[a.detail.tag])==='undefined'){var b=a.detail.properties.gizmo;if(b){b.tag=a.detail.tag;var c=this.gizmoList;c.push(b),Polymer.HaxStore.write('gizmoList',c,this),babelHelpers.typeof(a.target.parentElement)!=='undefined'&&'HAX-AUTOLOADER'===a.target.parentElement.tagName&&Polymer.dom(a.target.parentElement).removeChild(a.target)}this.set('elementList.'+a.detail.tag,a.detail.properties),this.push('validTagList',a.detail.tag)}}}),Polymer.HaxStore.toArray=function(a){return Object.keys(a).map(function(b){return a[b]})},Polymer.HaxStore.camelToDash=function(a){return a.replace(/\W+/g,'-').replace(/([a-z\d])([A-Z])/g,'$1-$2').toLowerCase()},Polymer.HaxStore.dashToCamel=function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},Polymer.HaxStore.htmlToHaxElements=function(a){var b=[],c=Polymer.HaxStore.instance.validTagList,d=document.createElement('div');d.innerHTML=a;for(var e=d.childNodes,f=0;f<e.length;f++)babelHelpers.typeof(e[f].tagName)!=='undefined'&&c.includes(e[f].tagName.toLowerCase())&&b.push(Polymer.HaxStore.nodeToHaxElement(e[f],null));return b},Polymer.HaxStore.nodeToHaxElement=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'insert-element',c={};if(babelHelpers.typeof(a.style)!=='undefined'&&(c.style=a.getAttribute('style')),(null===c.style||'null'===c.style)&&delete c.style,babelHelpers.typeof(a.attributes.class)!=='undefined'&&(c.class=a.attributes.class.nodeValue.replace('hax-active','')),babelHelpers.typeof(a.attributes.id)!=='undefined'&&(c.id=a.getAttribute('id')),babelHelpers.typeof(a.properties)!=='undefined'){for(var d in a.properties)'class'!=d&&'style'!=d&&a.properties.hasOwnProperty(d)&&void 0!==babelHelpers.typeof(a[d])&&null!=a[d]&&''!=a[d]?c[d]=a[d]:!1===a[d]&&(c[d]=a[d]);for(var e in a.attributes)if(babelHelpers.typeof(a.attributes[e].name)!=='undefined'&&'class'!=a.attributes[e].name&&'style'!=a.attributes[e].name&&'id'!=a.attributes[e].name&&a.attributes.hasOwnProperty(e)&&void 0!==babelHelpers.typeof(a.attributes[e].value)&&null!=a.attributes[e].value&&''!=a.attributes[e].value&&!a.properties.hasOwnProperty(Polymer.HaxStore.dashToCamel(a.attributes[e].name)))c[Polymer.HaxStore.dashToCamel(a.attributes[e].name)]=a.attributes[e].value;else;}else for(var e in a.attributes)babelHelpers.typeof(a.attributes[e].name)!=='undefined'&&'class'!=a.attributes[e].name&&'style'!=a.attributes[e].name&&'id'!=a.attributes[e].name&&a.attributes.hasOwnProperty(e)&&void 0!==babelHelpers.typeof(a.attributes[e].value)&&null!=a.attributes[e].value&&''!=a.attributes[e].value&&(c[Polymer.HaxStore.dashToCamel(a.attributes[e].name)]=a.attributes[e].value);var f=a.tagName.toLowerCase();Polymer.HaxStore.instance._isSandboxed&&'iframe'===f&&(f='webview');var g=Polymer.HaxStore.getHAXSlot(a);'a'===f?c.innerText=g:('p'===f||'ol'===f||'ul'===f||'div'===f)&&(c.innerHTML=g);var h={tag:f,properties:c,content:g};return null!==b&&(h.eventName=b),h},Polymer.HaxStore.haxElementToNode=function(a,b,c){Polymer.HaxStore.instance._isSandboxed&&'iframe'===a&&(a='webview');var d=document.createElement(a);d.innerHTML=b;var e=d.cloneNode(!0);for(var f in c){var g=Polymer.HaxStore.camelToDash(f);c.hasOwnProperty(f)&&(!0===c[f]?e.setAttribute(g,c[f]):!1===c[f]?e.removeAttribute(g):null==c[f]||c[f].constructor!==Array||d.properties[f].readOnly?null==c[f]||c[f].constructor!==Object||d.properties[f].readOnly?e.setAttribute(g,c[f]):e.set(g,c[f]):e.set(g,c[f]))}return e},Polymer.HaxStore.haxNodeToContent=function(a){Polymer.HaxStore.instance.activeHaxBody.globalPreferences.haxDeveloperMode&&console.log(a);var b=Object.getPrototypeOf(a);if(babelHelpers.typeof(b.preProcessHaxNodeToContent)!=='undefined'){var c=a.cloneNode();a=b.preProcessHaxNodeToContent(c)}var d=a.tagName.toLowerCase();Polymer.HaxStore.instance._isSandboxed&&'webview'===d&&(d='iframe');var e='';e+='<'+d;for(var f=Polymer.HaxStore.instance.elementList[d],g={},h=0,j=a.attributes.length;h<j;++h){var k=a.attributes.item(h).nodeName,l=a.attributes.item(h).value;'style'!=k&&(('undefined'===typeof l?'undefined':babelHelpers.typeof(l))===('undefined'===typeof Object?'undefined':babelHelpers.typeof(Object))||l.constructor===Array)?g[k]=JSON.stringify(l).replace(/"/g,'&quot;'):null!=l&&'null'!=l&&(!0===l||'true'===l?g[k]=!0:!1===l||('string'===typeof l&&''!==l?(l=l.replace(/"/g,'&quot;'),g[k]=l):''===l?(''==l&&''!=a.attributes.item(h).value&&(l=a.attributes.item(h).value),g[k]=l):g[k]=l))}if(babelHelpers.typeof(a.properties)!=='undefined')for(var h in a.properties){var k=Polymer.HaxStore.camelToDash(h),l=null;babelHelpers.typeof(a[h])!=='undefined'&&(l=a[h]),a.properties[h].readOnly||l===a.properties[h].value||(null!=l&&(('undefined'===typeof l?'undefined':babelHelpers.typeof(l))===('undefined'===typeof Object?'undefined':babelHelpers.typeof(Object))||l.constructor===Array)?g[k]=JSON.stringify(l).replace(/"/g,'&quot;'):null!=l&&'null'!=l&&(!0===l||'true'===l?g[k]=!0:!1===l||('string'===typeof l&&''!==l?(l=l.replace(/"/g,'&quot;'),g[k]=l):''===l?''==l&&''!=a.properties[h].value?l=a.properties[h].value:''===l&&''==a.properties[h].value:g[k]=l)))}if(('undefined'===typeof f?'undefined':babelHelpers.typeof(f))!=='undefined'&&babelHelpers.typeof(f.saveOptions.unsetAttributes)!=='undefined')for(var m in f.saveOptions.unsetAttributes)delete g[f.saveOptions.unsetAttributes[m]];var i=['inner-text','tabindex','guestinstance'];for(var n in i)babelHelpers.typeof(g[i[n]])!=='undefined'&&delete g[i[n]];for(var m in babelHelpers.typeof(g.id)!=='undefined'&&''===g.id&&delete g.id,g)e+=!0===g[m]?' '+m:' '+m+'="'+g[m]+'"';if(e+=['area','base','br','col','embed','hr','img','input','keygen','link','meta','param','source','track','wbr'].includes(d)?'/>':'>',('undefined'===typeof f?'undefined':babelHelpers.typeof(f))==='undefined'||!f.saveOptions.wipeSlot){var o=Polymer.dom(a).getEffectiveChildNodes();if(0<o.length)for(var h=0,p=o.length;h<p;h++)babelHelpers.typeof(o[h].tagName)==='undefined'?8===o[h].nodeType?e+='<!-- '+o[h].textContent+' -->':1!==o[h].nodeType&&babelHelpers.typeof(o[h].textContent)!=='undefined'&&'undefined'!==o[h].textContent&&(e+=o[h].textContent):Polymer.HaxStore.HTMLPrimativeTest(o[h].tagName)||'TEMPLATE'===o[h].tagName?'SPAN'===o[h].tagName&&'inlinetracker'===o[h].id||(o[h].setAttribute('data-editable',!1),o[h].removeAttribute('data-hax-ray'),o[h].contentEditable=!1,e+=o[h].outerHTML):e+=Polymer.HaxStore.haxNodeToContent(o[h])}return'span'===d?e+='</'+d+'>':'hr'===d||'br'===d||'img'===d||(e+='</'+d+'>\n'),Polymer.HaxStore.instance.activeHaxBody.globalPreferences.haxDeveloperMode&&console.log(e),'function'===a.postProcesshaxNodeToContent&&(e=a.postProcesshaxNodeToContent(e)),e},Polymer.HaxStore.HTMLPrimativeTest=function(a){return babelHelpers.typeof(a.tagName)!=='undefined'&&-1==a.tagName.indexOf('-')},Polymer.HaxStore.getHAXSlot=function(a){var b='',c=Polymer.dom(a).children;if(0<c.length)for(var d=0,e=c.length;d<e;d++)babelHelpers.typeof(c[d].tagName)==='undefined'?8===c[d].nodeType?b+='<!-- '+c[d].textContent+' -->':1!==c[d].nodeType&&babelHelpers.typeof(c[d].textContent)!=='undefined'&&'undefined'!==c[d].textContent&&(b+=c[d].textContent):b+=0<c[d].tagName.indexOf('-')?'  '+Polymer.HaxStore.haxNodeToContent(c[d])+'\n':'  '+c[d].outerHTML+'\n';return b},Polymer.HaxStore.write=function(a,b,c){c.fire('hax-store-write',{property:a,value:b,owner:c})},Polymer.HaxStore.guessGizmoType=function(a){if(babelHelpers.typeof(a.source)!=='undefined')return-1==a.source.indexOf('.mp3')?-1!=a.source.indexOf('.png')||-1!=a.source.indexOf('.jpg')||-1!=a.source.indexOf('.jpeg')||-1!=a.source.indexOf('.gif')?'image':-1==a.source.indexOf('.pdf')?-1==a.source.indexOf('.svg')?-1==a.source.indexOf('.csv')?'external'==Polymer.HaxStore.instance.getVideoType(a.source)?'*':'video':'csv':'svg':'pdf':'audio'},Polymer.HaxStore.guessGizmo=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0&&arguments[2],d=[];if(('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'){var e=Polymer.HaxStore.instance;if(e.validGizmoTypes.includes(a))for(var f in e.gizmoList)for(var g=e.gizmoList[f],h={},j=!1,k=0;k<g.handles.length;k++)if(a===g.handles[k].type||'*'===a&&!j){for(var i in g.handles[k])'type'!==i&&babelHelpers.typeof(b[i])!=='undefined'&&(j=!0,h[g.handles[k][i]]=b[i]);(j||c)&&d.push(Polymer.HaxStore.haxElementPrototype(g,h,''))}}return d},Polymer.HaxStore.getHaxAppStoreTargets=function(a){var b=Polymer.HaxStore.instance.appList.filter(function(b){if(babelHelpers.typeof(b.connection.operations.add)!=='undefined'){var c=b.connection.operations.add;if(babelHelpers.typeof(c.acceptsGizmoTypes)!=='undefined'&&c.acceptsGizmoTypes.includes(a))return!0}return!1});return b},Polymer.HaxStore.haxElementPrototype=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'';return{tag:a.tag,properties:b,content:c,gizmo:a}},Polymer.HaxStore.wipeSlot=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'';if('*'===b)for(;null!==Polymer.dom(a).firstChild;)Polymer.dom(a).removeChild(Polymer.dom(a).firstChild);else for(var c in Polymer.dom(a).childNodes)babelHelpers.typeof(Polymer.dom(a).childNodes[c])!=='undefined'&&Polymer.dom(a).childNodes[c].slot===b&&Polymer.dom(a).removeChild(Polymer.dom(a).childNodes[c])},Polymer.HaxStore.toast=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:3e3;Polymer.HaxStore.instance.haxToast.duration=b,Polymer.HaxStore.instance.haxToast.show(a)},Polymer.HaxStore.instance=null,Polymer.HaxStore.requestAvailability=function(){Polymer.HaxStore.instance||(Polymer.HaxStore.instance=document.createElement('hax-store')),document.body.appendChild(Polymer.HaxStore.instance)}})();</script></dom-module></body></html>
<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../paper-menu/paper-menu.html"><link rel="import" href="../paper-item/paper-item.html"><link rel="import" href="../grid-plate/grid-plate.html"><link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="import" href="hax-text-context.html"><link rel="import" href="hax-inline-context.html"><link rel="import" href="hax-ce-context.html"><link rel="import" href="hax-plate-context.html"><link rel="import" href="hax-input-mixer.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-menu/paper-menu-shared-styles.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="prefetch" href="../simple-colors/simple-colors.html"><link rel="prefetch" href="../simple-colors/simple-colors-behaviors.html"><link rel="prefetch" href="../paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../responsive-grid/responsive-grid-row.html"><link rel="prefetch" href="../responsive-utility/responsive-utility.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../responsive-grid/responsive-grid-col.html"><link rel="prefetch" href="../responsive-grid/responsive-grid-clear.html"><link rel="prefetch" href="../md-extra-icons/md-extra-icons.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../app-layout/app-toolbar/app-toolbar.html"><link rel="prefetch" href="../materializecss-styles/colors.html"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="hax-context-item-menu.html"><link rel="prefetch" href="../paper-tooltip/paper-tooltip.html"><link rel="prefetch" href="../neon-animation/web-animations.html"><link rel="prefetch" href="../web-animations-js/web-animations-next-lite.min.js"><link rel="prefetch" href="hax-toolbar-menu.html"><link rel="prefetch" href="../iron-icons/editor-icons.html"><link rel="prefetch" href="../iron-icons/device-icons.html"><link rel="prefetch" href="../iron-icons/hardware-icons.html"><link rel="prefetch" href="../iron-icons/social-icons.html"><link rel="prefetch" href="../iron-icons/av-icons.html"><link rel="prefetch" href="../iron-icons/maps-icons.html"><link rel="prefetch" href="../paper-listbox/paper-listbox.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="hax-context-item.html"><link rel="prefetch" href="../paper-button/paper-button.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../iron-icons/image-icons.html"><link rel="prefetch" href="hax-toolbar-item.html"><link rel="prefetch" href="hax-context-item-textop.html"><link rel="prefetch" href="hax-toolbar.html"><link rel="prefetch" href="../paper-slider/paper-slider.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-range-behavior/iron-range-behavior.html"><link rel="prefetch" href="../paper-input/paper-input.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-progress/paper-progress.html"><link rel="prefetch" href="../paper-input/paper-textarea.html"><link rel="prefetch" href="../iron-autogrow-textarea/iron-autogrow-textarea.html"><link rel="prefetch" href="../paper-checkbox/paper-checkbox.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../paper-swatch-picker/paper-swatch-picker.html"><link rel="prefetch" href="../paper-swatch-picker/paper-swatch-picker-icon.html"></head><body><dom-module id="hax-body"><template strip-whitespace=""><style>:host{display:block;min-height:32px;min-width:32px;font-family:sans-serif;}:host #bodycontainer ::slotted(.hax-context-menu){padding:0;margin:0;position:relative;visibility:hidden;opacity:0;transition:all .3s ease;z-index:100;float:left;display:block;}:host #bodycontainer ::slotted(#haxinputmixer){z-index:10000000;}:host #bodycontainer ::slotted(.hax-context-visible){visibility:visible;opacity:1;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]){outline:none;transition:.6s width ease-in-out,
          .6s height ease-in-out,
          .6s margin ease-in-out;}:host[edit-mode] #bodycontainer ::slotted(p):empty{background:#f8f8f8;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]):hover{outline:1px dotted #d3d3d3;outline-offset:2px;}:host[edit-mode] #bodycontainer ::slotted(* [data-editable]):hover{outline:1px dotted #d3d3d3;outline-offset:2px;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable])::before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:32px;transition:.6s all ease;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]):hover::before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:32px;transition:.6s all ease;}:host[edit-mode] #bodycontainer ::slotted(*.hax-active[data-editable]){cursor:text !important;outline:1px dashed #c3c3c3 !important;outline-offset:4px;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable] .hax-active){cursor:text !important;outline:1px dashed #c3c3c3 !important;outline-offset:4px;}:host[edit-mode] #bodycontainer ::slotted(*.hax-active[data-editable])::before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:32px;transition:.6s all ease;}:host[edit-mode] #bodycontainer ::slotted(code.hax-active[data-editable]){display:block;}:host[edit-mode] #bodycontainer ::slotted(hr[data-editable]){height:4px;background-color:#EEEEEE;padding-top:8px;padding-bottom:8px;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]){-webkit-user-select:text;cursor:pointer;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]::-moz-selection),
      :host[edit-mode] #bodycontainer ::slotted(*[data-editable] *::-moz-selection){background-color:var(--hax-body-highlight, --paper-yellow-300);color:black;}:host[edit-mode] #bodycontainer ::slotted(*[data-editable]::selection),
      :host[edit-mode] #bodycontainer ::slotted(*[data-editable] *::selection){background-color:var(--hax-body-highlight, --paper-yellow-300);color:black;}#bodycontainer{-webkit-user-select:text;user-select:text;}#contextcontainer{display:none;}:host[edit-mode][hax-ray-mode] #bodycontainer ::slotted(*[data-editable]){outline:1px dashed #d3d3d3;outline-offset:4px;}:host[edit-mode][hax-ray-mode] #bodycontainer ::slotted(*[data-editable])::before{content:attr(data-hax-ray) " " attr(resource) " " attr(typeof) " " attr(property) " " attr(content);font-size:10px;font-style:italic;left:unset;right:unset;top:unset;background-color:#d3d3d3;color:#000000;bottom:unset;width:auto;padding:8px;margin:0;z-index:1;margin:-16px 0 0 0;float:left;line-height:2;}</style><div id="bodycontainer" class="ignore-activation"><slot id="body"></slot></div><div id="contextcontainer"><span id="inlinetracker" style="pointer-events: none; visibility: hidden; opacity: 0; width:0;height:0;" class="ignore-activation hax-inline-tracker-element" contenteditable="false"></span><hax-inline-context id="inlinecontextmenu" class="hax-context-menu ignore-activation"></hax-inline-context><hax-text-context id="textcontextmenu" class="hax-context-menu ignore-activation"></hax-text-context><hax-ce-context id="cecontextmenu" class="hax-context-menu ignore-activation"></hax-ce-context><hax-plate-context id="platecontextmenu" class="hax-context-menu ignore-activation"></hax-plate-context><hax-input-mixer id="haxinputmixer" class="hax-context-menu ignore-activation"></hax-input-mixer></div><iron-a11y-keys target="[[activeContainerNode]]" keys="esc" on-keys-pressed="_escKeyPressed" stop-keyboard-event-propagation=""></iron-a11y-keys><iron-a11y-keys target="[[activeContainerNode]]" keys="del backspace" on-keys-pressed="_delKeyPressed"></iron-a11y-keys><iron-a11y-keys target="[[activeContainerNode]]" keys="shift+tab" on-keys-pressed="_tabBackKeyPressed" stop-keyboard-event-propagation=""></iron-a11y-keys><iron-a11y-keys target="[[activeContainerNode]]" keys="tab" on-keys-pressed="_tabKeyPressed" stop-keyboard-event-propagation=""></iron-a11y-keys><iron-a11y-keys target="[[activeContainerNode]]" keys="up" on-keys-pressed="_upKeyPressed" stop-keyboard-event-propagation=""></iron-a11y-keys><iron-a11y-keys target="[[activeContainerNode]]" keys="down" on-keys-pressed="_downKeyPressed" stop-keyboard-event-propagation=""></iron-a11y-keys></template><script>Polymer({is:'hax-body',listeners:{focusin:'_focusIn',mousedown:'_focusIn',"hax-context-item-selected":'_haxContextOperation',"hax-input-mixer-update":'_haxInputMixerOperation',"place-holder-replace":'replacePlaceholder'},properties:{editMode:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_editModeChanged'},globalPreferences:{type:Object,value:{},observer:'_globalPreferencesUpdated'},haxRayMode:{type:Boolean,value:!1,reflectToAttribute:!0},activeNode:{type:Object,value:null,notify:!0,observer:'_activeNodeChanged'},activeContainerNode:{type:Object,value:null,notify:!0,observer:'_activeContainerNodeChanged'}},ready:function(){this.polyfillSafe=Polymer.HaxStore.instance.computePolyfillSafe(),this._observer=Polymer.dom(this).observeNodes(function(a){var b=this;Polymer.dom.flush(),0<a.addedNodes.length&&a.addedNodes.map(function(a){b._haxElementTest(a)&&(b._HTMLPrimativeTest(a)&&(a.contentEditable=b.editMode),a.setAttribute('data-editable',b.editMode),a.setAttribute('data-hax-ray',a.tagName),b.fire('hax-body-tag-added',{node:a}))}),0<a.removedNodes.length&&a.removedNodes.map(function(a){b._haxElementTest(a)&&!a.classList.contains('hax-active')&&b.fire('hax-body-tag-removed',{node:a})})})},attached:function(){this.__tabTrap=!1,this.fire('hax-register-body',this),document.body.addEventListener('hax-store-property-updated',this._haxStorePropertyUpdated.bind(this))},replacePlaceholder:function(a){var b=this;if('text'===a.detail){var c=document.createElement('p');this.haxReplaceNode(this.activeNode,c,Polymer.dom(this.activeNode).parentNode),setTimeout(function(){Polymer.HaxStore.write('activeNode',c,b),c.focus()},100)}else this.replaceElementWorkflow()},replaceElementWorkflow:function(){var a=Polymer.HaxStore.nodeToHaxElement(this.activeNode,null),b='*',c=!1;'place-holder'===a.tag&&babelHelpers.typeof(a.properties.type)!=='undefined'&&(b=a.properties.type,c=!0);var d={};if(babelHelpers.typeof(Polymer.HaxStore.instance.elementList[a.tag])!=='undefined'&&!1!==Polymer.HaxStore.instance.elementList[a.tag].gizmo&&babelHelpers.typeof(Polymer.HaxStore.instance.elementList[a.tag].gizmo.handles)!=='undefined'&&0<Polymer.HaxStore.instance.elementList[a.tag].gizmo.handles.length)for(var e=Polymer.HaxStore.instance.elementList[a.tag].gizmo,f=0;f<e.handles.length;f++)for(var g in e.handles[f])'type'!==g&&babelHelpers.typeof(a.properties[e.handles[f][g]])!=='undefined'&&(d[g]=a.properties[e.handles[f][g]]);var h=Polymer.HaxStore.guessGizmo(b,d,c);0<h.length?Polymer.HaxStore.instance.haxAppPicker.presentOptions(h,'__convert','What do you want to convert this gizmo to','gizmo'):Polymer.HaxStore.toast('Sorry, this can\'t be converted to anything automatically!',5e3)},_globalPreferencesUpdated:function(a){('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&null!=a&&(this.haxRayMode=a.haxRayMode)},_haxStorePropertyUpdated:function(a){a.detail&&babelHelpers.typeof(a.detail.value)!=='undefined'&&a.detail.property&&('object'===babelHelpers.typeof(a.detail.value)&&this.set(a.detail.property,null),this.set(a.detail.property,a.detail.value))},haxClearBody:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0,b=!0;a&&(b=prompt('Are you sure you want to delete all content?')),b&&Polymer.HaxStore.wipeSlot(this)},haxInsert:function(a,b){var c=this,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},e=Polymer.HaxStore.instance.validTagList;if(e.includes(a)){var f=document.createElement(a);f.innerHTML=b;var g=f.cloneNode(!0);for(var h in d){var i=Polymer.HaxStore.camelToDash(h);d.hasOwnProperty(h)&&(!0===d[h]?g.setAttribute(i,d[h]):!1===d[h]?g.removeAttribute(i):null==d[h]||d[h].constructor!==Array||g.properties[h].readOnly?null==d[h]||d[h].constructor!==Object||g.properties[h].readOnly?g.setAttribute(i,d[h]):g.set(i,d[h]):g.set(i,d[h]))}return null!==Polymer.HaxStore.instance.activePlaceHolder&&babelHelpers.typeof(Polymer.HaxStore.instance.activePlaceHolder.style)!=='undefined'?(g.style.width=Polymer.HaxStore.instance.activePlaceHolder.style.width,g.style.float=Polymer.HaxStore.instance.activePlaceHolder.style.float,g.style.margin=Polymer.HaxStore.instance.activePlaceHolder.style.margin,g.style.display=Polymer.HaxStore.instance.activePlaceHolder.style.display,this.haxReplaceNode(Polymer.HaxStore.instance.activePlaceHolder,g,Polymer.dom(Polymer.HaxStore.instance.activePlaceHolder).parentNode),Polymer.HaxStore.instance.activePlaceHolder=null):null===this.activeContainerNode?Polymer.dom(this).appendChild(g):'GRID-PLATE'!==g.tagName&&'GRID-PLATE'===this.activeContainerNode.tagName&&this.activeContainerNode!==this.activeNode?(g.setAttribute('slot',this.activeNode.getAttribute('slot')),Polymer.dom(this.activeContainerNode).insertBefore(g,this.activeNode)):Polymer.dom(this).insertBefore(g,this.activeContainerNode.nextElementSibling),this.$.inlinecontextmenu.opened=!1,setTimeout(function(){Polymer.HaxStore.write('activeContainerNode',g,c),Polymer.HaxStore.write('activeNode',g,c),g.focus(),'function'===typeof g.scrollIntoViewIfNeeded?g.scrollIntoViewIfNeeded(!0):g.scrollIntoView({behavior:'smooth',inline:'center'})},100),!0}return!1},haxToContent:function(){this.hideContextMenus();var a=this.activeNode;Polymer.HaxStore.write('activeNode',null,this),Polymer.HaxStore.write('activeContainerNode',null,this);var b=Polymer.dom(this.$.body).getDistributedNodes();this.globalPreferences.haxDeveloperMode&&console.log(b);for(var c='',d=0,e=b.length;d<e;d++)this._haxElementTest(b[d])?(b[d].removeAttribute('data-editable'),b[d].removeAttribute('data-hax-ray'),b[d].contentEditable=!1,c+=Polymer.HaxStore.haxNodeToContent(b[d]),'grid-plate'===b[d].tagName.toLowerCase()&&this._applyContentEditable(this.editMode,b[d])):8===b[d].nodeType?c+='<!-- '+b[d].textContent+' -->':1!==b[d].nodeType&&babelHelpers.typeof(b[d].textContent)!=='undefined'&&'undefined'!==b[d].textContent&&(c+=b[d].textContent);c=c.replace(/\scontenteditable=\"false\"/g,''),c=c.replace(/\sdata-editable=\"true\"/g,''),c=c.replace(/\sdata-editable=\"false\"/g,''),c=c.replace(/\sdata-editable=\""/g,''),c=c.replace(/\sdata-editable/g,''),c=c.replace(/\scontenteditable/g,''),c=c.replace(/\sdraggable/g,''),c=c.replace(/\sdata-draggable/g,''),c=c.replace(/\sdata-hax-ray=\".*?\"/g,''),c=c.replace(/<span id=\"inlinetracker\" class=\"ignore-activation hax-inline-tracker-element style-scope hax-body\" style=\"font-size: 19.2px; pointer-events: none; opacity: 0; width: 0px; height: 0px;\"><\/span>/g,'');var f=this.parentNode.tagName.toLowerCase(),g='style-scope '+f+' x-scope',h=new RegExp(g,'g');c=c.replace(h,''),g='style-scope '+f,h=new RegExp(g,'g'),c=c.replace(h,''),g='x-scope '+f+'-0',h=new RegExp(g,'g'),c=c.replace(h,'');var i=Polymer.HaxStore.instance.validTagList;for(var d in i.push('hax-preview'),i)g='style-scope '+i[d],h=new RegExp(g,'g'),c=c.replace(h,''),g='x-scope '+i[d]+'-0 ',h=new RegExp(g,'g'),c=c.replace(h,''),g='x-scope '+i[d]+'-0',h=new RegExp(g,'g'),c=c.replace(h,'');return c=c.replace(/\sclass=\"\"/g,''),c=c.replace(/\sclass=\"\s\"/g,''),this._applyContentEditable(this.editMode),Polymer.HaxStore.write('activeNode',a,this),Polymer.HaxStore.write('activeContainerNode',a,this),this.globalPreferences.haxDeveloperMode&&console.log(c),c},haxDuplicateNode:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this;this.hideContextMenus();var d=Polymer.dom(a).cloneNode(!0);return'webview'===d.tagName.toLowerCase()&&Polymer.HaxStore.instance._isSandboxed&&babelHelpers.typeof(d.guestinstance)!=='undefined'&&delete d.guestinstance,null===a?Polymer.dom(c).appendChild(d):Polymer.dom(c).insertBefore(d,Polymer.dom(a).nextSibling),setTimeout(function(){c===b&&Polymer.HaxStore.write('activeContainerNode',d,b),Polymer.HaxStore.write('activeNode',d,b)},100),!0},hideContextMenus:function(){this._hideContextMenu(this.$.inlinetracker),this._hideContextMenu(this.$.textcontextmenu),this._hideContextMenu(this.$.cecontextmenu),this._hideContextMenu(this.$.inlinecontextmenu),this._hideContextMenu(this.$.platecontextmenu),this._hideContextMenu(this.$.haxinputmixer),this.$.inlinecontextmenu.opened=!1},positionContextMenus:function(a,b){var c=a.tagName.toLowerCase();Polymer.HaxStore.instance._isSandboxed&&'webview'===c&&(c='iframe');var d=Polymer.HaxStore.instance.elementList[c],e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=-44,g=-36;800>e&&(f=0,g=0),('undefined'===typeof d?'undefined':babelHelpers.typeof(d))!=='undefined'&&'P'!==a.tagName?(this.__activeContextType=this.$.cecontextmenu,d.element=a,this.__activeContextType.setHaxProperties(d)):(this.__activeContextType=this.$.textcontextmenu,this._positionContextMenu(this.$.inlinecontextmenu,b,f,-54,!1)),this._positionContextMenu(this.__activeContextType,b,f,-54),this._positionContextMenu(this.$.platecontextmenu,b,g,-8,!1),this._HTMLPrimativeTest(a)||a===b?this._HTMLPrimativeTest(b)&&(b.contentEditable=!0):b.contentEditable=!1},haxMoveGridPlate:function(a,b,c){return this.hideContextMenus(),'first'===a?null!==c.previousElementSibling&&Polymer.dom(this).insertBefore(c,Polymer.dom(this).firstChild):'up'===a?null!==c.previousElementSibling&&Polymer.dom(this).insertBefore(c,c.previousElementSibling):'down'===a?null!==c.nextElementSibling&&Polymer.dom(this).insertBefore(c.nextElementSibling,c):'last'===a?null!==c.nextElementSibling&&Polymer.dom(this).appendChild(c):void 0,(this.positionContextMenus(b,c),setTimeout(function(){'function'===typeof c.scrollIntoViewIfNeeded?c.scrollIntoViewIfNeeded(!0):c.scrollIntoView({behavior:'smooth',inline:'center'})},250),!0)},haxReplaceNode:function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this;this.hideContextMenus();try{null!=a.getAttribute('slot')&&b.setAttribute('slot',a.getAttribute('slot')),Polymer.dom(c).replaceChild(b,a)}catch(a){console.log(a)}return b},haxChangeTagName:function(a,b){this.hideContextMenus();for(var c=document.createElement(b),d=0,e=a.attributes.length;d<e;++d){var f=a.attributes.item(d).nodeName,g=a.attributes.item(d).value;c.setAttribute(f,g)}return c.innerHTML=a.innerHTML,Polymer.dom(this).replaceChild(c,a),c},haxDeleteNode:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this;if(this.hideContextMenus(),null==this.activeContainerNode||null===this.activeContainerNode.previousElementSibling)null!=this.activeContainerNode&&null!==this.activeContainerNode.nextElementSibling?this.activeContainerNode.nextElementSibling.focus():(Polymer.HaxStore.write('activeContainerNode',null,this),Polymer.HaxStore.write('activeNode',null,this));else if(this.activeContainerNode.previousElementSibling.focus(),null!=this.activeContainerNode&&Polymer.HaxStore.instance.isTextElement(this.activeContainerNode)&&''!==Polymer.dom(this.activeContainerNode).textContent)try{var c=document.createRange(),d=window.getSelection();c.setStart(this.activeContainerNode,1),c.collapse(!0),d.removeAllRanges(),d.addRange(c),this.activeContainerNode.focus()}catch(a){console.log(a)}try{return Polymer.dom(b).removeChild(a)}catch(a){console.log(a)}},importContent:function(a){var b=this,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;c&&Polymer.HaxStore.wipeSlot(this,'*'),setTimeout(function(){var c=Polymer.HaxStore.instance.validTagList,d=document.createElement('div');for(d.insertAdjacentHTML('beforeend',a);null!==d.firstChild;)if(!(babelHelpers.typeof(d.firstChild.tagName)!=='undefined'&&c.includes(d.firstChild.tagName.toLowerCase())))d.removeChild(d.firstChild);else if(Polymer.HaxStore.instance._isSandboxed&&'iframe'===d.firstChild.tagName.toLowerCase()){for(var e=document.createElement('webview'),f=0,g=d.firstChild.attributes.length;f<g;++f){var h=d.firstChild.attributes.item(f).nodeName,i=d.firstChild.attributes.item(f).value;'height'!==h&&'width'!==h||e.style[h]!=i,e.setAttribute(h,i)}Polymer.dom(b).appendChild(e)}else Polymer.dom(b).appendChild(d.firstChild)},200)},_haxContextOperation:function(a){var b,c=a.detail;switch(c.eventName){case'p':case'h2':case'h3':case'h4':case'h5':case'h6':case'code':case'blockquote':this.$.textcontextmenu.selectedValue=c.eventName,Polymer.HaxStore.write('activeContainerNode',this.haxChangeTagName(this.activeContainerNode,c.eventName),this);break;case'text-align-left':this.activeNode.style.textAlign=null,this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'text-align-right':this.activeNode.style.textAlign='right',this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'grid-plate-convert':this.replaceElementWorkflow();break;case'grid-plate-duplicate':this.activeNode===this.activeContainerNode?this.haxDuplicateNode(this.activeNode):this.haxDuplicateNode(this.activeNode,this.activeContainerNode);break;case'grid-plate-delete':Polymer.HaxStore.instance.haxAppPicker.presentOptions([{icon:'thumb-up',color:'green',title:'Yes'},{icon:'thumb-down',color:'red',title:'No'}],'','Are you sure you want to delete this element?','delete');break;case'grid-plate-first':this.haxMoveGridPlate('first',this.activeNode,this.activeContainerNode);break;case'grid-plate-up':this.haxMoveGridPlate('up',this.activeNode,this.activeContainerNode);break;case'hax-manager-open':Polymer.HaxStore.write('activeHaxElement',{},this),Polymer.HaxStore.instance.haxManager.resetManager(parseInt(c.value)),Polymer.HaxStore.instance.haxManager.toggleDialog();break;case'grid-plate-down':this.haxMoveGridPlate('down',this.activeNode,this.activeContainerNode);break;case'grid-plate-last':this.haxMoveGridPlate('last',this.activeNode,this.activeContainerNode);break;case'close-menu':Polymer.HaxStore.write('activeContainerNode',null,this),Polymer.HaxStore.write('activeNode',null,this);break;case'hax-edit-property':var d=this.$.haxinputmixer;d.label=c.target.label,d.options=c.target.options,d.icon=c.target.icon,d.description=c.target.description,d.required=c.target.required,d.validation=c.target.validation,d.validationType=c.target.validationType,d.inputMethod=c.target.inputMethod,d.value='',babelHelpers.typeof(c.target.propertyToBind)!=='undefined'&&null!=c.target.propertyToBind&&!1!=c.target.propertyToBind&&(d.propertyToBind=c.target.propertyToBind,d.value=babelHelpers.typeof(this.activeNode[c.target.propertyToBind])==='undefined'?this.activeNode.getAttribute(c.target.propertyToBind):this.activeNode[c.target.propertyToBind]),this._positionContextMenu(d,this.$.cecontextmenu,-6,-116),d.style.width=null;break;case'hax-align-left':this.activeNode.style.float=null,this.activeNode.style.margin=null,this.activeNode.style.display=null,this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'hax-align-center':this.activeNode.style.float=null,this.activeNode.style.margin='0 auto',this.activeNode.style.display='block',this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'hax-align-right':this.activeNode.style.float='right',this.activeNode.style.margin=null,this.activeNode.style.display=null,this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'hax-size-change':this.activeNode.style.width=c.value+'%',this.positionContextMenus(this.activeNode,this.activeContainerNode);break;case'hax-manager-configure':this._hideContextMenu(this.$.haxinputmixer),Polymer.HaxStore.instance.haxManager.resetManager(),b=Polymer.HaxStore.nodeToHaxElement(Polymer.HaxStore.instance.activeNode),Polymer.HaxStore.write('activeHaxElement',b,this),Polymer.HaxStore.instance.haxManager.editExistingNode=!0,Polymer.HaxStore.instance.haxManager.selectStep('configure'),Polymer.HaxStore.instance.haxManager.toggleDialog(),setTimeout(function(){Polymer.HaxStore.instance.haxManager.$.preview.$.configurebutton.focus()},100);break;case'hax-manager-configure-container':Polymer.HaxStore.write('activeNode',Polymer.HaxStore.instance.activeContainerNode,this),this._hideContextMenu(this.$.haxinputmixer),Polymer.HaxStore.instance.haxManager.resetManager(),b=Polymer.HaxStore.nodeToHaxElement(Polymer.HaxStore.instance.activeNode),Polymer.HaxStore.write('activeHaxElement',b,this),Polymer.HaxStore.instance.haxManager.editExistingNode=!0,Polymer.HaxStore.instance.haxManager.selectStep('configure'),Polymer.HaxStore.instance.haxManager.toggleDialog(),setTimeout(function(){Polymer.HaxStore.instance.haxManager.$.preview.$.configurebutton.focus()},100);}},_haxInputMixerOperation:function(a){var b=a.detail.inputMixer;null==b.propertyToBind?null!=b.slotToBind&&(item=document.createElement('span'),item.style.height='inherit',item.innerHTML=b.value,item.slot=b.slotToBind,this.activeNode.appendChild(item)):this.activeNode[b.propertyToBind]=b.value,this._hideContextMenu(this.$.haxinputmixer)},_focusIn:function(a){var b=this;if(this.editMode&&!this.__tabTrap){var c=Polymer.dom(a),d=c.localTarget,e=Polymer.HaxStore.instance.validTagList,f=d,g=null;if(this._haxElementTest(f)&&null!=f.parentNode){for(;'bodycontainer'!=f.parentNode.id;)null===g&&e.includes(f.tagName.toLowerCase())&&'LI'!==f.tagName&&'B'!==f.tagName&&'I'!==f.tagName&&'STRONG'!==f.tagName&&'EM'!==f.tagName&&(g=f),f=f.parentNode;null===g?g=f:Polymer.HaxStore.instance.isGridPlateElement(f)?['UL','OL','LI','P','GRID-PLATE'].includes(f.tagName)&&['UL','OL','LI'].includes(g.tagName)&&(g=f):g=f,this.activeContainerNode!==f&&e.includes(f.tagName.toLowerCase())&&!f.classList.contains('ignore-activation')?(Polymer.HaxStore.write('activeContainerNode',f,this),a.stopPropagation()):f.classList.contains('ignore-activation')&&a.stopPropagation(),this.activeNode!==g&&e.includes(f.tagName.toLowerCase())&&!g.classList.contains('ignore-activation')&&(setTimeout(function(){Polymer.HaxStore.write('activeNode',g,b)},50),a.stopPropagation())}}else this.__tabTrap=!1},_editModeChanged:function(a,b){('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'&&(this._applyContentEditable(a),!1!==a&&babelHelpers.typeof(this.activeNode)!=='undefined'&&null!==this.activeNode&&this.positionContextMenus(this.activeNode,this.activeContainerNode)),!1===a&&this.hideContextMenus()},_haxResolvePreviousElement:function(a){for(a=Polymer.dom(a).previousElementSibling;babelHelpers.typeof(a.tagName)!=='undefined'&&'HAX-'===a.tagName.substring(0,4);)a=Polymer.dom(a).previousElementSibling;return a},_haxElementTest:function(a){return babelHelpers.typeof(a.tagName)!=='undefined'&&'HAX-'!==a.tagName.substring(0,4)},_HTMLPrimativeTest:function(a){return babelHelpers.typeof(a.tagName)!=='undefined'&&-1==a.tagName.indexOf('-')},_applyContentEditable:function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.$.body,c=Polymer.dom(b).getDistributedNodes();0===c.length&&(c=Polymer.dom(b).getEffectiveChildNodes());for(var d=0,e=c.length;d<e;d++)this._HTMLPrimativeTest(c[d])&&(c[d].contentEditable=a),this._haxElementTest(c[d])&&(a?(c[d].setAttribute('data-editable',a),c[d].setAttribute('data-hax-ray',c[d].tagName)):(c[d].removeAttribute('data-editable'),c[d].removeAttribute('data-hax-ray')))},_activeContainerNodeChanged:function(a){if(this.editMode&&('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&null!==a){var b=a.tagName.toLowerCase();'grid-plate'===b&&(a.editMode=this.editMode,this._applyContentEditable(this.editMode,a))}},_activeNodeChanged:function(a,b){var c=this;if(('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'&&null!=b&&b.classList.remove('hax-active'),this.editMode&&('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&null!==a){var d=a.tagName.toLowerCase();a.classList.add('hax-active'),this.$.textcontextmenu.selectedValue=d,setTimeout(function(){c.positionContextMenus(a,Polymer.HaxStore.instance.activeContainerNode)},25),'right'==a.style.textAlign?(this.$.textcontextmenu.justifyIcon='editor:format-align-right',this.$.textcontextmenu.justifyValue='text-align-right'):'left'==a.style.textAlign?(this.$.textcontextmenu.justifyIcon='editor:format-align-left',this.$.textcontextmenu.justifyValue='text-align-left'):'left'==a.style.float?(this.$.cecontextmenu.justifyIcon='editor:format-align-left',this.$.cecontextmenu.justifyValue='hax-align-left'):'right'==a.style.float?(this.$.cecontextmenu.justifyIcon='editor:format-align-right',this.$.cecontextmenu.justifyValue='hax-align-right'):'0 auto'==a.style.margin&&(this.$.cecontextmenu.justifyIcon='editor:format-align-center',this.$.cecontextmenu.justifyValue='hax-align-center')}else null===a&&(this.hideContextMenus(),this.$.textcontextmenu.justifyIcon='editor:format-align-left',this.$.textcontextmenu.justifyValue='text-align-left')},_positionContextMenu:function(a,b,c,d){var e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:!0;try{Polymer.dom(this).insertBefore(a,b)}catch(c){try{Polymer.dom(b.parentNode).insertBefore(a,b)}catch(a){}}e&&(a.style.width=b.style.width,a.style.float=b.style.float),null!=c&&(a.style['margin-left']=c+'px'),null!=d&&(a.style['margin-top']=d+'px'),a.classList.add('hax-context-visible')},_hideContextMenu:function(a){a.classList.remove('hax-context-visible'),Polymer.dom(this.$.contextcontainer).appendChild(a)},_escKeyPressed:function(a){this.editMode&&(a.preventDefault(),a.stopPropagation(),this.$.inlinecontextmenu.opened?(this.$.inlinecontextmenu.opened=!1,Polymer.HaxStore.write('activeNode',this.activeContainerNode,this),this.activeContainerNode.focus()):this.activeNode===this.activeContainerNode?(Polymer.HaxStore.write('activeContainerNode',null,this),Polymer.HaxStore.write('activeNode',null,this),document.body.focus()):(Polymer.HaxStore.write('activeNode',this.activeContainerNode,this),this.activeContainerNode.focus()))},_delKeyPressed:function(a){var b=this;if(this.editMode){var c=Polymer.dom(this.activeContainerNode).textContent;if(''===c)a.preventDefault(),a.stopPropagation(),this.haxDeleteNode(this.activeContainerNode);else if(Polymer.HaxStore.instance.isTextElement(this._haxResolvePreviousElement(this.activeContainerNode))){var d=window.getSelection(),e=d.getRangeAt(0).cloneRange(),f=e.commonAncestorContainer.tagName;if(('undefined'===typeof f?'undefined':babelHelpers.typeof(f))==='undefined'&&(f=e.commonAncestorContainer.parentNode.tagName),0===e.startOffset&&0===e.endOffset&&!['UL','OL','LI'].includes(f)){for(a.preventDefault(),a.stopPropagation();this.activeContainerNode.firstChild;)this._haxResolvePreviousElement(this.activeContainerNode).appendChild(this.activeContainerNode.firstChild);setTimeout(function(){b.haxDeleteNode(b.activeContainerNode)},100)}}}},_upKeyPressed:function(){if(this.editMode&&''===Polymer.dom(this.activeContainerNode).textContent){var a=this._haxResolvePreviousElement(this.activeContainerNode);try{a.focus()}catch(a){}}},_downKeyPressed:function(){if(this.editMode&&''===Polymer.dom(this.activeContainerNode).textContent){var a=Polymer.dom(this.activeContainerNode);try{a.nextElementSibling.focus()}catch(a){}}},_tabKeyPressed:function(a){if(this.editMode){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();var b=!1,c=this.activeContainerNode,d=this.activeContainerNode.tagName;try{var e=window.getSelection(),f=e.getRangeAt(0).cloneRange(),g=f.commonAncestorContainer.tagName;if(('undefined'===typeof g?'undefined':babelHelpers.typeof(g))==='undefined'&&(g=f.commonAncestorContainer.parentNode.tagName),['UL','OL','LI'].includes(d)||['UL','OL','LI'].includes(g))this.polyfillSafe&&(document.execCommand('indent'),this.__tabTrap=!0);else for(;!b;)null==Polymer.dom(c).nextSibling?b=!0:'function'===Polymer.dom(c).nextSibling.focus?(Polymer.dom(c).nextSibling.focus(),b=!0):c=Polymer.dom(c).nextSibling}catch(a){}}},_tabBackKeyPressed:function(a){if(this.editMode){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();var b=Polymer.dom(this.activeContainerNode).previousSibling,c=this.activeContainerNode.tagName,d=window.getSelection();try{var e=d.getRangeAt(0).cloneRange();if(['UL','OL','LI'].includes(c)||['UL','OL','LI'].includes(e.commonAncestorContainer.parentElement.tagName))this.polyfillSafe&&(document.execCommand('outdent'),this.__tabTrap=!0);else{if(null!=b)for(;null!=b&&!this._haxElementTest(b);)b=Polymer.dom(b).previousSibling;null!=b&&setTimeout(function(){b.focus()},100)}}catch(a){}}}});</script></dom-module></body></html>
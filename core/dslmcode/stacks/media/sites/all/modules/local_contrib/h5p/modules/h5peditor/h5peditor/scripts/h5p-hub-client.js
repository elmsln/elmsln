!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=34)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=t.toggleClass=t.toggleVisibility=t.show=t.hide=t.removeClass=t.addClass=t.classListContains=t.removeChild=t.querySelectorAll=t.nodeListToArray=t.querySelector=t.appendChild=t.toggleAttribute=t.attributeEquals=t.hasAttribute=t.removeAttribute=t.setAttribute=t.getAttribute=void 0;var i=n(1),r=t.getAttribute=(0,i.curry)(function(e,t){return t.getAttribute(e)}),o=t.setAttribute=(0,i.curry)(function(e,t,n){return n.setAttribute(e,t)}),s=(t.removeAttribute=(0,i.curry)(function(e,t){return t.removeAttribute(e)}),t.hasAttribute=(0,i.curry)(function(e,t){return t.hasAttribute(e)}),t.attributeEquals=(0,i.curry)(function(e,t,n){return n.getAttribute(e)===t}),t.toggleAttribute=(0,i.curry)(function(e,t){var n=r(e,t);o(e,(0,i.inverseBooleanString)(n),t)}),t.appendChild=(0,i.curry)(function(e,t){return e.appendChild(t)}),t.querySelector=(0,i.curry)(function(e,t){return t.querySelector(e)}),t.nodeListToArray=function(e){return Array.prototype.slice.call(e)}),a=(t.querySelectorAll=(0,i.curry)(function(e,t){return s(t.querySelectorAll(e))}),t.removeChild=(0,i.curry)(function(e,t){return e.removeChild(t)}),t.classListContains=(0,i.curry)(function(e,t){return t.classList.contains(e)}),t.addClass=(0,i.curry)(function(e,t){return t.classList.add(e)})),u=t.removeClass=(0,i.curry)(function(e,t){return t.classList.remove(e)}),l=t.hide=a("hidden"),c=t.show=u("hidden");t.toggleVisibility=(0,i.curry)(function(e,t){return(e?c:l)(t)}),t.toggleClass=(0,i.curry)(function(e,t,n){n.classList[t?"add":"remove"](e)}),t.createElement=function(e){var t=e.tag,n=e.id,i=e.classes,r=e.attributes,o=document.createElement(t);return n&&(o.id=n),i&&i.forEach(function(e){o.classList.add(e)}),r&&Object.keys(r).forEach(function(e){o.setAttribute(e,r[e])}),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.curry=function(e){var t=e.length;return function n(){var i=Array.prototype.slice.call(arguments,0);return i.length>=t?e.apply(null,i):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,i.concat(e))}}},r=(t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},t.forEach=i(function(e,t){t.forEach(e)}),t.map=i(function(e,t){return t.map(e)}),t.filter=i(function(e,t){return t.filter(e)})),o=(t.some=i(function(e,t){return t.some(e)}),t.contains=i(function(e,t){return t.indexOf(e)!=-1}));t.without=i(function(e,t){return r(function(t){return!o(t,e)},t)}),t.inverseBooleanString=function(e){return("true"!==e).toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Eventful=function(){return{listeners:{},on:function(e,t,n){var i={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(i),this},trigger:function(e,t){return(this.listeners[e]||[]).every(function(e){return e.listener.call(e.scope||this,t)!==!1})},propagate:function(e,t,n){var i=this;e.forEach(function(e){return t.on(e,function(t){return i.trigger(n||e,t)})})}}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"init",value:function(t){e.dictionary=t}},{key:"get",value:function(t,n){var i=e.dictionary[t];if(void 0===i)return"Key not found in dictionary: "+t;for(var r in n)n[r]&&(i=i.replace(r,n[r]));return i}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=n(1),a=(0,o.setAttribute)("tabindex","0"),u=(0,o.removeAttribute)("tabindex"),l=(0,s.forEach)(u),c=(0,o.hasAttribute)("tabindex"),d=function(e,t,n){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,{element:t,index:n}),t.dispatchEvent(i)},h=function(e,t){var n=e[t];n&&(l(e),a(n),d("sdk.keyboard.update",n,t))},f=function(e,t){return e===t?0:e+1},p=function(e,t){return 0===e?t:e-1},v=function(){function e(){i(this,e),this.elements=[],this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.boundHandleFocus=this.handleFocus.bind(this),this.selectedIndex=0}return r(e,[{key:"addElement",value:function(e){return this.elements.push(e),e.addEventListener("keydown",this.boundHandleKeyDown),e.addEventListener("focus",this.boundHandleFocus),1===this.elements.length&&a(e),e}},{key:"removeElement",value:function(e){return this.elements=(0,s.without)([e],this.elements),e.removeEventListener("keydown",this.boundHandleKeyDown),e.removeEventListener("focus",this.boundHandleFocus),c(e)&&(u(e),this.selectedIndex=0,h(this.elements,this.selectedIndex)),e}},{key:"handleKeyDown",value:function(e){var t=this.elements.length-1;if(this.hasElement(e.target)){switch(e.which){case 13:case 32:this.select(),e.preventDefault();break;case 35:this.selectedIndex=t,e.preventDefault();break;case 36:this.selectedIndex=0,e.preventDefault();break;case 37:case 38:this.selectedIndex=p(this.selectedIndex,t),e.preventDefault();break;case 39:case 40:this.selectedIndex=f(this.selectedIndex,t),e.preventDefault();break;default:return}h(this.elements,this.selectedIndex);var n=this.elements[this.selectedIndex];d("sdk.keyboard.focus",n,this.selectedIndex)!==!1&&n.focus()}}},{key:"hasElement",value:function(e){return this.elements.indexOf(e)!==-1}},{key:"handleFocus",value:function(e){this.selectedIndex=this.elements.indexOf(e.target)}},{key:"forceSelectedIndex",value:function(e){this.selectedIndex=e,h(this.elements,this.selectedIndex)}},{key:"select",value:function(){void 0!=this.onSelect&&this.onSelect(this.elements[this.selectedIndex]),d("sdk.keyboard.select",this.elements[this.selectedIndex],this.selectedIndex)}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayClickEventAs=void 0;var i=n(1);t.relayClickEventAs=(0,i.curry)(function(e,t,n){return n.addEventListener("click",function(i){t.trigger(e,{element:n,id:n.getAttribute("data-id")},!1),i.stopPropagation()}),n})},function(e,t,n){"use strict";(function(i,r,o){var s,a,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(i,r){"object"===u(t)&&void 0!==e?e.exports=r():(s=r,void 0!==(a="function"==typeof s?s.call(t,n,t,e):s)&&(e.exports=a))}(void 0,function(){function e(e){return"function"==typeof e||"object"===(void 0===e?"undefined":u(e))&&null!==e}function t(e){return"function"==typeof e}function r(e){K=e}function s(e){X=e}function a(){return function(){return i.nextTick(f)}}function l(){return void 0!==Z?function(){Z(f)}:h()}function c(){var e=0,t=new ee(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<Q;e+=2){(0,ie[e])(ie[e+1]),ie[e]=void 0,ie[e+1]=void 0}Q=0}function p(){try{var e=n(33);return Z=e.runOnLoop||e.runOnContext,l()}catch(e){return h()}}function v(e,t){var n=arguments,i=this,r=new this.constructor(b);void 0===r[oe]&&P(r);var o=i._state;return o?function(){var e=n[o-1];X(function(){return O(o,r,e,i._result)})}():k(i,r,e,t),r}function y(e){var t=this;if(e&&"object"===(void 0===e?"undefined":u(e))&&e.constructor===t)return e;var n=new t(b);return I(n,e),n}function b(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return le.error=e,le}}function E(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function T(e,t,n){X(function(e){var i=!1,r=E(n,t,function(n){i||(i=!0,t!==n?I(e,n):C(e,n))},function(t){i||(i=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,M(e,r))},e)}function L(e,t){t._state===ae?C(e,t._result):t._state===ue?M(e,t._result):k(t,void 0,function(t){return I(e,t)},function(t){return M(e,t)})}function A(e,n,i){n.constructor===e.constructor&&i===v&&n.constructor.resolve===y?L(e,n):i===le?(M(e,le.error),le.error=null):void 0===i?C(e,n):t(i)?T(e,n,i):C(e,n)}function I(t,n){t===n?M(t,m()):e(n)?A(t,n,w(n)):C(t,n)}function S(e){e._onerror&&e._onerror(e._result),x(e)}function C(e,t){e._state===se&&(e._result=t,e._state=ae,0!==e._subscribers.length&&X(x,e))}function M(e,t){e._state===se&&(e._state=ue,e._result=t,X(S,e))}function k(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=n,r[o+ue]=i,0===o&&e._state&&X(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?O(n,i,r,o):r(o);e._subscribers.length=0}}function j(){this.error=null}function _(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function O(e,n,i,r){var o=t(i),s=void 0,a=void 0,u=void 0,l=void 0;if(o){if(s=_(i,r),s===ce?(l=!0,a=s.error,s.error=null):u=!0,n===s)return void M(n,g())}else s=r,u=!0;n._state!==se||(o&&u?I(n,s):l?M(n,a):e===ae?C(n,s):e===ue&&M(n,s))}function B(e,t){try{t(function(t){I(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}function D(){return de++}function P(e){e[oe]=de++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[oe]||P(this.promise),W(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):M(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(e){return new N(this,e).promise}function R(e){var t=this;return new t(W(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function U(e){var t=this,n=new t(b);return M(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[oe]=D(),this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&H(),this instanceof z?B(this,e):V())}function G(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z}var Y=void 0;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W=Y,Q=0,Z=void 0,K=void 0,X=function(e,t){ie[Q]=e,ie[Q+1]=t,2===(Q+=2)&&(K?K(f):re())},J="undefined"!=typeof window?window:void 0,$=J||{},ee=$.MutationObserver||$.WebKitMutationObserver,te="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),re=void 0;re=te?a():ee?c():ne?d():void 0===J?p():h();var oe=Math.random().toString(36).substring(16),se=void 0,ae=1,ue=2,le=new j,ce=new j,de=0;return N.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===se&&n<e;n++)this._eachEntry(t[n],n)},N.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r=w(e);if(r===v&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(b);A(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},N.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===se&&(this._remaining--,e===ue?M(i,n):this._result[t]=n),0===this._remaining&&C(i,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;k(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(ue,t,e)})},z.all=F,z.race=R,z.resolve=y,z.reject=U,z._setScheduler=r,z._setAsap=s,z._asap=X,z.prototype={constructor:z,then:v,catch:function(e){return this.then(null,e)}},z.polyfill=G,z.Promise=z,z})}).call(t,n(16),n(6),n(17))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),u=n(5),l=n(3),c=i(l),d=function(){function e(t){r(this,e),o(this,(0,a.Eventful)()),t.name=t.name||"",this.rootElement=this.createElement(t)}return s(e,[{key:"createElement",value:function(e){var t=this,n=document.createElement("div");if(n.className="message "+e.name+" "+e.type+(e.dismissible?" dismissible":""),n.setAttribute("role","alert"),e.dismissible){var i=document.createElement("button");i.className="message-close",i.setAttribute("tabIndex",0),i.setAttribute("aria-label",c.default.get("closeButtonLabel")),n.appendChild(i),i.addEventListener("click",function(){return t.remove()})}var r=document.createElement("div");if(r.className="message-content",r.innerHTML='<h2 class="message-header">'+e.title+"</h2>"+(e.content?'<p class="message-body">'+e.content+"</p>":""),n.appendChild(r),void 0!==e.action){var o=document.createElement("button");o.className="button",o.innerHTML=e.action,n.appendChild(o),(0,u.relayClickEventAs)("action-clicked",this,o)}return n}},{key:"remove",value:function(){var e=this.rootElement.parentNode;e&&e.removeChild(this.rootElement)}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=d},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(27);var o=function(){function t(e){var n=e.apiRootUrl,r=e.contentId;i(this,t),this.contentId=r||0,this.apiRootUrl=n,this.licenseCache={}}return r(t,[{key:"setup",value:function(){return this.cachedContentTypes=fetch(this.apiRootUrl+"content-type-cache",{method:"GET",credentials:"include"}).then(function(e){return e.json()}).catch(function(e){return{errorCode:"SERVER_ERROR",err:e,success:!1}}).then(this.isValid),this.cachedContentTypes}},{key:"contentTypes",value:function(){return this.cachedContentTypes.then(function(e){return e.libraries})}},{key:"recentlyUsed",value:function(){return this.cachedContentTypes.then(function(e){return e.recentlyUsed})}},{key:"contentType",value:function(e){return this.contentTypes().then(function(t){return t.filter(function(t){return t.machineName===e})[0]})}},{key:"installContentType",value:function(e){return fetch(ns.getAjaxUrl("library-install",{id:e}),{method:"POST",credentials:"include",body:""}).then(function(e){return e.json()}).then(this.rejectIfNotSuccess)}},{key:"uploadContent",value:function(e){return e.append("contentId",this.contentId),fetch(this.apiRootUrl+"library-upload",{method:"POST",credentials:"include",body:e}).then(function(e){return e.json()})}},{key:"getLicenseDetails",value:function(t){var n=this,i=this.licenseCache[t];return i?e.resolve(i):fetch("https://api.h5p.org/v1/licenses/"+t).then(function(e){return e.json()}).then(function(e){return n.licenseCache[t]=e})}},{key:"isValid",value:function(t){return t.errorCode?e.reject(t):e.resolve(t)}},{key:"rejectIfNotSuccess",value:function(t){return e[t.success?"resolve":"reject"](t)}}]),t}();t.default=o}).call(t,n(6))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(22),u=i(a),l=n(25),c=n(21),d=i(c),h=n(19),f=i(h),p=n(2),v=n(3),y=i(v),b=n(7),m=i(b),g=function(){function e(t,n){var i=this;r(this,e);this.services=n,o(this,(0,p.Eventful)()),e.Tabs={ALL:{id:"filter-most-popular",title:y.default.get("contentTypeSectionAll"),eventName:"most-popular"},MY_CONTENT_TYPES:{id:"filter-my-content-types",title:y.default.get("contentTypeSectionMine"),eventName:"my-content-types"}},this.view=new u.default(t),this.searchService=new l.SearchService(this.services),this.contentTypeList=new d.default(t),this.contentTypeDetail=new f.default(t,this.services);var s=document.createElement("div");s.classList.add("content-type-section"),this.rootElement=s,this.rootElement.appendChild(this.contentTypeList.getElement()),this.rootElement.appendChild(this.contentTypeDetail.getElement()),this.view.getElement().appendChild(this.rootElement),this.propagate(["select","update-content-type-list"],this.contentTypeList),this.propagate(["select","modal"],this.contentTypeDetail),this.propagate(["reload"],this.view),this.view.on("search",this.search,this),this.view.on("menu-selected",this.closeDetailView,this),this.view.on("menu-selected",this.applySearchFilter,this),this.view.on("menu-selected",this.clearInputField,this),this.view.on("menu-selected",this.updateDisplaySelected,this),this.view.on("menu-selected",this.removeMessages,this),this.view.on("previous",function(){return i.contentTypeList.view.previous()}),this.view.on("next",function(){return i.contentTypeList.view.next()}),this.view.on("use",function(){i.contentTypeList.view.isHidden()?i.view.search():i.contentTypeList.view.useCurrent()}),this.contentTypeList.on("row-selected",this.showDetailView,this),this.contentTypeList.on("row-selected",this.view.clearSelection,this.view),this.contentTypeDetail.on("close",this.goBackToListView,this),this.contentTypeDetail.on("select",this.closeDetailView,this),this.contentTypeDetail.on("installed-content-type",function(){i.services.setup(),i.services.contentTypes().then(function(e){i.contentTypeList.refreshContentTypes(e)})}),Object.keys(e.Tabs).forEach(function(t){return i.view.addMenuItem(e.Tabs[t])}),this.view.initMenu(),this.selectDefaultMenuItem()}return s(e,[{key:"loaded",value:function(){this.view.loaded()}},{key:"handleError",value:function(e){var t={type:"error"};e.errorCode&&"SERVER_ERROR"!==e.errorCode?t.title=e.message:(t.title=y.default.get("errorCommunicatingHubTitle"),t.content=y.default.get("errorCommunicatingHubContent")),this.view.displayMessage(t)}},{key:"selectDefaultMenuItem",value:function(){var t=this;this.services.contentTypes().then(function(n){var i=n.filter(function(e){return e.installed});t.view.selectMenuItem(i.length?e.Tabs.MY_CONTENT_TYPES:e.Tabs.ALL)})}},{key:"search",value:function(t){var n=this,i=t.query;this.contentTypeList.resetList(),this.view.selectMenuItem(e.Tabs.ALL),this.searchService.search(i).then(function(e){return n.contentTypeList.update(e)})}},{key:"updateDisplaySelected",value:function(e){this.view.setDisplaySelected(e.element.innerText)}},{key:"applySearchFilter",value:function(t){var n=this;switch(t.choice){case e.Tabs.ALL.eventName:var i=["restricted","popularity"];this.searchService.sortOn(i).then(function(e){return n.contentTypeList.update(e)});break;case e.Tabs.MY_CONTENT_TYPES.eventName:this.searchService.applyFilters(["restricted","installed"]).then(function(e){return(0,l.multiSort)(e,["title"])}).then(function(e){return n.searchService.sortOnRecent(e)}).then(function(e){n.contentTypeList.update(e),e.length||n.displayNoLibrariesWarning()})}}},{key:"clearInputField",value:function(t){t.id!==e.Tabs.ALL.id&&this.view.clearInputField()}},{key:"displayNoLibrariesWarning",value:function(){if(!this.noLibrariesMessage){var e=new m.default({type:"warning",dismissible:!0,title:y.default.get("warningNoContentTypesInstalled"),content:y.default.get("warningChangeBrowsingToSeeResults")}),t=e.getElement();t.classList.add("content-type-section-no-libraries-warning"),this.noLibrariesMessage=t}this.rootElement.appendChild(this.noLibrariesMessage)}},{key:"removeMessages",value:function(){this.noLibrariesMessage&&this.noLibrariesMessage.parentNode&&this.noLibrariesMessage.parentNode.removeChild(this.noLibrariesMessage)}},{key:"showDetailView",value:function(e){var t=this,n=e.id;this.contentTypeDetail.loadById(n),this.contentTypeDetail.show(),this.contentTypeList.hide(),this.view.typeAheadEnabled=!1,this.view.removeDeactivatedStyleFromMenu(),setTimeout(function(){t.contentTypeDetail.focus()},300)}},{key:"closeDetailView",value:function(){this.contentTypeDetail.isHidden()||(this.contentTypeDetail.hide(),this.contentTypeList.show(),this.view.typeAheadEnabled=!0,this.view.addDeactivatedStyleToMenu())}},{key:"goBackToListView",value:function(){var e=this;this.closeDetailView(),setTimeout(function(){e.contentTypeList.focus()},300)}},{key:"focusSearchBar",value:function(){this.view.focusSearchBar()}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.querySelector(".next"),n=e.querySelector(".previous"),i=e.querySelector(".close"),r=new l.default,o={currentImage:!1};return k(t,function(){return C(e,t,o.currentImage+1)}),j(t,h.BACKWARD,function(){return L(n,i)}),j(t,h.FORWARD,function(){return L(i,n)}),k(n,function(){return C(e,n,o.currentImage-1)}),j(n,h.BACKWARD,function(){return L(i,t)}),j(n,h.FORWARD,function(){return L(t,i)}),k(i,function(){return T(e)}),j(i,h.BACKWARD,function(){return L(t,n)}),j(i,h.FORWARD,function(){return L(n,t)}),e.addEventListener("click",function(t){t.target===e&&T(e)}),e.addEventListener("keyup",function(t){if(t.which===d.ESC)t.preventDefault(),T(e);else if(t.which===d.LEFT_ARROW)0!==o.currentImage&&E(e,o.currentImage-1);else if(t.which===d.RIGHT_ARROW){var n=(0,s.querySelectorAll)(".imagelightbox-image",e);o.currentImage!==n.length-1&&E(e,o.currentImage+1)}}),new MutationObserver((0,a.forEach)(_(e,o,r))).observe(e,{subtree:!1,childList:!1,attributes:!0,attributeOldValue:!0,attributeFilter:[c]}),e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=r;var s=n(0),a=n(1),u=n(4),l=i(u),c="data-show",d={TAB:9,ENTER:13,SHIFT:16,SPACE:32,ESC:27,LEFT_ARROW:37,RIGHT_ARROW:39},h={FORWARD:0,BACKWARD:1},f=function(e){return e.classList.add("active")},p=function(e){e.classList.remove("active"),e.removeAttribute("aria-live")},v=(0,s.setAttribute)("aria-live","polite"),y=function(e){e.tabIndex=0,e.removeAttribute("aria-disabled")},b=function(e){e.tabIndex=-1,e.setAttribute("aria-disabled","true")},m=(0,s.hasAttribute)("aria-disabled"),g=function(e,t){return(t?b:y)(e)},w=function(e,t){return(t?p:f)(e)},E=(0,a.curry)(function(e,t){return(0,s.setAttribute)("data-show",t,e)}),T=function(e){e.removeAttribute(c),e.dispatchEvent(new Event("lightbox-hidden"))},L=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)if(t[i].tabIndex!==-1)return t[i].focus()},A=function(e,t){for(var n=e.parentNode.children,i=0;i<n.length;i++){var r=n[i];r!==e&&(t?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true"))}},I=void 0,S=function(e,t){var n=(0,s.querySelectorAll)(".imagelightbox-image",e),i=e.querySelector(".imagelightbox-progress"),r=e.querySelector(".previous"),o=e.querySelector(".next"),a=e.querySelector(".close");if(n.forEach(function(e){return p(e)}),null!==t.currentImage){var u=e.querySelector(".imagelightbox-image:nth-child("+(t.currentImage+1)+")");f(u),v(u)}I||(I=i.innerText),i.innerText=I.replace(":num",t.currentImage+1).replace(":total",n.length),w(r,!n.length),w(o,!n.length),g(r,0===t.currentImage),g(o,t.currentImage===n.length-1);var l=e.classList.contains("active");w(e,null===t.currentImage),A(e,null===t.currentImage),l||setTimeout(function(){a.focus()},20)},C=function(e,t,n){m(t)||E(e,n)},M=function(e,t,n){e.addEventListener("keydown",function(e){t.indexOf(e.which)!==-1&&(n(),e.preventDefault())})},k=function(e,t){e.addEventListener("click",t),M(e,[d.ENTER,d.SPACE],t)},x={},j=function(e,t,n){e.addEventListener("keydown",function(e){x[e.which]=!0,e.which===d.TAB&&(x[d.SHIFT]?t===h.BACKWARD&&(n(),e.preventDefault()):t===h.FORWARD&&(n(),e.preventDefault()))}),e.addEventListener("keyup",function(e){delete x[e.which]})},_=(0,a.curry)(function(e,t,n,i){if("attributes"===i.type&&i.attributeName===c){var r=parseInt(i.target.getAttribute(c));S(e,o(t,{currentImage:isNaN(r)?null:r}))}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new a.default,n='[role="heading"] [aria-controls][aria-expanded]';t.onSelect=function(e){return(0,u.toggleAttribute)("aria-expanded",e)},(0,o.initCollapsible)(e,function(e,t){return(0,u.toggleVisibility)(e,t)},n),(0,u.querySelectorAll)(n,e).forEach(function(e){return t.addElement(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(12),s=n(4),a=i(s),u=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initCollapsible=void 0;var i=n(0),r=(0,i.attributeEquals)("aria-expanded","true");t.initCollapsible=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.toggleVisibility,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[aria-controls][aria-expanded]";(0,i.querySelectorAll)(n,e).forEach(function(n){var o=n.getAttribute("aria-controls"),s=e.querySelector("#"+o);new MutationObserver(function(){return t(r(n),s)}).observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-expanded"]}),n.addEventListener("click",function(){return(0,i.toggleAttribute)("aria-expanded",n)}),t(r(n),s)})}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjI1Ij4NCiAgPGRlZnM+DQogICAgPHN0eWxlPg0KICAgICAgLmNscy0xIHsNCiAgICAgIGZpbGw6IG5vbmU7DQogICAgICB9DQoNCiAgICAgIC5jbHMtMiB7DQogICAgICBmaWxsOiAjYzZjNmM3Ow0KICAgICAgfQ0KDQogICAgICAuY2xzLTMsIC5jbHMtNCB7DQogICAgICBmaWxsOiAjZmZmOw0KICAgICAgfQ0KDQogICAgICAuY2xzLTMgew0KICAgICAgb3BhY2l0eTogMC43Ow0KICAgICAgfQ0KICAgIDwvc3R5bGU+DQogIDwvZGVmcz4NCiAgPHRpdGxlPmNvbnRlbnQgdHlwZSBwbGFjZWhvbGRlcl8yPC90aXRsZT4NCiAgPGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+DQogICAgPGcgaWQ9ImNvbnRlbnRfdHlwZV9wbGFjZWhvbGRlci0xX2NvcHkiIGRhdGEtbmFtZT0iY29udGVudCB0eXBlIHBsYWNlaG9sZGVyLTEgY29weSI+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTEiIHdpZHRoPSI0MDAiIGhlaWdodD0iMjI1Ii8+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTIiIHg9IjExMi41MSIgeT0iNDMuNDEiIHdpZHRoPSIxNzYuOTYiIGhlaWdodD0iMTM1LjQ1IiByeD0iMTAiIHJ5PSIxMCIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxMzYuNjYiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNTEuNDkiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNjYuMSIgY3k9IjYxLjk4IiByPSI0LjgxIi8+DQogICAgICA8ZyBpZD0iX0dyb3VwXyIgZGF0YS1uYW1lPSImbHQ7R3JvdXAmZ3Q7Ij4NCiAgICAgICAgPGcgaWQ9Il9Hcm91cF8yIiBkYXRhLW5hbWU9IiZsdDtHcm91cCZndDsiPg0KICAgICAgICAgIDxwYXRoIGlkPSJfQ29tcG91bmRfUGF0aF8iIGRhdGEtbmFtZT0iJmx0O0NvbXBvdW5kIFBhdGgmZ3Q7IiBjbGFzcz0iY2xzLTQiIGQ9Ik0yNjMuMjgsOTUuMjFDMjYwLDkyLjA3LDI1NSw5MS41LDI0OC40Myw5MS41SDIyN3Y4SDE5OS41bC0yLjE3LDEwLjI0YTI1Ljg0LDI1Ljg0LDAsMCwxLDExLjQ4LTEuNjMsMTkuOTMsMTkuOTMsMCwwLDEsMTQuMzksNS41NywxOC4yNiwxOC4yNiwwLDAsMSw1LjUyLDEzLjYsMjMuMTEsMjMuMTEsMCwwLDEtMi44NCwxMS4wNSwxOC42NSwxOC42NSwwLDAsMS04LjA2LDcuNzksOSw5LDAsMCwxLTQuMTIsMS4zN0gyMzZ2LTIxaDEwLjQyYzcuMzYsMCwxMi44My0xLjYxLDE2LjQyLTVzNS4zOC03LjQ4LDUuMzgtMTMuNDRDMjY4LjIyLDEwMi4yOSwyNjYuNTcsOTguMzUsMjYzLjI4LDk1LjIxWm0tMTUsMTdjLTEuNDIsMS4yMi0zLjksMS4yNS03LjQxLDEuMjVIMjM2di0xNGg1LjYyYTkuNTcsOS41NywwLDAsMSw3LDIuOTMsNy4wNSw3LjA1LDAsMCwxLDEuODUsNC45MkE2LjMzLDYuMzMsMCwwLDEsMjQ4LjMxLDExMi4yNVoiLz4NCiAgICAgICAgICA8cGF0aCBpZD0iX1BhdGhfIiBkYXRhLW5hbWU9IiZsdDtQYXRoJmd0OyIgY2xhc3M9ImNscy00IiBkPSJNMjAyLjksMTE5LjExYTguMTIsOC4xMiwwLDAsMC03LjI4LDQuNTJsLTE2LTEuMjIsNy4yMi0zMC45MkgxNzR2MjJIMTUzdi0yMkgxMzZ2NTZoMTd2LTIxaDIxdjIxaDIwLjMxYy0yLjcyLDAtNS0xLjUzLTctM2ExOS4xOSwxOS4xOSwwLDAsMS00LjczLTQuODMsMjMuNTgsMjMuNTgsMCwwLDEtMy02LjZsMTYtMi4yNmE4LjExLDguMTEsMCwxLDAsNy4yNi0xMS43MloiLz4NCiAgICAgICAgPC9nPg0KICAgICAgPC9nPg0KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB4PSIxNzcuNjYiIHk9IjU3LjY2IiB3aWR0aD0iOTIuMjgiIGhlaWdodD0iOS4zOCIgcng9IjMuNSIgcnk9IjMuNSIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(23),u=i(a),l=n(9),c=i(l),d=n(26),h=i(d),f=n(8),p=(i(f),n(3)),v=i(p),y=n(2),b=function(){function e(t,n,i){var s=this;r(this,e);var a=this;o(this,(0,y.Eventful)()),v.default.init(i),this.services=n,this.setupServices(),this.contentTypeSection=new c.default(t,this.services),this.uploadSection=new h.default(t,this.services),this.view=new u.default(t),this.propagate(["select"],this.contentTypeSection),this.propagate(["upload"],this.uploadSection),this.on("select",this.setPanelTitle,this),this.on("select",this.view.togglePanelOpen.bind(this.view,!1)),this.on("upload",this.view.togglePanelOpen.bind(this.view,!1)),this.view.on("tab-change",function(e){"upload"!==e.id||e.element.getAttribute("aria-selected")||a.uploadSection.clearMessages(),s.view.setSectionType(e)}),this.view.on("panel-change",function(e){var t=e.element;s.view.togglePanelOpen(),s.postponedResize(),"true"===t.getAttribute("aria-expanded")&&s.contentTypeSection.focusSearchBar()},this),this.contentTypeSection.on("reload",this.setupServices,this),this.contentTypeSection.on("reload",this.contentTypeSection.selectDefaultMenuItem.bind(this.contentTypeSection,!1)),this.contentTypeSection.on("modal",this.showModal,this),this.on("clear-upload-form",function(){s.uploadSection.clearUploadForm()}),this.initTabPanel(t)}return s(e,[{key:"postponedResize",value:function(){var e=this;setTimeout(function(){return e.trigger("resized")},150)}},{key:"showModal",value:function(e){var t=e.element,n=this.view.getElement();n.insertBefore(t,n.firstChild),t.classList.remove("hidden")}},{key:"setupServices",value:function(){var e=this;this.services.setup().then(function(){e.contentTypeSection.loaded()}).catch(function(t){e.contentTypeSection.handleError(t)})}},{key:"getContentType",value:function(e){return this.services.contentType(e)}},{key:"setPanelTitle",value:function(e){var t=this,n=e.id;this.getContentType(n).then(function(e){var i=e.title;return t.view.setTitle(i?i:n)})}},{key:"initTabPanel",value:function(e){var t=this,n=e.sectionId,i=void 0===n?"content-types":n,r=[{title:v.default.get("createContentTabLabel"),id:"content-types",content:this.contentTypeSection.getElement()},{title:v.default.get("uploadTabLabel"),id:"upload",content:this.uploadSection.getElement()}];r.filter(function(e){return e.id===i}).forEach(function(e){return e.selected=!0}),r.forEach(function(e){return t.view.addTab(e)}),this.view.initTabPanel()}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=b},function(e,t){},function(e,t,n){"use strict";function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){y&&p&&(y=!1,p.length?v=p.concat(v):b=-1,v.length&&u())}function u(){if(!y){var e=o(a);y=!0;for(var t=v.length;t;){for(p=v,v=[];++b<t;)p&&p[b].run();b=-1,t=v.length}p=null,y=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,h,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,v=[],y=!1,b=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new l(e,t)),1!==v.length||y||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),u=n(1),l=n(2),c=n(11),d=i(c),h=n(30),f=i(h),p=n(29),v=i(p),y=n(10),b=(i(y),n(5)),m=n(13),g=i(m),w=n(3),E=i(w),T=n(7),L=i(T),A=n(24),I=i(A),S="data-id",C=285,M="imagelightbox",k=(0,a.setAttribute)("disabled",""),x=(0,a.removeAttribute)("disabled"),j=function(e){return e.focus()},_=function(e,t){return e.addEventListener("click",t)},O=function(){function e(t){var n=this;r(this,e),o(this,(0,l.Eventful)()),this.rootElement=this.createView(),this.buttonBar=this.rootElement.querySelector(".button-bar"),this.useButton=this.buttonBar.querySelector(".button-use"),this.updateButton=this.buttonBar.querySelector(".button-update"),this.updatingButton=this.buttonBar.querySelector(".button-updating"),this.installButton=this.buttonBar.querySelector(".button-install"),this.installingButton=this.buttonBar.querySelector(".button-installing"),this.buttons=(0,a.querySelectorAll)(".button",this.buttonBar),this.imageLightbox=new I.default,this.imageLightbox.on("lightbox-hidden",function(){n.focusedImage&&(n.focusedImage.focus(),delete n.focusedImage)}),this.contentContainer=this.rootElement.querySelector(".container"),this.image=this.rootElement.querySelector(".content-type-image"),this.title=this.rootElement.querySelector(".text-details .title"),this.ownerElement=this.rootElement.querySelector(".owner"),this.description=this.rootElement.querySelector(".text-details .small"),this.demoButton=this.rootElement.querySelector(".demo-button"),this.carousel=this.rootElement.querySelector(".carousel"),this.carouselList=this.carousel.querySelector("ul"),this.panel=this.rootElement.querySelector(".panel"),this.licensePanelHeading=this.rootElement.querySelector(".license-panel-heading"),this.licensePanelBody=this.rootElement.querySelector("#license-panel"),this.container=this.rootElement.querySelector(".container"),this.licenseButton=function(){return n.licensePanelBody.querySelector(".short-license-read-more")},this.showLicense=(0,u.curry)(function(e,t){return n.trigger("show-license-dialog",{licenseId:e})}),(0,d.default)(this.panel),(0,v.default)(this.carousel),(0,b.relayClickEventAs)("close",this,this.rootElement.querySelector(".back-button")),(0,b.relayClickEventAs)("select",this,this.useButton),(0,b.relayClickEventAs)("install",this,this.updateButton),(0,b.relayClickEventAs)("install",this,this.installButton)}return s(e,[{key:"createView",value:function(){var e="content-type-detail-view-title",t=document.createElement("div");return t.className="content-type-detail",t.id="content-type-detail",t.setAttribute("role","region"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-labelledby",e),t.innerHTML='\n      <button type="button" class="back-button icon-arrow-thick" aria-label="'+E.default.get("contentTypeBackButtonLabel")+'" tabindex="0"></button>\n      <div class="container">\n        <div class="image-wrapper">\n          <img class="img-responsive content-type-image" src="'+g.default+'">\n        </div>\n        <div class="text-details">\n          <h2 id="'+e+'" class="title" tabindex="-1"></h2>\n          <div class="owner"></div>\n          <p class="small"></p>\n          <a class="button demo-button" target="_blank" href="#">\n            '+E.default.get("contentTypeDemoButtonLabel")+'\n          </a>\n        </div>\n      </div>\n      <div class="carousel" role="region" data-size="5" data-prevent-resize-loop="true" aria-label="'+E.default.get("screenshots")+'">\n        <nav class="scroller">\n          <ul></ul>\n        </nav>\n        <button type="button" class="carousel-button next hidden" disabled aria-label="'+E.default.get("nextImage")+'">\n          <span class="icon-arrow-thick"></span>\n        </button>\n        <button type="button" class="carousel-button previous hidden" disabled aria-label="'+E.default.get("previousImage")+'">\n          <span class="icon-arrow-thick"></span>\n        </button>\n      </div>\n      <hr />\n      <div class="button-bar">\n        <button type="button" class="button button-inverse-primary button-install hidden" data-id="">\n          <span class="icon-arrow-thick"></span>\n          '+E.default.get("contentTypeInstallButtonLabel")+'\n        </button>\n        <button type="button" class="button button-inverse-primary button-installing hidden">\n          <span class="icon-loading-search icon-spin"></span>\n          '+E.default.get("contentTypeInstallingButtonLabel")+'\n        </button>\n        <button type="button" class="button button-inverse-primary button-update">\n          '+E.default.get("contentTypeUpdateButtonLabel")+'\n        </button>\n        <button type="button" class="button button-inverse-primary button-updating">\n          <span class="icon-loading-search icon-spin"></span>\n          '+E.default.get("contentTypeUpdatingButtonLabel")+'\n        </button>\n        <button type="button" class="button button-primary button-use" data-id="">\n          '+E.default.get("contentTypeUseButtonLabel")+'\n        </button>\n      </div>\n      <dl class="panel panel-default license-panel">\n        <dt aria-level="2" role="heading" class="license-panel-heading">\n          <div role="button" aria-expanded="false" aria-controls="license-panel">\n            <span class="icon-accordion-arrow"></span>\n            <span>'+E.default.get("contentTypeLicensePanelTitle")+'</span>\n          </div>\n        </dt>\n        <dl id="license-panel" role="region" class="hidden">\n          <div class="panel-body"></div>\n        </dl>\n      </dl>',t}},{key:"setInstallMessage",value:function(e){var t=e.success,n=void 0===t||t,i=e.message;this.installMessage&&this.installMessage.remove(),this.installMessage=new L.default({dismissible:!0,type:n?"info":"error",name:"install-message",title:i}),this.rootElement.insertBefore(this.installMessage.getElement(),this.buttonBar)}},{key:"setScreenshots",value:function(e){var t=this;e.forEach(function(e,n){t.imageLightbox.addImage(e);var i=document.createElement("li");i.className="slide",i.innerHTML='<img src="'+e.url+'"\n              alt="'+e.alt+'"\n              data-index="'+n+'"\n              class="img-responsive"\n              aria-controls="'+M+'-detail"\n        />';var r=i.querySelector("img");r.addEventListener("click",function(){t.imageLightbox.show(n),t.trigger("modal",{element:t.imageLightbox.getElement()}),t.focusedImage=r}),r.addEventListener("keydown",function(e){32!==e.which&&13!==e.which||(t.imageLightbox.show(n),t.trigger("modal",{element:t.imageLightbox.getElement()}),t.focusedImage=r,e.preventDefault())}),t.carouselList.appendChild(i)})}},{key:"reset",value:function(){this.installButton.removeAttribute("disabled"),this.messageViewElement&&(this.container.removeChild(this.messageViewElement),delete this.messageViewElement),this.buttons.forEach(function(e){e.classList.add("hidden")}),this.removeMessages(),this.resetLicenses(),(0,a.querySelectorAll)("li",this.carouselList).forEach((0,a.removeChild)(this.carouselList)),this.imageLightbox.reset()}},{key:"apiVersionUnsupported",value:function(){this.installButton.setAttribute("disabled","disabled"),this.setMessage("contentTypeUnsupportedApiVersionTitle","contentTypeUnsupportedApiVersionContent")}},{key:"setImage",value:function(e){this.image.setAttribute("src",e||g.default)}},{key:"setId",value:function(e){this.installButton.setAttribute(S,e),this.useButton.setAttribute(S,e),this.updateButton.setAttribute(S,e)}},{key:"setTitle",value:function(e){this.title.innerHTML=""+e}},{key:"setDescription",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&t.length>C?(this.description.innerHTML=this.ellipsis(C,t,!0)+'<button type="button" class="read-more link">'+E.default.get("readMore")+"</button>",this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return e.toggleDescriptionExpanded(t)}),this.descriptionExpanded=!1):this.description.innerText=t}},{key:"toggleDescriptionExpanded",value:function(e){var t=this;this.descriptionExpanded=!this.descriptionExpanded,this.descriptionExpanded?(this.description.innerHTML=""+this.ellipsis(C,e)+this.ellipsisRest(C,e)+'\n                                    <button type="button" class="read-less link">'+E.default.get("readLess")+"</button>",this.description.querySelector(".part-two").focus()):(this.description.innerHTML=this.ellipsis(C,e,!0)+'\n                                    <button type="button" class="read-more link">'+E.default.get("readMore")+"</button>",this.description.querySelector(".part-one").focus()),this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return t.toggleDescriptionExpanded(e)})}},{key:"ellipsis",value:function(e,t,n){return n?'<span class="part-one" tabindex="-1">'+t.substr(0,e)+"...</span>":'<span class="part-one" tabindex="-1">'+t.substr(0,e)+"</span>"}},{key:"ellipsisRest",value:function(e,t){return'<span class="part-two" tabindex="-1">'+t.substr(e)+"</span>"}},{key:"resetLicenses",value:function(){var e=this.licensePanelBody.querySelector(".panel-body");(0,a.querySelectorAll)("dt,dl",e).forEach((0,a.removeChild)(e))}},{key:"setLicense",value:function(e){this.license=e;var t=this.licensePanelBody.querySelector(".panel-body");if(e){var n=document.createElement("div");n.className="short-license-info",n.innerHTML="\n        <h3>"+e.id+'</h3>\n        <button type="button" class="short-license-read-more icon-info-circle" aria-label="'+E.default.get("readMore")+'"></button>\n        <p>'+E.default.get("licenseDescription")+'</p>\n        <ul class="ul small">\n          <li>'+E.default.get(e.attributes.canHoldLiable?"licenseCanHoldLiable":"licenseCannotHoldLiable")+"</li>\n          "+(e.attributes.useCommercially?"<li>"+E.default.get("licenseCanUseCommercially")+"</li>":"")+"\n          "+(e.attributes.modifiable?"<li>"+E.default.get("licenseCanModify")+"</li>":"")+"\n          "+(e.attributes.distributable?"<li>"+E.default.get("licenseCanDistribute")+"</li>":"")+"\n          "+(e.attributes.sublicensable?"<li>"+E.default.get("licenseCanSublicense")+"</li>":"")+"\n          "+(e.attributes.mustIncludeCopyright?"<li>"+E.default.get("licenseMustIncludeCopyright")+"</li>":"")+"\n          "+(e.attributes.mustIncludeLicense?"<li>"+E.default.get("licenseMustIncludeLicense")+"</li>":"")+"\n        </ul>",t.innerText="",t.appendChild(n),_(this.licenseButton(),this.showLicense(e.id))}else t.innerText=E.default.get("licenseUnspecified")}},{key:"createLicenseDialog",value:function(e){var t=this,n="license-dialog-title",i=document.createElement("div");i.innerHTML='\n      <div class="modal fade show" role="dialog">\n        <div class="modal-dialog license-dialog" role="document">\n          <div class="modal-content">\n            <div class="modal-header" tabindex="-1"  aria-labelledby="'+n+'">\n              <button type="button" class="close icon-close" data-dismiss="modal" aria-label="'+E.default.get("close")+'"></button>\n              <h5 class="modal-title" id="'+n+'">'+E.default.get("licenseModalTitle")+'</h5>\n              <h5 class="modal-subtitle">'+E.default.get("licenseModalSubtitle")+'</h5>\n            </div>\n            <div class="modal-body loading">\n              <dl class="panel panel-simple"></dl>\n            </div>\n          </div>\n        </div>\n      </div>';var r=i.querySelector(".modal-body"),o=r.querySelector(".panel"),s="content-type-detail-license",u=document.createElement("dt");u.setAttribute("role","heading"),u.setAttribute("aria-level","2"),u.innerHTML='<div role="button" aria-expanded="true" aria-controls="'+s+'">\n        <span class="icon-accordion-arrow"></span>\n        <span class="license-title">'+this.license.id+"</span>\n      </div>";var l=document.createElement("dd");l.id=s,l.className="hidden",l.setAttribute("role","region"),l.innerHTML='\n      <div class="panel-body">\n        <div class="license-description"></div>\n      </div>',(0,a.hide)(l);var c=u.querySelector(".license-title"),h=l.querySelector(".license-description");return o.appendChild(u),o.appendChild(l),e.then(function(e){c.innerHTML=e.id,h.innerHTML=e.description.replace(":year",(new Date).getFullYear()).replace(":owner",t.owner)}).catch(function(e){r.innerHTML=E.default.get("licenseFetchDetailsFailed")}).then(function(){return(0,a.removeClass)("loading",r)}),(0,f.default)(i,function(){return t.trigger("hide-license-dialog")}),(0,d.default)(o),i}},{key:"focusLicenseDetailsButton",value:function(){j(this.licenseButton())}},{key:"setOwner",value:function(e){this.owner=e,this.ownerElement.innerHTML=e?E.default.get("contentTypeOwner",{":owner":e}):""}},{key:"setExample",value:function(e){this.demoButton.setAttribute("href",e||"#"),(0,a.toggleVisibility)(!!e,this.demoButton)}},{key:"setIsInstalled",value:function(e){this.useButton.classList[e?"remove":"add"]("hidden"),this.installButton.classList[e?"add":"remove"]("hidden")}},{key:"setIsUpdatePossible",value:function(e,t){this.updateButton.classList[e?"remove":"add"]("hidden"),e&&(this.updateMessage=new L.default({type:"warning",title:E.default.get("warningUpdateAvailableTitle",{":contentType":t||E.default.get("theContentType")}),content:E.default.get("warningUpdateAvailableBody")}),this.rootElement.insertBefore(this.updateMessage.getElement(),this.contentContainer))}},{key:"removeMessages",value:function(){this.updateMessage&&this.updateMessage.remove(),this.installMessage&&this.installMessage.remove()}},{key:"setMessage",value:function(e,t){var n=new L.default({type:"warning",title:E.default.get(e),content:E.default.get(t)});this.messageViewElement=n.getElement(),this.container.insertBefore(this.messageViewElement,this.container.childNodes[0])}},{key:"setIsRestricted",value:function(e,t){e?(k(this.useButton),k(this.installButton),t?this.setMessage("contentTypeRestricted","contentTypeRestrictedDesc"):this.setMessage("contentTypeNotInstalled","contentTypeNotInstalledDesc")):(x(this.useButton),x(this.installButton))}},{key:"toggleSpinner",value:function(e){this[e?"updateButton":"updatingButton"].classList.contains("hidden")?(this.installButton.classList[e?"add":"remove"]("hidden"),this.installingButton.classList[e?"remove":"add"]("hidden")):(this.updateButton.classList[e?"add":"remove"]("hidden"),this.updatingButton.classList[e?"remove":"add"]("hidden"))}},{key:"hide",value:function(){this.rootElement.classList.remove("show")}},{key:"show",value:function(){this.rootElement.classList.add("show")}},{key:"focus",value:function(){var e=this;setTimeout(function(){return e.title.focus()},200)}},{key:"isHidden",value:function(){return this.rootElement.classList.contains("hidden")}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=O},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(18),u=i(a),l=n(2),c=n(3),d=i(c),h=n(28),f=function(){function e(t,n){var i=this;r(this,e),o(this,(0,l.Eventful)()),this.apiVersion=t.apiVersion,this.services=n,this.view=new u.default(t),this.view.on("install",function(e){var t=e.id;i.services.contentType(t).then(function(e){return i.install({id:e.machineName,title:e.title,installed:e.installed})})},this),this.view.on("show-license-dialog",this.showLicenseDialog,this),this.view.on("hide-license-dialog",function(){return i.view.focusLicenseDetailsButton()}),this.propagate(["close","select","modal"],this.view)}return s(e,[{key:"hide",value:function(){this.view.hide()}},{key:"show",value:function(){this.view.show()}},{key:"focus",value:function(){this.view.focus()}},{key:"isHidden",value:function(){return this.view.isHidden()}},{key:"loadById",value:function(e){this.services.contentType(e).then(this.update.bind(this))}},{key:"showLicenseDialog",value:function(e){var t=e.licenseId,n=this.view.createLicenseDialog(this.services.getLicenseDetails(t));this.trigger("modal",{element:n}),setTimeout(function(){return n.querySelector(".modal-header").focus()},10)}},{key:"install",value:function(e){var t=this,n=e.id,i=e.installed,r=e.title;return this.view.toggleSpinner(!0),this.services.installContentType(n).then(function(e){t.trigger("installed-content-type"),t.view.removeMessages(),t.view.toggleSpinner(!1),t.view.setIsInstalled(!0),t.view.setIsUpdatePossible(!1);var n=i?"contentTypeUpdateSuccess":"contentTypeInstallSuccess";t.view.setInstallMessage({message:d.default.get(n,{":contentType":r})})}).catch(function(e){t.view.toggleSpinner(!1);var n=e.errorCode?e:{success:!1,errorCode:"RESPONSE_FAILED",message:d.default.get("contentTypeInstallError",{":contentType":r})};t.view.setInstallMessage(n),console.error("Installation error",e)})}},{key:"update",value:function(e){var t=this;this.view.reset(),this.view.setId(e.machineName),this.view.setTitle(e.title||e.machineName),this.view.setDescription(e.description),this.view.setImage(e.icon),this.view.setExample(e.example),this.view.setOwner(e.owner),this.view.setIsInstalled(e.installed),this.view.setLicense(e.license),this.view.setIsRestricted(e.restricted,e.installed);var n=e.installed&&!e.isUpToDate&&!e.restricted;this.view.setIsUpdatePossible(n,e.title||e.machineName);var i=this.apiVersion.major>e.h5pMajorVersion||this.apiVersion.major===e.h5pMajorVersion&&this.apiVersion.minor>=e.h5pMinorVersion;e.installed||i||this.view.apiVersionUnsupported(),e.screenshots&&(0,h.preloadImages)(e.screenshots).then(function(e){return t.view.setScreenshots(e)})}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(n(1),n(0)),u=n(2),l=n(5),c=n(13),d=i(c),h=n(4),f=i(h),p=n(3),v=i(p),y=(0,a.hasAttribute)("tabindex"),b=(0,a.getAttribute)("data-id"),m=function(){function e(t){var n=this;r(this,e),o(this,(0,u.Eventful)()),this.apiVersion=t.apiVersion,this.keyboard=new f.default,this.keyboard.onSelect=function(e){n.trigger("row-selected",{element:e,id:b(e)})},this.rootElement=document.createElement("ul"),this.rootElement.setAttribute("role","list"),this.rootElement.className="content-type-list"}return s(e,[{key:"hideFromKeyboard",value:function(){this.rootElement.setAttribute("aria-hidden","true")}},{key:"showToKeyboard",value:function(){this.rootElement.removeAttribute("aria-hidden")}},{key:"focus",value:function(){var e=(0,a.querySelector)('li[tabindex="0"]',this.rootElement);e&&e.focus()}},{key:"scrollToTop",value:function(){this.rootElement.scrollTop=0}},{key:"removeAllRows",value:function(){for(;this.rootElement.hasChildNodes();){var e=this.rootElement.lastChild;this.keyboard.removeElement(e),this.rootElement.removeChild(e)}}},{key:"addRow",value:function(e){var t=this,n=this.createContentTypeRow(e,this);n.addEventListener("click",function(e){t.trigger("row-selected",{element:n,id:n.getAttribute("data-id")},!1),e.stopPropagation();var i=n.parentNode.childNodes;(0,a.nodeListToArray)(i).forEach(function(e){e.removeAttribute("tabindex")}),n.setAttribute("tabindex","0")}),this.rootElement.appendChild(n),this.keyboard.addElement(n)}},{key:"createContentTypeRow",value:function(e,t){var n=this.rootElement.querySelectorAll("li").length,i="content-type-row-title-"+n,r="content-type-row-description-"+n,o={text:v.default.get("contentTypeUseButtonLabel"),cls:"button-primary",icon:""},s={text:v.default.get("contentTypeGetButtonLabel"),cls:"button-inverse-primary button-install",icon:"icon-arrow-thick"},a=e.installed?o:s,u=e.title||e.machineName,c=e.summary||"",h=e.icon||d.default,f=e.restricted||!e.installed&&!(this.apiVersion.major>e.h5pMajorVersion||this.apiVersion.major===e.h5pMajorVersion&&this.apiVersion.minor>=e.h5pMinorVersion)?'disabled="disabled"':"",p=!e.isUpToDate&&e.installed&&!e.restricted,b=document.createElement("li");b.id="content-type-"+e.machineName,b.classList.add("media"),b.setAttribute("data-id",e.machineName),b.setAttribute("aria-labelledby",i),b.setAttribute("aria-describedby",r),b.innerHTML='\n      <div class="media-left">\n        <img class="media-object" src="'+h+'" alt="'+u+" "+v.default.get("contentTypeIconAltText")+'" />\n      </div>\n\n      <div class="media-body">\n        <div id="'+i+'" class="h4 media-heading">'+u+'</div>\n\n        <button type="button" aria-describedby="'+i+'" class="button '+a.cls+'" data-id="'+e.machineName+'" tabindex="-1" '+f+'>\n          <span class="'+a.icon+'"></span>\n          '+a.text+'\n        </button>\n\n        <div class="content-type-update-info'+(p?"":" hidden")+'">\n          '+v.default.get("contentTypeUpdateAvailable")+'\n        </div>\n\n        <div id="'+r+'" class="description">'+c+"</div>\n      </div>\n   ";var m=b.querySelector(".button-primary");m&&(0,l.relayClickEventAs)("select",t,m);var g=b.querySelector(".button");return new MutationObserver(function(e){var t=e[0].target;g.setAttribute("tabindex",y(t)?"0":"-1")}).observe(b,{attributes:!0,attributeOldValue:!0,attributeFilter:["tabindex"]}),b}},{key:"getElement",value:function(){return this.rootElement}},{key:"previous",value:function(){var e=(0,a.querySelector)('li[tabindex="0"]',this.rootElement);e.removeAttribute("tabindex");var t=e.previousSibling?e.previousSibling:e.parentNode.lastChild;t!==e&&(t.setAttribute("tabindex",0),this.scrollIntoView(t))}},{key:"next",value:function(){var e=(0,a.querySelector)('li[tabindex="0"]',this.rootElement);e.removeAttribute("tabindex");var t=e.nextSibling?e.nextSibling:e.parentNode.firstChild;t!==e&&(t.setAttribute("tabindex",0),this.scrollIntoView(t))}},{key:"useCurrent",value:function(){var e=(0,a.querySelector)('li[tabindex="0"]',this.rootElement),t=(0,a.querySelector)(".button-primary",e);if(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}},{key:"scrollIntoView",value:function(e){if(e.offsetTop<this.rootElement.scrollTop)return void(this.rootElement.scrollTop=e.offsetTop-parseFloat(window.getComputedStyle(this.rootElement).paddingTop));var t=e.offsetTop+e.clientHeight;t>this.rootElement.scrollTop+this.rootElement.clientHeight&&(this.rootElement.scrollTop=t-this.rootElement.clientHeight+parseFloat(window.getComputedStyle(this.rootElement).paddingBottom))}},{key:"isHidden",value:function(){return!!this.rootElement.getAttribute("aria-hidden")}}]),e}();t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(20),u=i(a),l=n(2),c=function(){function e(t){r(this,e),o(this,(0,l.Eventful)()),this.view=new u.default(t),this.propagate(["row-selected","select"],this.view),this.currentContentTypes=[]}return s(e,[{key:"hide",value:function(){this.view.hideFromKeyboard()}},{key:"show",value:function(){this.view.showToKeyboard()}},{key:"focus",value:function(){this.view.focus()}},{key:"resetList",value:function(){this.view.scrollToTop()}},{key:"update",value:function(e){this.view.removeAllRows(),e.forEach(this.view.addRow,this.view),this.trigger("update-content-type-list",{}),this.currentContentTypes=e}},{key:"refreshContentTypes",value:function(e){var t=this,n=e.filter(function(e){for(var n=0;n<t.currentContentTypes.length;n++)if(t.currentContentTypes[n].machineName===e.machineName)return!0});this.update(n)}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(7),u=i(a),l=n(0),c=(n(5),n(31)),d=i(c),h=n(2),f=n(3),p=i(f),v=n(9),y=(i(v),function(){function e(t){var n=this;r(this,e),o(this,(0,h.Eventful)()),this.typeAheadEnabled=!0,this.currentlySelected="",this.menuId="content-type-filter",this.currentMenuId=this.menuId+"-a11y-desc-current",this.rootElement=this.createElement(t),this.menu=this.rootElement.querySelector("nav"),this.menubar=this.rootElement.querySelector(".navbar-nav"),this.inputField=this.rootElement.querySelector('[role="search"] input'),this.displaySelected=this.rootElement.querySelector(".navbar-toggler-selected"),this.searchBar=this.rootElement.querySelector("#hub-search-bar");var i=this.rootElement.querySelector('[role="search"] .input-group-addon'),s=void 0;this.inputField.addEventListener("input",function(e){n.typeAheadEnabled&&!s&&(s=setTimeout(function(){n.trigger("search",{element:n.searchBar,query:n.searchBar.value}),s=null},40))}),this.inputField.addEventListener("focus",function(e){s=setTimeout(function(){s=null},40)}),this.inputField.addEventListener("blur",function(e){clearTimeout(s)}),this.inputField.addEventListener("keydown",function(e){switch(e.which){case 13:n.trigger("use"),e.preventDefault();break;case 38:n.trigger("previous"),e.preventDefault();break;case 40:n.trigger("next"),e.preventDefault()}}),i.addEventListener("click",function(){n.trigger("search",{element:n.searchBar,query:n.searchBar.value})})}return s(e,[{key:"createElement",value:function(e){var t=p.default.get("contentTypeSearchFieldPlaceholder"),n=document.createElement("div");return n.className="content-type-section-view loading",n.innerHTML='\n      <div class="menu-group">\n        <nav  role="menubar" class="navbar">\n          <div class="navbar-header">\n            <span class="navbar-toggler-selected" tabindex="0" aria-haspopup="true" role="button" aria-controls="'+this.menuId+'" aria-expanded="false"></span>\n            <span class="navbar-brand">'+p.default.get("contentTypeSectionTitle")+'</span>\n          </div>\n\n          <ul id="'+this.menuId+'" class="navbar-nav">\n            <span id="'+this.currentMenuId+'" style="display: none">'+p.default.get("currentMenuSelected")+'</span>\n          </ul>\n        </nav>\n\n        <div class="input-group" role="search">\n          <input id="hub-search-bar" class="form-control form-control-rounded" type="text" aria-label="'+t+'" placeholder="'+t+'" />\n          <div class="input-group-addon icon-search"></div>\n        </div>\n      </div>',n}},{key:"displayMessage",value:function(e){var t=this;e.action=p.default.get("reloadButtonLabel");var n=new u.default(e),i=n.getElement();n.on("action-clicked",function(){t.rootElement.classList.remove("error"),t.rootElement.classList.add("loading"),i.parentNode.removeChild(i),setTimeout(function(){return t.trigger("reload")},500)}),this.rootElement.classList.remove("loading"),this.rootElement.classList.add("error"),this.rootElement.appendChild(n.getElement())}},{key:"loaded",value:function(){this.rootElement.classList.remove("loading"),this.rootElement.classList.add("loaded")}},{key:"addMenuItem",value:function(e){var t=e.title,n=e.id,i=e.eventName,r=this,o=document.createElement("li");return o.setAttribute("role","menuitem"),o.setAttribute("data-id",n),o.innerText=t,o.addEventListener("click",function(){r.selectMenuItem({id:n,eventName:i})}),o.addEventListener("keydown",function(e){13!==e.which&&32!==e.which||(r.selectMenuItem({id:n,eventName:i}),e.preventDefault())}),this.menubar.appendChild(o),o}},{key:"clearInputField",value:function(){this.inputField.value=""}},{key:"clearSelection",value:function(){this.currentlySelected=""}},{key:"setDisplaySelected",value:function(e){this.displaySelected.innerText=e}},{key:"selectMenuItem",value:function(e){var t=e.id,n=e.eventName;if(this.currentlySelected!==n){var i=(0,l.querySelectorAll)('[role="menuitem"]',this.menubar),r=this.menubar.querySelector('[role="menuitem"][data-id="'+t+'"]');r&&(i.forEach(function(e){e.classList.remove("selected"),e.removeAttribute("aria-describedby")}),r.classList.add("selected"),r.setAttribute("aria-describedby",this.currentMenuId),this.trigger("menu-selected",{element:r,id:t,choice:n}))}}},{key:"initMenu",value:function(){var e=this;this.on("menu-selected",function(t){"most-popular"===t.choice&&e.focusSearchBar(),e.currentlySelected=t.choice},this),(0,d.default)(this.menu)}},{key:"addDeactivatedStyleToMenu",value:function(){this.menu.classList.remove("deactivated")}},{key:"removeDeactivatedStyleFromMenu",value:function(){this.menu.classList.add("deactivated")}},{key:"focusSearchBar",value:function(){var e=this;setTimeout(function(){return e.searchBar.focus()},200)}},{key:"getElement",value:function(){return this.rootElement}},{key:"search",value:function(){this.trigger("search",{element:this.searchBar,query:this.searchBar.value})}}]),e}());t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(11),u=i(a),l=n(32),c=i(l),d=(n(1),n(0)),h=n(2),f=n(5),p=n(3),v=i(p),y="data-id",b=function(){function e(t){var n=this;r(this,e),o(this,(0,h.Eventful)()),this.rootElement=this.createPanel(t),this.panel=this.rootElement.querySelector(".panel"),this.toggler=this.rootElement.querySelector("[aria-expanded][aria-controls]"),this.selectedName=this.rootElement.querySelector(".h5p-hub-selected"),this.tablist=this.rootElement.querySelector('[role="tablist"]'),this.tabContainerElement=this.rootElement.querySelector(".tab-panel"),(0,u.default)(this.panel),this.setTitle(v.default.get("hubPanelLabel")),(0,f.relayClickEventAs)("panel-change",this,this.toggler),this.toggler.addEventListener("keyup",function(e){32!==e.which&&13!==e.which||(n.trigger("panel-change",{element:n.toggler,id:n.toggler.getAttribute("data-id")},!1),e.preventDefault())})}return s(e,[{key:"setTitle",value:function(e){this.selectedName.innerText=e}},{key:"createPanel",value:function(e){var t=(e.title,e.sectionId),n=void 0===t?"content-types":t,i=e.expanded,r=void 0!==i&&i,o={h5pHub:"H5P Hub."},s=document.createElement("section");s.className+="h5p-hub h5p-sdk";var a="panel"+(r?" open":"");return s.innerHTML='\n      <div class="'+a+'">\n        <div class="h5p-hub-client-drop-down" aria-level="1" role="heading">\n          <span role="button" class="icon-hub-icon" aria-expanded="'+r+'" aria-controls="panel-body-'+n+'">\n          <span class="h5p-hub-description">'+o.h5pHub+'</span>\n          <span class="h5p-hub-selected"></span>\n        </span>\n        </div>\n        <div id="panel-body-'+n+'" role="region" class="'+(r?"":"hidden")+'">\n          <div class="tab-panel">\n            <nav>\n              <ul role="tablist"></ul>\n            </nav>\n          </div>\n        </div>\n      </div>',s}},{key:"togglePanelOpen",value:function(e){return void 0===e&&(e=!this.panel.classList.contains("open")),this.panel.classList[e?"add":"remove"]("open"),this.toggler.setAttribute("aria-expanded",""+e),!e}},{key:"addTab",value:function(e){var t=e.title,n=e.id,i=e.content,r=e.selected,o=void 0!==r&&r,s="tab-"+n,a="tab-panel-"+n,u=document.createElement("li");u.className+="tab",u.id=s,u.setAttribute("aria-controls",a),u.setAttribute("aria-selected",o.toString()),u.setAttribute(y,n),u.setAttribute("role","tab"),u.innerText=t,(0,f.relayClickEventAs)("tab-change",this,u);var l=document.createElement("div");l.id=a,l.className+="tabpanel",l.setAttribute("aria-labelledby",s),l.setAttribute("role","tabpanel"),l.appendChild(i),(0,d.toggleClass)("hidden",!o,l),this.tablist.appendChild(u),this.tabContainerElement.appendChild(l),o&&this.trigger("tab-change",{element:u,id:n})}},{key:"appendChild",value:function(e){return this.rootElement.appendChild(e)}},{key:"initTabPanel",value:function(){(0,c.default)(this.tabContainerElement)}},{key:"setSectionType",value:function(e){var t=e.id,n="h5p-section-";this.panel.className=this.removeWordByPrefix(n,this.panel.className),this.panel.classList.add(n+t,"panel")}},{key:"removeWordByPrefix",value:function(e,t){return t.split(/ +/).filter(function(t){return 0!==t.indexOf(e)}).join(" ")}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),u=n(0),l=n(10),c=i(l),d=n(3),h=i(d),f="imagelightbox",p=function(){function e(){var t=this;r(this,e),o(this,(0,a.Eventful)()),this.rootElement=this.createView(),this.imageLightboxList=this.rootElement.querySelector("."+f+"-list"),(0,c.default)(this.rootElement),this.rootElement.addEventListener("lightbox-hidden",function(){t.trigger("lightbox-hidden")})}return s(e,[{key:"createView",value:function(){var e=(0,u.createElement)({tag:"div",id:f+"-detail",classes:[f],attributes:{role:"dialog","aria-label":h.default.get("imageLightboxTitle")}});return e.innerHTML='\n      <div class="'+f+'-inner">\n        <div class="'+f+'-button close" role="button" tabindex="0" aria-label="'+h.default.get("close")+'"></div>\n        <ol class="'+f+'-list"></ol>\n        <div class="'+f+'-progress">'+h.default.get("imageLightBoxProgress")+'</div>\n        <div class="'+f+'-button next" role="button" aria-disabled="true" aria-label="'+h.default.get("nextImage")+'"></div>\n        <div class="'+f+'-button previous" role="button" aria-disabled="true" aria-label="'+h.default.get("previousImage")+'"></div>\n      </div>',e}},{key:"addImage",value:function(e){var t=e.url,n=e.alt,i=(0,u.createElement)({tag:"li",classes:[f+"-image"]});i.innerHTML='<img class="img-responsive" src="'+t+'" alt="'+n+'">',this.imageLightboxList.appendChild(i)}},{key:"show",value:function(e){this.rootElement.setAttribute("data-show",e)}},{key:"reset",value:function(){this.imageLightboxList.innerHTML=""}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.multiSort=t.SearchService=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=(t.SearchService=function(){function e(t){i(this,e),this.services=t}return r(e,[{key:"search",value:function(e){return this.services.contentTypes().then(h(e))}},{key:"sortOn",value:function(e){return this.services.contentTypes().then(function(t){return s(t,e)})}},{key:"sortOnRecent",value:function(e){return this.services.recentlyUsed().then(function(t){return 0!==t.length?m(e,t):e})}},{key:"applyFilters",value:function(e){return this.services.contentTypes().then(function(t){return a(t,e)})}}]),e}(),t.multiSort=function(e,t){var n=e.map(function(e){return e.hasOwnProperty("score")&&e.hasOwnProperty("contentType")?e:{contentType:e,score:1}});return t=Array.isArray(t)?t:[t],n.sort(function(e,n){return l(e,n,t)}).map(function(e){return e.contentType})}),a=function e(t,n){return n.length?e(u(t,n.shift()),n):t},u=function(e,t){switch(t){case"restricted":return e.filter(function(e){return!e.restricted});case"installed":return e.filter(function(e){return e.installed})}},l=function(e,t,n){switch(n[0]){case"restricted":return c(e,t,n.slice(1));case"popularity":return d(e,t,n[0],n.slice(1));case"title":return d(e,t,n[0],n.slice(1));default:return f(e,t)}},c=function(e,t,n){return!e.contentType.restricted==!t.contentType.restricted?n.length?l(e,t,n):0:e.contentType.restricted?1:t.contentType.restricted?-1:void 0},d=function(e,t,n,i){return e.contentType.hasOwnProperty(n)?t.contentType.hasOwnProperty(n)?e.contentType[n]>t.contentType[n]?1:e.contentType[n]<t.contentType[n]?-1:i.length?l(e,t,i):0:-1:1},h=(0,o.curry)(function(e,t){return""==e?t:s(t.map(function(t){return{contentType:t,score:p(e,t)}}).filter(function(e){return e.score>0}),["restricted","default"])}),f=function(e,t){return!e.contentType.installed&&t.contentType.installed?1:e.contentType.installed&&!t.contentType.installed?-1:t.score!==e.score?t.score-e.score:t.contentType.popularity-e.contentType.popularity},p=function(e,t){var n=e.split(" ").filter(function(e){return""!==e}),i=n.map(function(e){return v(e,t)});return i.indexOf(0)>-1?0:i.reduce(function(e,t){return e+t},0)},v=function(e,t){return e=e.trim(),y(e,t.title)?100:y(e,t.summary)?5:y(e,t.description)?5:b(e,t.keywords)?5:y(e,t.machineName)?1:0},y=function(e,t){return void 0!==t&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},b=function(e,t){return void 0!==t&&""!==e&&t.some(function(t){return y(e,t)})},m=function(e,t){var n=[],i=[];return e.forEach(function(e){t.indexOf(e.machineName.toString())>-1?n.push(e):i.push(e)}),n.sort(function(e,n){var i=t.indexOf(e.machineName.toString()),r=t.indexOf(n.machineName.toString());return i===-1&&r===-1?0:i!==-1&&r===-1?-1:i===-1&&r!==-1?1:i!==-1&&r!==-1?i<r?-1:1:void 0}),n.concat(i)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),u=i(a),l=n(2),c=n(7),d=i(c),h=(n(0),function(){function e(t,n){r(this,e),o(this,(0,l.Eventful)()),this.services=n;var i=this.renderUploadForm();this.initUploadForm(i);var s=document.createElement("div");s.appendChild(i),this.rootElement=s}return s(e,[{key:"renderUploadForm",value:function(){var e=document.createElement("div");return e.innerHTML='\n      <div class="upload-wrapper">\n        <div class="message-wrapper"></div>\n        <div class="upload-throbber hidden" aria-label="'+u.default.get("uploadingThrobber")+'" tabindex="-1"></div>\n        <h1 class="upload-instruction-header">'+u.default.get("uploadInstructionsTitle")+'</h1>\n        <div class="upload-form">\n          <input class="upload-path" placeholder="'+u.default.get("uploadPlaceholder")+'" tabindex="-1" readonly/>\n          <button type="button" class="button use-button">Use</button>\n          <div class="input-wrapper">\n            <input type="file" accept=".h5p" aria-hidden="true"/>\n            <button type="button" class="button upload-button" tabindex="0">'+u.default.get("uploadFileButtonLabel")+'</button>\n          </div>\n        </div>\n        <p class="upload-instruction-description">'+u.default.get("uploadInstructionsContent")+"</p>\n      </div>\n    ",e}},{key:"initUploadForm",value:function(e){this.uploadInput=e.querySelector('.upload-wrapper input[type="file"]'),this.uploadButton=e.querySelector(".upload-button"),this.uploadPath=e.querySelector(".upload-path"),this.useButton=e.querySelector(".use-button"),this.uploadThrobber=e.querySelector(".upload-throbber"),this.messageWrapper=e.querySelector(".message-wrapper"),this.initUploadInput(),this.initUseButton(),this.initUploadButton()}},{key:"initUploadInput",value:function(){var e=this;this.uploadInput.onchange=function(t){if(0===this.value.length)return void e.clearUploadForm();e.clearMessages(),e.uploadPath.value=this.value.replace("C:\\fakepath\\",""),e.uploadButton.textContent=u.default.get("uploadFileButtonChangeLabel"),"h5p"!==e.getFileExtension(this.value)?(e.renderWrongExtensionMessage(),e.useButton.classList.remove("visible")):(e.useButton.classList.add("visible"),e.uploadPath.removeAttribute("placeholder"),t.stopPropagation(),e.useButton.focus())},this.uploadPath.addEventListener("click",function(){e.uploadInput.click()})}},{key:"initUseButton",value:function(){var e=this;this.useButton.addEventListener("click",function(){e.uploadFile()}),this.useButton.onkeydown=function(t){13!==t.which&&32!==t.which||e.uploadFile()}}},{key:"uploadFile",value:function(){var e=this;this.setIsUploading(!0);var t=this,n=new FormData;n.append("h5p",t.uploadInput.files[0]),t.services.uploadContent(n).then(function(n){if(e.setIsUploading(!1),!n.success)return t.renderUploadValidationFailedMessage(),void t.clearUploadForm();t.services.setup(),t.trigger("upload",n)}).catch(function(){t.renderServerErrorMessage(),t.clearUploadForm(),t.setIsUploading(!1)})}},{key:"initUploadButton",value:function(){var e=this;this.uploadButton.onclick=function(){e.uploadInput.click()},this.uploadButton.onkeydown=function(t){13!==t.which&&32!==t.which||e.uploadInput.click()}}},{key:"clearUploadForm",value:function(){this.uploadInput.value="",this.uploadPath.value=u.default.get("uploadPlaceholder"),this.uploadButton.textContent=u.default.get("uploadFileButtonLabel"),this.useButton.classList.remove("visible")}},{key:"clearMessages",value:function(){this.removeAllChildren(this.rootElement.querySelector(".message-wrapper"))}},{key:"setIsUploading",value:function(e){e?(this.uploadThrobber.classList.remove("hidden"),this.useButton.setAttribute("disabled","true"),this.uploadButton.setAttribute("disabled","true"),this.uploadPath.setAttribute("disabled","true"),this.uploadThrobber.focus()):(this.uploadThrobber.classList.add("hidden"),this.useButton.removeAttribute("disabled"),this.uploadButton.removeAttribute("disabled"),this.uploadPath.removeAttribute("disabled"))}},{key:"getFileExtension",value:function(e){return e.replace(/^.*\./,"")}},{key:"renderWrongExtensionMessage",value:function(){this.renderMessage({type:"error",title:u.default.get("h5pFileWrongExtensionTitle"),content:u.default.get("h5pFileWrongExtensionContent")})}},{key:"renderUploadValidationFailedMessage",value:function(){this.renderMessage({type:"error",title:u.default.get("h5pFileValidationFailedTitle"),content:u.default.get("h5pFileValidationFailedContent")})}},{key:"renderServerErrorMessage",value:function(){this.renderMessage({type:"error",title:u.default.get("h5pFileUploadServerErrorTitle"),content:u.default.get("h5pFileUploadServerErrorContent")})}},{key:"renderMessage",value:function(e){this.messageView&&this.messageView.getElement().parentNode&&this.messageView.getElement().parentNode.removeChild(this.messageView.getElement()),this.messageView=new d.default(e),this.prepend(this.messageWrapper,this.messageView.getElement())}},{key:"prepend",value:function(e,t){e.insertBefore(t,e.firstChild)}},{key:"removeAllChildren",value:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}},{key:"getElement",value:function(){return this.rootElement}}]),e}());t.default=h},function(e,t,n){"use strict";(function(e){!function(t){function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(t){if(t.bodyUsed)return e.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new e(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&w(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!E(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return e.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return e.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||e.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return e.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return T.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function y(e){var t=new o;return e.replace(/\r?\n[\t ]+/," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function b(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},E=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];this.map[e]=r?r+","+t:t},o.prototype.delete=function(e){delete this.map[n(e)]},o.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},o.prototype.set=function(e,t){this.map[n(e)]=i(t)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var L=[301,302,303,307,308];b.redirect=function(e,t){if(L.indexOf(t)===-1)throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.Headers=o,t.Request=p,t.Response=b,t.fetch=function(t,n){return new e(function(e,i){var r=new p(t,n),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL"),e(new b("response"in o?o.response:o.responseText,t))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)}).call(t,n(6))},function(e,t,n){"use strict";(function(e){function n(t){return new e(function(e,n){var i=new Image;i.src=t.url,i.onload=function(){return e(t)},i.onerror=function(){return n(t)},i.complete&&e(t)})}function i(t){var i=null,r=t.map(n).map(function(e){return e.catch(function(e){return i})});return e.all(r).then(function(e){return e.filter(function(e){return e!==i})})}Object.defineProperty(t,"__esModule",{value:!0}),t.preloadImage=n,t.preloadImages=i}).call(t,n(6))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.querySelector(".next"),n=e.querySelector(".previous"),i=new l.default,r=parseInt(e.getAttribute(d))||5,o=E(window.innerWidth,r),u={displayCount:o,position:0};(0,s.querySelectorAll)("[aria-controls]",e).filter(function(e){return null!==e}).forEach(function(e){return i.addElement(e)}),t.addEventListener("click",function(){return b(e,u,t,-1)}),n.addEventListener("click",function(){return b(e,u,n,1)}),e.addEventListener("sdk.keyboard.focus",function(e){return e.preventDefault()}),e.addEventListener("sdk.keyboard.update",g(e,u)),new MutationObserver((0,a.forEach)(m(e,u,i))).observe(e,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[d]});var c=void 0;return window.addEventListener("resize",function(t){c||(c=setTimeout(function(){u.ignoreResize?u.ignoreResize=!1:w(e,u),c=null},40))}),y(e,u),e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=r;var s=n(0),a=n(1),u=n(4),l=i(u),c=[{width:576,size:2},{width:768,size:3},{width:992,size:4}],d="data-size",h=(0,s.setAttribute)("disabled",""),f=(0,s.removeAttribute)("disabled"),p=function(e,t,n){t?v(e)&&f(e):v(e)||(h(e),n&&n.focus())},v=(0,s.hasAttribute)("disabled"),y=function(e,t,n){var i=e.querySelector(".previous"),r=e.querySelector(".next"),o=e.querySelector("ul"),a=o.childElementCount;o.style.width=100/t.displayCount*a+"%",o.style.marginLeft=t.position*(100/t.displayCount)+"%",(0,s.querySelectorAll)("li",e).forEach(function(e){return e.style.width=100/a+"%"}),[i,r].forEach((0,s.toggleVisibility)(t.displayCount<a)),p(r,t.position>t.displayCount-a,n?i:null),p(i,t.position<0,n?r:null),"true"===e.dataset.preventResizeLoop&&(t.ignoreResize=!0)},b=function(e,t,n,i){if(!v(n)){t.position+=i;var r=e.querySelector('[aria-controls][tabindex="0"]');r.removeAttribute("tabindex");r.parentElement[i<0?"nextSibling":"previousSibling"].firstChild.setAttribute("tabindex","0"),y(e,t,!0)}},m=(0,a.curry)(function(e,t,n,i){if("childList"===i.type){var r=(0,s.nodeListToArray)(i.removedNodes).filter((0,s.classListContains)("slide")).map((0,s.querySelector)("img")).filter(function(e){return null!==e}).map(function(e){return n.removeElement(e)}),a=(0,s.nodeListToArray)(i.addedNodes).filter((0,s.classListContains)("slide")).map((0,s.querySelector)("img")).filter(function(e){return null!==e}).map(function(e){return n.addElement(e)});(r.length>0||a.length>0)&&y(e,o(t,{position:0}))}}),g=(0,a.curry)(function(e,t,n){var i=n.detail.index,r=t.position*-1,o=r+t.displayCount-1,s=i<r,a=i>o,u=s||a,l=function(){return e.querySelector('img[tabindex="0"]').focus()};u&&e.addEventListener("transitionend",l,{once:!0,bubbles:!0}),s?(t.position=i*-1,y(e,t)):a?(t.position=t.position-(i-o),y(e,t)):"true"===e.dataset.preventResizeLoop&&(t.ignoreResize=!0),u||l()}),w=function(e,t){var n=parseInt(e.getAttribute(d))||5,i=E(window.innerWidth,n),r=e.querySelector('[aria-controls][tabindex="0"]');if(r){r.removeAttribute("tabindex");r.parentElement.parentElement.firstChild.firstChild.setAttribute("tabindex","0")}y(e,o(t,{displayCount:i,position:0}))},E=function(e,t){return c.reduce(function(t,n){return Math.min(e<n.width?n.size:1/0,t)},t)}},function(e,t,n){"use strict";function i(e,t){var n=(0,o.querySelectorAll)('[data-dismiss="modal"]',e);(0,o.hide)(e);var i=function(){(0,o.hide)(e),t()};n.forEach(function(e){return e.addEventListener("click",i)}),e.addEventListener("keydown",a(e,i))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(1),o=n(0),s=function(e){return(0,o.querySelectorAll)('a[href],link[href],button,input,select,textarea,[tabindex="0"]',e)},a=(0,r.curry)(function(e,t,n){var i=n.srcElement||n.target;switch(n.which){case 27:t(),n.preventDefault();break;case 9:var r=s(e);if(r.length>0){var o=r.length-1;i===r[0]&&n.shiftKey?(r[o].focus(),n.preventDefault()):i===r[o]&&(r[0].focus(),n.preventDefault())}}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,o.querySelectorAll)('[role="menuitem"]',e),n=e.querySelector("[aria-controls][aria-expanded]"),i=new l.default;i.onSelect=function(e){h(t,e),d(n)},t.forEach(function(e){e.addEventListener("click",function(e){var r=e.target,o=t.indexOf(r);h(t,r),d(n),i.forceSelectedIndex(o)}),i.addElement(e)}),n.addEventListener("keydown",function(e){13!==e.which&&32!==e.which||((0,o.toggleAttribute)("aria-expanded",n),e.preventDefault())}),(0,a.initCollapsible)(e,function(e,t){return(0,o.toggleClass)("collapsed",!e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),s=n(1),a=n(12),u=n(4),l=i(u),c=(0,s.forEach)(function(e){e.classList.remove("selected")}),d=(0,o.setAttribute)("aria-expanded","false"),h=function(e,t){c(e),t.classList.add("selected")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,o.querySelectorAll)('[role="tab"]',e),n=new u.default;n.onSelect=f(t),t.forEach(function(i){h(e,i),i.addEventListener("click",function(e){var i=e.target,r=t.indexOf(i);f(t,i),n.forceSelectedIndex(r)}),n.addElement(i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),s=n(1),a=n(4),u=i(a),l=(0,s.forEach)(o.hide),c=(0,o.attributeEquals)("aria-selected","true"),d=(0,s.forEach)((0,o.removeAttribute)("aria-selected")),h=function(e,t){new MutationObserver(function(){var n=t.getAttribute("aria-controls"),i=e.querySelector("#"+n),r=(0,o.querySelectorAll)('[role="tabpanel"]',e);c(t)&&(l(r),(0,o.show)(i))}).observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-selected"]})},f=(0,s.curry)(function(e,t){d(e),t.setAttribute("aria-selected","true")})},function(e,t){},function(e,t,n){"use strict";n(15),H5P=H5P||{},H5P.HubClient=n(14).default,H5P.HubServices=n(8).default}]);
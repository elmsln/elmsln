webpackJsonp([0,4],{1135:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1135},1136:function(e,t,n){e.exports=n(487)},123:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){this.id=null,this.title=null,this.type="open",this.status=!0,this.created=null,this.startDate=null,this.endDate=null,this.allowLateSubmissions=!0,this.project=null,this.body=null,this.critiqueMethod="none",this.critiquePrivacy=!1,this.metadata={},this.hierarchy={}}return e}()},124:function(e,t,n){"use strict";function i(e){return{type:p.CREATE_PROJECT,payload:e}}function o(e){return{type:p.CREATE_PROJECT_SUCCESS,payload:e}}function s(e){return{type:p.UPDATE_PROJECT,payload:e}}function a(e){return{type:p.UPDATE_PROJECT_SUCCESS,payload:e}}function r(e){return{type:p.DELETE_PROJECT,payload:e}}function c(){return{type:p.LOAD_PROJECTS,payload:{}}}function u(e){return{type:p.LOAD_PROJECTS_SUCCESS,payload:e}}n.d(t,"b",function(){return p}),t.c=i,t.d=o,t.h=s,t.e=a,t.g=r,t.a=c,t.f=u;var p={CREATE_PROJECT:"CREATE_PROJECT",CREATE_PROJECT_SUCCESS:"CREATE_PROJECT_SUCCESS",UPDATE_PROJECT:"UPDATE_PROJECT",UPDATE_PROJECT_SUCCESS:"UPDATE_PROJECT_SUCCESS",DELETE_PROJECT:"DELETE_PROJECT",LOAD_PROJECTS:"LOAD_PROJECTS",LOAD_PROJECTS_SUCCESS:"LOAD_PROJECTS_SUCCESS",LOAD_PERMISSIONS:"LOAD_PERMISSIONS",LOAD_PERMISSIONS_SUCCESS:"LOAD_PERMISSIONS_SUCCESS",MOVE_PROJECT_ASSIGNMENT:"MOVE_PROJECT_ASSIGNMENT"}},171:function(e,t,n){"use strict";var i=n(1),o=n(38),s=n(98),a=n(255),r=n(11);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){this.elmsln=e,this.store=t}return e.prototype.getProjects=function(){var e=this;return this.elmsln.get(s.a.BASE_PATH+"api/v1/cle/projects").map(function(e){return e.json()}).map(function(e){return"undefined"!=typeof e.data?e.data:[]}).map(function(t){return t.map(function(t){return e.convertToProject(t)})})},e.prototype.getProject=function(e){var t=this;return this.elmsln.get(s.a.BASE_PATH+"api/v1/cle/projects/"+e).map(function(e){return e.json().data[0]}).map(function(e){return t.convertToProject(e)})},e.prototype.createProject=function(e){var t=this;return this.elmsln.post(s.a.BASE_PATH+"api/v1/cle/projects/create",e).map(function(e){return e.json().node}).map(function(e){return t.convertToProject(e)})},e.prototype.updateProject=function(e){var t=this;return this.elmsln.put(s.a.BASE_PATH+"api/v1/cle/projects/"+e.id+"/update",e).map(function(e){return e.json().node}).map(function(e){return t.convertToProject(e)})},e.prototype.deleteProject=function(e){return this.elmsln.delete(s.a.BASE_PATH+"api/v1/cle/projects/"+e.id+"/delete").map(function(e){return e.json()})},e.prototype.formatProjects=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.convertToProject(e))}),n},e.prototype.convertToProject=function(e){var t=new a.a;for(var n in t)e[n]&&(t[n]=e[n]);e.id&&(t.id=Number(e.id)),e.nid&&(t.id=Number(e.nid)),e.title&&(t.title=e.title);var i=["startDate","endDate"];return i.forEach(function(e){t[e]&&(t[e]=new Date(1e3*t[e]))}),t},e.prototype.prepareForDrupal=function(e){var t={};return t.type="cle_project",e.title&&(t.title=e.title),e.author&&(t.author=e.author),e.description&&(t.field_project_due_date=e.description),e.startDate&&(t.field_project_due_date.value2=e.startDate),e.endDate&&(t.field_project_due_date.value=e.endDate),t},Object.defineProperty(e.prototype,"userCanEdit",{get:function(){return this.store.select("user").map(function(e){return e.permissions.includes("edit own cle_project content")})},enumerable:!0,configurable:!0}),e=c([n.i(i.Injectable)(),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(p="undefined"!=typeof r.a&&r.a)&&p||Object])],e);var t,p}()},172:function(e,t,n){"use strict";var i=n(1),o=n(38),s=n(453),a=(n.n(s),n(55)),r=n(11);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){this.elmslnService=e,this.store=t,this.loggedIn=!1}return e.prototype.login=function(e,t){s.Cookie.set("basicAuthCredentials",btoa(e+":"+t)),this.elmslnService.login(),this.store.dispatch(n.i(a.a)())},e.prototype.logout=function(){this.elmslnService.logout()},e.prototype.getCurrentUserId=function(){return this.store.select("user").map(function(e){return e.uid})},e=c([n.i(i.Injectable)(),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(p="undefined"!=typeof r.a&&r.a)&&p||Object])],e);var t,p}()},254:function(e,t,n){"use strict";var i=n(1),o=n(238),s=n(98),a=n(38);n.d(t,"a",function(){return u});var r=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.http=e,this.elmslnService=t}return e.prototype.getSubmissionCritiques=function(e){return this.elmslnService.get(s.a.BASE_PATH+"node.json?status=1,type=cle_critique&deep-load-refs=node,user&field_cle_crit_sub_ref="+e).map(function(e){return e.json().list})},e.prototype.createCritique=function(e){console.log("createCritique");var t={};return t={type:"cle_critique",title:"Critique",field_cle_crit_feedback:{value:e.body,format:"student_format"},field_cle_crit_sub_ref:{id:e.submissionId},author:4},this.elmslnService.post(s.a.BASE_PATH+"node.json",t)},e.prototype.deleteCritique=function(e){console.log("unpublish critique");var t=e.nid,n={status:"0"};return this.elmslnService.put(s.a.BASE_PATH+"node/"+t+".json",n)},e=r([n.i(i.Injectable)(),c("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.b&&o.b)&&t||Object,"function"==typeof(u="undefined"!=typeof a.a&&a.a)&&u||Object])],e);var t,u}()},255:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e}()},256:function(e,t,n){"use strict";var i=n(1),o=n(79),s=n(11),a=n(400),r=n(83),c=n(49),u=n(68),p=n(401);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.formBuilder=e,this.store=t,this.submissionService=n,this.submissionType="submission",this.onSubmissionSave=new i.EventEmitter,this.onSubmissionCancel=new i.EventEmitter,this.onFormChanges=new i.EventEmitter,this.formValueChanges=0,this.saveAttempted=!1}return e.prototype.ngOnInit=function(){var e=this,t=this.submission;this.form=this.formBuilder.group(t),this.form.setControl("title",new o.a(this.submission.title,o.b.required)),this.form.valueChanges.subscribe(function(){e.formValueChanges>1&&e.onFormChanges.emit(e.form.dirty),e.formValueChanges++});var n='\n      Saving image \n      <div class="preloader-wrapper small active">\n        <div class="spinner-layer spinner-green-only">\n          <div class="circle-clipper left">\n            <div class="circle"></div>\n          </div><div class="gap-patch">\n            <div class="circle"></div>\n          </div><div class="circle-clipper right">\n            <div class="circle"></div>\n          </div>\n        </div>\n      </div>\n    ';this.store.select(u.e).skip(1).debounceTime(200).distinctUntilChanged(function(e,t){return e===t}).subscribe(function(e){jQuery(".submission-form-image-saving").remove(),e.state===p.c.saving&&Materialize.toast(n,null,"submission-form-image-saving"),e.state===p.c.default&&Materialize.toast("Image uploaded",1500),e.state===p.c.error&&Materialize.toast(e.message,1500)})},e.prototype.ngOnChanges=function(){},e.prototype.onWysiwygInit=function(){this.form.markAsPristine()},e.prototype.onWysiwygImageAdded=function(e){},e.prototype.onImageSave=function(e){switch(e.type){case"saving":this.store.dispatch(n.i(a.b)());break;case"success":this.store.dispatch(n.i(a.c)()),this.addImageAsEvidence(e.image);break;case"error":this.store.dispatch(n.i(a.d)())}},e.prototype.submit=function(){"VALID"===this.form.status?this.onSubmissionSave.emit(this.form.value):(this.saveAttempted=!0,this.form.get("title").status&&alert("The title field is required."))},e.prototype.cancel=function(){this.onSubmissionCancel.emit()},Object.defineProperty(e.prototype,"savable",{get:function(){return this.store.select(u.f)},enumerable:!0,configurable:!0}),e.prototype.addImageAsEvidence=function(e){var t="array"==typeof this.form.value.evidence.images?this.form.value.evidence.images:[];t.push(e.fid),this.form.patchValue({evidence:{images:t}})},f([n.i(i.Input)(),l("design:type","function"==typeof(t="undefined"!=typeof r.a&&r.a)&&t||Object)],e.prototype,"submission",void 0),f([n.i(i.Input)(),l("design:type",String)],e.prototype,"submissionType",void 0),f([n.i(i.Output)(),l("design:type","function"==typeof(d="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&d||Object)],e.prototype,"onSubmissionSave",void 0),f([n.i(i.Output)(),l("design:type","function"==typeof(m="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&m||Object)],e.prototype,"onSubmissionCancel",void 0),f([n.i(i.Output)(),l("design:type","function"==typeof(y="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&y||Object)],e.prototype,"onFormChanges",void 0),e=f([n.i(i.Component)({selector:"app-submission-form",template:n(866),styles:[n(830)]}),l("design:paramtypes",["function"==typeof(g="undefined"!=typeof o.c&&o.c)&&g||Object,"function"==typeof(h="undefined"!=typeof s.a&&s.a)&&h||Object,"function"==typeof(b="undefined"!=typeof c.a&&c.a)&&b||Object])],e);var t,d,m,y,g,h,b}()},257:function(e,t,n){"use strict";function i(e,t){switch(void 0===e&&(e=a),t.type){case o.b.CREATE_SUBMISSION:return{state:s.saving,submissions:e.submissions.concat([t.payload])};case o.b.CREATE_SUBMISSION_SUCCESS:return{state:s.default,submissions:e.submissions.map(function(e){return!e.id&&t.payload.id?Object.assign({},e,t.payload):e})};case o.b.CREATE_SUBMISSION_FAILURE:return{state:s.error,submissions:e.submissions};case o.b.UPDATE_SUBMISSION:return{state:s.saving,submissions:e.submissions.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.b.UPDATE_SUBMISSION_SUCCESS:return{state:s.default,submissions:e.submissions.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.b.DELETE_SUBMISSION:return console.log(e.submissions,t.payload),{state:e.state,submissions:e.submissions.filter(function(e){return e.id!==t.payload.id})};case o.b.LOAD_SUBMISSIONS:return{state:e.state,submissions:[]};case o.b.LOAD_SUBMISSIONS_SUCCESS:return{state:e.state,submissions:t.payload?t.payload:[]};case o.b.CREATE_SUBMISSION_IMAGE:return{state:e.state,submissions:e.submissions};case o.b.CREATE_SUBMISSION_IMAGE_SUCCESS:return{state:e.state,submissions:e.submissions};case o.b.CREATE_SUBMISSION_IMAGE_FAILURE:return{state:e.state,submissions:e.submissions};default:return e}}var o=n(82);n.d(t,"d",function(){return s}),t.a=i,n.d(t,"b",function(){return r}),n.d(t,"c",function(){return c});var s;!function(e){e[e.default=0]="default",e[e.saving=1]="saving",e[e.error=2]="error"}(s||(s={}));var a={state:s.default,submissions:[]},r=function(e){return e.submissions},c=function(e){return e.state}},38:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__angular_http__=__webpack_require__(238),__WEBPACK_IMPORTED_MODULE_2__app_settings__=__webpack_require__(98),__WEBPACK_IMPORTED_MODULE_3_ng2_cookies_ng2_cookies__=__webpack_require__(453),__WEBPACK_IMPORTED_MODULE_3_ng2_cookies_ng2_cookies___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_ng2_cookies_ng2_cookies__),__WEBPACK_IMPORTED_MODULE_4__ngrx_store__=__webpack_require__(11);__webpack_require__.d(exports,"a",function(){return ElmslnService});var __decorate=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ElmslnService=function(){function ElmslnService(e,t){this.http=e,this.store=t}return ElmslnService.prototype.createAuthorizationHeader=function(e){e.append("Authorization","Basic "+btoa(__WEBPACK_IMPORTED_MODULE_2__app_settings__.a.USERNAME+":"+__WEBPACK_IMPORTED_MODULE_2__app_settings__.a.USERNAME))},ElmslnService.prototype.createCSRFTokenHeader=function(e){this.store.select("user").map(function(e){return e.token}).subscribe(function(t){return e.append("x-csrf-token",t),e})},ElmslnService.prototype.login=function(){var e=new __WEBPACK_IMPORTED_MODULE_1__angular_http__.a;return this.createAuthorizationHeader(e),this.createCSRFTokenHeader(e),!0},ElmslnService.prototype.logout=function(){return __WEBPACK_IMPORTED_MODULE_3_ng2_cookies_ng2_cookies__.Cookie.delete("basicAuthCredentials"),!0},ElmslnService.prototype.get=function(e){var t=new __WEBPACK_IMPORTED_MODULE_1__angular_http__.a;return this.createAuthorizationHeader(t),this.http.get(e,{headers:t})},ElmslnService.prototype.post=function(e,t){var n=new __WEBPACK_IMPORTED_MODULE_1__angular_http__.a;return n.append("Accept","application/json"),n.append("Content-Type","application/json"),this.createAuthorizationHeader(n),this.createCSRFTokenHeader(n),console.log("Post headers ",n),this.http.post(e,t,{headers:n})},ElmslnService.prototype.put=function(e,t){var n=new __WEBPACK_IMPORTED_MODULE_1__angular_http__.a;return this.createAuthorizationHeader(n),this.createCSRFTokenHeader(n),this.http.put(e,t,{headers:n})},ElmslnService.prototype.delete=function(e){var t=new __WEBPACK_IMPORTED_MODULE_1__angular_http__.a;return this.createAuthorizationHeader(t),this.createCSRFTokenHeader(t),this.http.delete(e,{headers:t})},ElmslnService.prototype.getUserProfile=function(){return this.get(__WEBPACK_IMPORTED_MODULE_2__app_settings__.a.BASE_PATH+"api/v1/elmsln/user").map(function(e){return e.json()})},ElmslnService.prototype.createImage=function(e){var t={name:"default-image-name",type:"image",file_wrapper:"public",data:e};return this.post(__WEBPACK_IMPORTED_MODULE_2__app_settings__.a.BASE_PATH+"api/v1/elmsln/files/create",t).map(function(e){return e.json().file})},ElmslnService.prototype.evalCallbacks=function(object){try{if(object.environment.callbacks){var callbacks=object.environment.callbacks;callbacks.map(function(callback){eval(callback)})}}catch(e){}},ElmslnService.prototype.exportLifecycleHook=function(e){if("undefined"!=typeof Drupal&&(Drupal.settings.cleApp=Drupal.settings.cleApp||{},Drupal.settings.cleApp.callbacks=Drupal.settings.cleApp.callbacks||{},"function"==typeof Drupal.settings.cleApp.callbacks[e])){var t=Drupal.settings.cleApp.callbacks[e];t()}},ElmslnService=__decorate([__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__.Injectable)(),__metadata("design:paramtypes",["function"==typeof(_a="undefined"!=typeof __WEBPACK_IMPORTED_MODULE_1__angular_http__.b&&__WEBPACK_IMPORTED_MODULE_1__angular_http__.b)&&_a||Object,"function"==typeof(_b="undefined"!=typeof __WEBPACK_IMPORTED_MODULE_4__ngrx_store__.a&&__WEBPACK_IMPORTED_MODULE_4__ngrx_store__.a)&&_b||Object])],ElmslnService);var _a,_b}()},395:function(e,t,n){"use strict";var i=n(1),o=n(172),s=n(16),a=n(11),r=n(55),c=n(82),u=n(124),p=n(98);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.router=e,this.store=t}return e.prototype.ngOnInit=function(){this.basePath=p.a.BASE_PATH,this.store.dispatch(n.i(r.b)()),this.store.dispatch(n.i(r.a)()),this.store.dispatch(n.i(c.a)()),this.store.dispatch(n.i(u.a)())},e=f([n.i(i.Component)({selector:"app-root",template:n(837),styles:[n(803)],providers:[o.a]}),l("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.a&&s.a)&&t||Object,"function"==typeof(d="undefined"!=typeof a.a&&a.a)&&d||Object])],e);var t,d}()},396:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(123),a=n(69),r=n(397),c=n(11),u=n(55);n.d(t,"a",function(){return l});var p=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,i,o){this.route=e,this.router=t,this.assignmentService=n,this.el=i,this.store=o,this.assignment=new s.a}return e.prototype.ngOnInit=function(){var e=this;this.route.params.subscribe(function(t){if("undefined"!=typeof t.assignmentId)e.action="update",e.assignmentService.getAssignment(t.assignmentId).subscribe(function(t){return e.assignment=t});else if("undefined"!=typeof t.projectId){var n=new s.a;e.action="create",n.project=Number(t.projectId),e.assignment=n}else if("undefined"!=typeof t.deleteAssignmentId){e.action="delete";var n=new s.a;n.id=Number(t.deleteAssignmentId),e.assignment=n}}),jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal({dismissible:!1,ready:function(e,t){jQuery(".modal-overlay").appendTo("app-root")}}),jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("open")},e.prototype.ngOnDestroy=function(){jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("close")},e.prototype.onAssignmentSave=function(e){e.id?this.store.dispatch(n.i(u.e)(e)):this.store.dispatch(n.i(u.f)(e)),this.router.navigate([{outlets:{dialog:null}}])},e.prototype.onCancel=function(){this.router.navigate([{outlets:{dialog:null}}])},e.prototype.onSave=function(){this.assignmentFormComponent.save()},e.prototype.onDelete=function(){this.store.dispatch(n.i(u.g)(this.assignment)),this.router.navigate([{outlets:{dialog:null}}])},p([n.i(i.ViewChild)(r.a),f("design:type","function"==typeof(t="undefined"!=typeof r.a&&r.a)&&t||Object)],e.prototype,"assignmentFormComponent",void 0),e=p([n.i(i.Component)({selector:"app-assignment-dialog",template:n(839),styles:[n(805)],providers:[a.a]}),f("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.c&&o.c)&&l||Object,"function"==typeof(d="undefined"!=typeof o.a&&o.a)&&d||Object,"function"==typeof(m="undefined"!=typeof a.a&&a.a)&&m||Object,"function"==typeof(y="undefined"!=typeof i.ElementRef&&i.ElementRef)&&y||Object,"function"==typeof(g="undefined"!=typeof c.a&&c.a)&&g||Object])],e);var t,l,d,m,y,g}()},397:function(e,t,n){"use strict";var i=n(1),o=n(79),s=n(16),a=n(123),r=n(69);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n){this.formBuilder=e,this.assignmentService=t,this.router=n,this.assignmentSave=new i.EventEmitter}return e.prototype.ngOnInit=function(){this.assignmentOptions=this.assignmentService.getAssignmentOptions()},e.prototype.ngOnChanges=function(){var e=this.assignment;this.form=this.formBuilder.group(e),this.form.setControl("title",new o.a(this.assignment.title,o.b.required)),this.assignmentIsCritique=this.assignmentService.assignmentIsCritique(this.assignment)},e.prototype.save=function(){"VALID"===this.form.status?(this.assignmentSave.emit(this.form.value),this.form.reset()):(this.saveAttempted=!0,this.form.get("title").status&&alert("The title field is required."))},c([n.i(i.Input)(),u("design:type","function"==typeof(t="undefined"!=typeof a.a&&a.a)&&t||Object)],e.prototype,"assignment",void 0),c([n.i(i.Output)(),u("design:type","function"==typeof(p="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&p||Object)],e.prototype,"assignmentSave",void 0),e=c([n.i(i.Component)({selector:"app-assignment-form",template:n(840),styles:[n(806)],providers:[a.a,r.a]}),u("design:paramtypes",["function"==typeof(f="undefined"!=typeof o.c&&o.c)&&f||Object,"function"==typeof(l="undefined"!=typeof r.a&&r.a)&&l||Object,"function"==typeof(d="undefined"!=typeof s.a&&s.a)&&d||Object])],e);var t,p,f,l,d}()},398:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(62),a=n(69),r=n(11),c=n(55),u=n(38),p=n(68);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,i,o,s,a){this.router=e,this.route=t,this.location=n,this.assignmentService=i,this.el=o,this.store=s,this.elmslnService=a}return e.prototype.ngOnInit=function(){var e=this;this.route.params.forEach(function(t){if(t.id){var n=+t.id;e.assignmentId=Number(n)}}),this.userCanEdit$=this.store.select(p.a).map(function(e){return e.includes("edit any cle_assignment content")}),this.submissions$=this.store.select(p.b).map(function(t){return t.filter(function(t){return t.assignment===e.assignmentId})}),this.assignmentId&&(this.assignments$=this.store.select(p.c).map(function(t){return t.find(function(t){return t.id===e.assignmentId})}).map(function(e){return[e]}))},e.prototype.ngAfterViewChecked=function(){},e.prototype.onEditAssignment=function(e){var t="assignment-edit/"+e.id;this.router.navigate([{outlets:{dialog:t}}])},e.prototype.onCreateSubmission=function(e){var t="submissions/create/"+e.id;this.router.navigate([t])},e.prototype.onStartCritique=function(e){this.store.dispatch(n.i(c.d)(e))},e=f([n.i(i.Component)({selector:"cle-assignment",template:n(842),styles:[n(808)],providers:[a.a]}),l("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(d="undefined"!=typeof o.c&&o.c)&&d||Object,"function"==typeof(m="undefined"!=typeof s.f&&s.f)&&m||Object,"function"==typeof(y="undefined"!=typeof a.a&&a.a)&&y||Object,"function"==typeof(g="undefined"!=typeof i.ElementRef&&i.ElementRef)&&g||Object,"function"==typeof(h="undefined"!=typeof r.a&&r.a)&&h||Object,"function"==typeof(b="undefined"!=typeof u.a&&u.a)&&b||Object])],e);var t,d,m,y,g,h,b}()},399:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.el=e,this.action=new i.EventEmitter}return e.prototype.ngOnInit=function(){jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal({dismissible:!1,ready:function(e,t){jQuery(".modal-overlay").appendTo("app-root")}})},e.prototype.ngOnDestroy=function(){this.close()},e.prototype.open=function(){jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("open")},e.prototype.close=function(){jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("close")},e.prototype.onSave=function(){this.action.emit("save")},e.prototype.onCancel=function(){this.action.emit("cancel")},o([n.i(i.Input)(),s("design:type",Object)],e.prototype,"content",void 0),o([n.i(i.Input)(),s("design:type",Object)],e.prototype,"footer",void 0),o([n.i(i.Output)(),s("design:type","function"==typeof(t="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&t||Object)],e.prototype,"action",void 0),e=o([n.i(i.Component)({selector:"app-dialog",template:n(849),styles:[n(815)]}),s("design:paramtypes",["function"==typeof(a="undefined"!=typeof i.ElementRef&&i.ElementRef)&&a||Object])],e);var t,a}()},400:function(e,t,n){"use strict";function i(){return{type:a.CREATE_IMAGE,payload:{}}}function o(){return{type:a.CREATE_IMAGE_SUCCESS,payload:{}}}function s(){return{type:a.CREATE_IMAGE_FAILURE,payload:{}}}n.d(t,"a",function(){return a}),t.b=i,t.c=o,t.d=s;var a={CREATE_IMAGE:"CREATE_IMAGE",CREATE_IMAGE_SUCCESS:"CREATE_IMAGE_SUCCESS",CREATE_IMAGE_FAILURE:"CREATE_IMAGE_FAILURE"}},401:function(e,t,n){"use strict";function i(e,t){switch(void 0===e&&(e=a),t.type){case o.a.CREATE_IMAGE:return{state:s.saving,message:""};case o.a.CREATE_IMAGE_SUCCESS:return{state:s.default,message:"Image created"};case o.a.CREATE_IMAGE_FAILURE:return{state:s.error,message:"There was an error creating the image."};default:return e}}var o=n(400);n.d(t,"c",function(){return s}),t.a=i,n.d(t,"b",function(){return r});var s;!function(e){e[e.default=0]="default",e[e.saving=1]="saving",e[e.error=2]="error"}(s||(s={}));var a={state:s.default,message:""},r=function(e){return e.state}},402:function(e,t,n){"use strict";var i=n(1),o=n(255),s=n(171),a=n(16),r=n(11),c=n(124),u=n(68);n.d(t,"a",function(){return l});var p=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n){this.projectService=e,this.router=t,this.store=n,this.projects=[],this.userCanEdit$=this.projectService.userCanEdit}return e.prototype.ngOnInit=function(){this.projects$=this.store.select(u.d)},e.prototype.createNewProject=function(e){var t=new o.a;t.title="New Project",this.store.dispatch(n.i(c.c)(t))},e.prototype.projectDeleted=function(e){var t=this;this.projects.forEach(function(n,i){n.id==e.id&&t.projects.splice(i,1)})},e=p([n.i(i.Component)({selector:"app-projects-list",template:n(857),styles:[n(823)],providers:[s.a]}),f("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.a&&s.a)&&t||Object,"function"==typeof(l="undefined"!=typeof a.a&&a.a)&&l||Object,"function"==typeof(d="undefined"!=typeof r.a&&r.a)&&d||Object])],e);var t,l,d}()},403:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(11),a=n(83),r=n(82),c=n(256),u=n(68),p=n(257);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.route=e,this.router=t,this.store=n,this.isSaving=!1}return e.prototype.ngOnInit=function(){var e=this;this.route.params.subscribe(function(t){if("undefined"!=typeof t.assignmentId){var n=t.assignmentId;e.assignmentId=Number(n),e.submission=Object.assign({},new a.a,{assignment:e.assignmentId})}}),this.userCanEdit$=this.store.select(u.a).map(function(e){return e.includes("edit own cle_submission content")}),this.store.select(u.g).subscribe(function(t){t!==p.d.saving||e.isSaving?t===p.d.default&&e.isSaving&&(jQuery(".toast-submission-create").remove(),Materialize.toast("Submission created",1500),e.router.navigate(["/assignments/"+e.assignmentId])):(e.isSaving=!0,Materialize.toast("Creating submission...",3e4,"toast-submission-create"))})},e.prototype.onSubmissionSave=function(e){this.store.dispatch(n.i(r.c)(e))},e.prototype.onSubmissionCancel=function(e){this.router.navigate(["/assignments/"+this.assignmentId]),this.submissionFormComponent.form.reset()},f([n.i(i.ViewChild)(c.a),l("design:type","function"==typeof(t="undefined"!=typeof c.a&&c.a)&&t||Object)],e.prototype,"submissionFormComponent",void 0),e=f([n.i(i.Component)({selector:"app-submission-create",template:n(859),styles:[n(825)]}),l("design:paramtypes",["function"==typeof(d="undefined"!=typeof o.c&&o.c)&&d||Object,"function"==typeof(m="undefined"!=typeof o.a&&o.a)&&m||Object,"function"==typeof(y="undefined"!=typeof s.a&&s.a)&&y||Object])],e);var t,d,m,y}()},404:function(e,t,n){"use strict";var i=n(1),o=n(83),s=n(49);n.d(t,"a",function(){return c});var a=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.submissionService=e}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){var e=this;this.submissionService.getSubmission(this.submission.relatedSubmission).subscribe(function(t){return e.critique=t}),this.submissionService.getSubmissionAssignment(this.submission).subscribe(function(t){
return e.assignment=t})},a([n.i(i.Input)(),r("design:type","function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object)],e.prototype,"submission",void 0),a([n.i(i.Input)(),r("design:type",Boolean)],e.prototype,"editMode",void 0),e=a([n.i(i.Component)({selector:"app-submission-critique",template:n(861),styles:[n(800)]}),r("design:paramtypes",["function"==typeof(c="undefined"!=typeof s.a&&s.a)&&c||Object])],e);var t,c}()},405:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(49);n.d(t,"a",function(){return c});var a=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n,i){this.el=e,this.router=t,this.route=n,this.submissionService=i}return e.prototype.ngOnInit=function(){var e=this;this.route.params.map(function(t){t.submissionId,e.submission$=e.submissionService.getSubmissionFromStore(t.submissionId)}),jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal({dismissible:!1,ready:function(e,t){jQuery(".modal-overlay").appendTo("app-root")}}),jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("open")},e.prototype.ngOnDestroy=function(){jQuery(this.el.nativeElement.getElementsByClassName("modal")).modal("close")},e.prototype.onCancel=function(){this.router.navigate([{outlets:{dialog:null}}])},e.prototype.onSave=function(){},e=a([n.i(i.Component)({selector:"app-submission-dialog",template:n(863),styles:[n(827)]}),r("design:paramtypes",["function"==typeof(t="undefined"!=typeof i.ElementRef&&i.ElementRef)&&t||Object,"function"==typeof(c="undefined"!=typeof o.a&&o.a)&&c||Object,"function"==typeof(u="undefined"!=typeof o.c&&o.c)&&u||Object,"function"==typeof(p="undefined"!=typeof s.a&&s.a)&&p||Object])],e);var t,c,u,p}()},406:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(11),a=n(82),r=n(256),c=n(49),u=n(68),p=n(257);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,i,o){this.route=e,this.router=t,this.store=n,this.submissionService=i,this.el=o,this.isSaving=!1,this.isCritique=!1}return e.prototype.ngOnInit=function(){var e=this;this.route.params.forEach(function(t){if("undefined"!=typeof t.submissionId){var n=t.submissionId;e.submissionId=Number(n)}}),this.submissionId&&(this.submission$=this.store.select(u.b).map(function(t){return t.find(function(t){return e.assignmentId=t.assignment,t.id===e.submissionId})})),this.store.select(u.g).subscribe(function(t){t!==p.d.saving||e.isSaving?t===p.d.default&&e.isSaving&&(jQuery(".toast-submission-update").remove(),Materialize.toast("Submission updated",1500),e.router.navigate(["/assignments/"+e.assignmentId])):(e.isSaving=!0,Materialize.toast("Updating submission...",3e4,"toast-submission-update"))}),this.assignment$=this.submission$.filter(function(e){return!(!e||!e.assignment)}).mergeMap(function(t){return e.store.select(u.c).map(function(e){return e.find(function(e){return e.id===t.assignment})})}),this.assignment$.subscribe(function(t){t&&"none"!==t.critiqueMethod&&(e.isCritique=!0)}),this.submissionType$=this.submissionService.getSubmissionType(this.submission$)},e.prototype.onSubmissionSave=function(e){this.store.dispatch(n.i(a.d)(e))},e.prototype.onSubmissionCancel=function(){this.submissionFormDirty?confirm("You have unsaved changes. Are you sure you want to navigate away from this page?")&&this.router.navigate(["/submissions/"+this.submissionId]):(this.router.navigate(["/submissions/"+this.submissionId]),this.submissionFormComponent.form.reset())},e.prototype.onFormChanges=function(e){this.submissionFormDirty=e},f([n.i(i.ViewChild)(r.a),l("design:type","function"==typeof(t="undefined"!=typeof r.a&&r.a)&&t||Object)],e.prototype,"submissionFormComponent",void 0),e=f([n.i(i.Component)({selector:"app-submission-edit",template:n(865),styles:[n(829)]}),l("design:paramtypes",["function"==typeof(d="undefined"!=typeof o.c&&o.c)&&d||Object,"function"==typeof(m="undefined"!=typeof o.a&&o.a)&&m||Object,"function"==typeof(y="undefined"!=typeof s.a&&s.a)&&y||Object,"function"==typeof(g="undefined"!=typeof c.a&&c.a)&&g||Object,"function"==typeof(h="undefined"!=typeof i.ElementRef&&i.ElementRef)&&h||Object])],e);var t,d,m,y,g,h}()},407:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(11),a=n(83),r=n(49),c=n(82),u=n(399);n.d(t,"a",function(){return l});var p=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n){this.submissionService=e,this.router=t,this.store=n,this.dialogContent="\n    Are you sure you want to change the state of this submission?\n  "}return e.prototype.ngOnInit=function(){this.originalSubmission=this.submission},e.prototype.ngOnChanges=function(){var e=this,t=this.submissionService.getSubmissionOptions();t.state.map(function(t){t.active=t.value===e.submission.state;var n={};return t.active&&(n={color:t.color,background:t.color}),t.styles=n,t}),this.states=t.state,"undefined"!=typeof this.originalSubmission&&this.originalSubmission.state!==this.submission.state&&Materialize.toast("Submission state updated",1500),this.originalSubmission=this.submission},e.prototype.onStateClick=function(e){"undefined"!=typeof this.submission.metadata.canUpdate&&this.submission.metadata.canUpdate&&(this.selectedState=e.value,this.dialogComponent.open())},e.prototype.onDialogAction=function(e){if("cancel"===e&&this.dialogComponent.close(),"save"===e){var t=Object.assign({},this.submission,{state:this.selectedState});this.dialogComponent.close(),this.store.dispatch(n.i(c.d)(t))}this.selectedState=""},p([n.i(i.Input)(),f("design:type","function"==typeof(t="undefined"!=typeof a.a&&a.a)&&t||Object)],e.prototype,"submission",void 0),p([n.i(i.ViewChild)(u.a),f("design:type","function"==typeof(l="undefined"!=typeof u.a&&u.a)&&l||Object)],e.prototype,"dialogComponent",void 0),e=p([n.i(i.Component)({selector:"app-submission-states",template:n(868),styles:[n(802)]}),f("design:paramtypes",["function"==typeof(d="undefined"!=typeof r.a&&r.a)&&d||Object,"function"==typeof(m="undefined"!=typeof o.a&&o.a)&&m||Object,"function"==typeof(y="undefined"!=typeof s.a&&s.a)&&y||Object])],e);var t,l,d,m,y}()},408:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(62),a=n(11),r=n(38),c=n(49),u=n(68);n.d(t,"a",function(){return l});var p=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,i,o,s){this.route=e,this.store=t,this.router=n,this.location=i,this.elmslnService=o,this.submissionService=s}return e.prototype.ngOnInit=function(){var e=this;this.route.params.subscribe(function(t){t.submissionId&&(e.submissionId=Number(t.submissionId))}),this.submission$=this.store.select(u.b).map(function(t){return t.find(function(t){return t.id===e.submissionId})}),this.submission$.filter(function(e){return"undefined"!=typeof e}).subscribe(function(t){return e.assignmentId=t.assignment}),this.userCanEdit$=this.submission$.map(function(e){return!(!e||"undefined"==typeof e.metadata||"undefined"==typeof e.metadata.canUpdate)&&e.metadata.canUpdate}),this.submissionType$=this.submissionService.getSubmissionType(this.submission$)},e.prototype.onClickBack=function(){this.router.navigate(["/assignments/"+this.assignmentId])},e.prototype.editSubmission=function(){this.router.navigate(["/submissions/"+this.submissionId+"/edit"])},e=p([n.i(i.Component)({selector:"app-submission",template:n(869),styles:[n(832)]}),f("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.c&&o.c)&&t||Object,"function"==typeof(l="undefined"!=typeof a.a&&a.a)&&l||Object,"function"==typeof(d="undefined"!=typeof o.a&&o.a)&&d||Object,"function"==typeof(m="undefined"!=typeof s.f&&s.f)&&m||Object,"function"==typeof(y="undefined"!=typeof r.a&&r.a)&&y||Object,"function"==typeof(g="undefined"!=typeof c.a&&c.a)&&g||Object])],e);var t,l,d,m,y,g}()},409:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={production:!0}},486:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=486},487:function(e,t,n){"use strict";var i=n(640),o=(n.n(i),n(567)),s=n(1),a=n(409),r=n(624);a.a.production&&n.i(s.enableProdMode)(),n.i(o.a)().bootstrapModule(r.a)},49:function(e,t,n){"use strict";var i=n(1),o=n(455),s=(n.n(o),n(11)),a=n(38),r=n(98),c=n(83);n.d(t,"a",function(){return f});var u=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){this.elmsln=e,this.store=t,this.submissions=this.store.select(function(e){return e.submissions})}return e.prototype.getSubmissions=function(e){var t=this,n=e?"?assignment="+e:"";this.elmsln.get(r.a.BASE_PATH+"api/v1/cle/submissions"+n).map(function(e){return e.json()}).map(function(e){return"undefined"!=typeof e.data?e.data:[]}).map(function(e){if(e){var n=[];return e.forEach(function(e){return n.push(t.convertToSubmission(e))}),n}}).map(function(e){return{type:"ADD_SUBMISSIONS",payload:e}}).subscribe(function(e){return t.store.dispatch(e)})},e.prototype.loadSubmissions=function(){var e=this;return this.elmsln.get(r.a.BASE_PATH+"api/v1/cle/submissions").map(function(e){return e.json().data}).map(function(t){if(t){var n=[];return t.forEach(function(t){return n.push(e.convertToSubmission(t))}),n}})},e.prototype.getSubmission=function(e){var t=this;return this.elmsln.get(r.a.BASE_PATH+"api/v1/cle/submissions/"+e).map(function(e){return e.json().data[0]}).map(function(e){return t.convertToSubmission(e)})},e.prototype.createSubmission=function(e){var t=this,n=this.prepareForDrupal(e);return this.elmsln.post(r.a.BASE_PATH+"api/v1/cle/submissions/create",n).map(function(e){return e.json().node}).map(function(e){return t.convertToSubmission(e)})},e.prototype.updateSubmission=function(e){var t=this,n=this.prepareForDrupal(e);return this.elmsln.put(r.a.BASE_PATH+"api/v1/cle/submissions/"+e.id+"/update",n).map(function(e){return e.json()}).map(function(e){return t.convertToSubmission(e)})},e.prototype.deleteSubmission=function(e){return this.elmsln.delete(r.a.BASE_PATH+"api/v1/cle/submissions/"+e.id+"/delete").map(function(e){return e.json()})},e.prototype.getSubmissionOptions=function(){return{type:[{value:"open",display:"Open"},{value:"closed",display:"Closed"}],critiqueMethod:[{value:"open",display:"Open"},{value:"random",display:"Random"}],critiqueStyle:[{value:"open",display:"Open"},{value:"blind",display:"Blind"},{value:"double_blind",display:"Double blind"}],state:[{value:"submission_in_progress",display:"Submission in progress",icon:"autorenew",color:"lightgoldenrodyellow"},{value:"submission_ready",display:"Submission Ready",icon:"done",color:"lightgreen"}]}},e.prototype.convertToSubmission=function(e){var t=new c.a;for(var n in t)e[n]&&(t[n]=e[n]);return e.nid&&(t.id=Number(e.nid)),e.evidence&&e.evidence.body&&(t.body=e.evidence.body),t},e.prototype.prepareForDrupal=function(e){var t=Object.assign({},e);return e.body&&(t.evidence={body:{value:e.body,format:"textbook_editor"}}),e.evidence&&e.evidence.images&&(t.evidence.images=e.evidence.images),t},e.prototype.getSubmissionFromStore=function(e){return this.store.select("submissions").map(function(t){return t.submissions.find(function(t){return t.id===e})})},e.prototype.userCanEditSubmission=function(e){return this.store.select("submissions").map(function(t){return t.submissions.find(function(t){return t.id===e})}).map(function(e){return!(!e||"undefined"==typeof e.metadata||"undefined"==typeof e.metadata.canUpdate)&&e.metadata.canUpdate})},e.prototype.getSubmissionType=function(e){return o.Observable.combineLatest(e,this.store.select("assignments").map(function(e){return e.assignments})).map(function(e){var t=e[0],n=e[1].find(function(e){return e.id===t.assignment});return n&&"string"==typeof n.critiqueMethod&&"none"!==n.critiqueMethod?"critique":"submission"})},e.prototype.getSubmissionAssignment=function(e){return this.store.select("assignments").map(function(t){return t.assignments.find(function(t){return t.id===e.assignment})})},e=u([n.i(i.Injectable)(),p("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.a&&a.a)&&t||Object,"function"==typeof(f="undefined"!=typeof s.a&&s.a)&&f||Object])],e);var t,f}()},55:function(e,t,n){"use strict";function i(e){return{type:b.CREATE_ASSIGNMENT,payload:e}}function o(e){return{type:b.CREATE_ASSIGNMENT_SUCCESS,payload:e}}function s(e){var t=Object.assign(new h.a,{title:e.title+" critique",hierarchy:{dependencies:[e.id],project:e.project},critiqueMethod:"random",startDate:e.startDate,endDate:e.endDate});return{type:b.CREATE_CRITIQUE_ASSIGNMENT,payload:t}}function a(e){return{type:b.CREATE_CRITIQUE_ASSIGNMENT_SUCCESS,payload:e}}function r(e){return{type:b.UPDATE_ASSIGNMENT,payload:e}}function c(e){return{type:b.UPDATE_ASSIGNMENT_SUCCESS,payload:e}}function u(e){return{type:b.DELETE_ASSIGNMENT,payload:e}}function p(){return{type:b.LOAD_ASSIGNMENTS,payload:{}}}function f(e){return{type:b.LOAD_ASSIGNMENTS_SUCCESS,payload:e}}function l(){return{type:b.LOAD_PERMISSIONS,payload:{}}}function d(e,t,n){return{type:b.LOAD_PERMISSIONS_SUCCESS,payload:{permissions:e,token:t,uid:n}}}function m(e){return{type:b.START_CRITQUE,payload:e}}function y(e){return{type:b.START_CRITQUE_SUCCESS,payload:e}}function g(e){return{type:b.START_CRITQUE_FAILURE,payload:e}}var h=n(123);n.d(t,"c",function(){return b}),t.f=i,t.h=o,t.o=s,t.i=a,t.e=r,t.j=c,t.g=u,t.b=p,t.k=f,t.a=l,t.l=d,t.d=m,t.m=y,t.n=g;var b={CREATE_ASSIGNMENT:"CREATE_ASSIGNMENT",CREATE_ASSIGNMENT_SUCCESS:"CREATE_ASSIGNMENT_SUCCESS",CREATE_CRITIQUE_ASSIGNMENT:"CREATE_CRITIQUE_ASSIGNMENT",CREATE_CRITIQUE_ASSIGNMENT_SUCCESS:"CREATE_CRITIQUE_ASSIGNMENT_SUCCESS",UPDATE_ASSIGNMENT:"UPDATE_ASSIGNMENT",UPDATE_ASSIGNMENT_SUCCESS:"UPDATE_ASSIGNMENT_SUCCESS",DELETE_ASSIGNMENT:"DELETE_ASSIGNMENT",LOAD_ASSIGNMENTS:"LOAD_ASSIGNMENTS",LOAD_ASSIGNMENTS_SUCCESS:"LOAD_ASSIGNMENTS_SUCCESS",LOAD_PERMISSIONS:"LOAD_PERMISSIONS",LOAD_PERMISSIONS_SUCCESS:"LOAD_PERMISSIONS_SUCCESS",START_CRITQUE:"START_CRITQUE",START_CRITQUE_SUCCESS:"START_CRITQUE_SUCCESS",START_CRITQUE_FAILURE:"START_CRITQUE_FAILURE"}},608:function(e,t,n){"use strict";var i=n(167),o=n(1),s=n(79),a=n(238),r=n(609),c=n(11),u=n(604),p=n(170),f=n(386),l=n(68),d=n(612),m=n(636),y=n(629),g=n(38),h=n(254),b=n(69),v=n(49),_=n(171),S=n(641),E=(n.n(S),n(395)),j=n(398),O=n(611),C=n(619),I=n(637),R=n(618),A=n(616),w=n(625),T=n(626),D=n(617),P=n(639),M=n(397),U=n(631),x=n(402),N=n(614),k=n(627),q=n(628),B=n(621),L=n(620),$=n(396),F=n(403),G=n(256),Q=n(635),H=n(633),z=n(408),J=n(406),W=n(407),K=n(399),V=n(634),Y=n(405),X=n(623),Z=n(610),ee=n(622),te=n(632),ne=n(404);n.d(t,"a",function(){return se});var ie=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},oe=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},se=function(){function e(){}return e=ie([n.i(o.NgModule)({declarations:[E.a,j.a,O.a,C.a,I.a,R.a,A.a,w.a,T.a,D.a,P.a,M.a,U.a,x.a,N.a,k.a,q.a,B.a,L.a,$.a,z.a,F.a,G.a,Q.a,H.a,J.a,W.a,K.a,V.a,Y.a,X.a,Z.a,Z.a,ee.a,te.a,ne.a],imports:[i.b,a.c,r.a,s.e,s.f,S.MomentModule,c.h.provideStore(l.h),f.b.connectRouter(),p.c.run(d.a),p.c.run(m.a),p.c.run(y.a),u.a.instrumentOnlyWithExtension({maxAge:50})],providers:[g.a,h.a,b.a,v.a,_.a],bootstrap:[E.a]}),oe("design:paramtypes",[])],e)}()},609:function(e,t,n){"use strict";var i=n(16),o=n(398),s=n(402),a=n(396),r=n(408),c=n(403),u=n(406),p=n(405),f=n(407),l=n(404);n.d(t,"a",function(){return m});var d=[{path:"",component:s.a},{path:"projects",component:s.a},{path:"assignments/:id",component:o.a},{path:"assignment-create/:projectId",outlet:"dialog",component:a.a},{path:"assignment-edit/:assignmentId",outlet:"dialog",component:a.a},{path:"assignment-delete/:deleteAssignmentId",outlet:"dialog",component:a.a},{path:"submissions",children:[{path:"create/:assignmentId",component:c.a},{path:":submissionId",component:r.a},{path:":submissionId/edit",component:u.a},{path:"submission-states",component:f.a},{path:":critiqueId",component:l.a}]},{path:"submissions/:submissionId/edit-state",outlet:"dialog",component:p.a}],m=i.d.forRoot(d)},610:function(e,t,n){"use strict";var i=n(1),o=n(123);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(){}return e.prototype.ngOnInit=function(){},s([n.i(i.Input)(),a("design:type","function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object)],e.prototype,"assignment",void 0),e=s([n.i(i.Component)({selector:"app-assignment-detail",template:n(838),styles:[n(804)]}),a("design:paramtypes",[])],e);var t}()},611:function(e,t,n){"use strict";var i=n(1),o=n(69),s=n(16),a=n(11),r=n(55);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n){this.assignmentService=e,this.router=t,this.store=n,this.userCanEdit$=this.assignmentService.userCanEdit}return e.prototype.ngOnInit=function(){},e.prototype.viewAssignment=function(e){e&&this.router.navigate(["/assignments/"+e])},e.prototype.createAssignment=function(){this.router.navigate(["/assignments/new"])},e.prototype.onEditAssignment=function(e){var t="assignment-edit/"+e.id;this.router.navigate([{outlets:{dialog:t}}])},e.prototype.onDeleteAssignment=function(e){var t="assignment-delete/"+e.id;this.router.navigate([{outlets:{dialog:t}}])},e.prototype.addCritique=function(e){this.store.dispatch(n.i(r.o)(e))},e.prototype.ngOnChanges=function(){this.sortAssignmentsByDate()},e.prototype.sortAssignmentsByDate=function(){this.assignments&&this.assignments.sort(function(e,t){var n=null,i=null;return e.startDate||(n=e.endDate),t.startDate||(i=t.endDate),n&&i?n<i?-1:n>i?1:0:n&&!i?-1:!n&&i?1:void 0})},c([n.i(i.Input)(),u("design:type",Array)],e.prototype,"assignments",void 0),e=c([n.i(i.Component)({selector:"cle-assignment-list",template:n(841),styles:[n(807)],providers:[o.a],changeDetection:i.ChangeDetectionStrategy.OnPush}),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(p="undefined"!=typeof s.a&&s.a)&&p||Object,"function"==typeof(f="undefined"!=typeof a.a&&a.a)&&f||Object])],e);var t,p,f}()},612:function(e,t,n){"use strict";var i=n(183),o=(n.n(i),n(456)),s=(n.n(o),n(1)),a=n(0),r=(n.n(a),n(170)),c=n(55),u=n(82),p=n(69),f=n(38);n.d(t,"a",function(){return m});var l=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,i){var o=this;this.actions$=e,this.assignmentService=t,this.elmslnService=i,this.createAssignment$=this.actions$.ofType(c.c.CREATE_ASSIGNMENT).mergeMap(function(e){return o.assignmentService.createAssignment(e.payload)}).map(function(e){return n.i(c.h)(e)}),this.createCritiqueAssignment$=this.actions$.ofType(c.c.CREATE_CRITIQUE_ASSIGNMENT).mergeMap(function(e){return o.assignmentService.createAssignment(e.payload).mergeMap(function(e){return o.assignmentService.getAssignment(e.id)})}).map(function(e){return n.i(c.i)(e)}),this.updateAssignment$=this.actions$.ofType(c.c.UPDATE_ASSIGNMENT).mergeMap(function(e){return o.assignmentService.updateAssignment(e.payload).mergeMap(function(t){return o.assignmentService.getAssignment(e.payload.id)})}).map(function(e){return n.i(c.j)(e)}),this.loadAssignments$=this.actions$.ofType(c.c.LOAD_ASSIGNMENTS).mergeMap(function(){return o.assignmentService.loadAssignments()}).map(function(e){return n.i(c.k)(e)}),this.loadPermissions$=this.actions$.ofType(c.c.LOAD_PERMISSIONS).mergeMap(function(){return o.elmslnService.getUserProfile()}).map(function(e){return"undefined"!=typeof e.user.permissions?n.i(c.l)(e.user.permissions,e.user["csrf-token"],Number(e.user.uid)):n.i(c.l)([],null,null)}),this.deleteAssignment$=this.actions$.ofType(c.c.DELETE_ASSIGNMENT).mergeMap(function(e){return o.assignmentService.deleteAssignment(e.payload)}).map(function(e){Materialize.toast("Assignment deleted",1e3)}),this.startCritique$=this.actions$.ofType(c.c.START_CRITQUE).switchMap(function(e){return o.assignmentService.startCritique(e.payload).map(function(e){return n.i(c.m)(e.node)}).catch(function(e){return a.Observable.of(n.i(c.n)(e))})}),this.startCritqueSuccess$=this.actions$.ofType(c.c.START_CRITQUE_SUCCESS).map(function(e){return n.i(u.a)()}),this.startCritiqueFailure$=this.actions$.ofType(c.c.START_CRITQUE_FAILURE).map(function(e){return e.payload}).map(function(e){var t=JSON.parse(e.text()),n=t.detail?t.detail:"";Materialize.toast("Could not start critique. "+n,2500)})}return l([n.i(r.a)(),d("design:type",Object)],e.prototype,"createAssignment$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"createCritiqueAssignment$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"updateAssignment$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"loadAssignments$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"loadPermissions$",void 0),l([n.i(r.a)({dispatch:!1}),d("design:type",Object)],e.prototype,"deleteAssignment$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"startCritique$",void 0),l([n.i(r.a)(),d("design:type",Object)],e.prototype,"startCritqueSuccess$",void 0),l([n.i(r.a)({dispatch:!1}),d("design:type",Object)],e.prototype,"startCritiqueFailure$",void 0),e=l([n.i(s.Injectable)(),d("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.b&&r.b)&&t||Object,"function"==typeof(i="undefined"!=typeof p.a&&p.a)&&i||Object,"function"==typeof(o="undefined"!=typeof f.a&&f.a)&&o||Object])],e);var t,i,o}()},613:function(e,t,n){"use strict";function i(e,t){switch(void 0===e&&(e=s),t.type){case o.c.CREATE_ASSIGNMENT:return{loading:e.loading,assignments:e.assignments.concat([t.payload])};case o.c.CREATE_ASSIGNMENT_SUCCESS:return{loading:e.loading,assignments:e.assignments.map(function(e){return!e.id&&t.payload.id?Object.assign({},e,t.payload):e})};case o.c.CREATE_CRITIQUE_ASSIGNMENT:return e;case o.c.CREATE_CRITIQUE_ASSIGNMENT_SUCCESS:return{loading:e.loading,assignments:e.assignments.concat([t.payload])};case o.c.UPDATE_ASSIGNMENT:return{loading:e.loading,assignments:e.assignments.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.c.UPDATE_ASSIGNMENT_SUCCESS:return{loading:e.loading,assignments:e.assignments.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.c.DELETE_ASSIGNMENT:return{loading:!1,assignments:e.assignments.filter(function(e){return e.id!==t.payload.id})};case o.c.LOAD_ASSIGNMENTS:return{loading:!0,assignments:[]};case o.c.LOAD_ASSIGNMENTS_SUCCESS:return{loading:!1,assignments:t.payload?t.payload:[]};default:return e}}var o=n(55);t.a=i,n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r});var s={loading:!1,assignments:[]},a=function(e){return e.assignments},r=function(e){return e.loading}},614:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.el=e}return e.prototype.ngOnInit=function(){$(this.el.nativeElement.firstElementChild).dropdown()},o([n.i(i.Input)("button"),s("design:type",String)],e.prototype,"button",void 0),o([n.i(i.Input)("links"),s("design:type",Array)],e.prototype,"links",void 0),e=o([n.i(i.Component)({selector:"app-dropdown",template:n(843),styles:[n(809)]}),s("design:paramtypes",["function"==typeof(t="undefined"!=typeof i.ElementRef&&i.ElementRef)&&t||Object])],e);var t}()},615:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.body=e}return e}()},616:function(e,t,n){"use strict";var i=n(1),o=n(615),s=n(254),a=n(455);n.n(a);n.d(t,"a",function(){return u});var r=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.critiqueService=e,this.showPreview=!1,this.initialContent="",this.update$=new a.Subject,this.critiqueCreated=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.submitForm=function(){var e=this;if(this.content){var t=new o.a(this.content);t.submissionId=this.submission.nid,this.critiqueService.createCritique(t).subscribe(function(t){t.ok&&(e.content="",e.critiqueCreated.emit(t.json()))})}},e.prototype.onFocus=function(){},e.prototype.onChange=function(e){this.content=e,console.log(this.content)},e.prototype.onBlur=function(){},r([n.i(i.Input)(),c("design:type",Object)],e.prototype,"submission",void 0),r([n.i(i.Output)(),c("design:type","function"==typeof(t="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&t||Object)],e.prototype,"critiqueCreated",void 0),e=r([n.i(i.Component)({selector:"cle-critique-form",template:n(844),styles:[n(810)],providers:[s.a]}),c("design:paramtypes",["function"==typeof(u="undefined"!=typeof s.a&&s.a)&&u||Object])],e);var t,u}()},617:function(e,t,n){"use strict";var i=n(1),o=n(254);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(e){this.critiqueService=e}return e.prototype.ngOnInit=function(){this.getCritiques()},e.prototype.getCritiques=function(){var e=this;this.critiqueService.getSubmissionCritiques(this.submission.nid).subscribe(function(t){e.critiques=t})},e.prototype.deleteCritique=function(e){var t=this;this.critiqueService.deleteCritique(e).subscribe(function(e){console.log(e),t.getCritiques()})},s([n.i(i.Input)(),a("design:type",Object)],e.prototype,"submission",void 0),e=s([n.i(i.Component)({selector:"cle-critique-list",template:n(845),styles:[n(811)]}),a("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object])],e);var t}()},618:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(62);n.d(t,"a",function(){return c});var a=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.route=e,this.location=t}return e.prototype.ngOnInit=function(){var e=this;this.route.params.forEach(function(t){var n=+t.id;e.submissionId=n})},e=a([n.i(i.Component)({selector:"cle-critique",template:n(846),styles:[n(812)]}),r("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.c&&o.c)&&t||Object,"function"==typeof(c="undefined"!=typeof s.f&&s.f)&&c||Object])],e);var t,c}()},619:function(e,t,n){"use strict";var i=n(1),o=n(69);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(e){this.assignmentService=e}return e.prototype.ngOnInit=function(){},
e=s([n.i(i.Component)({selector:"cle-dashboard",template:n(847),styles:[n(813)],providers:[o.a]}),a("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object])],e);var t}()},620:function(e,t,n){"use strict";var i=n(1),o=n(79);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(){this.propagateChange=function(e){}}return e.prototype.writeValue=function(e){if(e){var t=new Date(e),n=t.toISOString(),i=n.split("T"),o=i[1].split(".");this.day=i[0],this.time=o[0]}else this.day="",this.time="";this.date=e},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e.prototype.updateDatetime=function(){if("undefined"!=typeof this.day){var e=void 0;e=this.day,"undefined"!=typeof this.time&&(e=e+" "+this.time);var t=new Date(e);this.date=t,this.propagateChange(this.date)}},s([n.i(i.Input)(),a("design:type",Object)],e.prototype,"date",void 0),e=s([n.i(i.Component)({selector:"app-datetime-input",template:n(848),styles:[n(814)],providers:[{provide:o.d,useExisting:n.i(i.forwardRef)(function(){return e}),multi:!0}]}),a("design:paramtypes",[])],e)}()},621:function(e,t,n){"use strict";var i=n(1),o=n(79);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(e,t){this.el=e,this.formBuilder=t,this.type="text",this.content="",this.contentUpdated=new i.EventEmitter,this.editing=!1,this.form=this.formBuilder.group({content:this.content})}return e.prototype.ngOnInit=function(){this.form.patchValue({content:this.content})},e.prototype.beginEditing=function(){this.editing=!0},e.prototype.endEditing=function(){var e=this;this.editing=!1,setTimeout(function(){return e.saveNewContent()},400)},e.prototype.saveNewContent=function(){this.contentUpdated.emit(this.form.value.content)},s([n.i(i.Input)(),a("design:type",String)],e.prototype,"type",void 0),s([n.i(i.Input)(),a("design:type",String)],e.prototype,"content",void 0),s([n.i(i.Output)(),a("design:type","function"==typeof(t="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&t||Object)],e.prototype,"contentUpdated",void 0),e=s([n.i(i.Component)({selector:"app-editable-field",template:n(850),styles:[n(816)]}),a("design:paramtypes",["function"==typeof(r="undefined"!=typeof i.ElementRef&&i.ElementRef)&&r||Object,"function"==typeof(c="undefined"!=typeof o.c&&o.c)&&c||Object])],e);var t,r,c}()},622:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"app-elmsln-wysiwyg",template:n(851),styles:[n(817)]}),s("design:paramtypes",[])],e)}()},623:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"app-image",template:n(852),styles:[n(818)]}),s("design:paramtypes",[])],e)}()},624:function(e,t,n){"use strict";var i=(n(395),n(608));n.d(t,"a",function(){return i.a})},625:function(e,t,n){"use strict";var i=n(1),o=n(79),s=n(172),a=n(16),r=n(11);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,n,i){this.fb=e,this.userService=t,this.router=n,this.store=i,this.form=this.fb.group({username:"",password:""})}return e.prototype.ngOnInit=function(){"undefined"!=typeof Drupal&&(console.log("Drupal detected..."),this.userService.logout(),this.router.navigate(["/projects"]))},e.prototype.submitForm=function(){if(this.form.value.username&&this.form.value.password){this.userService.login(this.form.value.username,this.form.value.password);this.router.navigate(["/projects"])}},e=c([n.i(i.Component)({selector:"app-login",template:n(853),styles:[n(819)],providers:[s.a]}),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.c&&o.c)&&t||Object,"function"==typeof(p="undefined"!=typeof s.a&&s.a)&&p||Object,"function"==typeof(f="undefined"!=typeof a.a&&a.a)&&f||Object,"function"==typeof(l="undefined"!=typeof r.a&&r.a)&&l||Object])],e);var t,p,f,l}()},626:function(e,t,n){"use strict";var i=n(1),o=n(172),s=n(16);n.d(t,"a",function(){return c});var a=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.userService=e,this.router=t}return e.prototype.ngOnInit=function(){this.userService.logout(),this.router.navigate(["/"])},e=a([n.i(i.Component)({selector:"app-logout",template:n(854),styles:[n(820)],providers:[o.a]}),r("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(c="undefined"!=typeof s.a&&s.a)&&c||Object])],e);var t,c}()},627:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"app-project-card",template:n(855),styles:[n(821)]}),s("design:paramtypes",[])],e)}()},628:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(255),a=n(171),r=n(69),c=n(11),u=n(124),p=n(68);n.d(t,"a",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,o,s){var a=this;this.projectService=e,this.assignmentService=t,this.el=n,this.router=o,this.store=s,this.delete=new i.EventEmitter,this.userCanEdit$=this.projectService.userCanEdit,this.assignments=s.select(p.c).map(function(e){return e.filter(function(e){return e.project===a.project.id})})}return e.prototype.ngOnInit=function(){jQuery(this.el.nativeElement.getElementsByClassName("delete-project-form")).modal({ready:function(e,t){jQuery(".modal-overlay").appendTo("app-root")}}),jQuery(this.el.nativeElement.getElementsByClassName("tooltipped")).tooltip({delay:40})},e.prototype.ngOnDestroy=function(){jQuery(this.el.nativeElement.getElementsByClassName("tooltipped")).tooltip("remove")},e.prototype.onCreateAssignment=function(){var e="assignment-create/"+this.project.id;this.router.navigate([{outlets:{dialog:e}}])},e.prototype.onDeleteProject=function(){jQuery(this.el.nativeElement.getElementsByClassName("delete-project-form")).modal("open")},e.prototype.confirmDelete=function(e){if(e){var t=this.project;this.store.dispatch(n.i(u.g)(t))}else jQuery(this.el.nativeElement.getElementsByClassName("delete-project-form")).modal("close")},e.prototype.updateTitle=function(e){var t=Object.assign({},this.project,{title:e});this.store.dispatch(n.i(u.h)(t))},f([n.i(i.Input)(),l("design:type","function"==typeof(t="undefined"!=typeof s.a&&s.a)&&t||Object)],e.prototype,"project",void 0),f([n.i(i.Output)(),l("design:type","function"==typeof(d="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&d||Object)],e.prototype,"delete",void 0),e=f([n.i(i.Component)({selector:"app-project-item",template:n(856),styles:[n(822)],providers:[r.a],changeDetection:i.ChangeDetectionStrategy.OnPush}),l("design:paramtypes",["function"==typeof(m="undefined"!=typeof a.a&&a.a)&&m||Object,"function"==typeof(y="undefined"!=typeof r.a&&r.a)&&y||Object,"function"==typeof(g="undefined"!=typeof i.ElementRef&&i.ElementRef)&&g||Object,"function"==typeof(h="undefined"!=typeof o.a&&o.a)&&h||Object,"function"==typeof(b="undefined"!=typeof c.a&&c.a)&&b||Object])],e);var t,d,m,y,g,h,b}()},629:function(e,t,n){"use strict";var i=n(183),o=(n.n(i),n(1)),s=n(170),a=n(124),r=n(171);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){var i=this;this.actions$=e,this.projectService=t,this.createProject$=this.actions$.ofType(a.b.CREATE_PROJECT).mergeMap(function(e){return i.projectService.createProject(e.payload)}).mergeMap(function(e){return i.projectService.getProject(e.id)}).map(function(e){return n.i(a.d)(e)}),this.updateProject$=this.actions$.ofType(a.b.UPDATE_PROJECT).mergeMap(function(e){return i.projectService.updateProject(e.payload).mergeMap(function(t){return i.projectService.getProject(e.payload.id)})}).map(function(e){return Materialize.toast("Project updated",1500),n.i(a.e)(e)}),this.loadProjects$=this.actions$.ofType(a.b.LOAD_PROJECTS).mergeMap(function(){return i.projectService.getProjects()}).map(function(e){return n.i(a.f)(e)}),this.deleteProject$=this.actions$.ofType(a.b.DELETE_PROJECT).mergeMap(function(e){return i.projectService.deleteProject(e.payload)}).map(function(e){"200"===e.status&&Materialize.toast("Project deleted",1e3)})}return c([n.i(s.a)(),u("design:type",Object)],e.prototype,"createProject$",void 0),c([n.i(s.a)(),u("design:type",Object)],e.prototype,"updateProject$",void 0),c([n.i(s.a)(),u("design:type",Object)],e.prototype,"loadProjects$",void 0),c([n.i(s.a)({dispatch:!1}),u("design:type",Object)],e.prototype,"deleteProject$",void 0),e=c([n.i(o.Injectable)(),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.b&&s.b)&&t||Object,"function"==typeof(i="undefined"!=typeof r.a&&r.a)&&i||Object])],e);var t,i}()},630:function(e,t,n){"use strict";function i(e,t){switch(void 0===e&&(e=s),t.type){case o.b.CREATE_PROJECT:return{projects:e.projects.concat([t.payload])};case o.b.CREATE_PROJECT_SUCCESS:return{projects:e.projects.map(function(e){return!e.id&&t.payload.id?Object.assign({},e,t.payload):e})};case o.b.UPDATE_PROJECT:return{projects:e.projects.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.b.UPDATE_PROJECT_SUCCESS:return{projects:e.projects.map(function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e})};case o.b.DELETE_PROJECT:return{projects:e.projects.filter(function(e){return e.id!==t.payload.id})};case o.b.LOAD_PROJECTS:return{projects:[]};case o.b.LOAD_PROJECTS_SUCCESS:return{projects:t.payload?t.payload:[]};case o.b.MOVE_PROJECT_ASSIGNMENT:return{projects:e.projects.map(function(e){e.id===t.payload.newProjectId})};default:return e}}var o=n(124);t.a=i,n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r});var s={projects:[]},a=function(e){return e.projects},r=function(e){return e.projects.length}},631:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"app-projects",template:n(858),styles:[n(824)]}),s("design:paramtypes",[])],e)}()},632:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"app-submission-critique-form",template:n(860),styles:[n(826)]}),s("design:paramtypes",[])],e)}()},633:function(e,t,n){"use strict";var i=n(1),o=n(83),s=n(38),a=n(0),r=(n.n(a),n(49));n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){this.elmslnService=e,this.submissionService=t}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.elmslnService.exportLifecycleHook("submissionDetailComponentInit")},e.prototype.ngOnChanges=function(){this.submissionType$=this.submissionService.getSubmissionType(a.Observable.of(this.submission)),this.assignment$=this.submissionService.getSubmissionAssignment(this.submission)},c([n.i(i.Input)(),u("design:type","function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object)],e.prototype,"submission",void 0),e=c([n.i(i.Component)({selector:"app-submission-detail",template:n(862),styles:[n(801)]}),u("design:paramtypes",["function"==typeof(p="undefined"!=typeof s.a&&s.a)&&p||Object,"function"==typeof(f="undefined"!=typeof r.a&&r.a)&&f||Object])],e);var t,p,f}()},634:function(e,t,n){"use strict";var i=n(1),o=n(83);n.d(t,"a",function(){return r});var s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){function e(){}return e.prototype.ngOnInit=function(){},s([n.i(i.Input)(),a("design:type","function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object)],e.prototype,"submission",void 0),e=s([n.i(i.Component)({selector:"app-submission-edit-states",template:n(864),styles:[n(828)]}),a("design:paramtypes",[])],e);var t}()},635:function(e,t,n){"use strict";var i=n(1),o=n(16),s=n(172),a=n(49);n.d(t,"a",function(){return u});var r=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n){this.router=e,this.userService=t,this.submissionService=n}return e.prototype.ngOnInit=function(){var e=this;this.userService.getCurrentUserId().subscribe(function(t){return e.currentUserId=t})},e.prototype.ngOnChanges=function(){},e.prototype.onSubmissionClick=function(e){this.router.navigate(["/submissions/"+e.id])},r([n.i(i.Input)(),c("design:type",Array)],e.prototype,"submissions",void 0),r([n.i(i.Input)(),c("design:type",String)],e.prototype,"title",void 0),e=r([n.i(i.Component)({selector:"app-submission-list",template:n(867),styles:[n(831)]}),c("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.a&&o.a)&&t||Object,"function"==typeof(u="undefined"!=typeof s.a&&s.a)&&u||Object,"function"==typeof(p="undefined"!=typeof a.a&&a.a)&&p||Object])],e);var t,u,p}()},636:function(e,t,n){"use strict";var i=n(183),o=(n.n(i),n(1)),s=n(0),a=(n.n(s),n(170)),r=n(82),c=n(55),u=n(49);n.d(t,"a",function(){return l});var p=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){var i=this;this.actions$=e,this.submissionService=t,this.createSubmission$=this.actions$.ofType(r.b.CREATE_SUBMISSION).switchMap(function(e){return i.submissionService.createSubmission(e.payload).switchMap(function(e){return i.submissionService.getSubmission(e.id).map(function(e){return n.i(r.e)(e)})}).catch(function(e){return s.Observable.of(n.i(r.f)(e))})}),this.createSubmissionFailure$=this.actions$.ofType(r.b.CREATE_SUBMISSION_FAILURE).map(function(e){return e.payload}).map(function(e){Materialize.toast("Something went wrong saving your submission! Please copy your work and contact an administrator.",1e4,"create-submission-failure")}),this.updateSubmission$=this.actions$.ofType(r.b.UPDATE_SUBMISSION).mergeMap(function(e){return i.submissionService.updateSubmission(e.payload).mergeMap(function(t){return i.submissionService.getSubmission(e.payload.id)})}).map(function(e){return n.i(r.g)(e)}),this.loadSubmissions$=this.actions$.ofType(r.b.LOAD_SUBMISSIONS).mergeMap(function(){return i.submissionService.loadSubmissions()}).map(function(e){return n.i(r.h)(e)}),this.deleteSubmission$=this.actions$.ofType(r.b.DELETE_SUBMISSION).mergeMap(function(e){return i.submissionService.deleteSubmission(e.payload)}).map(function(e){Materialize.toast("Submission deleted",1e3)}),this.notifyAssignmentOnChange$=this.actions$.ofType(r.b.CREATE_SUBMISSION_SUCCESS,r.b.UPDATE_SUBMISSION_SUCCESS).map(function(e){return n.i(c.b)()})}return p([n.i(a.a)(),f("design:type",Object)],e.prototype,"createSubmission$",void 0),p([n.i(a.a)(),f("design:type",Object)],e.prototype,"createSubmissionFailure$",void 0),p([n.i(a.a)(),f("design:type",Object)],e.prototype,"updateSubmission$",void 0),p([n.i(a.a)(),f("design:type",Object)],e.prototype,"loadSubmissions$",void 0),p([n.i(a.a)({dispatch:!1}),f("design:type",Object)],e.prototype,"deleteSubmission$",void 0),p([n.i(a.a)(),f("design:type",Object)],e.prototype,"notifyAssignmentOnChange$",void 0),e=p([n.i(o.Injectable)(),f("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.b&&a.b)&&t||Object,"function"==typeof(i="undefined"!=typeof u.a&&u.a)&&i||Object])],e);var t,i}()},637:function(e,t,n){"use strict";var i=n(1);n.d(t,"a",function(){return a});var o=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.username="restws_admin",this.password="admin"}return e.prototype.ngOnInit=function(){},e=o([n.i(i.Component)({selector:"cle-user",template:n(870),styles:[n(833)]}),s("design:paramtypes",[])],e)}()},638:function(e,t,n){"use strict";function i(e,t){switch(void 0===e&&(e=s),t.type){case o.c.LOAD_PERMISSIONS:return e;case o.c.LOAD_PERMISSIONS_SUCCESS:return{permissions:t.payload.permissions?t.payload.permissions:[],token:t.payload.token?t.payload.token:null,uid:t.payload.uid?t.payload.uid:null};default:return e}}var o=n(55);t.a=i,n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return c});var s={permissions:[],token:null,uid:null},a=function(e){return e.permissions},r=function(e){return e.token},c=function(e){return e.uid}},639:function(e,t,n){"use strict";var i=n(1),o=n(79),s=n(38);n.d(t,"a",function(){return c});var a=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.el=e,this.elmslnService=t,this.onWysiwygInit=new i.EventEmitter,this.onContentUpdate=new i.EventEmitter,this.onImageSave=new i.EventEmitter,this.propagateChange=function(e){}}return e.prototype.writeValue=function(e){this.content=e,this.updateContent()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e.prototype.ngOnInit=function(){var e=this;jQuery(this.el.nativeElement.firstElementChild).each(function(e,t){jQuery(t).wysiwyg({toolbar:"top",buttons:{insertimage:{title:"Insert image",image:"",showselection:!1},insertvideo:{title:"Insert video",image:"",showselection:!1},insertlink:{title:"Insert link",image:""},header:{title:"Header",image:"",popup:function(e,n){var i={"Header 1":"<h1>","Header 2":"<h2>","Header 3":"<h3>","Header 4":"<h4>","Header 5":"<h5>","Header 6":"<h6>",Code:"<pre>"},o=jQuery("<div/>").addClass("wysiwyg-plugin-list").attr("unselectable","on");jQuery.each(i,function(e,n){var i=jQuery("<a/>").attr("href","#").css("font-family",n).html(e).click(function(e){return jQuery(t).wysiwyg("shell").format(n).closePopup(),e.stopPropagation(),e.preventDefault(),!1});o.append(i)}),e.append(o)}},bold:{title:"Bold (Ctrl+B)",image:"",hotkey:"b"},italic:{title:"Italic (Ctrl+I)",image:"",hotkey:"i"},underline:{title:"Underline (Ctrl+U)",image:"",hotkey:"u"},strikethrough:{title:"Strikethrough (Ctrl+S)",image:"",hotkey:"s"},orderedList:0==e&&{title:"Ordered list",image:"",showselection:!1},unorderedList:0==e&&{title:"Unordered list",image:"",showselection:!1},removeformat:{title:"Remove format",image:""}},selectImage:"Click to upload image",placeholderUrl:"www.example.com",placeholderEmbed:"<embed/>",maxImageSize:[1024,640],onImageUpload:function(e){},forceImageUpload:!1,videoFromUrl:function(e){var t=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?(?:youtu\.be|youtube\.com)\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/)([^\?&\"'>]+)/);if(t&&11==t[1].length)return'<iframe src="//www.youtube.com/embed/'+t[1]+'" width="640" height="360" frameborder="0" allowfullscreen></iframe>';var n=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?vimeo\.com\/([0-9]+)$/);if(n)return'<iframe src="//player.vimeo.com/video/'+n[1]+'" width="640" height="360" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';var i=e.match(/^(?:http(?:s)?:\/\/)?(?:[a-z0-9.]+\.)?dailymotion\.com\/video\/([0-9a-z]+)$/);return i?'<iframe src="//www.dailymotion.com/embed/video/'+i[1]+'" width="640" height="360" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':void 0}})}).change(function(){var t=jQuery(e.el.nativeElement).find(".wysiwyg-editor");t.find("img:not(.processed)").each(function(t,n){var i=this,o=jQuery(this).attr("src");e.onImageSave.emit({type:"saving"}),e.uploadImage(o).subscribe(function(t){jQuery(i).attr("src",t.url),jQuery(i).attr("width",t.metadata.width),jQuery(i).attr("height",t.metadata.height),jQuery(i).addClass("processed"),e.onImageSave.emit({type:"success",image:t})},function(t){jQuery(i).remove(),e.onImageSave.emit({type:"error"})})}),e.content=t.html(),e.propagateChange(e.content),e.onContentUpdate.emit()}),this.onWysiwygInit.emit()},e.prototype.updateContent=function(){jQuery(this.el.nativeElement).find(".wysiwyg-editor").html(this.content)},e.prototype.resizeImage=function(e){var t=new Image;t.src=e;var n=document.createElement("canvas");return n.width=800,n.height=800,n.getContext("2d").drawImage(t,0,0,800,800),n.toDataURL("image/jpg")},e.prototype.uploadImage=function(e){return this.elmslnService.createImage(e).map(function(e){return e})},a([n.i(i.Input)(),r("design:type",String)],e.prototype,"content",void 0),a([n.i(i.Output)(),r("design:type","function"==typeof(t="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&t||Object)],e.prototype,"onWysiwygInit",void 0),a([n.i(i.Output)(),r("design:type","function"==typeof(c="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&c||Object)],e.prototype,"onContentUpdate",void 0),a([n.i(i.Output)(),r("design:type","function"==typeof(u="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&u||Object)],e.prototype,"onImageSave",void 0),e=a([n.i(i.Component)({selector:"wysiwygjs",template:n(871),styles:[n(834)],providers:[{provide:o.d,useExisting:n.i(i.forwardRef)(function(){return e}),multi:!0}]}),r("design:paramtypes",["function"==typeof(p="undefined"!=typeof i.ElementRef&&i.ElementRef)&&p||Object,"function"==typeof(f="undefined"!=typeof s.a&&s.a)&&f||Object])],e);var t,c,u,p,f}()},640:function(e,t,n){"use strict";var i=n(656),o=(n.n(i),n(649)),s=(n.n(o),n(645)),a=(n.n(s),n(651)),r=(n.n(a),n(650)),c=(n.n(r),n(648)),u=(n.n(c),n(647)),p=(n.n(u),n(655)),f=(n.n(p),n(644)),l=(n.n(f),n(643)),d=(n.n(l),n(653)),m=(n.n(d),n(646)),y=(n.n(m),n(654)),g=(n.n(y),n(652)),h=(n.n(g),n(657)),b=(n.n(h),n(1134));n.n(b)},68:function(e,t,n){"use strict";function i(e,t){return a.a.production?h(e,t):g(e,t)}var o=n(872),s=(n.n(o),n(386)),a=n(409),r=n(593),c=(n.n(r),n(798)),u=(n.n(c),n(11)),p=n(613),f=n(257),l=n(638),d=n(630),m=n(401);t.h=i,n.d(t,"d",function(){return v}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return j}),n.d(t,"e",function(){return C}),n.d(t,"b",function(){return A}),n.d(t,"g",function(){return w}),n.d(t,"f",function(){return T});var y={assignments:p.a,submission:f.a,user:l.a,projects:d.a,image:m.a,router:s.a},g=n.i(r.compose)(c.storeFreeze,u.c)(y),h=n.i(u.c)(y),b=function(e){return e.projects},v=n.i(o.createSelector)(b,d.b),_=(n.i(o.createSelector)(b,d.c),function(e){return e.assignments}),S=n.i(o.createSelector)(_,p.b),E=(n.i(o.createSelector)(_,p.c),function(e){return e.user}),j=n.i(o.createSelector)(E,l.b),O=(n.i(o.createSelector)(E,l.c),n.i(o.createSelector)(E,l.d)),C=function(e){return e.image},I=n.i(o.createSelector)(C,m.b),R=function(e){return e.submission},A=n.i(o.createSelector)(R,f.b),w=n.i(o.createSelector)(R,f.c),T=(n.i(o.createSelector)(A,O,function(e,t){return e.filter(function(e){return e.uid===t})}),n.i(o.createSelector)(w,I,function(e,t){return e===f.d.default&&t===m.c.default}))},69:function(e,t,n){"use strict";var i=n(1),o=n(11),s=n(38),a=n(98),r=n(123);n.d(t,"a",function(){return p});var c=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t){this.elmsln=e,this.store=t,this.assignments=this.store.select(function(e){return e.assignments})}return e.prototype.getAssignments=function(e){var t=this,n=e?"?project="+e:"";this.elmsln.get(a.a.BASE_PATH+"api/v1/cle/assignments"+n).map(function(e){return e.json()}).map(function(e){return"undefined"!=typeof e.data?e.data:[]}).map(function(e){if(e){var n=[];return e.forEach(function(e){return n.push(t.convertToAssignment(e))}),n}}).map(function(e){return{type:"ADD_ASSIGNMENTS",payload:e}}).subscribe(function(e){return t.store.dispatch(e)})},e.prototype.loadAssignments=function(){var e=this;return this.elmsln.get(a.a.BASE_PATH+"api/v1/cle/assignments").map(function(e){return e.json().data}).map(function(t){if(t){var n=[];return t.forEach(function(t){return n.push(e.convertToAssignment(t))}),n}})},e.prototype.getAssignment=function(e){var t=this;return this.elmsln.get(a.a.BASE_PATH+"api/v1/cle/assignments/"+e).map(function(e){return e.json().data[0]}).map(function(e){return t.convertToAssignment(e)})},e.prototype.createAssignment=function(e){var t=this,n=this.prepareForDrupal(e);return this.elmsln.post(a.a.BASE_PATH+"api/v1/cle/assignments/create",n).map(function(e){return e.json().node}).switchMap(function(e){return t.getAssignment(e.nid)})},e.prototype.updateAssignment=function(e){
var t=this,n=this.prepareForDrupal(e);return this.elmsln.put(a.a.BASE_PATH+"api/v1/cle/assignments/"+e.id+"/update",n).map(function(e){return e.json().node}).map(function(e){return t.convertToAssignment(e)})},e.prototype.deleteAssignment=function(e){return this.elmsln.delete(a.a.BASE_PATH+"api/v1/cle/assignments/"+e.id+"/delete").map(function(e){return e.json()})},e.prototype.startCritique=function(e){return this.elmsln.get(a.a.BASE_PATH+"api/v1/cle/assignments/"+e.id+"/critique").map(function(e){return e.json()})},e.prototype.getAssignmentOptions=function(){return{type:[{value:"open",display:"Open"},{value:"open_after_submission",display:"Open After Submission"},{value:"closed",display:"Closed"}],critiqueMethod:[{value:"none",display:"None"},{value:"open",display:"Open"},{value:"random",display:"Random"}],critiqueStyle:[{value:"open",display:"Open"},{value:"blind",display:"Blind"},{value:"double_blind",display:"Double blind"}]}},e.prototype.convertToAssignment=function(e){var t=new r.a;for(var n in t)e[n]&&(t[n]=e[n]);return e.hierarchy&&e.hierarchy.project&&(t.project=Number(e.hierarchy.project)),e.evidence&&e.evidence.critique&&(e.evidence.critique.method&&(t.critiqueMethod=e.evidence.critique.method),e.evidence.critique.public&&(t.critiquePrivacy=e.evidence.critique.public)),t},e.prototype.prepareForDrupal=function(e){if(!e)return e;var t=Object.assign({},e);delete t.created,e.body&&(t.body={value:e.body,format:"textbook_editor"}),e.type&&Object.assign(t,e.type),Object.assign(t,{evidence:{critique:{method:e.critiqueMethod,public:e.critiquePrivacy?1:0}}});var n=["startDate","endDate"];return n.forEach(function(t){e[t]&&(e[t]=Date.parse(e[t])/1e3,e[t]=e[t].toString())}),null!==e.endDate&&(null!==e.startDate?(t.startDate=e.startDate,t.endDate=e.endDate):(t.startDate=e.endDate,t.endDate=null)),t},Object.defineProperty(e.prototype,"userCanEdit",{get:function(){return this.store.select("user").map(function(e){return e.permissions.includes("edit own cle_assignment content")})},enumerable:!0,configurable:!0}),e.prototype.assignmentIsCritique=function(e){return!!(e.hierarchy&&e.hierarchy.dependencies&&e.hierarchy.dependencies.length>0)},e=c([n.i(i.Injectable)(),u("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.a&&s.a)&&t||Object,"function"==typeof(p="undefined"!=typeof o.a&&o.a)&&p||Object])],e);var t,p}()},800:function(e,t){e.exports=".critique__wrapper{margin:auto calc(-50vw + 50%);display:-webkit-box;display:-ms-flexbox;display:flex}.critique__wrapper>*{padding:1em;width:100%}.critique__wrapper>*>*{max-width:55;width:100%;display:block}.critique__window{box-shadow:1px 1px 5px rgba(0,0,0,0.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;background-color:#f8fdff}.critique__window /deep/ img{max-width:100%;height:auto}\n"},801:function(e,t){e.exports=".submission-detail{margin:1em}.submission-detail /deep/ img{max-width:100%;height:auto}\n"},802:function(e,t){e.exports='.submission-states ul{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding:0;width:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.submission-states li{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;max-width:20em;position:relative;color:#d0d0d0;background:#d0d0d0;height:3em}.submission-states li *>{color:black}.submission-states li:before{position:absolute;content:"";top:0;width:0;height:0;z-index:2;right:-1.48604em;border-top:1.532em solid transparent;border-bottom:1.532em solid transparent;border-left:1.532em solid currentColor}.submission-states li:nth-child(2){background:#c3c3c3}.submission-states li:nth-child(2):before{border-left-color:#c3c3c3}.submission-states li:nth-child(3){background:#b7b7b7}.submission-states li:nth-child(3):before{border-left-color:#b7b7b7}.submission-states li:nth-child(4){background:#aaa}.submission-states li:nth-child(4):before{border-left-color:#aaa}.submission-states li.active:before{border-left-color:inherit}.submission-states li.canEdit{cursor:pointer}.submission-item__container{color:black}\n'},803:function(e,t){e.exports=".cle-critique{\n  margin:0 calc(-50vw + 50%);\n}\n\n.nav-wrapper{\n  background:#484848;\n  height:50px;\n}\n.nav-wrapper *{\n  font-size:14px;\n  height:50px;\n  line-height:50px;\n  color:white;\n}"},804:function(e,t){e.exports=".assignment{\n  position:relative;\n  background:white;\n  display:block;\n  padding:1em;\n  font-size:.9em;\n  margin-bottom:2em;\n  width:100%;\n  margin:auto;\n  padding-left:3em;\n  box-shadow:1px 1px 5px rgba(0, 0, 0, .6);\n }\n.assignment__label{\n  opacity:.5;\n  font-size:1.3em;\n  margin-top:0;\n}\n\n.assignment__icon{\n  position:absolute;\n  top:.5em;\n  left:.3em;\n}\n\n.assignment__title{\n  font-size:1.2em;\n}\n.assignment__body{\n}"},805:function(e,t){e.exports=".assignment-dialog{\n  top:5% !important;\n  bottom:5% !important;\n  max-height:none !important;\n  height:90%;\n}"},806:function(e,t){e.exports=".assignment-form{\n  max-width:55em;\n  margin:auto;\n}\n\n.assignment-form > *{\n  margin-top:2em;\n}\n\n.privacy .label{\n  display:block;\n}\n\n.privacy .detail{\n  padding-top:.5em;\n}\n\n.due-date .display{\n  font-size:1.2em;\n  text-align:center;\n  margin:1em;\n  color:gray;\n}\n\n.due-date .separator{\n  margin:0 .5em;\n}\n\n:host >>> .wysiwyg-editor{\n  min-height:10em;\n}\n\nselect{\n  display:block;\n}\n\n.fieldset{\n  padding:1em;\n  padding-top:2em;\n  background:rgba(0,0,0, 0.07);\n  position:relative;\n}\n.fieldset > *{\n  padding-bottom:1em;\n}\n.fieldset > label:first-of-type{\n  position:absolute;\n  top:.5em;\n  left:.5em;\n}"},807:function(e,t){e.exports=".icon{\n  float:left;\n  margin-right:1em;\n}\n\n.assignment:hover{\n  cursor:pointer;\n}\n\n.status{\n  float:right;\n  size:.9em;\n}\n@media (min-width: 500px){\n  .status{\n    position:absolute;\n    top:50%;\n    -webkit-transform:translateY(-50%);\n            transform:translateY(-50%);\n    right:1em;\n  }\n}\n\n.status.complete{\n  color:green;\n}\n\n.add-button{\n  position:fixed;\n  top:3.5em;\n  right:3em;\n}\n\nnav, nav .btn{\n  background:transparent;\n  box-shadow:none;\n}\nnav li a{\n  color:#2196F3;\n}\n\n.assignment{\n  position:relative;\n}\n\n.assignment--loading{\n  background:#efefef;\n}\n\n.assignment:hover .assignment__edit-buttons{\n  opacity:1;\n}\n\n.assignment__edit-buttons{\n  position:absolute;\n  right:0;\n  top:0;\n  background:-webkit-linear-gradient(left, transparent, white 30%);\n  background:linear-gradient(to right, transparent, white 30%);\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  -webkit-box-pack:end;\n      -ms-flex-pack:end;\n          justify-content:flex-end;\n  padding-left:2em;\n  opacity:0;\n  -webkit-transition:opacity .3s ease-in-out;\n  transition:opacity .3s ease-in-out;\n}\n\n.assignment__icons{\n  position:absolute;\n  right:0;\n  top:0;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  -webkit-box-pack:end;\n      -ms-flex-pack:end;\n          justify-content:flex-end;\n  padding-left:2em;\n}\n\n.assignment__icon--complete{\n  color:green;\n}"},808:function(e,t){e.exports=".assignment__rationale{\n  padding:.1em .5em;\n  background-color:lightgray;\n  font-size:.9em;\n}\n\n.assignment__actions{\n  margin-top:3em;\n}\n\n.assignment__submission{\n  margin-top:5em;\n  display:block;\n}"},809:function(e,t){e.exports=""},810:function(e,t){e.exports=":host >>> .wysiwyg-editor{\n  min-height:200px;\n}\n\n:host >>> .wysiwyg-container{\n  max-width:900px;\n  margin:1em;\n}"},811:function(e,t){e.exports=".created{\n  font-size:.9em;\n  opacity:.8;\n}\n\n.critique{\n  display:block;\n  overflow:hidden;\n}"},812:function(e,t){e.exports=""},813:function(e,t){e.exports=""},814:function(e,t){e.exports=""},815:function(e,t){e.exports=""},816:function(e,t){e.exports=""},817:function(e,t){e.exports=""},818:function(e,t){e.exports=""},819:function(e,t){e.exports=""},82:function(e,t,n){"use strict";function i(e){return{type:p.CREATE_SUBMISSION,payload:e}}function o(e){return{type:p.CREATE_SUBMISSION_SUCCESS,payload:e}}function s(e){return{type:p.CREATE_SUBMISSION_FAILURE,payload:e}}function a(e){return{type:p.UPDATE_SUBMISSION,payload:e}}function r(e){return{type:p.UPDATE_SUBMISSION_SUCCESS,payload:e}}function c(){return{type:p.LOAD_SUBMISSIONS,payload:{}}}function u(e){return{type:p.LOAD_SUBMISSIONS_SUCCESS,payload:e}}n.d(t,"b",function(){return p}),t.c=i,t.e=o,t.f=s,t.d=a,t.g=r,t.a=c,t.h=u;var p={CREATE_SUBMISSION:"CREATE_SUBMISSION",CREATE_SUBMISSION_SUCCESS:"CREATE_SUBMISSION_SUCCESS",CREATE_SUBMISSION_FAILURE:"CREATE_SUBMISSION_FAILURE",UPDATE_SUBMISSION:"UPDATE_SUBMISSION",UPDATE_SUBMISSION_SUCCESS:"UPDATE_SUBMISSION_SUCCESS",DELETE_SUBMISSION:"DELETE_SUBMISSION",LOAD_SUBMISSIONS:"LOAD_SUBMISSIONS",LOAD_SUBMISSIONS_SUCCESS:"LOAD_SUBMISSIONS_SUCCESS",LOAD_PERMISSIONS:"LOAD_PERMISSIONS",LOAD_PERMISSIONS_SUCCESS:"LOAD_PERMISSIONS_SUCCESS",CREATE_SUBMISSION_IMAGE:"CREATE_SUBMISSION_IMAGE",CREATE_SUBMISSION_IMAGE_SUCCESS:"CREATE_SUBMISSION_IMAGE_SUCCESS",CREATE_SUBMISSION_IMAGE_FAILURE:"CREATE_SUBMISSION_IMAGE_FAILURE"}},820:function(e,t){e.exports=""},821:function(e,t){e.exports=""},822:function(e,t){e.exports=".project{\n  margin:1em;\n  padding:1em;\n  background:lightgray;\n  width:auto;\n  position:relative;\n}\n\n.project__header{\n  position:relative;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n}\n\n.project__options{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n}\n.project__options > a{\n}\n\n.project__title-container{\n  width:100%;\n}\n\n.project__title{\n  margin-top:0;\n  font-size:1.4em;\n}\n\n.project__board{\n  padding:1em;\n  min-height:200px;\n  width:100%;\n}\n\n.assignment{\n  background:white;\n  padding:1em;\n  width:100%;\n}\n\n.assignment__title{\n  margin-top:0;\n  font-size:1.4em;\n}"},823:function(e,t){e.exports=".projects-container{\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  width:auto;\n  -webkit-box-align:center;\n      -ms-flex-align:center;\n          align-items:center;\n  -webkit-box-pack:start;\n      -ms-flex-pack:start;\n          justify-content:flex-start;\n  -webkit-box-align:start;\n      -ms-flex-align:start;\n          align-items:flex-start;\n  overflow-x:scroll;\n  margin:0 calc(-50vw + 50%);\n}\n\n.projects-container >>> app-project-item{\n  width:100%;\n  min-width:400px;\n  max-width:500px;\n}\n\n.create-project{\n  margin:3em auto;\n  max-width:300px;\n  display:block;\n  cursor:pointer;\n}\n\n.face{\n  text-align:center;\n  margin:auto;\n  display:block;\n  font-size:5em;\n  margin-bottom:2rem;\n  margin-top:2rem;\n  color:#ababab;\n}\n\n.preloader-wrapper{\n  position:absolute;\n  top:50%;\n  left:50%;\n}"},824:function(e,t){e.exports=""},825:function(e,t){e.exports=""},826:function(e,t){e.exports=""},827:function(e,t){e.exports=""},828:function(e,t){e.exports=""},829:function(e,t){e.exports=""},83:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){this.id=null,this.uid=null,this.title=null,this.status=!0,this.created=null,this.body=null,this.assignment=null,this.state="submission_in_progress",this.metadata={},this.environment={},this.evidence={},this.relatedSubmission=null}return e}()},830:function(e,t){e.exports=":host >>> .wysiwyg-editor{\n  min-height:10em;\n}\n\n.actions{\n  padding-top:2em;\n}"},831:function(e,t){e.exports=".card{\n  cursor:pointer;\n}\n\n.card-content .chip{\n  font-size:10px;\n}\n\n.card-action .material-icons{\n  font-size:1.4em;\n  margin-top:.35em;\n  margin-right:.3em;\n}\n\n.card-image{\n  max-height:15em;\n  overflow:hidden;\n}"},832:function(e,t){e.exports=""},833:function(e,t){e.exports=""},834:function(e,t){e.exports=".wysiwyg-plugin-list{\n    max-height:16em;\n    overflow:auto;\n    overflow-x:hidden;\n    overflow-y:scroll;\n}\n.wysiwyg-plugin-list a,\n.wysiwyg-plugin-list a:link,\n.wysiwyg-plugin-list a:visited{\n    display:block;\n    color:black;\n    padding:5px 10px;\n    text-decoration:none;\n    cursor:pointer;\n}\n.wysiwyg-plugin-list a:hover{\n    color:HighlightText;\n    background-color:Highlight;\n}\n.wysiwyg-plugin-smilies{\n    padding:10px;\n    text-align:center;\n    white-space:normal;\n}\n.wysiwyg-plugin-smilies img{\n    display:-moz-inline-stack;\n    display:inline-block;\n    *display:inline;\n}\n\n.wysiwyg-browse{\n  height:50%;\n}\n\n.wysiwyg-editor img{\n    height:auto;\n    max-width:100%;\n}"},837:function(e,t){e.exports='<div class="cle-critique">\n  <div class="container">\n    <router-outlet></router-outlet>\n    <router-outlet name="dialog"></router-outlet>\n  </div>\n</div>'},838:function(e,t){e.exports='<div *ngIf="assignment" class="assignment">\n  <i class="material-icons assignment__icon">assignment</i>\n  <h3 class="assignment__label">Assignment Detail</h3>\n  <h4 class="assignment__title">{{ assignment.title }}</h4>\n  <div class="assignment__body" [innerHTML]="assignment.body"></div>\n</div>\n'},839:function(e,t){e.exports='<!-- Modal Structure -->\n<div id="modal-assignment-dialog" class="modal modal-fixed-footer assignment-dialog">\n\n  <!--Create or Update Assignment-->\n  <div *ngIf="action === \'create\' || action === \'update\'">\n    <div class="modal-content">\n      <h2 *ngIf="assignment.id">Edit Assignment</h2>\n      <h2 *ngIf="!assignment.id">Create Assignment</h2>\n      <app-assignment-form [assignment]="assignment" (assignmentSave)="onAssignmentSave($event)"></app-assignment-form>\n    </div>\n    <div class="modal-footer">\n      <a (click)="onSave()" class="modal-action modal-close waves-effect waves-green btn-flat">Save</a>\n      <a (click)="onCancel()" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>\n    </div>\n  </div>\n\n  <!--DELETE Assignment-->\n  <div *ngIf="action === \'delete\'">\n    <div class="modal-content">\n      <h2>Are you sure you want to delete this assignment?</h2>\n      <p>The following assignment will be deleted: {{ assignment.title }}</p>\n      <p>Are you sure you want to proceed?</p>\n    </div>\n    <div class="modal-footer">\n      <a (click)="onDelete()" class="modal-action modal-close waves-effect waves-red btn-flat">Delete</a>\n      <a (click)="onCancel()" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>\n    </div>\n  </div>\n</div>\n'},840:function(e,t){e.exports='<form [formGroup]="form" class="assignment-form">\n  <input formControlName="title" placeholder="Title" [ngClass]="{\'invalid\': form.controls[\'title\'].status === \'INVALID\' && saveAttempted}">\n  <wysiwygjs formControlName="body"></wysiwygjs>\n\n  <div class="submissions-settings fieldset">\n    <label>Submission settings</label>\n    <div class="type">\n      <label>Type</label>\n      <select formControlName="type">\n        <option *ngFor="let type of assignmentOptions.type" [value]="type.value">{{ type.display }}</option>\n      </select>\n      <div class="detail" *ngIf="form.value.type === \'open\'">Students will be able to see all submissions.</div>\n      <div class="detail" *ngIf="form.value.type === \'open_after_submission\'">Students will be able to see all submissions AFTER they have made a submission to this assignment.</div>\n      <div class="detail" *ngIf="form.value.type === \'closed\'">Students will NOT be able to see each other\'s submissions.</div>\n    </div>\n\n    <div class="late-submissions switch">\n      <label>\n        No late Submissions\n        <input type="checkbox" formControlName="allowLateSubmissions">\n        <span class="lever"></span>\n        Allow Late Submissions\n      </label>\n    </div>\n  </div>\n\n\n  <div class="critique-settings fieldset" *ngIf="assignmentIsCritique">\n    <label>Critique settings</label>\n    <div class="critique-method">\n      <label>Method</label>\n      <select formControlName="critiqueMethod">\n        <option *ngFor="let option of assignmentOptions.critiqueMethod" [value]="option.value">{{ option.display }}</option>\n      </select>\n    </div>\n\n    <div class="critique-subsettings" *ngIf="form.value.critiqueMethod !== \'none\'">\n      <div class="critique-privacy switch">\n        <label>\n          Double-blind\n          <input type="checkbox" formControlName="critiquePrivacy">\n          <span class="lever"></span>\n          Open\n        </label>\n        <div class="detail" *ngIf="!form.value.critiquePrivacy">Submissions will NOT see the author information on submissions or critiques.</div>\n        <div class="detail" *ngIf="form.value.critiquePrivacy">Submissions will see the author information on submissions and critiques.</div>\n      </div>\n    </div>\n  </div>\n\n  <div class="due-date">\n    <div class="display" *ngIf="form.value.endDate !==null">\n      Due date:\n      <span *ngIf="form.value.startDate !== null" class="start-date">\n        {{ form.value.startDate | amDateFormat:\'LL hh:mma\' }} \n        <span class="separator">\n          to\n        </span>\n      </span>\n      <span class="end-date">\n        {{ form.value.endDate | amDateFormat:\'LL hh:mma\' }}\n      </span>\n    </div>\n    \n    <div *ngIf="form.value.endDate !== null" class="start-date">\n      <label>Start Date</label>\n      <app-datetime-input formControlName="startDate"></app-datetime-input>\n    </div>\n\n    <div class="due-date">\n      <label>Due Date</label>\n      <app-datetime-input formControlName="endDate"></app-datetime-input>\n    </div>\n  </div>\n</form>'},841:function(e,t){e.exports='<div class="row">\n  <ul class="collapsible">\n    <li *ngFor="let assignment of assignments">\n      <div class="collapsible-header assignment" [ngClass]="{\'assignment--loading\': !assignment.id, \'assignment--critique\': assignmentService.assignmentIsCritique(assignment)}">\n        <div class="assignment__body" (click)="viewAssignment(assignment.id)">\n          <i *ngIf="!assignmentService.assignmentIsCritique(assignment)" class="material-icons">assignment</i>\n          <i *ngIf="assignmentService.assignmentIsCritique(assignment)" class="material-icons">arrow_right</i>\n          {{ assignment.title }}\n          <span *ngIf="assignment.complete == 1" class="badge green-text">Complete</span>\n          <span *ngIf="assignment.complete == 0" class="badge red-text">Incomplete</span>\n          <div class="due-dates">\n            <span *ngIf="assignment.startDate">{{ assignment.startDate | amDateFormat:\'MM/DD/YY\' }} - </span>\n            {{ assignment.endDate | amDateFormat:\'MM/DD/YY\' }}\n          </div>\n        </div>\n        <div class="assignment__icons">\n          <span *ngIf="assignment && assignment.metadata.relatedSubmissions && assignment.metadata.relatedSubmissions.complete.status" class="assignment__icon--complete"><i class="material-icons">check</i></span>\n        </div>\n        <div class="assignment__edit-buttons" *ngIf="assignment.id && (userCanEdit$ | async)">\n          <a *ngIf="!assignmentService.assignmentIsCritique(assignment)" (click)="addCritique(assignment)"><i class="material-icons" aria-label="Edit assignment">add</i></a>\n          <a (click)="onEditAssignment(assignment)"><i class="material-icons" aria-label="Edit assignment">edit</i></a>\n          <a (click)="onDeleteAssignment(assignment)"><i class="material-icons" aria-label="Edit assignment">delete</i></a>\n        </div>\n        <div class="assignment__loading" *ngIf="!assignment.id">\n          <div class="progress">\n            <div class="indeterminate"></div>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>'},842:function(e,t){e.exports='<div *ngFor="let assignment of (assignments$| async)">\n    <nav>\n      <div class="nav-wrapper">\n        <ul id="nav-mobile" class="left">\n          <li><a routerLink="/projects"><i class="material-icons left">&#xE5C4;</i> projects</a></li>\n        </ul>\n        <ul id="nav-mobile" class="right">\n          <li *ngIf="(userCanEdit$ | async)"><a (click)="onEditAssignment(assignment)" title="Edit this assignment"><i class="material-icons left">edit</i></a></li>\n        </ul>\n      </div>\n    </nav>\n\n    <div class="assignment" *ngIf="assignment">\n      <h1 class="assignment__title">{{ assignment.title }}</h1>\n      <div class="assignment__meta">\n        <div class="assignment__dates">\n          <span *ngIf="assignment.startDate">{{ assignment.startDate | amDateFormat:\'LL hh:mmA\' }} - </span>\n          {{ assignment.endDate | amDateFormat:\'LL hh:mmA\' }}\n        </div>\n      </div>\n      <div class="assignment__description" [innerHTML]="assignment.body"> </div>\n    </div>\n\n  <div *ngIf="assignment" class="assignment__actions">\n    <div *ngIf="assignment.metadata.submissionActive">\n      <a *ngIf="!assignmentService.assignmentIsCritique(assignment)" (click)="onCreateSubmission(assignment)" class="btn-large">Submit assignment</a>\n      <a *ngIf="assignmentService.assignmentIsCritique(assignment)" (click)="onStartCritique(assignment)" class="btn-large">Start Critique</a>\n    </div>\n    <div *ngIf="!assignment.metadata.submissionActive" class="assignment__rationale">\n      <p *ngIf="assignment.metadata.rationale && assignment.metadata.rationale.text" [innerHTML]="assignment.metadata.rationale.text"></p>\n    </div>\n  </div>\n\n\n  <app-submission-list class="assignment__submission" *ngIf="(submissions$ | async).length > 0" title="Submissions" [submissions]="submissions$ | async"></app-submission-list>\n\n</div>'},843:function(e,t){e.exports="<!-- Dropdown Trigger -->\n<a class='dropdown-button' href='#' data-activates='dropdown1'><i class=\"material-icons text-black\">more_vert</i></a>\n<!-- Dropdown Structure -->\n<ul id='dropdown1' class='dropdown-content'>\n  <li><a href=\"#!\">one</a></li>\n  <li><a href=\"#!\">two</a></li>\n  <li class=\"divider\"></li>\n  <li><a href=\"#!\">three</a></li>\n</ul>"},844:function(e,t){e.exports='<wysiwygjs (onFocus)="onFocus($event)" (onChange)="onChange($event)" (onBlur)="onBlur($event)"></wysiwygjs>\n\n\n<button md-raised-button (click)="submitForm()" color="primary">Submit Critique</button>'},845:function(e,t){e.exports="critiques list works!"},846:function(e,t){e.exports="critique.component"},847:function(e,t){e.exports="<p>\n  dashboard works!\n</p>\n"},848:function(e,t){e.exports='<div>\n  <input [(ngModel)]="day" (ngModelChange)="updateDatetime($event)" type="date" class="datepicker">\n  <input [(ngModel)]="time" (ngModelChange)="updateDatetime($event)" type="time">\n</div>'},849:function(e,t){e.exports='<!-- Modal Structure -->\n<div id="modal-dialog" class="modal dialog">\n\n  <!--Create or Update Assignment-->\n  <div class="modal-content" [innerHTML]="content">\n  </div>\n  <div class="modal-footer">\n    <a (click)="onSave()" class="waves-effect waves-green btn-flat">Save</a>\n    <a (click)="onCancel()" class="waves-effect waves-green btn-flat">Cancel</a>\n  </div>\n</div>\n'},850:function(e,t){e.exports='<div *ngIf="editing">\n  <form [formGroup]="form">\n    <input formControlName="content" (keyup.enter)="endEditing()" type="text" class="text-input"> \n  </form>\n</div>\n<div *ngIf="editing == false" (click)="beginEditing()">\n  <ng-content></ng-content>\n</div>\n'},851:function(e,t){e.exports="<p>\n  elmsln-wysiwyg works!\n</p>\n"},852:function(e,t){e.exports="<p>\n  image works!\n</p>\n"},853:function(e,t){e.exports='<form [formGroup]="form" id="login-form" class="input-field col s12">\n  <input formControlName="username" id="critique-form-username" name="critique-form-username" placeholder="username"/>\n  <input formControlName="password" id="critique-form-password" name="critique-form-password" placeholder="password"/>\n</form>\n<button (click)="submitForm()" class="btn" color="primary">Login</button>'},854:function(e,t){e.exports="<p>\n  logout works!\n</p>\n"},855:function(e,t){e.exports="<p>\n  project-card works!\n</p>\n"},856:function(e,t){e.exports='<div class="project" *ngIf="project">\n  <div class="project__header">\n    <div class="project__title-container">\n\n      <app-editable-field *ngIf="(userCanEdit$ | async)" [type]="text" [content]="project.title" (contentUpdated)="updateTitle($event)">\n        <h1 class="project__title">{{ project.title }}</h1>\n      </app-editable-field>\n      <h1 *ngIf="!(userCanEdit$ | async)" class="project__title">{{ project.title }}</h1>\n\n      <div class="project__description" [innerHTML]="project.description"></div>\n    </div>\n    <div *ngIf="(userCanEdit$ | async)" class="project__options"> \n      <a (click)="onCreateAssignment()" class="waves-effect btn-flat tooltipped" data-tooltip="create assignment"><i class="material-icons">add</i></a>\n      <a (click)="onDeleteProject()" class="waves-effect btn-flat tooltipped" data-tooltip="delete assignment"><i class="material-icons">delete</i></a>\n    </div>\n  </div>\n  <div class="project__board">\n    <cle-assignment-list [assignments]="assignments | async"> </cle-assignment-list>\n  </div>\n</div>\n\n<div id="modal-{{project.id}}" class="modal delete-project-form">\n  <div class="modal-content">\n    <h4>Delete project confirmation</h4>\n    <p>Are you sure you want to delete the project titled "{{ project.title }}"?</p>\n  </div>\n  <div class="modal-footer">\n    <a (click)="confirmDelete(false)" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>\n    <a (click)="confirmDelete(true)" class=" modal-action modal-close waves-effect waves-red btn-flat">Delete</a>\n  </div>\n</div>'},857:function(e,t){e.exports='<div *ngIf="loading === true" class="preloader-wrapper big active">\n  <div class="spinner-layer spinner-blue-only">\n    <div class="circle-clipper left">\n      <div class="circle"></div>\n    </div><div class="gap-patch">\n      <div class="circle"></div>\n    </div><div class="circle-clipper right">\n      <div class="circle"></div>\n    </div>\n  </div>\n</div>\n\n<div *ngIf="(userCanEdit$ | async)"> \n  <a (click)="createNewProject(\'Add project\')" class="create-project waves-effect waves-light btn-large"><i class="material-icons right">add</i>New project</a>\n</div>\n\n<div class="projects-container">\n  <app-project-item \n    *ngFor="let project of (projects$ | async)"\n    [project]="project"\n    (delete)="projectDeleted(project)">\n  </app-project-item>\n</div>'},858:function(e,t){e.exports="<p>\n  projects works!\n</p>\n"},859:function(e,t){e.exports='<div class="submission-create">\n  <app-submission-form [submission]="submission" (onSubmissionSave)="onSubmissionSave($event)" (onSubmissionCancel)="onSubmissionCancel($event)"></app-submission-form>\n</div>'},860:function(e,t){e.exports="<p>\n  submission-critique-form works!\n</p>\n"},861:function(e,t){e.exports='<div class="critique__wrapper">\n  <div class="critique__window">\n    <h3>Subject</h3>\n    <div class="critique__window-body" *ngIf="critique" [innerHTML]="critique.body"></div>\n  </div>\n  <div *ngIf="submission" class="critique__submission">\n    <h3>Feeback</h3>\n    <div *ngIf="!editMode"[innerHTML]="submission.body"></div>\n    <ng-content select=".submission-content"></ng-content>\n  </div>\n</div>'},862:function(e,t){e.exports='<div class="submission-detail" *ngIf="submission">\n  <app-submission-states class="submission-states" [submission]="submission"></app-submission-states>\n  <h1>{{ submission.title }}</h1>\n  <app-assignment-detail class="submission-detail" [assignment]="assignment$ | async"></app-assignment-detail>\n  <div *ngIf="(submissionType$ | async) !== \'critique\'" class="body" [innerHTML]="submission.body"></div>\n  <app-submission-critique *ngIf="(submissionType$ | async) === \'critique\'"[submission]="submission"></app-submission-critique>\n</div>'},863:function(e,t){e.exports='<!-- Modal Structure -->\n<div id="modal-submission-dialog" class="modal modal-fixed-footer submission-dialog">\n  <div class="modal-content">\n  </div>\n  <div class="modal-footer">\n    <a (click)="onDelete()" class="modal-action modal-close waves-effect waves-red btn-flat">Save</a>\n    <a (click)="onCancel()" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>\n  </div>\n</div>'},864:function(e,t){e.exports='<app-submission-states [submission]="submission"></app-submission-states>'},865:function(e,t){e.exports='<h1>Edit Submission</h1>\n\n<app-assignment-detail \n  [assignment]="assignment$ | async">\n</app-assignment-detail>\n\n<div class="submission-edit">\n  <app-submission-form \n    *ngIf="submission$ | async"\n    [submission]="submission$ | async"\n    [submissionType]="submissionType$ | async"\n    (onSubmissionSave)="onSubmissionSave($event)"\n    (onSubmissionCancel)="onSubmissionCancel($event)"\n    (onFormChanges)="onFormChanges($event)">\n  </app-submission-form>\n</div>'},866:function(e,t){e.exports='<form *ngIf="form" [formGroup]="form" class="submission-form">\n  <input formControlName="title" placeholder="title" [ngClass]="{\'invalid\': form.controls[\'title\'].status === \'INVALID\' && saveAttempted}">\n  <wysiwygjs \n    *ngIf="submissionType === \'submission\'"\n    formControlName="body"\n    (onWysiwygInit)="onWysiwygInit()"\n    (onImageAdded)="onWysiwygImageAdded($event)"\n    (onImageSave)="onImageSave($event)">\n  </wysiwygjs>\n\n  <app-submission-critique \n    *ngIf="submissionType === \'critique\'"\n    [submission]="submission" editMode="true">\n      <wysiwygjs class="submission-content"\n        formControlName="body"\n        (onWysiwygInit)="onWysiwygInit()"\n        (onImageAdded)="onWysiwygImageAdded($event)"\n        (onImageSave)="onImageSave($event)">\n      </wysiwygjs>\n  </app-submission-critique>\n\n  <div class="actions">\n    <button type="submit" class="btn" (click)="submit()" [ngClass]="{\'disabled\': !(savable | async)}">Save</button>\n    <a class="btn" (click)="cancel()" [ngClass]="{\'disabled\': !(savable | async)}">Cancel</a>\n  </div>\n</form>'},867:function(e,t){e.exports='<h4 *ngIf="title">{{title}}</h4>\n\n<div class="row">\n  <div *ngFor="let submission of submissions" (click)="onSubmissionClick(submission)" class="col s12 m6">\n   <div class="card">\n    <div class="card-image">\n      <img *ngIf="submission.evidence && submission.evidence.images && submission.evidence.images[0] && submission.evidence.images[0].url" [src]="submission.evidence.images[0].url">\n    </div>\n    <div class="card-content">\n      <h3>{{ submission.title }}</h3>\n    </div>\n    <div class="card-action">\n      <div *ngIf="submission.uid === currentUserId" class="chip"> <span class="material-icons left">person</span> my submission</div>\n      <div *ngIf="submission.state === \'submission_in_progress\'" class="chip submission-in-progress"> <span class="material-icons left">autorenew</span> in progress </div>\n      <div *ngIf="submission.state === \'submission_ready\'" class="chip submission-ready"> <span class="material-icons left">done</span> complete </div>\n    </div>\n  </div>\n</div>'},868:function(e,t){e.exports='<div class="submission-states">\n  <ul *ngIf="states">\n    <li \n      *ngFor="let item of states"\n      [ngClass]="{active: item.active, canEdit: submission.metadata.canUpdate}"\n      [ngStyle]="item.styles"\n      (click)="onStateClick(item)"\n      >\n        <div class="submission-item__container">\n          <i class="material-icons left">{{item.icon}}</i>\n          {{item.display}}\n          </div>\n      </li>\n  </ul>\n</div>\n<app-dialog [content]="dialogContent" (action)="onDialogAction($event)"></app-dialog>\n<!--{{ submission | json }}-->';
},869:function(e,t){e.exports='<nav>\n  <div class="nav-wrapper">\n    <ul id="nav-mobile" class="left">\n      <li><a (click)="onClickBack()"><i class="material-icons left">&#xE5C4;</i> assignment</a></li>\n    </ul>\n    <ul id="nav-mobile-right" class="right">\n      <li *ngIf="userCanEdit$ | async"><a (click)="editSubmission()"><i class="material-icons left">edit</i></a></li>\n    </ul>\n  </div>\n</nav>\n\n<div class="submissions">\n  <app-submission-detail [submission]="submission$ | async"></app-submission-detail>\n</div>'},870:function(e,t){e.exports="<p>\n  user works!\n</p>\n"},871:function(e,t){e.exports="<textarea>{{ content }}</textarea>"},98:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return Object.defineProperty(e,"BASE_PATH",{get:function(){return"undefined"!=typeof Drupal?Drupal.settings.basePath:"http://studio.elmsln.local/heymp/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"USERNAME",{get:function(){return"mgp140"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PASSWORD",{get:function(){return"root"},enumerable:!0,configurable:!0}),e}()}},[1136]);
//# sourceMappingURL=main.c47bf265ddae463784a6.bundle.map
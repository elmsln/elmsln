const t=new Set,e=new MutationObserver(update),n=new Map;let a,o=document.documentElement.dir||"ltr",r=document.documentElement.lang||navigator.language;e.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});export function registerTranslation(...t){t.map((t=>{const e=t.$code.toLowerCase();n.has(e)?n.set(e,Object.assign(Object.assign({},n.get(e)),t)):n.set(e,t),a||(a=t)})),update()}export function update(){o=document.documentElement.dir||"ltr",r=document.documentElement.lang||navigator.language,[...t.keys()].map((t=>{"function"==typeof t.requestUpdate&&t.requestUpdate()}))}export class LocalizeController{constructor(t){this.host=t,this.host.addController(this)}hostConnected(){t.add(this.host)}hostDisconnected(){t.delete(this.host)}dir(){return`${this.host.dir||o}`.toLowerCase()}lang(){return`${this.host.lang||r}`.toLowerCase()}getTranslationData(t){var e,a;const o=new Intl.Locale(t),r=null==o?void 0:o.language.toLowerCase(),s=null!==(a=null===(e=null==o?void 0:o.region)||void 0===e?void 0:e.toLowerCase())&&void 0!==a?a:"";return{locale:o,language:r,region:s,primary:n.get(`${r}-${s}`),secondary:n.get(r)}}exists(t,e){var n;const{primary:o,secondary:r}=this.getTranslationData(null!==(n=e.lang)&&void 0!==n?n:this.lang());return e=Object.assign({includeFallback:!1},e),!!(o&&o[t]||r&&r[t]||e.includeFallback&&a&&a[t])}term(t,...e){const{primary:n,secondary:o}=this.getTranslationData(this.lang());let r;if(n&&n[t])r=n[t];else if(o&&o[t])r=o[t];else{if(!a||!a[t])return console.error(`No translation found for: ${String(t)}`),String(t);r=a[t]}return"function"==typeof r?r(...e):r}date(t,e){return t=new Date(t),new Intl.DateTimeFormat(this.lang(),e).format(t)}number(t,e){return t=Number(t),isNaN(t)?"":new Intl.NumberFormat(this.lang(),e).format(t)}relativeTime(t,e,n){return new Intl.RelativeTimeFormat(this.lang(),n).format(t,e)}}
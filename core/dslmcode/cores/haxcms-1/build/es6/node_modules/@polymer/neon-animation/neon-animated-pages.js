/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
import"../polymer/polymer-legacy.js";import{IronResizableBehavior}from"../iron-resizable-behavior/iron-resizable-behavior.js";import{IronSelectableBehavior}from"../iron-selector/iron-selectable.js";import{Polymer}from"../polymer/lib/legacy/polymer-fn.js";import{dom}from"../polymer/lib/legacy/polymer.dom.js";import{html}from"../polymer/lib/utils/html-tag.js";import{NeonAnimationRunnerBehavior}from"./neon-animation-runner-behavior.js";Polymer({_template:html`
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host > ::slotted(*) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
      }

      :host > ::slotted(:not(.iron-selected):not(.neon-animating))
       {
        display: none !important;
      }

      :host > ::slotted(.neon-animating) {
        pointer-events: none;
      }
    </style>

    <slot id="content"></slot>
  `,is:"neon-animated-pages",behaviors:[IronResizableBehavior,IronSelectableBehavior,NeonAnimationRunnerBehavior],properties:{activateEvent:{type:String,value:""},animateInitialSelection:{type:Boolean,value:!1}},listeners:{"iron-select":"_onIronSelect","neon-animation-finish":"_onNeonAnimationFinish"},_onIronSelect:function(event){var selectedPage=event.detail.item;if(!(this.items.indexOf(selectedPage)<0)){var oldPage=this._valueToItem(this._prevSelected)||!1;this._prevSelected=this.selected,oldPage||this.animateInitialSelection?(this.animationConfig=[],this.entryAnimation?this.animationConfig.push({name:this.entryAnimation,node:selectedPage}):selectedPage.getAnimationConfig&&this.animationConfig.push({animatable:selectedPage,type:"entry"}),oldPage&&(oldPage.classList.contains("neon-animating")&&(this._squelchNextFinishEvent=!0,this.cancelAnimation(),this._completeSelectedChanged(),this._squelchNextFinishEvent=!1),this.exitAnimation?this.animationConfig.push({name:this.exitAnimation,node:oldPage}):oldPage.getAnimationConfig&&this.animationConfig.push({animatable:oldPage,type:"exit"}),oldPage.classList.add("neon-animating")),selectedPage.classList.add("neon-animating"),this.animationConfig.length>=1?this.isAttached?this.playAnimation(void 0,{fromPage:oldPage,toPage:selectedPage}):this.async((function(){this.playAnimation(void 0,{fromPage:null,toPage:selectedPage})})):this._completeSelectedChanged(oldPage,selectedPage)):this._completeSelectedChanged()}},_completeSelectedChanged:function(oldPage,selectedPage){if(selectedPage&&selectedPage.classList.remove("neon-animating"),oldPage&&oldPage.classList.remove("neon-animating"),!selectedPage||!oldPage)for(var node,nodes=dom(this.$.content).getDistributedNodes(),index=0;node=nodes[index];index++)node.classList&&node.classList.remove("neon-animating");this.async(this._notifyPageResize)},_onNeonAnimationFinish:function(event){this._squelchNextFinishEvent?this._squelchNextFinishEvent=!1:this._completeSelectedChanged(event.detail.fromPage,event.detail.toPage)},_notifyPageResize:function(){var selectedPage=this.selectedItem||this._valueToItem(this.selected);this.resizerShouldNotify=function(element){return element==selectedPage},this.notifyResize()}});
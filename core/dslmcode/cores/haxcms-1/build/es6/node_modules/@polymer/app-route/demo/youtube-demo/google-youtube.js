/*
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
import{html as e,PolymerElement as t}from"../../../polymer/polymer-element.js";customElements.define("google-youtube",class GoogleYoutube extends t{static get template(){return e`
      <style>
        :host {
          display: block;
        }

        #container {
          width: 100%;
          height: 100%;
          max-width: 100%;
          max-height: 100%;
        }

        #iframe {
          width: 100%;
          height: 100%;
        }
      </style>
      <div id="container"></div>
    `}static get properties(){return{videoId:{type:String,observer:"_videoIdChanged"},state:{type:Number,notify:!0},currentTime:{type:Number,notify:!0},isReady:{type:Boolean,value:!1},duration:{type:Number,notify:!0},__unreadyCommands:{type:Array,value:[]},__currenttimeInterval:{type:Number}}}_videoIdChanged(){this.isReady=!1,this.__player&&this.__player.destroy&&this.__player.destroy(),this.__player=new YT.Player(this.$.container,{videoId:this.videoId,events:{onReady:this.__onPlayerReady.bind(this),onStateChange:this.__onStateChange.bind(this)}})}connectedCallback(){super.connectedCallback(),this.__origin=window.location.origin}disconnectedCallback(){super.disconnectedCallback(),this.__currenttimeInterval&&(clearInterval(this.__currenttimeInterval),this.__currenttimeInterval=null)}seekTo(e){this.isReady?this.__player.seekTo(e):this.__unreadyCommands.push(this.seekTo.bind(this,[e]))}__onPlayerReady(){this.isReady=!0,this.duration=this.__player.getDuration();const e=new CustomEvent("google-youtube-ready",{composed:!0});this.dispatchEvent(e);for(const e of this.__unreadyCommands)e.call(this);this.__unreadyCommands=[],setInterval(this.__updateCurrentTime.bind(this),100)}__updateCurrentTime(){if(!this.__player.getCurrentTime)return clearInterval(this.__currenttimeInterval),void(this.__currenttimeInterval=null);this.currentTime=Math.floor(this.__player.getCurrentTime())}__onStateChange(e){this.state=e.data}pause(){this.isReady?this.__player.pauseVideo():this.__unreadyCommands.push(this.pause)}play(){this.isReady?this.__player.playVideo():this.__unreadyCommands.push(this.play)}});
/**
 * Copyright 2024 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{ChatAgentModalStore as e}from"../chat-agent.js";import{DDD as t}from"../../d-d-d/d-d-d.js";import{autorun as s,toJS as i}from"../../../mobx/dist/mobx.esm.js";import{html as r,css as o}from"../../../lit/index.js";class ChatSuggestion extends t{static get tag(){return"chat-suggestion"}constructor(){super(),this.chosenPrompt=!1,this.disabled=!1,this.promptType="",this.suggestion="",
//! mobx
this.messageIndex=null,this.userIndex=null,s((()=>{this.messageIndex=i(e.messageIndex),this.userIndex=i(e.userIndex)}))}static get styles(){return[super.styles,o`
        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */

        :host {
          container-type: inline-size;
          display: block;
        }

        /* TODO fix border color */
        .chat-suggestion-wrapper {
          align-items: center;
          border: var(--ddd-border-sm);
          background-color: var(--ddd-theme-default-successLight);
          border-color: var(--ddd-theme-default-potentialMidnight);
          border-radius: var(--ddd-radius-xl);
          box-shadow: var(--ddd-boxShadow-xl);
          cursor: pointer;
          display: flex;
          flex-direction: row;
          justify-content: center;
          opacity: 1.0;
        }

        .suggestion-icon {
          align-items: center;
          border-right-style: solid;
          border-right: var(--ddd-border-md);
          display: flex;
          justify-content: center;
          width: 20%;
        }

        .circle-wrapper {
          background-color: white;
          border-radius: var(--ddd-radius-circle);
          padding: var(--ddd-spacing-2);
        }

        simple-icon-lite {
          --simple-icon-height: var(--ddd-icon-xs);
          --simple-icon-width: var(--ddd-icon-xs);
        }

        .suggestion-text {
          align-items: center;
          display: flex;
          justify-content: center;
          width: 80%;

          /* Prevent text highlighting in button */
          -moz-user-select: none;
          -ms-user-select: none;
          -webkit-user-select: none;
          user-select: none;
        }

        :host([disabled]) .chat-suggestion-wrapper {
          background-color: var(--ddd-theme-default-discoveryCoral);
          cursor: default;
          opacity: 0.6;
        }

        :host([chosen-prompt]) .chat-suggestion-wrapper {
          background-color: var(--ddd-theme-default-futureLime);
        }

        .chat-suggestion-wrapper:hover, .chat-suggestion-wrapper:focus {
          background-color: var(--ddd-theme-default-futureLime);
        }

        .chat-suggestion-wrapper:hover p, .chat-suggestion-wrapper:focus p {
          text-decoration: underline;
        }
        
        :host([disabled]) p {
          text-decoration: none;
        }

        p {
          color: var(--ddd-theme-default-potentialMidnight);
          font-family: var(--ddd-font-primary);
          font-size: var(--ddd-font-size-4xs);
          text-align: center;
          width: 80%;
        }

        @container (max-width: 270px) and (min-width: 216px) {
          simple-icon-lite {
            --simple-icon-height: var(--ddd-icon-xxs);
            --simple-icon-width: var(--ddd-icon-xxs);
          }
        }

        @container (max-width: 216px) {
          .suggestion-icon {
            display: none;
          }
        }
      `]}render(){return r`
      <div class="chat-suggestion-wrapper" @click=${this.handleSuggestion} @keypress=${this.handleSuggestion} tabindex="0" aria-label='Send suggestion "${this.suggestion}" to Merlin'>
        <div class="suggestion-icon">
          <div class="circle-wrapper">
            <simple-icon-lite></simple-icon-lite>
          </div>  
        </div>
        <div class="suggestion-text">
          <p class="chat-suggestion">
            ${this.suggestion}
          </p>  
        </div>
      </div>
    `}handleSuggestion(){this.disabled?e.devStatement("Suggestion buttons disabled, ignoring request","warn"):(e.devStatement(`Suggestion button pressed. Suggested prompt to send to Merlin: ${this.suggestion}`,"info"),e.handleMessage(e.userName,this.suggestion))}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e);let t=this.shadowRoot.querySelector("simple-icon-lite");switch(this.promptType){case"suggestion":t.setAttribute("icon","question-answer"),t.style.color="var(--data-theme-primary, var(--ddd-primary-13))";break;case"network":t.setAttribute("icon","device:signal-cellular-connected-no-internet-0-bar"),t.style.color="var(--ddd-theme-default-coalyGray)";break;case"help":t.setAttribute("icon","help-outline"),t.style.color="var(--ddd-theme-default-original87Pink)";break;case"hax":t.setAttribute("icon","lrn:network"),t.style.color="var(--data-theme-primary, var(--ddd-primary-13))";break;default:t.setAttribute("icon","lrn:info"),t.style.color="var(--ddd-theme-default-skyBlue)"}}updated(e){super.updated&&super.updated(e),this.disabled&&this.shadowRoot.querySelector(".chat-suggestion-wrapper").removeAttribute("tabindex")}static get properties(){return{...super.properties,chosenPrompt:{type:Boolean,attribute:"chosen-prompt"},disabled:{type:Boolean},promptType:{type:String,attribute:"prompt-type"},suggestion:{type:String}}}static get haxProperties(){return new URL(`./lib/${this.tag}.haxProperties.json`,import.meta.url).href}}globalThis.customElements.define(ChatSuggestion.tag,ChatSuggestion);export{ChatSuggestion};
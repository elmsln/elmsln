import{html as e,PolymerElement as t}from"../../../../@polymer/polymer/polymer-element.js";import{dom as s}from"../../../../@polymer/polymer/lib/legacy/polymer.dom.js";import"../../../../@polymer/iron-ajax/iron-ajax.js";import"../../../../@polymer/iron-list/iron-list.js";import"../elmsln-base-deps.js";import"../../../lrndesign-gallerycard/lrndesign-gallerycard.js";import"../../../elmsln-loading/elmsln-loading.js";class LrnappBlockRecentSubmissions extends t{static get template(){return e`
      <style include="paper-item-styles">
        :host {
          display: block;
        }
        button {
          width: 100%;
          border: none;
          background-color: transparent;
        }
        lrndesign-gallerycard {
          width: 100%;
        }
        lrndesign-gallerycard[elevation="1"] {
          box-shadow: none;
        }
      </style>
      <iron-ajax
        auto=""
        url="{{sourcePath}}"
        handle-as="json"
        last-response="{{response}}"
        on-response="handleResponse"
      ></iron-ajax>
      <div id="loading">
        <h3>Loading..</h3>
        <elmsln-loading color="grey-text" size="large"></elmsln-loading>
      </div>
      <iron-list items="[[_toArray(response.data)]]" as="item">
        <template>
          <button on-click="_loadSubmissionUrl">
            <lrndesign-gallerycard
              data-submission-id$="[[item.id]]"
              title="[[item.attributes.title]]"
              author="[[item.relationships.author.data]]"
              comments="[[item.meta.comment_count]]"
              image="[[item.display.image]]"
              icon="[[item.display.icon]]"
              class="ferpa-protect"
            >
            </lrndesign-gallerycard>
          </button>
        </template>
      </iron-list>
    `}static get tag(){return"lrnapp-block-recent-submissions"}static get properties(){return{elmslnCourse:{type:String},elmslnSection:{type:String},basePath:{type:String},csrfToken:{type:String},endPoint:{type:String},sourcePath:{type:String,notify:!0},response:{type:Array,notify:!0}}}_loadSubmissionUrl(e){var t=s(e).localTarget.getAttribute("data-submission-id");window.location.href=this.basePath+"lrnapp-studio-submission/submissions/"+t}handleResponse(e){this.$.loading.hidden=!0,setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),0)}_getViewLink(e){return this.basePath+"lrnapp-studio-submission/submissions/"+e}_toArray(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}}customElements.define(LrnappBlockRecentSubmissions.tag,LrnappBlockRecentSubmissions);export{LrnappBlockRecentSubmissions};
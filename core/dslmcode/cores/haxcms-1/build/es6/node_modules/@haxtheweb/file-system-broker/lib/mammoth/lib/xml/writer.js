var e=require("underscore"),t=require("xmlbuilder");function writeTextNode(e,t){e.text(t.value)}exports.writeString=function writeString(r,n){var i=e.invert(n),a={element:function writeElement(e,t){var r=e.element(mapElementName(t.name),t.attributes);t.children.forEach((function(e){writeNode(r,e)}))},text:writeTextNode};function writeNode(e,t){return a[t.type](e,t)}function mapElementName(e){var t=/^\{(.*)\}(.*)$/.exec(e);if(t){var r=i[t[1]];return r+(""===r?"":":")+t[2]}return e}return function writeDocument(r){var i=t.create(mapElementName(r.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return e.forEach(n,(function(e,t){var r="xmlns"+(""===t?"":":"+t);i.attribute(r,e)})),r.children.forEach((function(e){writeNode(i,e)})),i.end()}(r)};
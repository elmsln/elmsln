/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as s,html as e,css as t}from"../../../lit/index.js";import{ElmslnStudioUtilities as i}from"./elmsln-studio-utilities.js";import"../../lorem-data/lorem-data.js";class ElmslnStudioLoremdata extends(i(s)){static get tag(){return"elmsln-studio-loremdata"}static get properties(){return{sourcePath:{type:String,reflect:!0,attribute:"source-path"},endDate:{type:Object},lessonData:{type:Array},lorem:{type:Object},startDate:{type:Object},lessons:{type:Object},projects:{type:Object},assignments:{type:Object},portfolios:{type:Object},submissions:{type:Object},discussions:{type:Object},profile:{type:Object},profiles:{type:Object},users:{type:Object},activity:{type:Array},__imgCtr:{type:Number},__demoImages:{type:Array},__prevAssignment:{type:String}}}constructor(){super(),this.__demoImages=[],this.__prevAssignment=void 0,this.__imgCtr=0,this.users={ixp23:{id:"ixp23",lastName:"Instructor",firstName:"Person",instructor:!0,image:"//placekitten.com/300/400"},hxb5122:{id:"hxb5122",lastName:"Brown",firstName:"Havana"},tmn823:{id:"tmn823",lastName:"Nebelung",firstName:"Tabby"},kmk5124:{id:"kmk5124",lastName:"Korat",firstName:"Kitty",image:"//placekitten.com/g/400/300"},tjm5488:{id:"tjm5488",lastName:"Manx",firstName:"Tortie",image:"//placekitten.com/400/300"},fms9811:{id:"fms9811",lastName:"Sphinx",firstName:"Felix"},tjc5167:{id:"tjc5167",lastName:"Cat",firstName:"Tom",image:"//placekitten.com/g/400/400"},cac488:{id:"cac488",lastName:"Coe",firstName:"Callie"},srf325:{id:"srf325",lastName:"Fold",firstName:"Scott",image:"//placekitten.com/400/400"}},this.lessonData=[{id:"lesson-1",lesson:"Lesson 1",assignments:[{id:"assignment-1",assignment:"Lesson 1 Reading"},{id:"project-1",project:"Hypertext Narrative Project",assignments:[{id:"assignment-2",assignment:"Discover: Word-Pairs"},{id:"assignment-3",assignment:"Define: Synopsis"},{id:"assignment-4",assignment:"Develop: Story and Plot Elements"},{id:"assignment-5",assignment:"Develop: Characters"},{id:"assignment-6",assignment:"Deliver: Hypertext Narrative Draft"},{id:"assignment-7",assignment:"Deliver: Feedback"},{id:"assignment-8",assignment:"Deliver: Iterate"},{id:"assignment-9",assignment:"Deliver: Iterate critique"},{id:"assignment-10",assignment:"Deliver: Iterate critique"},{id:"assignment-11",assignment:"Deliver: Hypertext Narrative"}]},{id:"assignment-12",assignment:"Lesson 1 Wrap-Up"}]},{id:"lesson-2",lesson:"Lesson 2",assignments:[{id:"assignment-13",assignment:"Lesson 2 Reading"},{id:"project-2",project:"Ritual Project",assignments:[{id:"assignment-14",assignment:"Discover: Interview"},{id:"assignment-15",assignment:"Discover: Journey Map"},{id:"assignment-16",assignment:"Define: Themes & Insights"},{id:"assignment-17",assignment:"Define: HMW"},{id:"assignment-18",assignment:"Develop: Brainstorm"},{id:"assignment-19",assignment:"Develop: Storyboard"},{id:"assignment-20",assignment:"Develop: Prototype"},{id:"assignment-21",assignment:"Develop: Test and Iterate"},{id:"assignment-22",assignment:"Deliver: Final Prototype"}]},{id:"assignment-23",assignment:"Lesson 2 Wrap-Up"}]},{id:"lesson-3",lesson:"Lesson 3",assignments:[{id:"assignment-24",assignment:"Lesson 2 Reading"},{id:"project-3",project:"Open Kit Project",assignments:[{id:"assignment-25",assignment:"Discover: Toy Research"},{id:"assignment-26",assignment:"Discover: Modular Research"},{id:"assignment-27",assignment:"Discover: Resources"},{id:"assignment-28",assignment:"Define: Product Pitch"},{id:"assignment-29",assignment:"Develop: Prototyping"},{id:"assignment-30",assignment:"Develop: Instructions"},{id:"assignment-31",assignment:"Develop: Test"},{id:"assignment-32",assignment:"Develop: Iterate"},{id:"assignment-33",assignment:"Deliver: Open Toy"}]},{id:"assignment-34",assignment:"Lesson 2 Wrap-Up"}]}],this.activity=[],this.profile={},this.profiles={},this.projects={},this.lessons={},this.assignments={},this.portfolios={},this.submissions={},this.discussions={}}static get styles(){return[t``]}render(){return e`
      <lorem-data id="lorem" .schemas="${this.schemas||[]}"></lorem-data>
    `}get students(){return Object.keys(this.users||{}).filter((s=>!this.users[s].instructor)).map((s=>this.users[s]))}get instructors(){return Object.keys(this.users||{}).filter((s=>this.users[s].instructor)).map((s=>this.users[s]))}get schemas(){return{"users.json":{type:"data",data:this.users},"profile.json":{type:"data",data:this.profile},"profiles.json":{type:"data",data:this.profiles},"activity.json":{type:"data",data:this.activity},"lessons.json":{type:"data",data:this.lessons},"projects.json":{type:"data",data:this.projects},"assignments.json":{type:"data",data:this.assignments},"portfolios.json":{type:"data",data:this.portfolios},"submissions.json":{type:"data",data:this.submissions},"discussion.json":{type:"data",data:this.discussions}}}firstUpdated(s){this.__demoImages=[`${this.sourcePath}images/image1.jpg`,`${this.sourcePath}images/image2.jpg`,`${this.sourcePath}images/image3.jpg`,`${this.sourcePath}images/image4.jpg`,`${this.sourcePath}images/image5.jpg`,`${this.sourcePath}images/image6.jpg`,`${this.sourcePath}images/image7.jpg`,`${this.sourcePath}images/image8.jpg`],super.firstUpdated&&super.firstUpdated(s);let e=this.shadowRoot.getElementById("lorem"),t=e.addDays(void 0,-4-3*this.lessonData.length);this.lessonData.forEach(((s,i)=>{let a=t,n=s.assignments.map(((t,i)=>{if(t.project){let n=this._project(t,s.id,i,a,e);return this.projects[t.id]=n,a=e.addDays(a,t.assignments.length),n}{let n=this._assignment(t,s.id,void 0,i,a,e);return a=e.addDays(a,1),n}}));this.lessons[s.id]={id:s.id,order:i,lesson:s.lesson,body:e.randomParagraph(2,6),assignments:n},t=e.addWeeks(t,1)})),Object.keys(this.assignments||{}).forEach(((s,t)=>{let some=s=>Math.round(.333*s.length),most=s=>Math.round(.667*s.length),i=e.randomOption(["animals","arch","nature","people","tech"]),a=e.randomOption([["body"],["links"],["sources"],["sources"],["body","links"],["body","sources"],["body","sources"],["body","sources"],["links","sources"],["links","body","sources"]]);(t>most(Object.keys(this.assignments||{}))?[]:t>some(Object.keys(this.assignments||{}))?e.draw(this.students,some(this.students),most(this.students)):this.students).forEach((t=>this._submission(s,t.id,i,a,s.date,e)))})),Object.keys(this.submissions).forEach((s=>{let e=this.submissions[s];e.activity="submission",this.activity.push(e)})),Object.keys(this.discussions).forEach((s=>{let e=this.discussions[s];e.activity="discussion",this.activity.push(e),e.replies.forEach((s=>{let e=s;e.activity="reply",this.activity.push(e)}))})),this.activity=e.sortDates(this.activity),this.profiles={},this.students.forEach((s=>this.profiles[s.id]=this._profile(s,e)));let i=Object.keys(this.profiles).map((s=>{let e=this.profiles[s];return e.given?e.given.length:void 0})).filter((s=>!!s)).sort(((s,e)=>e-s));Object.keys(this.profiles).forEach((s=>{let e=this.profiles[s],t=e.given?e.given.length:void 0,a=!t||i<2?void 0:i.indexOf(t);a&&(this.profiles[s].feedbackPercentile=Math.round(100*a/i.length))})),this.profile=this.profiles[e.randomOption(Object.keys(this.profiles))||0]}_profile(s,e){let t=s;return t.submissions=e.sortDates(Object.keys(this.submissions).filter((s=>this.submissions[s].userId===t.id)).map((s=>this.submissions[s]))),t.completed=t.submissions.map((s=>s.assignmentId)),t.due=Object.keys(this.assignments).filter((s=>!t.completed.includes(s))).map((s=>this.assignments[s])),t.features=t.submissions.filter((s=>s.feature)).map((s=>s.id)),t.feedback=e.sortDates(t.submissions.map((s=>s.feedback)).flat().map((s=>this.discussions[s]))),t.given=Object.keys(this.discussions).filter((s=>this.discussions[s].userId===t.id)),t.replies=Object.keys(this.discussions).map((s=>this.discussions[s].replies.filter((s=>s.userId===t.id)))).flat().map((s=>s.id)),t.discussions=[...t.given,...t.replies],t}_assets(s,e,t){if(t){if("body"===s)return t.randomParagraph(2,6);{let i=t.randomNumber(1,7),a=[];for(let n=0;n<i;n++)if("links"===s)a.push(t.randomLink(t.randomOption(["ai","url","doc","ppt","ai","url","ai","url","doc","ppt","ai","url","xls","eps","csv","zip","zip"])));else{this.__imgCtr++;let s=t.randomImageData(t.randomAspect(200,600,200,600),t.randomOption([!1,!1,!1,!1,!0]),e,this.__imgCtr);this.sourcePath&&this.__demoImages.length>0&&(s.src=this.__demoImages[this.__imgCtr%this.__demoImages.length]),s.type=s.src.substring(s.src.lastIndexOf(".")+1,s.src.length)||"png",a.push(s)}return a}}return[]}_project(s,e,t,i,a){return a?{id:s.id,order:t,lessonId:e,project:s.project,body:a.randomParagraph(2,6),assignments:s.assignments.map(((t,n)=>this._assignment(t,e,s.id,n,a.addDays(i,n),a)))}:void 0}_rubric(s){if(s){let e=[[{description:"Distinguished",points:4},{description:"Proficient",points:3},{description:"Apprentice",points:2},{description:"Novice",points:1}],[{description:"Exceeded",points:2},{description:"Met",points:1},{description:"Unmet",points:0}],[{description:"Excellent",points:4},{description:"Above Average",points:3},{description:"Average",points:2},{description:"Below Average",points:1},{description:"Poor",points:0}]],t=s.randomNumber(3,7),i={key:s.randomOption(e),values:{}};for(let e=0;e<t;e++)i.values[`${s.randomWord()} ${s.randomWord()}`]=i.key.map((e=>s.randomSentence(3,6)));return i}}_assignment(s,e,t,i,a,n){if(n){let r=Math.random()>.3?this._rubric(n):void 0,o=Math.random()>.5?this._rubric(n):void 0,d=n.randomOption([n.randomParagraph(2,4),void 0,void 0]);return this.assignments[s.id]={id:s.id,prev:this.__prevAssignment,order:i,lessonId:e,projectId:t,assignment:s.assignment,showDate:Math.random()>.5?n.addWeeks(a,-2):void 0,hideDate:Math.random()>.5?n.addWeeks(a,2):void 0,date:a,rubric:r,feedbackRubric:o,feedbackInstructions:d,body:n.randomParagraph(2,6)},this.__prevAssignment&&(this.assignments[this.__prevAssignment].next=s.id),this.__prevAssignment=s.id,this.assignments[s.id]}}_feedback(s,e,t,i){if(i){let a=`feedback-${Object.keys(this.discussions).length+1}`,n=i.draw([...this.students,...this.instructors],0,2),r=this.users[e],o=this.submissions[s],d=this.users[o.userId],m={id:a,userId:e,firstName:r&&r.firstName?r.firstName:"",lastName:r&&r.lastName?r.lastName:"",avatar:r&&r.image?r.image:void 0,submissionId:s,portfolioId:o.portfolioId,assignment:o.assignment,assignmentId:o.assignmentId,projectId:o.projectId,lessonId:o.lessonId,creatorId:o.userId,creatorFirstName:d&&d.firstName?d.firstName:"",creatorLastName:d&&d.lastName?d.lastName:"",creatorAvatar:d&&d.image?d.image:void 0,date:t,body:i.randomParagraph(1,4),read:Math.random()<.5,like:Math.random()<.5,replies:n.map(((n,d)=>{let m,p=`${a}-reply-${d+1}`;return t=i.addMinutes(t,(d+1)*i.randomNumber(1,3e3)),m={id:p,feedbackId:a,userId:n.id,firstName:n&&n.firstName?n.firstName:"",lastName:n&&n.lastName?n.lastName:"",avatar:n&&n.image?n.image:void 0,reviewerId:e,reviewerFirstName:r&&r.firstName?r.firstName:"",reviewerLastName:r&&r.lastName?r.lastName:"",reviewerAvatar:r&&r.image?r.image:void 0,submissionId:s,assignmentId:o.assignmentId,projectId:o.projectId,lessonId:o.lessonId,portfolioId:o.portfolioId,date:t,body:i.randomParagraph(2,6),read:Math.random()<.5,like:Math.random()<.5},m}))};return this.discussions[a]=m,a}}_submission(s,e,t,i,a,n){if(n){this.__imgCtr++;let r=`${s}-${e}`,o=n.randomImageData(n.randomAspect(400,1200,400,1200),n.randomOption([!1,!1,!1,!1,!0]),t,this.__imgCtr);this.sourcePath&&this.__demoImages.length>0&&(o.src=this.__demoImages[this.__imgCtr%this.__demoImages.length]);let d=n.draw(this.students.filter((s=>s.id!==e)),0,5),m=Math.round()>.75?n.draw(this.instructors,1,1):[],p=n.addHours(a,n.randomNumber(-40,48)),c=this.assignments&&this.assignments[s]?this.assignments[s]:void 0,l=c&&c.projectId?c.projectId:void 0,g=c&&c.lessonId?c.lessonId:void 0,h=this.projects&&this.projects[l]?this.projects[l]:void 0,u=this.lessons&&this.lessons[g]?this.lessons[g]:void 0,f=this.users[e],b={id:r,assignment:c&&c.assignment?c.assignment:"",assignmentDate:(c||{}).date,project:h&&h.project?h.project:"",lesson:u&&u.lesson?u.lesson:"",portfolio:l?`${l}-${e}`:r,portfolioId:l?`${l}-${e}`:r,assignmentId:s,projectId:l,lessonId:g,userId:e,firstName:f&&f.firstName?f.firstName:"",lastName:f&&f.lastName?f.lastName:"",avatar:f&&f.image?f.image:"",date:p,image:o.src,thumbnail:o.src,full:o.src,imageAlt:o.alt,imageLongdesc:o.longdesc,feedbackInstructions:c&&c.feedbackInstructions?c.feedbackInstructions:"",feedbackRubric:c&&c.feedbackRubric?c.feedbackRubric:""};Math.random()<.2&&(b.feature=n.randomParagraph(2,6)),this.portfolios[b.portfolioId]=this.portfolios[b.portfolioId]||{id:b.portfolioId,projectId:l,project:h&&h.project?h.project:"",userId:e,firstName:f&&f.firstName?f.firstName:"",lastName:f&&f.lastName?f.lastName:"",avatar:f&&f.image?f.image:"",submissions:[]},i.forEach((s=>b[s]=this._assets(s,t,n))),this.activity.push({id:r,activity:"submission",date:b.date}),this.submissions[r]=b,this.submissions[r].feedback=n.shuffle([...d,...m]).map(((s,e)=>this._feedback(r,s.id,n.addMinutes(p,64*(e+1)),n))),this.portfolios[b.portfolioId].submissions.push(b)}}}customElements.define("elmsln-studio-loremdata",ElmslnStudioLoremdata);export{ElmslnStudioLoremdata};
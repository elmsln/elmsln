var t=require("underscore");exports.Element=Element,exports.element=function(t,e,n){return new Element(t,e,n)},exports.text=function(t){return{type:"text",value:t}};var e={first:function(){return null},firstOrEmpty:function(){return e},attributes:{}};function Element(t,e,n){this.type="element",this.name=t,this.attributes=e||{},this.children=n||[]}Element.prototype.first=function(e){return t.find(this.children,(function(t){return t.name===e}))},Element.prototype.firstOrEmpty=function(t){return this.first(t)||e},Element.prototype.getElementsByTagName=function(e){return toElementList(t.filter(this.children,(function(t){return t.name===e})))},Element.prototype.text=function(){if(0===this.children.length)return"";if(1!==this.children.length||"text"!==this.children[0].type)throw new Error("Not implemented");return this.children[0].value};var n={getElementsByTagName:function(e){return toElementList(t.flatten(this.map((function(t){return t.getElementsByTagName(e)}),!0)))}};function toElementList(e){return t.extend(e,n)}
export class SkeletonUuidManager{constructor(){this.uuidMap=new Map,this.usedUuids=new Set}generateUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}getUuidForItem(e){if(this.uuidMap.has(e))return this.uuidMap.get(e);let t;do{t=this.generateUuid()}while(this.usedUuids.has(t));return this.uuidMap.set(e,t),this.usedUuids.add(t),t}createRelationshipMap(e){const t={};return e.forEach((e=>{const u=this.getUuidForItem(e.id);t[u]={originalId:e.id,uuid:u,parentUuid:e.parent?this.getUuidForItem(e.parent):null,children:[]}})),Object.values(t).forEach((e=>{e.parentUuid&&t[e.parentUuid]&&t[e.parentUuid].children.push(e.uuid)})),t}rewriteSkeletonUuids(e){const t=new SkeletonUuidManager,u=new Map;e.structure.forEach((e=>{if(e.uuid){const i=t.generateUuid();u.set(e.uuid,i)}}));const i=e.structure.map((e=>{const t={...e};return e.uuid&&(t.uuid=u.get(e.uuid)),e.parentUuid&&u.has(e.parentUuid)&&(t.parentUuid=u.get(e.parentUuid)),t}));return{...e,structure:i,meta:{...e.meta,created:(new Date).toISOString(),sourceUuids:"rewritten"}}}reset(){this.uuidMap.clear(),this.usedUuids.clear()}}export default SkeletonUuidManager;
var i,e;e=function(i,e){function k(i,e){this.x=i,this.y=e}function m(i,e,o,f){this.o=i,this.s=e,this.f=o,this.l=f}function A(i){this.C=i,this.m=m.O}function n(i){return 0>(i|=0)?"00":16>i?"0"+i.toString(16):256>i?i.toString(16):"ff"}function r(i,e,o){return n(255*(1>(o=0>o?o+6:6<o?o-6:o)?i+(e-i)*o:3>o?e:4>o?i+(e-i)*(4-o):i))}function D(i,e){return[f.w(0,0,e.H(0)),f.v(i,e.A,e.u(.5)),f.w(0,0,e.H(1)),f.v(i,e.A,e.u(1)),f.v(i,e.A,e.u(0))]}function t(i,e,f,c,u){var h=0,s=0;function v(o,f,c,u,a){for(u=u?parseInt(e.charAt(u),16):0,f=f[parseInt(e.charAt(c),16)%f.length],i.F(p[w[o]]),o=0;o<a.length;o++)l.m=new m(h+a[o][0]*d,s+a[o][1]*d,d,u++%4),f(l,d,o);i.G()}function g(i){if(0<=i.indexOf(a))for(var e=0;e<i.length;e++)if(0<=w.indexOf(i[e]))return!0}if(f-=2*(c=f*(void 0===c?.08:c)|0),!/^[0-9a-f]{11,}$/i.test(e))throw Error("Invalid hash passed to Jdenticon.");var a,l=new A(i),d=0|f/4,p=(h+=0|c+f/2-2*d,s+=0|c+f/2-2*d,D(parseInt(e.substr(-7),16)/268435455,u)),w=[];for(f=0;3>f;f++)a=parseInt(e.charAt(8+f),16)%p.length,(g([0,4])||g([2,3]))&&(a=1),w.push(a);v(0,o.J,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),v(1,o.J,4,5,[[0,0],[3,0],[3,3],[0,3]]),v(2,o.N,1,null,[[1,1],[2,1],[2,2],[1,2]])}function B(){this.i=""}function x(i,e){this.j={},this.f={M:i,I:e}}function y(i,e,o){this.h=i,i.clearRect(0,0,e,o)}function z(){function b(i,e,f){var c=o[i]instanceof Array?o[i]:[e,f];return function(i){return 0>(i=c[0]+i*(c[1]-c[0]))?0:1<i?1:i}}var e,o=(e=g.config||i.jdenticon_config||{}).lightness||{};return{A:"number"==typeof(e=e.saturation)?e:.5,u:b("color",.4,.8),H:b("grayscale",.3,.9)}}function q(i,e,o){if("string"==typeof i){if(c){i=document.querySelectorAll(i);for(var f=0;f<i.length;f++)q(i[f],e,o)}}else if(i&&i.tagName&&(e=e||i.getAttribute("data-jdenticon-hash"))){var u="svg"==i.tagName.toLowerCase();if(f="canvas"==i.tagName.toLowerCase(),u||f&&"getContext"in i){f=Number(i.getAttribute("width"))||i.clientWidth||0;var h=Number(i.getAttribute("height"))||i.clientHeight||0,s=u?new x(f,h):new y(i.getContext("2d"),f,h);if(t(s,e,Math.min(f,h),o,z()),u){for((e=document.createElement("span")).innerHTML=s.K(!1);i.firstChild;)i.removeChild(i.firstChild);for(e=e.firstChild.childNodes;e.length;)i.appendChild(e[0]);i.setAttribute("viewBox","0 0 "+f+" "+h)}}}}function g(){c&&q("svg[data-jdenticon-hash],canvas[data-jdenticon-hash]")}m.prototype={L:function(i,e,o,f){var c=this.o+this.f,u=this.s+this.f;return 1===this.l?new k(c-e-(f||0),this.s+i):2===this.l?new k(c-i-(o||0),u-e-(f||0)):3===this.l?new k(this.o+e,u-i-(o||0)):new k(this.o+i,this.s+e)}},m.O=new m(0,0,0,0),A.prototype={a:function(i,e){var o,f=e?-2:2,c=this.m,u=[];for(o=e?i.length-2:0;o<i.length&&0<=o;o+=f)u.push(c.L(i[o],i[o+1]));this.C.a(u)},b:function(i,e,o,f){this.C.b(this.m.L(i,e,o,o),o,f)},c:function(i,e,o,f,c){this.a([i,e,i+o,e,i+o,e+f,i,e+f],c)},g:function(i,e,o,f,c,u){(i=[i+o,e,i+o,e+f,i,e+f,i,e]).splice((c||0)%4*2,2),this.a(i,u)},D:function(i,e,o,f,c){this.a([i+o/2,e,i+o,e+f/2,i+o/2,e+f,i,e+f/2],c)}};var o={N:[function(i,e){var o=.42*e;i.a([0,0,e,0,e,e-2*o,e-o,e,0,e])},function(i,e){var o=0|.5*e;i.g(e-o,0,o,0|.8*e,2)},function(i,e){var o=0|e/3;i.c(o,o,e-o,e-o)},function(i,e){var o=1<(o=.1*e)?0|o:.5<o?1:o,f=6>e?1:8>e?2:0|.25*e;i.c(f,f,e-o-f,e-o-f)},function(i,e){var o=0|.15*e,f=0|.5*e;i.b(e-f-o,e-f-o,f)},function(i,e){var o=.1*e,f=4*o;i.c(0,0,e,e),i.a([f,f,e-o,f,f+(e-f-o)/2,e-o],!0)},function(i,e){i.a([0,0,e,0,e,.7*e,.4*e,.4*e,.7*e,e,0,e])},function(i,e){i.g(e/2,e/2,e/2,e/2,3)},function(i,e){i.c(0,0,e,e/2),i.c(0,e/2,e/2,e/2),i.g(e/2,e/2,e/2,e/2,1)},function(i,e){var o=.14*e,f=(o=8>e?o:0|o,4>e?1:6>e?2:0|.35*e);i.c(0,0,e,e),i.c(f,f,e-f-o,e-f-o,!0)},function(i,e){var o=.12*e,f=3*o;i.c(0,0,e,e),i.b(f,f,e-o-f,!0)},function(i,e){i.g(e/2,e/2,e/2,e/2,3)},function(i,e){var o=.25*e;i.c(0,0,e,e),i.D(o,o,e-o,e-o,!0)},function(i,e,o){var f=.4*e;o||i.b(f,f,1.2*e)}],J:[function(i,e){i.g(0,0,e,e,0)},function(i,e){i.g(0,e/2,e,e/2,0)},function(i,e){i.D(0,0,e,e)},function(i,e){var o=e/6;i.b(o,o,e-2*o)}]},f={P:function(i,e,o){return"#"+n(i)+n(e)+n(o)},w:function(i,e,o){return 0==e?"#"+(i=n(255*o))+i+i:"#"+r(o=2*o-(e=.5>=o?o*(e+1):o+e-o*e),e,6*i+2)+r(o,e,6*i)+r(o,e,6*i-2)},v:function(i,e,o){var c=[.55,.5,.5,.46,.6,.55,.55][6*i+.5|0];return f.w(i,e,.5>o?o*c*2:c+(o-.5)*(1-c)*2)}};B.prototype={a:function(i){for(var e="M"+i[0].x+" "+i[0].y,o=1;o<i.length;o++)e+="L"+i[o].x+" "+i[o].y;this.i+=e+"Z"},b:function(i,e,o){o=o?0:1;var f=e/2;this.i+="M"+i.x+" "+(i.y+f)+"a"+f+","+f+" 0 1,"+o+" "+e+",0a"+f+","+f+" 0 1,"+o+" "+-e+",0"}},x.prototype={F:function(i){this.B=this.j[i]||(this.j[i]=new B)},G:function(){},a:function(i){this.B.a(i)},b:function(i,e,o){this.B.b(i,e,o)},K:function(i){var e,o=i?"":'<svg xmlns="http://www.w3.org/2000/svg" width="'+this.f.M+'" height="'+this.f.I+'" viewBox="0 0 '+this.f.M+" "+this.f.I+'" preserveAspectRatio="xMidYMid meet">';for(e in this.j)o+='<path fill="'+e+'" d="'+this.j[e].i+'"/>';return i?o:o+"</svg>"}},y.prototype={F:function(i){this.h.fillStyle=i,this.h.beginPath()},G:function(){this.h.fill()},a:function(i){var e,o=this.h;for(o.moveTo(i[0].x,i[0].y),e=1;e<i.length;e++)o.lineTo(i[e].x,i[e].y);o.closePath()},b:function(i,e,o){var f=this.h;e/=2,f.arc(i.x+e,i.y+e,e,0,2*Math.PI,o),f.closePath()}};var c="document"in i&&"querySelectorAll"in document;return g.drawIcon=function(i,e,o){if(!i)throw Error("No canvas specified.");t(i=new y(i,o,o),e,o,0,z())},g.toSvg=function(i,e,o){var f=new x(e,e);return t(f,i,e,o,z()),f.K()},g.update=q,g.version="1.4.0",e&&(e.fn.jdenticon=function(i,e){return this.each((function(o,f){q(f,i,e)})),this}),"function"==typeof setTimeout&&setTimeout(g,0),g}(i=this),"undefined"!=typeof module&&"exports"in module?module.exports=e:"function"==typeof define&&define.amd?define([],(function(){return e})):i.jdenticon=e;
import{get as t}from"../moment/get-set.js";import s from"../utils/has-own-prop.js";import{addFormatToken as o}from"../format/format.js";import{addUnitAlias as h}from"./aliases.js";import{addUnitPriority as e}from"./priorities.js";import{addRegexToken as n,match1to2 as r,match2 as i,matchWord as a,regexEscape as m}from"../parse/regex.js";import{addParseToken as M}from"../parse/token.js";import{hooks as _}from"../utils/hooks.js";import{MONTH as l}from"./constants.js";import u from"../utils/to-int.js";import c from"../utils/is-array.js";import f from"../utils/is-number.js";import p from"../utils/mod.js";import g from"../utils/index-of.js";import{createUTC as x}from"../create/utc.js";import S from"../create/parsing-flags.js";import{isLeapYear as P}from"./year.js";export function daysInMonth(t,s){if(isNaN(t)||isNaN(s))return NaN;var o=p(s,12);return t+=(s-o)/12,1===o?P(t)?29:28:31-o%7%2}o("M",["MM",2],"Mo",(function(){return this.month()+1})),o("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),o("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),h("month","M"),e("month",8),n("M",r),n("MM",r,i),n("MMM",(function(t,s){return s.monthsShortRegex(t)})),n("MMMM",(function(t,s){return s.monthsRegex(t)})),M(["M","MM"],(function(t,s){s[l]=u(t)-1})),M(["MMM","MMMM"],(function(t,s,o,h){var e=o._locale.monthsParse(t,h,o._strict);null!=e?s[l]=e:S(o).invalidMonth=t}));var R=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;export var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");export function localeMonths(t,s){return t?c(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||R).test(s)?"format":"standalone"][t.month()]:c(this._months)?this._months:this._months.standalone}export var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");export function localeMonthsShort(t,s){return t?c(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[R.test(s)?"format":"standalone"][t.month()]:c(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(t,s,o){var h,e,n,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],h=0;h<12;++h)n=x([2e3,h]),this._shortMonthsParse[h]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[h]=this.months(n,"").toLocaleLowerCase();return o?"MMM"===s?-1!==(e=g.call(this._shortMonthsParse,r))?e:null:-1!==(e=g.call(this._longMonthsParse,r))?e:null:"MMM"===s?-1!==(e=g.call(this._shortMonthsParse,r))||-1!==(e=g.call(this._longMonthsParse,r))?e:null:-1!==(e=g.call(this._longMonthsParse,r))||-1!==(e=g.call(this._shortMonthsParse,r))?e:null}export function localeMonthsParse(t,s,o){var h,e,n;if(this._monthsParseExact)return handleStrictParse.call(this,t,s,o);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),h=0;h<12;h++){if(e=x([2e3,h]),o&&!this._longMonthsParse[h]&&(this._longMonthsParse[h]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[h]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),o||this._monthsParse[h]||(n="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[h]=new RegExp(n.replace(".",""),"i")),o&&"MMMM"===s&&this._longMonthsParse[h].test(t))return h;if(o&&"MMM"===s&&this._shortMonthsParse[h].test(t))return h;if(!o&&this._monthsParse[h].test(t))return h}}export function setMonth(t,s){var o;if(!t.isValid())return t;if("string"==typeof s)if(/^\d+$/.test(s))s=u(s);else if(s=t.localeData().monthsParse(s),!f(s))return t;return o=Math.min(t.date(),daysInMonth(t.year(),s)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](s,o),t}export function getSetMonth(s){return null!=s?(setMonth(this,s),_.updateOffset(this,!0),this):t(this,"Month")}export function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var j=a;export function monthsShortRegex(t){return this._monthsParseExact?(s(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=j),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}var d=a;export function monthsRegex(t){return this._monthsParseExact?(s(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=d),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(t,s){return s.length-t.length}var t,s,o=[],h=[],e=[];for(t=0;t<12;t++)s=x([2e3,t]),o.push(this.monthsShort(s,"")),h.push(this.months(s,"")),e.push(this.months(s,"")),e.push(this.monthsShort(s,""));for(o.sort(cmpLenRev),h.sort(cmpLenRev),e.sort(cmpLenRev),t=0;t<12;t++)o[t]=m(o[t]),h[t]=m(h[t]);for(t=0;t<24;t++)e[t]=m(e[t]);this._monthsRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}
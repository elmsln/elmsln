import o from"../utils/zero-fill.js";import t from"../utils/is-function.js";export var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var n=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,r={};export var formatTokenFunctions={};export function addFormatToken(t,n,r,a){var e=a;"string"==typeof a&&(e=function(){return this[a]()}),t&&(formatTokenFunctions[t]=e),n&&(formatTokenFunctions[n[0]]=function(){return o(e.apply(this,arguments),n[1],n[2])}),r&&(formatTokenFunctions[r]=function(){return this.localeData().ordinal(e.apply(this,arguments),t)})}export function formatMoment(o,n){return o.isValid()?(n=expandFormat(n,o.localeData()),r[n]=r[n]||function makeFormatFunction(o){var n,r,a,e=o.match(formattingTokens);for(n=0,r=e.length;n<r;n++)formatTokenFunctions[e[n]]?e[n]=formatTokenFunctions[e[n]]:e[n]=(a=e[n]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(n){var a,i="";for(a=0;a<r;a++)i+=t(e[a])?e[a].call(n,o):e[a];return i}}(n),r[n](o)):o.localeData().invalidDate()}export function expandFormat(o,t){var r=5;function replaceLongDateFormatTokens(o){return t.longDateFormat(o)||o}for(n.lastIndex=0;r>=0&&n.test(o);)o=o.replace(n,replaceLongDateFormatTokens),n.lastIndex=0,r-=1;return o}
export const mtzMarkedControlLineBehaviorImpl=function(t){return class extends t{static get properties(){return{...super.properties,syntaxPrefix:String}}_handleCommand(t){t.preventDefault(),t.stopPropagation();const e=this.__editor,n=e.getSelection(),s=e.getLines(),r=s.length>1?s[1].match(/(\n|\r\n)/)[0]:"",i=[];let a=0;s.every((t=>(a+=t.length,a+1<n.start||(i.push({start:a-t.length,end:a,length:t.length,text:t.trimLeft()}),a<n.end))));const x=i[0],h=x.text.startsWith(this.syntaxPrefix);let l=0;i.forEach((t=>{h&&t.text.startsWith(this.syntaxPrefix)?t.text=t.text.slice(this.syntaxPrefix.length,t.end):h||(t.text=`${this.syntaxPrefix}${t.text}`),l+=this.syntaxPrefix.length}));const o=i[i.length-1];e.setSelection(x.start,o.end),1===i.length&&i[0].start>0&&(x.text=`${r}${x.text}`,x.start+=r.length),e.replaceSelection(i.map((t=>t.text)).join(r)),e.setSelection(x.start,o.end+(h?-1:1)*l),e.getTextarea().focus()}}};
var e=require("underscore");function Result(e,s){this.value=e,this.messages=s||[]}function combineMessages(s){var t=[];return e.flatten(e.pluck(s,"messages"),!0).forEach((function(s){(function containsMessage(s,t){return void 0!==e.find(s,isSameMessage.bind(null,t))})(t,s)||t.push(s)})),t}function isSameMessage(e,s){return e.type===s.type&&e.message===s.message}exports.Result=Result,exports.success=function success(e){return new Result(e,[])},exports.warning=function warning(e){return{type:"warning",message:e}},exports.error=function error(e){return{type:"error",message:e.message,error:e}},Result.prototype.map=function(e){return new Result(e(this.value),this.messages)},Result.prototype.flatMap=function(e){var s=e(this.value);return new Result(s.value,combineMessages([this,s]))},Result.prototype.flatMapThen=function(e){var s=this;return e(this.value).then((function(e){return new Result(e.value,combineMessages([s,e]))}))},Result.combine=function(s){return new Result(e.flatten(e.pluck(s,"value")),combineMessages(s))};
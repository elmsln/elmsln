import t from"../utils/zero-fill.js";import{createDuration as s}from"../duration/create.js";import{addSubtract as i}from"../moment/add-subtract.js";import{isMoment as e,copyConfig as f}from"../moment/constructor.js";import{addFormatToken as r}from"../format/format.js";import{addRegexToken as o,matchOffset as n,matchShortOffset as u}from"../parse/regex.js";import{addParseToken as h}from"../parse/token.js";import{createLocal as a}from"../create/local.js";import{prepareConfig as c}from"../create/from-anything.js";import{createUTC as m}from"../create/utc.js";import l from"../utils/is-date.js";import p from"../utils/to-int.js";import _ from"../utils/is-undefined.js";import O from"../utils/compare-arrays.js";import{hooks as d}from"../utils/hooks.js";function offset(s,i){r(s,0,0,(function(){var s=this.utcOffset(),e="+";return s<0&&(s=-s,e="-"),e+t(~~(s/60),2)+i+t(~~s%60,2)}))}offset("Z",":"),offset("ZZ",""),o("Z",u),o("ZZ",u),h(["Z","ZZ"],(function(t,s,i){i._useUTC=!0,i._tzm=offsetFromString(u,t)}));var g=/([\+\-]|\d\d)/gi;function offsetFromString(t,s){var i=(s||"").match(t);if(null===i)return null;var e=((i[i.length-1]||[])+"").match(g)||["-",0,0],f=60*e[1]+p(e[2]);return 0===f?0:"+"===e[0]?f:-f}export function cloneWithOffset(t,s){var i,f;return s._isUTC?(i=s.clone(),f=(e(t)||l(t)?t.valueOf():a(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+f),d.updateOffset(i,!1),i):a(t).local()}function getDateOffset(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}d.updateOffset=function(){};export function getSetOffset(t,e,f){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=offsetFromString(u,t)))return this}else Math.abs(t)<16&&!f&&(t*=60);return!this._isUTC&&e&&(r=getDateOffset(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!e||this._changeInProgress?i(this,s(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:getDateOffset(this)}export function getSetZone(t,s){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,s),this):-this.utcOffset()}export function setOffsetToUTC(t){return this.utcOffset(0,t)}export function setOffsetToLocal(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(getDateOffset(this),"m")),this}export function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=offsetFromString(n,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}export function hasAlignedHourOffset(t){return!!this.isValid()&&(t=t?a(t).utcOffset():0,(this.utcOffset()-t)%60==0)}export function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}export function isDaylightSavingTimeShifted(){if(!_(this._isDSTShifted))return this._isDSTShifted;var t={};if(f(t,this),(t=c(t))._a){var s=t._isUTC?m(t._a):a(t._a);this._isDSTShifted=this.isValid()&&O(t._a,s.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}export function isLocal(){return!!this.isValid()&&!this._isUTC}export function isUtcOffset(){return!!this.isValid()&&this._isUTC}export function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}
/**
 * Copyright 2025 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t}from"../../../../lit/index.js";import{RichTextEditorPickerBehaviors as e}from"../../../rich-text-editor/lib/buttons/rich-text-editor-picker.js";class HaxTextEditorAlignmentPicker extends(e(t)){static get tag(){return"hax-text-editor-alignment-picker"}constructor(){super(),this._isRTL=!1,this.allowNull=!0,this.hideNullOption=!1,this.icon="editor:format-align-left",this.label="",this.tagsList="p,h1,h2,h3,h4,h5,h6,div,blockquote,pre,ul,ol,dl,table,section,article,aside,header,footer,nav,figure,figcaption",this.titleAsHtml=!1,this.value="",this.showTooltip=!1,this._updateAlignments()}get labelVisibleClass(){return"hide"}static get properties(){return{...super.properties,alignments:{type:Array},_isRTL:{type:Boolean}}}updated(t){super.updated(t),t.forEach(((t,e)=>{"alignments"===e&&this._setOptions(),"range"===e&&(this._detectRTL(),this._setRangeValue(),this.disabled=!this.rangeOrMatchingAncestor()),"_isRTL"===e&&this._isRTL!==t&&this._updateAlignments()}))}_setRangeValue(){let t=this.rangeOrMatchingAncestor(),e=t?t.getAttribute("data-text-align"):"";if(this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").value=e||""),e){const t=this.alignments.find((t=>t.value===e));t&&(this.icon=t.icon)}else this.icon="editor:format-align-left";this.value=e||""}_updateAlignments(){this._isRTL?(this.alignments=[{label:"Right",value:"",icon:"editor:format-align-right"},{label:"Center",value:"center",icon:"editor:format-align-center"},{label:"Left",value:"left",icon:"editor:format-align-left"}],this.icon="editor:format-align-right"):(this.alignments=[{label:"Left",value:"",icon:"editor:format-align-left"},{label:"Center",value:"center",icon:"editor:format-align-center"},{label:"Right",value:"right",icon:"editor:format-align-right"}],this.icon="editor:format-align-left"),this._setOptions()}_detectRTL(){if(!this.range)return void(this._isRTL=!1);let t=this.rangeOrMatchingAncestor();if(t){const e=globalThis.getComputedStyle(t).direction;this._isRTL="rtl"===e}else this._isRTL=!1}_setOptions(){this.options=this.alignments.map((t=>[{alt:t.label,value:t.value,icon:t.icon}]))}_pickerChange(t){if(!this.range)return;let e=this.rangeOrMatchingAncestor(),i=t.detail.value;if(e){""===i||null===i?e.removeAttribute("data-text-align"):e.setAttribute("data-text-align",i);const t=this.alignments.find((t=>t.value===i));this.icon=t?t.icon:"editor:format-align-left",this.value=i||"",this.dispatchEvent(new CustomEvent("command",{bubbles:!0,cancelable:!0,composed:!0,detail:{command:"setAlignment",value:i}}))}}rangeOrMatchingAncestor(){if(!this.range)return null;let t=this.range.commonAncestorContainer.nodeType===Node.TEXT_NODE?this.range.commonAncestorContainer.parentNode:this.range.commonAncestorContainer;for(;t&&t.tagName;){const e=t.tagName.toLowerCase();if("hax-body"===e||"body"===e)return null;if(this.tagsArray.includes(e))return t;t=t.parentNode}return null}}globalThis.customElements.define(HaxTextEditorAlignmentPicker.tag,HaxTextEditorAlignmentPicker);export{HaxTextEditorAlignmentPicker};
import e from"../utils/is-array.js";import o from"../utils/has-own-prop.js";import l from"../utils/is-undefined.js";import n from"../utils/compare-arrays.js";import{deprecateSimple as a}from"../utils/deprecate.js";import{mergeConfigs as r}from"./set.js";import{Locale as t}from"./constructor.js";import c from"../utils/keys.js";import{baseConfig as i}from"./base-config.js";var u,f={},s={};function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function loadLocale(e){var o=null;if(!f[e]&&"undefined"!=typeof module&&module&&module.exports)try{o=u._abbr,require("./locale/"+e),getSetGlobalLocale(o)}catch(e){}return f[e]}export function getSetGlobalLocale(e,o){var n;return e&&((n=l(o)?getLocale(e):defineLocale(e,o))?u=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),u._abbr}export function defineLocale(e,o){if(null!==o){var l,n=i;if(o.abbr=e,null!=f[e])a("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=f[e]._config;else if(null!=o.parentLocale)if(null!=f[o.parentLocale])n=f[o.parentLocale]._config;else{if(null==(l=loadLocale(o.parentLocale)))return s[o.parentLocale]||(s[o.parentLocale]=[]),s[o.parentLocale].push({name:e,config:o}),null;n=l._config}return f[e]=new t(r(n,o)),s[e]&&s[e].forEach((function(e){defineLocale(e.name,e.config)})),getSetGlobalLocale(e),f[e]}return delete f[e],null}export function updateLocale(e,o){if(null!=o){var l,n,a=i;null!=(n=loadLocale(e))&&(a=n._config),o=r(a,o),(l=new t(o)).parentLocale=f[e],f[e]=l,getSetGlobalLocale(e)}else null!=f[e]&&(null!=f[e].parentLocale?f[e]=f[e].parentLocale:null!=f[e]&&delete f[e]);return f[e]}export function getLocale(o){var l;if(o&&o._locale&&o._locale._abbr&&(o=o._locale._abbr),!o)return u;if(!e(o)){if(l=loadLocale(o))return l;o=[o]}return function chooseLocale(e){for(var o,l,a,r,t=0;t<e.length;){for(o=(r=normalizeLocale(e[t]).split("-")).length,l=(l=normalizeLocale(e[t+1]))?l.split("-"):null;o>0;){if(a=loadLocale(r.slice(0,o).join("-")))return a;if(l&&l.length>=o&&n(r,l,!0)>=o-1)break;o--}t++}return u}(o)}export function listLocales(){return c(f)}
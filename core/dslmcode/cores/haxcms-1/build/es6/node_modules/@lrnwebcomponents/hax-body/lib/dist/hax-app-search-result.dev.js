Object.defineProperty(exports,"__esModule",{value:!0}),exports.HaxAppSearchResult=void 0;var e=require("lit"),t=require("./hax-store.js");function _templateObject2_e65297708e0011ed99ce491205e67b1d(){var e=_taggedTemplateLiteral(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          justify-content: space-evenly;\n          height: 100%;\n        }\n        button {\n          font-size: var(--hax-ui-font-size-xs);\n          margin: 0;\n          padding: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          border-radius: 0;\n          border: none;\n          width: 100%;\n          outline: 1px solid var(--hax-toolbar-border-color);\n          opacity: 0.8;\n          background-color: var(--hax-toolbar-button-bg);\n          transition: 0.2s opacity ease-in-out, 0.2s outline-color ease-in-out;\n          flex: 1 0 auto;\n        }\n        button:hover,\n        button:focus,\n        button:active {\n          outline-color: var(--hax-tray-accent-color);\n          outline-width: 4px;\n          outline-style: solid;\n          opacity: 1;\n        }\n        .detail-wrapper {\n          flex: 1 0 auto;\n          max-height: 30px;\n          overflow: hidden;\n          text-align: center;\n          text-overflow: ellipsis;\n        }\n        .image {\n          flex: 0 0 auto;\n          width: 100%;\n          background-color: var(--hax-toolbar-border-color);\n        }\n        @media screen and (max-width: 1000px) {\n          :host {\n            width: 100%;\n          }\n          .title {\n            font-size: 12px;\n          }\n        }\n      "]);return _templateObject2_e65297708e0011ed99ce491205e67b1d=function _templateObject2_e65297708e0011ed99ce491205e67b1d(){return e},e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _templateObject_e65297708e0011ed99ce491205e67b1d(){var e=_taggedTemplateLiteral(['\n      <button\n        draggable="true"\n        @click="','"\n        @dragstart="','"\n        @dragend="','"\n        title="','"\n      >\n        <img loading="lazy" class="image" src="','" />\n        <div class="detail-wrapper">',"</div>\n      </button>\n    "]);return _templateObject_e65297708e0011ed99ce491205e67b1d=function _templateObject_e65297708e0011ed99ce491205e67b1d(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}var n=function(n){function HaxAppSearchResult(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HaxAppSearchResult),_possibleConstructorReturn(this,_getPrototypeOf(HaxAppSearchResult).call(this))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HaxAppSearchResult,e.LitElement),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(HaxAppSearchResult,[{key:"render",value:function render(){return(0,e.html)(_templateObject_e65297708e0011ed99ce491205e67b1d(),this._itemSelected,this._dragStart,this._dragEnd,this.details,this.image,this.title.substr(0,40))}},{key:"_dragStart",value:function _dragStart(e){var n=this.cloneNode(!0);t.HAXStore.__dragTarget=n,e.dataTransfer&&(this.crt=n,this.crt.style.position="absolute",this.crt.style.top="-1000px",this.crt.style.right="-1000px",this.crt.style.transform="scale(0.25)",this.crt.style.opacity=".8",e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",document.body.appendChild(this.crt),e.dataTransfer.setDragImage(this.crt,0,0)),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"_dragEnd",value:function _dragEnd(e){var t=this;this.crt.remove(),setTimeout((function(){t._itemSelected(e)}),0)}},{key:"_itemSelected",value:function _itemSelected(e){var n=this.map,r=this.type;r&&null!=r&&""!=r&&"undefined"!=r||!n.source||(r=t.HAXStore.guessGizmoType(n));var o=t.HAXStore.guessGizmo(r,n,!1,!0);o.length>0?1===o.length?"undefined"!==_typeof(o[0].tag)&&(o[0].nextToActive=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:o[0]}))):t.HAXStore.haxAppPicker.presentOptions(o,r,"How would you like to display this "+r+"?","gizmo"):t.HAXStore.toast("Sorry, HAX can't handle that link yet.")}}],[{key:"styles",get:function get(){return[(0,e.css)(_templateObject2_e65297708e0011ed99ce491205e67b1d())]}},{key:"tag",get:function get(){return"hax-app-search-result"}},{key:"properties",get:function get(){return{image:{type:String},title:{type:String},details:{type:String},map:{type:Object},type:{type:String}}}}]),HaxAppSearchResult}();exports.HaxAppSearchResult=n,window.customElements.define(n.tag,n);
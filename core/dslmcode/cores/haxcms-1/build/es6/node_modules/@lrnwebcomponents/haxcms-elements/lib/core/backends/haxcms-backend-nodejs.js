/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e}from"../../../../../lit/index.js";import{store as i}from"../haxcms-site-store.js";import{autorun as s,toJS as n}from"../../../../../mobx/dist/mobx.esm.js";import"../../../../jwt-login/jwt-login.js";class HAXCMSBackendNodeJS extends t{static get tag(){return"haxcms-backend-nodejs"}render(){return e`
      <jwt-login
        id="jwt"
        jwt="${this.jwt}"
        @jwt-changed="${this.jwtChanged}"
      ></jwt-login>
    `}jwtChanged(t){this.jwt=t.detail.value,i.jwt=this.jwt,i.cmsSiteEditor&&i.cmsSiteEditor.instance&&(i.cmsSiteEditor.instance.jwt=this.jwt),null!=this.jwt&&"null"!=this.jwt&&""!=this.jwt&&"string"==typeof this.jwt&&this.dynamicallyImportEditor()}disconnectedCallback(){for(var t in this.__disposer)this.__disposer[t].dispose();super.disconnectedCallback()}constructor(){super(),this.__disposer=[],s((t=>{this.jwt=n(i.jwt),this.__disposer.push(t)}))}firstUpdated(t){setTimeout((()=>{if(window.appSettings){let t=this.shadowRoot.querySelector("#jwt");t.url=window.appSettings.login,t.refreshUrl=window.appSettings.refreshUrl,t.logoutUrl=window.appSettings.logout,t.redirectUrl=window.appSettings.redirectUrl,window.appSettings.jwt&&(this.jwt=window.appSettings.jwt)}null!=this.jwt&&"null"!=this.jwt&&""!=this.jwt&&"string"==typeof this.jwt?this.dynamicallyImportEditor():window.dispatchEvent(new CustomEvent("haxcms-not-logged-in",{bubbles:!0,composed:!0,cancelable:!1,detail:this}))}),500)}static get properties(){return{jwt:{type:String}}}dynamicallyImportEditor(){try{import("../haxcms-site-editor.js").then((t=>{window.appSettings&&(i.cmsSiteEditorAvailability(),i.cmsSiteEditor.instance.jwt=this.jwt,i.jwt=this.jwt,i.cmsSiteEditor.instance.saveNodePath=window.appSettings.saveNodePath,i.cmsSiteEditor.instance.saveManifestPath=window.appSettings.saveManifestPath,i.cmsSiteEditor.instance.saveOutlinePath=window.appSettings.saveOutlinePath,i.cmsSiteEditor.instance.getNodeFieldsPath=window.appSettings.getNodeFieldsPath,i.cmsSiteEditor.instance.getSiteFieldsPath=window.appSettings.getSiteFieldsPath,i.cmsSiteEditor.instance.getFormToken=window.appSettings.getFormToken,i.cmsSiteEditor.instance.publishSitePath=window.appSettings.publishSitePath,i.cmsSiteEditor.instance.syncSitePath=window.appSettings.syncSitePath,i.cmsSiteEditor.instance.revertSitePath=window.appSettings.revertSitePath,i.cmsSiteEditor.instance.createNodePath=window.appSettings.createNodePath,i.cmsSiteEditor.instance.deleteNodePath=window.appSettings.deleteNodePath,i.cmsSiteEditor.instance.getUserDataPath=window.appSettings.getUserDataPath,i.cmsSiteEditor.instance.appStore=window.appSettings.appStore)}),(t=>{}))}catch(t){}}}window.customElements.define(HAXCMSBackendNodeJS.tag,HAXCMSBackendNodeJS);export{HAXCMSBackendNodeJS};
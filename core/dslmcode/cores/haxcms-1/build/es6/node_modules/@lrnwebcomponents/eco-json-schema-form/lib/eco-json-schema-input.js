import{html as e,PolymerElement as t}from"../../../@polymer/polymer/polymer-element.js";import"../../../@polymer/iron-flex-layout/iron-flex-layout-classes.js";import{AppLocalizeBehavior as r}from"../../../@polymer/app-localize-behavior/app-localize-behavior.js";import{mixinBehaviors as a}from"../../../@polymer/polymer/lib/legacy/class.js";import"../../../@polymer/paper-input/paper-input.js";import"../../../@polymer/paper-styles/typography.js";class EcoJsonSchemaInput extends(a([r],t)){static get tag(){return"eco-json-schema-input"}static get template(){return e`
      <custom-style>
        <style is="custom-style" include="iron-flex iron-flex-alignment">
          :host ([hidden]) {
            display: none;
          }
        </style>
      </custom-style>
      <paper-input
        id="input"
        class="flex"
        value="{{value}}"
        auto-validate
      ></paper-input>
    `}static get properties(){return{language:{value:"en"},resources:{value:()=>({})},schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:()=>""},error:{type:String,observer:"_errorChanged",value:null}}}_schemaChanged(){var e=this.schema,t=this.shadowRoot.querySelector("#input");e.required&&(t.required=!0),this._isSchemaNumber(e.type)&&(t.type="number",e.multipleOf&&(t.step=e.multipleOf),isNaN(e.maximum)||(e.exclusiveMaximum?t.max=e.maximum-(e.multipleOf||1):t.max=e.maximum),isNaN(e.minimum)||(e.exclusiveMinimum?t.min=e.minimum+(e.multipleOf||1):t.min=e.minimum)),this._isSchemaString(e.type)&&("date-time"===e.format?(t.type="datetime-local",t.alwaysFloatLabel=!0):"date"===e.format?t.type="date":"email"===e.format?t.type="email":"hostname"===e.format||"ipv4"===e.format||"ipv6"===e.format?t.type="text":"uri"===e.format?t.type="url":t.type="text",e.maxLength&&(t.maxlength=e.maxLength),e.minLength&&(t.minlength=e.minLength),e.pattern&&(t.pattern=e.pattern)),e.component&&e.component.properties&&Object.keys(e.component.properties).forEach((function(r){t[r]=e.component.properties[r]})),t.alwaysFloatLabel=!0,e.title&&(t.label=e.title)}_errorChanged(){this.error?(this.shadowRoot.querySelector("#input").errorMessage=this.error,this.shadowRoot.querySelector("#input").invalid=!0):(this.shadowRoot.querySelector("#input").invalid=!1,this.shadowRoot.querySelector("#input").errorMessage=null)}_isSchemaValue(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)}_isSchemaBoolean(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}_isSchemaNumber(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}_isSchemaString(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}_isSchemaObject(e){return"object"===e}_isSchemaArray(e){return"array"===e}}window.customElements.define(EcoJsonSchemaInput.tag,EcoJsonSchemaInput);export{EcoJsonSchemaInput};
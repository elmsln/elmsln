/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class PortalLauncher extends HTMLElement{static get tag(){return"portal-launcher"}constructor(t=!1){super(),this.tag=PortalLauncher.tag,this.querySelectorAll("a")&&this.querySelectorAll("a").forEach((t=>{t.addEventListener("click",this.click.bind(this))}))}normalizeEventPath(t){return t.composed&&t.composedPath?t.composedPath():t.path?t.path:t.originalTarget?[t.originalTarget]:[t.target]}click(t){let e=t.target;var n=this.normalizeEventPath(t);if("A"!==e.tagName&&n.forEach((t=>{"A"===t.tagName&&(e=t)})),e&&null!=e.getAttribute("href")&&"HTMLPortalElement"in window){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const n=document.createElement("style"),a=.2;n.innerHTML=`\n          portal {\n            position:fixed;\n            width: 100%;\n            height: 100%;\n            opacity: 0;\n            box-shadow: 0 0 20px 10px #999;\n            transform: scale(${a});\n            bottom: calc(20px + 50% * ${a} - 50%);\n            right: calc(20px + 50% * ${a} - 50%);\n            z-index: 10000;\n          }\n          .portal-transition {\n            transition:\n              transform 0.4s,\n              bottom 0.7s,\n              left 0.7s,\n              opacity 1.0s;\n          }\n          @media (prefers-reduced-motion: reduce) {\n            .portal-transition {\n              transition: all 0.001s;\n            }\n          }\n          .portal-reveal {\n            transform: scale(1.0);\n            bottom: 0px;\n            left: 0px;\n          }\n          .fade-in {\n            opacity: 1.0;\n          }\n        `;const r=document.createElement("portal");r.src=e.getAttribute("href"),r.classList.add("portal-transition"),r.addEventListener("transitionend",(t=>{"bottom"==t.propertyName&&r.activate()})),document.body.appendChild(n,r),setTimeout((t=>r.classList.add("fade-in")),250),setTimeout((t=>r.classList.add("portal-reveal")),500)}}}customElements.define(PortalLauncher.tag,PortalLauncher);export{PortalLauncher};
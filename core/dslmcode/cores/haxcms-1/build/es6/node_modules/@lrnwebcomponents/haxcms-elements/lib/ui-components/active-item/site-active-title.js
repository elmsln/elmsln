/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as i,css as e}from"../../../../../lit/index.js";import{store as s}from"../../core/haxcms-site-store.js";import{autorun as o,toJS as l}from"../../../../../mobx/dist/mobx.esm.js";import"../../../../simple-icon/lib/simple-icon-lite.js";class SiteActiveTitle extends t{static get tag(){return"site-active-title"}render(){return i`
      <style>
        :host {
          display: block;
        }
        h1 .site-active-title-icon {
          --simple-icon-height: 32px;
          --simple-icon-width: 32px;
          margin-right: 8px;
          vertical-align: middle;
        }
      </style>
      <h1>
        ${this.icon?i`
              <simple-icon-lite
                class="site-active-title-icon"
                icon="${this.icon}"
              ></simple-icon-lite>
            `:""}
        ${this.__title}
      </h1>
    `}updated(t){t.forEach(((t,i)=>{"dynamicMethodology"==i&&(this.__title=this._makeTitle(this.dynamicMethodology,this.activeTitle,this.parentTitle,this.ancestorTitle)),"editMode"==i&&void 0!==t&&(this.editMode?(this.activateController=new AbortController,this.addEventListener("click",(t=>{const i=window.HaxStore.requestAvailability();i.activeNode=i.activeHaxBody.querySelector("page-break")}),{signal:this.activateController.signal})):(this.noFallback=!1,this.activateController.abort()))}))}static get properties(){return{__title:{type:String},icon:{type:String},dynamicMethodology:{type:String},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"}}}_makeTitle(t,i,e,s){switch(t){case"above":return""!==e||this.noFallback?e:i;case"ancestor":return""!==s||this.noFallback?s:i;default:return i}}constructor(){super(),this.activateController=new AbortController,this.noFallback=!1,this.dynamicMethodology="active",this.__title="",this.icon=null,this.__disposer=[],o((t=>{this.editMode=l(s.editMode),this.__disposer.push(t)})),o((t=>{const i=l(s.activeItem);i&&i.metadata&&i.metadata.icon?this.icon=i.metadata.icon:this.icon=null,this.__disposer.push(t)})),o((t=>{this.activeTitle=l(s.activeTitle),this.__title=this._makeTitle(this.dynamicMethodology,this.activeTitle,this.parentTitle,this.ancestorTitle),this.__disposer.push(t)})),o((t=>{this.ancestorTitle=l(s.ancestorTitle),this.__title=this._makeTitle(this.dynamicMethodology,this.activeTitle,this.parentTitle,this.ancestorTitle),this.__disposer.push(t)})),o((t=>{this.parentTitle=l(s.parentTitle),this.__title=this._makeTitle(this.dynamicMethodology,this.activeTitle,this.parentTitle,this.ancestorTitle),this.__disposer.push(t)}))}disconnectedCallback(){for(var t in this.__disposer)this.__disposer[t].dispose();super.disconnectedCallback()}createRenderRoot(){return this}}customElements.define(SiteActiveTitle.tag,SiteActiveTitle);export{SiteActiveTitle};
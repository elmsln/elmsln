Object.defineProperty(exports,"__esModule",{value:!0}),exports.HaxTray=void 0;var e=require("lit"),t=require("@lrnwebcomponents/utils/utils.js"),n=require("@lrnwebcomponents/hax-body-behaviors/lib/HAXFields.js"),a=require("@lrnwebcomponents/simple-popover/lib/SimpleTourFinder"),i=require("./hax-store.js"),o=require("mobx"),r=require("@lrnwebcomponents/hax-body/lib/hax-ui-styles.js");require("@lrnwebcomponents/simple-fields/simple-fields.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("./hax-tray-upload.js"),require("./hax-gizmo-browser.js"),require("./hax-view-source.js"),require("./hax-stax-browser.js"),require("./hax-map.js"),require("./hax-preferences-dialog.js");var s=require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js");require("@lrnwebcomponents/undo-manager/undo-manager.js");function _templateObject17_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['\n        :host {\n          z-index: 1000;\n          top: 0;\n          font-family: var(--hax-ui-font-family);\n          font-size: var(--hax-ui-font-size);\n          color: var(--hax-ui-color);\n          transition: 0s color linear 0s;\n        }\n        :host(:focus-within),\n        :host(:hover) {\n          z-index: var(--hax-ui-focus-z-index);\n        }\n        .wrapper {\n          position: fixed;\n          display: flex;\n          align-items: stretch;\n          flex-direction: row-reverse;\n          opacity: 0;\n          visibility: visible;\n          pointer-events: none;\n          overflow: hidden;\n          right: -1000px;\n          top: 0;\n          bottom: 0;\n          width: var(--hax-tray-width);\n          height: 100vh;\n          max-height: 100vh;\n          transition: 0.2s opacity ease-in-out 0s;\n        }\n        :host([element-align="left"]) .wrapper {\n          left: -1000px;\n          flex-direction: row;\n        }\n        :host([edit-mode]) .wrapper {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n        }\n        :host([edit-mode][element-align="left"]) .wrapper {\n          left: 0px;\n        }\n        :host([edit-mode][element-align="right"]) .wrapper {\n          right: 0px;\n        }\n        :host([edit-mode][collapsed]) .wrapper {\n          width: unset;\n        }\n        :host([edit-mode]) .wrapper.full-panel {\n          width: unset;\n          left: 0;\n          right: 0;\n        }\n        #menubar {\n          display: inline-flex;\n          flex-direction: column;\n          align-items: stretch;\n          width: var(--hax-tray-menubar-min-width);\n          overflow: visible;\n          flex: 0 0 auto;\n          z-index: 6;\n          background-color: var(--hax-ui-background-color);\n        }\n        :host([collapsed]) #menubar {\n          width: unset;\n        }\n        #menubar > * {\n          background-color: var(--hax-ui-background-color);\n        }\n        #menubar > *::part(button) {\n          padding: var(--hax-ui-spacing-xs);\n        }\n        #menubar > *::part(label) {\n          opacity: 0;\n          margin: 0px;\n          width: 0%;\n          font-size: 10px;\n          padding: 0px;\n          visibility: hidden;\n          overflow: hidden;\n          display: inline-block;\n          text-align: left;\n          transition: 0.2s width ease-in-out 0s, 0.2s margin ease-in-out 0s,\n            0.2s padding ease-in-out 0s, 0s opacity linear 0.2s,\n            0s visibility linear 0.2s;\n        }\n        :host([collapsed]) #menubar > *::part(label) {\n          opacity: 1;\n          width: 100%;\n          visibility: visible;\n          padding: 0px var(--hax-ui-spacing-sm);\n          overflow: unset;\n          transition: 0.2s width ease-in-out 0s, 0.2s margin ease-in-out 0s,\n            0.2s padding ease-in-out 0s, 0s opacity linear 0s,\n            0s visibility linear 0s, 0s overflow linear 0.2s;\n        }\n        loading-indicator {\n          --loading-indicator-background-color: var(\n            --simple-colors-default-theme-accent-2,\n            grey\n          );\n          --loading-indicator-color: var(\n            --simple-colors-default-theme-accent-10,\n            black\n          );\n        }\n        .detail,\n        #tray-detail {\n          flex: 1 1 auto;\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n        }\n        .detail {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n          transition: 0.2s opacity ease-in-out 0s, 0.2s width ease-in-out 0s,\n            0.2s visibility ease-in-out 0s, 0s border linear;\n          border: 1px solid var(--hax-ui-border-color);\n          background-color: var(--hax-ui-background-color);\n          transition: 0.2s width ease-in-out 0s;\n        }\n        :host([collapsed]) .detail {\n          width: 0px;\n          overflow: hidden;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none;\n          max-height: 100vh;\n          overflow-y: auto;\n        }\n        #tray-detail {\n          width: auto;\n          padding: 0 var(--hax-ui-spacing) var(--hax-ui-spacing);\n          overflow-y: auto;\n        }\n        #haxcancelbutton::part(dropdown-icon) {\n          display: none;\n        }\n        .tray-detail-titlebar {\n          background-color: var(--hax-ui-color-accent);\n          padding: var(--hax-ui-spacing-sm) var(--hax-ui-spacing);\n          margin: 0 calc(0px - var(--hax-ui-spacing)) var(--hax-ui-spacing);\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: var(--simple-modal-titlebar-height, unset);\n          line-height: var(--simple-modal-titlebar-line-height, unset);\n          position: sticky;\n          z-index: 2;\n          top: 0;\n        }\n        .tray-detail-titlebar h4 {\n          flex: 1 1 auto;\n          font-size: var(--hax-ui-font-size);\n          font-family: var(--hax-ui-font-family);\n        }\n        #toggle-tray-size {\n          flex: 0 0 auto;\n        }\n        hax-tray-button,\n        hax-app-browser,\n        hax-gizmo-browser {\n          transition: 0.2s all ease-in-out;\n          transition: 0s color linear !important;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n          visibility: visible;\n        }\n        hax-tray-button:not(:defined),\n        hax-app-browser:not(:defined),\n        hax-gizmo-browser:not(:defined) {\n          visibility: hidden;\n        }\n        hax-tray-upload {\n          flex: 0 0 auto;\n        }\n        *[hidden] {\n          display: none;\n        }\n        :host([element-align="right"]) #button {\n          right: 0;\n        }\n        :host([element-align="left"]) #button {\n          left: 0;\n        }\n\n        #button {\n          position: fixed;\n          top: 0;\n          visibility: visible;\n          margin: var(--hax-ui-spacing-xs);\n        }\n        :host([edit-mode]) #button {\n          visibility: hidden;\n          opacity: 0;\n        }\n        #button:hover {\n          opacity: 1;\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          :host {\n            width: 100%;\n          }\n          .wrapper {\n            width: unset;\n            top: -1000px;\n            left: 0px;\n            right: 0px;\n            flex-direction: column;\n          }\n          :host([edit-mode]) .wrapper {\n            top: 0;\n          }\n          :host([collapsed]) .wrapper {\n            height: var(--hax-tray-menubar-min-height);\n            overflow-y: visible;\n          }\n          :host([element-align="left"]) .wrapper {\n            left: -1000px;\n            flex-direction: column;\n          }\n          #menubar {\n            position: sticky;\n            flex-direction: row;\n            left: 0;\n            top: 0;\n            height: auto;\n            flex: 0 0 auto;\n            width: 100%;\n          }\n          #menubar > * {\n            flex: 1 0 auto;\n            min-width: var(--hax-tray-menubar-min-width);\n          }\n          #menubar > *::part(button) {\n            min-width: var(--hax-tray-menubar-min-width);\n            justify-content: space-around;\n          }\n          #menubar > *::part(label) {\n            display: none;\n          }\n          #haxMenuAlign {\n            display: none;\n          }\n          .detail {\n            width: 100%;\n            position: relative;\n            flex: 1 1 100%;\n          }\n          :host([collapsed]) .detail {\n            flex: 0 0 0px;\n          }\n        }\n        @media screen and (max-width: 600px) {\n          :host([edit-mode]) .hide-small {\n            display: none;\n          }\n        }\n      ']);return _templateObject17_7a0b5b10942811ecb1937969798b231a=function _templateObject17_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject16_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-tray-upload ?hidden="','"></hax-tray-upload>\n      <h5 ?hidden="','">','</h5>\n      <hax-app-browser id="appbrowser" ?hidden="','"></hax-app-browser>']);return _templateObject16_7a0b5b10942811ecb1937969798b231a=function _templateObject16_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject15_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['<hax-map\n      controls="content-map"\n      ?hidden="','"\n    ></hax-map>']);return _templateObject15_7a0b5b10942811ecb1937969798b231a=function _templateObject15_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject14_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-gizmo-browser\n        id="gizmobrowser"\n        ?hidden="','"\n      ></hax-gizmo-browser>\n      <h5 ?hidden="','">','</h5>\n      <hax-stax-browser\n        id="staxbrowser"\n        ?hidden="','"\n      ></hax-stax-browser>']);return _templateObject14_7a0b5b10942811ecb1937969798b231a=function _templateObject14_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject13_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <simple-fields\n      id="settingsform"\n      disable-responsive\n      code-theme="','"\n      ?hidden="','"\n    ></simple-fields>']);return _templateObject13_7a0b5b10942811ecb1937969798b231a=function _templateObject13_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject12_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-preferences-dialog\n      id="advanced-settings"\n      ?hidden="','"\n    ></hax-preferences-dialog>']);return _templateObject12_7a0b5b10942811ecb1937969798b231a=function _templateObject12_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject11_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-view-source\n      id="view-source"\n      ?hidden="','"\n    ></hax-view-source>']);return _templateObject11_7a0b5b10942811ecb1937969798b231a=function _templateObject11_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject10_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <div\n      id="tray-detail"\n      aria-live="polite"\n      aria-disabled="','"\n      tabindex="','"\n      selected-detail="','"\n    >\n      <div class="tray-detail-titlebar">\n        <h4>\n          ','\n        </h4>\n        <hax-tray-button\n          voice-command="collapse menu"\n          id="toggle-tray-size"\n          event-name="toggle-tray-size"\n          icon="close"\n          label="Close"\n        >\n        </hax-tray-button>\n      </div>\n      '," ","\n      "," ","\n      "," ","\n    </div>"]);return _templateObject10_7a0b5b10942811ecb1937969798b231a=function _templateObject10_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject9_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['<hax-tray-button\n        id="exportbtn"\n        icon="code"\n        label="','"\n        event-name="view-source"\n        voice-command="view (page) source"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          Every change you make in HAX is ultimately writing HTML. Know HTML?\n          Awesome, pop open the source view and make any changes you like. HTML\n          is always behind the scenes ensuring that content is portable, well\n          formatted and easy to read.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        ?hidden="','"\n        id="advanced-settings"\n        event-name="advanced-settings"\n        icon="settings"\n        label="','"\n        voice-command="select settings (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          Some advanced options for developers and experimental purposes.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="','"\n        icon="help"\n        label="','"\n        voice-command="start tour"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      ></hax-tray-button> ']);return _templateObject9_7a0b5b10942811ecb1937969798b231a=function _templateObject9_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject8_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-tray-button\n        event-name="content-add"\n        icon="add-box"\n        id="content-add"\n        label="','"\n        voice-command="select blocks (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="media-add"\n        icon="image:collections"\n        id="media-add"\n        label="','"\n        voice-command="select media (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Search for media and content anywhere that your copy of HAX has access\n          to. Pick what to search, perform the search and then click or drag the\n          item into the contnet.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-edit"\n        icon="build"\n        id="content-edit"\n        label="','"\n        ?disabled="','"\n        voice-command="(modify)(configure)(edit) selected"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        tooltip="'," ",'"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-map"\n        icon="icons:toc"\n        id="content-map"\n        label="','"\n        voice-command="select structure (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          This is a simple list of all the block areas of the page that are\n          clickable to jump through items quickly as well as review some simple\n          overview stats.\n        </div>\n      </hax-tray-button>']);return _templateObject8_7a0b5b10942811ecb1937969798b231a=function _templateObject8_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject7_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <hax-tray-button\n        icon="icons:undo"\n        ?disabled="','"\n        label="','"\n        event-name="undo"\n        voice-command="undo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Undo the previous operation in the content, whether typing or adding a\n          widget.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        icon="icons:redo"\n        ?disabled="','"\n        label="','"\n        event-name="redo"\n        voice-command="redo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Redo the last action that you hit Undo on.\n        </div>\n      </hax-tray-button>']);return _templateObject7_7a0b5b10942811ecb1937969798b231a=function _templateObject7_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject6_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['\n          <hax-tray-button\n            @click="','"\n            icon="save"\n            icon-position="left"\n            id="haxsavebutton"\n            label="','"\n            event-name="save"\n            voice-command="save page"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          ></hax-tray-button>\n          <hax-tray-button\n            icon="cancel"\n            id="haxcancelbutton"\n            label="','"\n            icon-position="left"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          ></hax-tray-button>\n        ']);return _templateObject6_7a0b5b10942811ecb1937969798b231a=function _templateObject6_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject5_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['\n        <hax-tray-button\n          show-text-label\n          show-tooltip\n          align-horizontal="','"\n          id="haxMenuAlign"\n          event-name="toggle-element-align"\n          icon="arrow-','"\n          label="','"\n          index="','"\n          tooltip="'," ",'"\n        >\n        </hax-tray-button>\n    </div>\n    ']);return _templateObject5_7a0b5b10942811ecb1937969798b231a=function _templateObject5_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject4_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral([' <div id="menubar" class="collapse-menu">\n      '," "," ",'\n      <slot name="tray-buttons-pre"></slot>\n      ',"","\n    </div>"]);return _templateObject4_7a0b5b10942811ecb1937969798b231a=function _templateObject4_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject3_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(["","",""]);return _templateObject3_7a0b5b10942811ecb1937969798b231a=function _templateObject3_7a0b5b10942811ecb1937969798b231a(){return e},e}function _templateObject2_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(['\n          <hax-tray-button\n            large\n            voice-command="edit page"\n            .data-opened="','"\n            @click="','"\n            icon="create"\n            id="button"\n            feature\n            show-text-label\n            show-tooltip\n            label="','"\n          ></hax-tray-button>\n        ']);return _templateObject2_7a0b5b10942811ecb1937969798b231a=function _templateObject2_7a0b5b10942811ecb1937969798b231a(){return e},e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _templateObject_7a0b5b10942811ecb1937969798b231a(){var e=_taggedTemplateLiteral(["\n      ",'\n      <div class="wrapper ','">\n        ','\n        <div class="detail">\n          <loading-indicator\n            ?loading="','"\n          ></loading-indicator>\n          ',"\n        </div>\n      </div>\n    "]);return _templateObject_7a0b5b10942811ecb1937969798b231a=function _templateObject_7a0b5b10942811ecb1937969798b231a(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var a=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}},_get(e,t,n||e)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}require("@lrnwebcomponents/iframe-loader/lib/loading-indicator.js");var l=function(l){function HaxTray(){var e;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HaxTray),(e=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(HaxTray).call(this))).tourName="hax",e.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},e.t={structure:"Outline",structureTip:"View Page Structure",editSelected:"Edit selected",edit:"Edit",save:"Save",move:"Move",moveMenu:"Toggles Menu Aligmnent",menuAlignment:"Menu Alignment",menuLeft:"Move",menuRight:"Move",menuPosition:"Menu position",changeSideVisually:"Change which side of the screen the menu is affixed to visually.",expand:"Expand",collapse:"Collapse",menuSize:"Menu size",menuSizeDescription:"Expand or collapse the menu visually.",takeATour:"Help",settings:"Settings",source:"Source",undo:"Undo",redo:"Redo",media:"Media",blocks:"Blocks",cancel:"Cancel",cancelWithoutSaving:"Cancel without saving",configure:"Configure",advanced:"Advanced",layout:"Layout",alignment:"Alignment",left:"Left",center:"Center",right:"Right",search:"Search",templates:"Templates",width:"Width"},e.registerLocalization({context:_assertThisInitialized(e),namespace:"hax",updateCallback:"_updateTrayDetail"}),e._initial=!0,e.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},e.collapsed=!0,e.activeTab="item-0",e.activeSchema=[],e.canUndo=!1,e.canRedo=!1,e.trayDetail="content-edit",e.activeTagName="",e.traySizeIcon="hax:arrow-expand-right",e.elementAlign="right",e.__setup=!1,setTimeout((function(){Promise.resolve().then((function(){return _interopRequireWildcard(require("./hax-tray-button.js"))})),Promise.resolve().then((function(){return _interopRequireWildcard(require("./hax-toolbar-menu.js"))})),Promise.resolve().then((function(){return _interopRequireWildcard(require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu-item.js"))})),e.addEventListener("hax-tray-button-click",e._processTrayEvent.bind(_assertThisInitialized(e)))}),0),(0,o.autorun)((function(){e.activeGizmo=(0,o.toJS)(i.HAXStore.activeGizmo)})),(0,o.autorun)((function(){e.activeNode=(0,o.toJS)(i.HAXStore.activeNode)})),(0,o.autorun)((function(){e.elementAlign=(0,o.toJS)(i.HAXStore.elementAlign)})),(0,o.autorun)((function(){e.tourOpened=(0,o.toJS)(i.HAXStore.tourOpened)})),(0,o.autorun)((function(){e.appStoreLoaded=(0,o.toJS)(i.HAXStore.appStoreLoaded)})),(0,o.autorun)((function(){e.globalPreferences=(0,o.toJS)(i.HAXStore.globalPreferences),e.haxUiTheme=(e.globalPreferences||{}).haxUiTheme||"hax",document.body.setAttribute("hax-ui-theme",e.haxUiTheme)})),(0,o.autorun)((function(){e.editMode=(0,o.toJS)(i.HAXStore.editMode)})),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HaxTray,(0,s.I18NMixin)((0,a.SimpleTourFinder)((0,t.winEventsElement)(e.LitElement)))),_createClass(HaxTray,null,[{key:"tag",get:function get(){return"hax-tray"}}]),_createClass(HaxTray,[{key:"_expandSettingsPanel",value:function _expandSettingsPanel(e){this.shadowRoot.querySelector("#content-edit").click()}},{key:"_redoChanged",value:function _redoChanged(e){this.canRedo=e.detail.value}},{key:"_undoChanged",value:function _undoChanged(e){this.canUndo=e.detail.value}},{key:"render",value:function render(){return(0,e.html)(_templateObject_7a0b5b10942811ecb1937969798b231a(),this.panelOpsTemplate,this.trayStatus,this.menuToolbarTemplate,!this.appStoreLoaded,this.trayDetailTemplate)}},{key:"__simpleFieldsClick",value:function __simpleFieldsClick(e){try{this.activeTab=this.shadowRoot.querySelector("#settingsform").shadowRoot.querySelector("simple-fields").activeTab}catch(e){this.activeTab="item-0"}}},{key:"_refreshAddData",value:function _refreshAddData(){this.shadowRoot.querySelector("#gizmobrowser").resetList((0,o.toJS)(i.HAXStore.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=_toConsumableArray((0,o.toJS)(i.HAXStore.staxList))}},{key:"_processTrayEvent",value:function _processTrayEvent(e){var n=(0,t.normalizeEventPath)(e)[0],a=e.detail.eventName;switch(this.collapsed||this.trayDetail!==a||(a="toggle-tray-size"),a){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:n.stax}));break;case"insert-tag":var o,r={tag:e.detail.value},s=i.HAXStore.haxSchemaFromTag(e.detail.value);if(n.getAttribute("data-demo-schema")&&s&&s.demoSchema&&s.demoSchema[0])o=s.demoSchema[0];else{var l=JSON.parse(n.getAttribute("event-properties")),c=n.getAttribute("event-content");null==l&&(l={}),null==c&&(c=""),o=i.HAXStore.haxElementPrototype(r,l,c)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:o}));break;case"advanced-settings":case"content-map":case"content-edit":case"content-add":case"media-add":this.trayDetail=e.detail.eventName,this.collapsed=!1;break;case"toggle-element-align":var d=["left","right"],u=d[e.detail.index]?d[e.detail.index]:"right";e.detail.index>1&&(this.collapsed=!0),this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),i.HAXStore.elementAlign=u;break;case"toggle-tray-size":this.collapsed=!this.collapsed;break;case"start-tour":this.startTour();break;case"stop-tour":window.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":i.HAXStore.activeHaxBody.undo();break;case"redo":i.HAXStore.activeHaxBody.redo();break;case"view-source":this.trayDetail=e.detail.eventName,i.HAXStore.haxViewSource.openSource(),this.collapsed=!1}}},{key:"startTour",value:function startTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),window.addEventListener("tour-changed",this._handleTourChanged.bind(this)),this.__tour.startTour("hax")}},{key:"stopTour",value:function stopTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),window.removeEventListener("tour-changed",this._handleTourChanged.bind(this))}},{key:"_handleTourChanged",value:function _handleTourChanged(e){this.tourOpened=e.detail.active==this.tourName}},{key:"firstUpdated",value:function firstUpdated(e){var t=this;_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this).call(this,e),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=n.HaxSchematizer,this.shadowRoot.querySelector("#settingsform").elementizer=n.HaxElementizer,setTimeout((function(){t.shadowRoot.querySelector(".wrapper").style.margin=t.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("click",this.__simpleFieldsClick.bind(this)),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) Blocks (menu)",context:this.shadowRoot.querySelector("#content-add"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) element settings (menu)",context:this.shadowRoot.querySelector("#advanced-settings"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) search (menu)",context:this.shadowRoot.querySelector("#media-add"),callback:"click"}})))}},{key:"updated",value:function updated(e){var t=this;return regeneratorRuntime.async((function updated$(n){for(;;)switch(n.prev=n.next){case 0:_get(_getPrototypeOf(HaxTray.prototype),"updated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"updated",this).call(this,e),e.forEach((function _callee(e,n){return regeneratorRuntime.async((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if("editMode"!=n){a.next=5;break}if(!t.editMode){a.next=4;break}return a.next=4,regeneratorRuntime.awrap(i.HAXStore.refreshActiveNodeForm());case 4:t._editModeChanged(t.editMode);case 5:if("offsetMargin"==n&&setTimeout((function(){t.shadowRoot.querySelector(".wrapper").style.margin=t.offsetMargin}),0),"trayDetail"==n&&t._updateTrayDetail(t[n]),"collapsed"==n&&t[n]&&t._editModeChanged(t.editMode),"activeGizmo"==n&&"view-source"!==t.trayDetail&&(t.activeGizmo?(t.activeTagName=t.activeGizmo.title,e&&"content-edit"===t.trayDetail||"content-map"===t.trayDetail||(t.trayDetail="content-edit")):(t.activeTagName="",["content-add","content-map"].includes(t.trayDetail)||(t.trayDetail="content-add"))),"activeNode"!=n){a.next=17;break}if(!t.activeNode||!t.activeNode.tagName){a.next=16;break}if(!t.editMode){a.next=14;break}return a.next=14,regeneratorRuntime.awrap(i.HAXStore.refreshActiveNodeForm());case 14:a.next=17;break;case 16:t.activeTagName="";case 17:case"end":return a.stop()}}))}));case 2:case"end":return n.stop()}}),null,this)}},{key:"_setupForm",value:function _setupForm(){var e=this,t=this.activeNode;if(this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},t&&t.tagName&&i.HAXStore.elementList[t.tagName.toLowerCase()]){var n=i.HAXStore.elementList[t.tagName.toLowerCase()];for(var a in"undefined"===_typeof(n.gizmo.title)?this.humanName=t.tagName.replace("-"," ").toLowerCase():this.humanName=n.gizmo.title,this.activeHaxElement.properties)n.settings.configure.forEach((function(t){t.property===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a]),t.attribute===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a]),t.slot===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a])})),n.settings.advanced.forEach((function(t){t.property===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a]),t.attribute===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a]),t.slot===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a])}));var o=document.createElement("div");o.innerHTML=this.activeHaxElement.content,o.childNodes.forEach((function(t){1===t.nodeType&&"undefined"!==t.innerHTML&&(n.settings.configure.forEach((function(n){n.slot===t.getAttribute("slot")?e.activeValue.settings.configure[n.slot]=t.innerHTML:""!=n.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(e.activeValue.settings.configure[n.slot]=t.innerHTML)})),n.settings.advanced.forEach((function(n){n.slot===t.getAttribute("slot")?e.activeValue.settings.advanced[n.slot]=t.innerHTML:""!=n.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(e.activeValue.settings.advanced[n.slot]=t.innerHTML)})))})),""!=t.style.width?this.activeValue.settings.layout.__scale=t.style.width.replace("%",""):this.activeValue.settings.layout.__scale=100,"block"==t.style.display&&"0px auto"==t.style.margin&&"right"==t.style.float?this.activeValue.settings.layout.__position="hax-align-right":"block"==t.style.display&&"0px auto"==t.style.margin?this.activeValue.settings.layout.__position="hax-align-center":this.activeValue.settings.layout.__position="hax-align-left",this.activeHaxElement.properties.__scale=this.activeValue.settings.layout.__scale,this.activeHaxElement.properties.__position=this.activeValue.settings.layout.__position,n.settings.configure.forEach((function(e,t){n.settings.configure[t].attribute&&(n.settings.configure[t].property=n.settings.configure[t].attribute),n.settings.configure[t].slot&&(n.settings.configure[t].property=n.settings.configure[t].slot)})),n.settings.advanced.forEach((function(e,t){n.settings.advanced[t].attribute&&(n.settings.advanced[t].property=n.settings.advanced[t].attribute),n.settings.advanced[t].slot&&(n.settings.advanced[t].property=n.settings.advanced[t].slot)})),n.settings.layout=[],n.canPosition&&n.settings.layout.push({property:"__position",title:this.t.alignment,inputMethod:"select",value:this.activeValue.settings.layout.__position,options:{"hax-align-left":this.t.left,"hax-align-center":this.t.center,"hax-align-right":this.t.right}}),n.canScale&&n.settings.layout.push({property:"__scale",title:this.t.width,inputMethod:"slider",value:this.activeValue.settings.layout.__scale,min:n.canScale.min?n.canScale.min:12.5,max:n.canScale.max?n.canScale.max:100,step:n.canScale.step?n.canScale.step:12.5}),this.activeSchema=[{property:"settings",inputMethod:"tabs",properties:[]}];n.settings.configure.length>0?this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,properties:n.settings.configure}):this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,disabled:!0}),n.settings.layout.length>0?this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,properties:n.settings.layout}):this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,disabled:!0}),n.settings.advanced.length>0?this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,properties:n.settings.advanced}):this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,disabled:!0}),this.__activePropSchema=n,this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue}}},{key:"_toArray",value:function _toArray(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}},{key:"updateMap",value:function updateMap(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}},{key:"_updateTrayDetail",value:function _updateTrayDetail(e){"content-add"==e?(this.trayLabel=this.t.blocks,this._refreshAddData()):"media-add"==e?this.trayLabel=this.t.media:"content-map"==e?(this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"advanced-settings"==e?(this.trayLabel=this.t.settings,this.shadowRoot.querySelector("hax-preferences-dialog").reloadPreferencesForm()):"content-edit"!=e||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?e&&""!=e?this.trayLabel=void 0:this.trayDetail="content-edit":this.trayDetail="content-add",this.requestUpdate()}},{key:"__valueChangedEvent",value:function __valueChangedEvent(e){var n=this;if(this.editMode&&e.detail.value&&e.detail.value.settings){var a,o=e.detail.value.settings,r={advanced:"advanced",configure:"configure",layout:"layout"};clearTimeout(this.__contextPropDebounce),this.__contextPropDebounce=setTimeout((function(){var e=function _loop(e){var r=function _loop2(r){if(a=!1,null==o[e][r]||o[e][r].readOnly)n.activeNode.removeAttribute((0,t.camelCaseToDash)(r));else{if("prefix"===r&&""!=o[e][r])n.activeNode.setAttribute("prefix",o[e][r]),a=!0;else if("innerText"===r)n.activeNode.innerText=o[e][r],a=!0;else if("layout"===e&&"__position"===r)a=!0,n._initial||(clearTimeout(n.__contextValueDebounce),n.__contextValueDebounce=setTimeout((function(){n.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:o[e][r],value:o[e][r]}}))}),50));else if("layout"===e&&"__scale"===r)a=!0,n._initial||(clearTimeout(n.__contextSizeDebounce),n.__contextSizeDebounce=setTimeout((function(){n.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:"hax-size-change",value:o[e][r]}}))}),50));else if(n.activeNode.hasOwnProperty(r)||n.activeNode.properties&&n.activeNode.properties.hasOwnProperty(r)||null!=o[e][r]&&o[e][r].constructor===Array||null!=o[e][r]&&o[e][r].constructor===Object)try{o[e][r].constructor===Array?n.activeNode[r]=_toConsumableArray(o[e][r]):o[e][r].constructor===Object?n.activeNode[r]=_objectSpread({},o[e][r]):n.activeNode[r]=o[e][r],a=!0}catch(e){console.warn(e),a=!1}else for(l in n.__activePropSchema.settings[e])if(n.__activePropSchema.settings[e][l].slot==r){var s="span";if(n.__activePropSchema.settings[e][l].slotWrapper?s=n.__activePropSchema.settings[e][l].slotWrapper:n.__activePropSchema.settings[e][l].allowedSlotWrappers&&n.__activePropSchema.settings[e][l].allowedSlotWrappers[0]?s=n.__activePropSchema.settings[e][l].allowedSlotWrappers[0]:"code-editor"===n.activeNode.tagName.toLowerCase()?s="template":function(){var t=["span","div","p"],a=n.__activePropSchema.settings[e][l].excludedSlotWrappers||[];a&&(t=t.filter((function(e){return!a.includes(e)})))}(),c=document.createElement(s),n.__activePropSchema.settings[e][l].slotAttributes)for(d in n.__activePropSchema.settings[e][l].slotAttributes)c.setAttribute(d,n.__activePropSchema.settings[e][l].slotAttributes[d]);""!==n.__activePropSchema.settings[e][l].slot&&(c.slot=n.__activePropSchema.settings[e][l].slot),c.innerHTML=o[e][r];var u=c.cloneNode(!0);a=!0,i.HAXStore.isTextElement(n.activeNode)?n.activeNode.innerHTML=c.innerHTML:((0,t.wipeSlot)(n.activeNode,n.__activePropSchema.settings[e][l].slot),n.activeNode.appendChild(u))}if(!a)try{!0===o[e][r]?n.activeNode.setAttribute((0,t.camelCaseToDash)(r),(0,t.camelCaseToDash)(r)):!1===o[e][r]||""===o[e][r]?n.activeNode.removeAttribute((0,t.camelCaseToDash)(r)):n.activeNode.setAttribute((0,t.camelCaseToDash)(r),o[e][r])}catch(t){console.warn(t),console.warn(r,o[e][r])}}};for(var s in o[e])r(s)};for(var s in r){var l,c,d;e(s)}}),100)}setTimeout((function(){n._initial&&(n._initial=!1)}),51)}},{key:"_editModeChanged",value:function _editModeChanged(e){!this.hidePanelOps&&this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").icon=e?"save":"create")}},{key:"_clickEditButton",value:function _clickEditButton(e){i.HAXStore.editMode=!0,window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"_clickSaveButton",value:function _clickSaveButton(e){i.HAXStore.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail})),window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"trayStatus",get:function get(){var e=this.collapsed?"collapsed":"view-source"==this.trayDetail?"full-panel":"side-panel";return i.HAXStore.trayStatus=e,i.HAXStore.trayDetail=this.trayDetail,e}},{key:"panelOpsTemplate",get:function get(){return this.hidePanelOps?"":(0,e.html)(_templateObject2_7a0b5b10942811ecb1937969798b231a(),this.editMode,this._clickEditButton,this.editMode?this.t.save:this.t.edit)}},{key:"toolbarsTemplate",get:function get(){return(0,e.html)(_templateObject3_7a0b5b10942811ecb1937969798b231a(),this.opsToolbarTemplate,this.trayToolbarTemplate)}},{key:"menuToolbarTemplate",get:function get(){return(0,e.html)(_templateObject4_7a0b5b10942811ecb1937969798b231a(),this.saveButtons,this.doButtons,this.contentButtons,this.moreButtons,this.menuButtons)}},{key:"menuButtons",get:function get(){return(0,e.html)(_templateObject5_7a0b5b10942811ecb1937969798b231a(),this.collapsed?"left":"center","left"==this.elementAlign?"forward":"back","left"==this.elementAlign?this.t.menuRight:this.t.menuLeft,"left"==this.elementAlign?"1":"0",this.t.moveMenu,"left"==this.elementAlign?this.t.right:this.t.left)}},{key:"saveButtons",get:function get(){return this.hidePanelOps?"":(0,e.html)(_templateObject6_7a0b5b10942811ecb1937969798b231a(),this._clickSaveButton,this.editMode?this.t.save:this.t.edit,this.collapsed?"left":"center",this.t.cancel,this.collapsed?"left":"center")}},{key:"doButtons",get:function get(){return(0,e.html)(_templateObject7_7a0b5b10942811ecb1937969798b231a(),!this.canUndo,this.t.undo,this.collapsed?"left":"center",!this.canRedo,this.t.redo,this.collapsed?"left":"center")}},{key:"contentButtons",get:function get(){return(0,e.html)(_templateObject8_7a0b5b10942811ecb1937969798b231a(),this.t.blocks,!this.collapsed&&"content-add"===this.trayDetail,this.collapsed?"left":"center",this.t.media,!this.collapsed&&"media-add"===this.trayDetail,this.collapsed?"left":"center",this.t.edit,!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName,this.t.editSelected,this.activeTagName,!this.collapsed&&"content-edit"===this.trayDetail,this.collapsed?"left":"center",this.t.structure,!this.collapsed&&"content-map"===this.trayDetail,this.collapsed?"left":"center")}},{key:"moreButtons",get:function get(){return(0,e.html)(_templateObject9_7a0b5b10942811ecb1937969798b231a(),this.t.source,this.collapsed?"left":"center",this.hidePreferencesButton,this.t.settings,!this.collapsed&&"advanced-settings"===this.trayDetail,this.collapsed?"left":"center",this.tourOpened?"stop-tour":"start-tour",this.t.takeATour,!this.collapsed&&this.tourOpened,this.collapsed?"left":"center")}},{key:"trayDetailTemplate",get:function get(){return(0,e.html)(_templateObject10_7a0b5b10942811ecb1937969798b231a(),this.collapsed?"true":"false",this.collapsed?"-1":"0",this.trayDetail,this.trayLabel||"".concat(this.t.editSelected," ").concat(this.activeTagName),this.viewSourceTemplate,this.advancedSettingsTemplate,this.contentMapTemplate,this.contentEditTemplate,this.contentAddTemplate,this.mediaTemplate)}},{key:"viewSourceTemplate",get:function get(){return(0,e.html)(_templateObject11_7a0b5b10942811ecb1937969798b231a(),"view-source"!==this.trayDetail)}},{key:"advancedSettingsTemplate",get:function get(){return(0,e.html)(_templateObject12_7a0b5b10942811ecb1937969798b231a(),"advanced-settings"!==this.trayDetail)}},{key:"contentEditTemplate",get:function get(){return(0,e.html)(_templateObject13_7a0b5b10942811ecb1937969798b231a(),"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs","content-edit"!==this.trayDetail)}},{key:"contentAddTemplate",get:function get(){var t="content-add"!==this.trayDetail;return(0,e.html)(_templateObject14_7a0b5b10942811ecb1937969798b231a(),t,t,this.t.templates,t)}},{key:"contentMapTemplate",get:function get(){return(0,e.html)(_templateObject15_7a0b5b10942811ecb1937969798b231a(),"content-map"!==this.trayDetail)}},{key:"mediaTemplate",get:function get(){var t="media-add"!==this.trayDetail;return(0,e.html)(_templateObject16_7a0b5b10942811ecb1937969798b231a(),t,t,this.t.search,t)}}],[{key:"styles",get:function get(){return[].concat(_toConsumableArray(_get(_getPrototypeOf(HaxTray),"styles",this)||[]),_toConsumableArray(r.HaxTrayDetail),_toConsumableArray(r.HaxComponentStyles),[(0,e.css)(_templateObject17_7a0b5b10942811ecb1937969798b231a())])}},{key:"properties",get:function get(){return _objectSpread({},_get(_getPrototypeOf(HaxTray),"properties",this),{offsetMargin:{type:String,attribute:"offset-margin"},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},appStoreLoaded:{type:Boolean},activeValue:{type:Object},activeSchema:{type:Object},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePreferencesButton:{type:Boolean,reflect:!0,attribute:"hide-preferences-button"},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}})}}]),HaxTray}();exports.HaxTray=l,window.customElements.define(l.tag,l);
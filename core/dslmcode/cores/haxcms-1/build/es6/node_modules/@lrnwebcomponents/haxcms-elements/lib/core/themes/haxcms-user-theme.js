/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{html as e}from"../../../../../@polymer/polymer/polymer-element.js";import{HAXCMSPolymerElementTheme as t}from"../HAXCMSPolymerElementTheme.js";import{stylesFromTemplate as s}from"../../../../../@polymer/polymer/lib/utils/style-gather.js";import"../../ui-components/templates/basic-template.js";import"../../../../simple-colors/lib/simple-colors-polymer.js";class HAXCMSUserTheme extends t{async getCSS(){return await fetch("theme/theme.css").then((e=>e.text())).then((e=>{const t=new CustomEvent("haxcms-custom-theme-template-ready",{bubbles:!0,composed:!0,cancelable:!1,detail:{css:e}});return this.dispatchEvent(t),e}))}async getHTML(){return await fetch("theme/theme.html").then((e=>e.text())).then((e=>{const t=new CustomEvent("haxcms-custom-theme-template-ready",{bubbles:!0,composed:!0,cancelable:!1,detail:{html:e}});return this.dispatchEvent(t),e}))}constructor(){super(),this.__counter=0,this.getCSS(),this.getHTML(),globalThis.addEventListener("haxcms-custom-theme-template-ready",this.templateReady.bind(this))}connectedCallback(){super.connectedCallback(),this.contentContainer=this.shadowRoot.querySelector("#contentcontainer")}static get template(){return e`
      <style include="simple-colors-shared-styles-polymer"></style>
      <div id="contentcontainer">
        <div id="slot">
          <slot></slot>
        </div>
      </div>
    `}templateReady(e){if(this.__counter++,e.detail.css&&(this._css=e.detail.css),e.detail.html&&(this._html=e.detail.html),2===this.__counter){let e=globalThis.document.createElement("template");e.innerHTML=`\n      <style>\n        /**\n         * Hide the slotted content during edit mode. This must be here to work.\n         */\n        :host([edit-mode]) #slot {\n          display: none;\n        }\n        ${this._css}\n      </style>\n      ${this._html}`;const o=s(e);for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.firstChild);for(var t in o)e.innerHTML=o[t].outerHTML+e.innerHTML;this.__instance=this._stampTemplate(e),this.shadowRoot.appendChild(this.__instance)}}}customElements.define("haxcms-user-theme",HAXCMSUserTheme);export{HAXCMSUserTheme};
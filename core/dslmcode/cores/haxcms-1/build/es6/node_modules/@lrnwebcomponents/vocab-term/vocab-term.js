/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../lit/index.js";import{SimplePopover as s}from"../simple-popover/simple-popover.js";import"../simple-modal/lib/simple-modal-template.js";class VocabTerm extends t{static get properties(){return{popoverMode:{type:Boolean,reflect:!0,attribute:"popover-mode"},links:{type:Array}}}constructor(){super(),this.closeText="",this.openText="",this.popoverMode=!1,this.term="",this.querySelector("summary")&&(this.term=this.querySelector("summary").innerText),this.information="",this.querySelector('[slot="information"]')&&(this.information=this.querySelector('[slot="information"]').innerText),this.links=[],this.querySelector(".links a")&&this.querySelectorAll(".links a").forEach((t=>{this.links.push({title:t.innerText,href:t.getAttribute("href")})}))}static get styles(){let t=[];return super.styles&&(t=super.styles),[...t,i`
        :host {
          display: inline-flex;
        }
        simple-modal-template {
          --simple-modal-resize: both;
          --simple-modal-width: 300px;
          --simple-modal-height: 300px;
          --simple-modal-min-width: 300px;
          --simple-modal-min-height: 300px;
        }
        summary {
          list-style: none;
          border-bottom: var(--vocab-term-border-bottom, 1px dashed gray);
          color: var(--vocab-term-color, black);
        }
      `]}render(){return e` ${this.popoverMode?e`
          <details>
            <summary id="summary">${this.term}</summary>
            <div part="information">
              <simple-popover for="summary" position="top" auto>
                <p>${this.information}</p>
                <div part="links">
                  ${this.links.length>0?e`
                        <ul>
                          ${this.links.map((t=>e`
                              <li><a href="${t.href}">${t.title}</a></li>
                            `))}
                        </ul>
                      `:""}
                </div>
              </simple-popover>
            </div>
          </details>
        `:e`
          <div>
            <div part="term">
              <summary id="summary">${this.term}</summary>
            </div>
            <simple-modal-template title=${this.term}>
              <p slot="content">${this.information}</p>
              ${this.links.length>0?e` <ul slot="content">
                    ${this.links.map((t=>e`
                        <li><a href="${t.href}">${t.title}</a></li>
                      `))}
                  </ul>`:""}
            </simple-modal-template>
          </div>
        `}`}static get tag(){return"vocab-term"}_handleClick(t){this.details&&void 0===this.details.open&&(this.toggleOpen(),t.preventDefault(),t.stopPropagation())}_handleKeyup(t){(this.details&&void 0===this.details.open&&13==t.keyCode||32==t.keyCode)&&(this.toggleOpen(),t.preventDefault(),t.stopPropagation())}toggleOpen(){this.details.hasAttribute("open")?(this.details.removeAttribute("open"),this.details.open&&(this.details.open=!1)):(this.details.setAttribute("open",""),this.details.open&&(this.details.open=!0))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),0==this.popoverMode&&(this.shadowRoot.querySelector("simple-modal-template").associateEvents(this.shadowRoot.querySelector("summary")),this.shadowRoot.querySelector("summary").addEventListener("focus",this.detailsFocusOut.bind(this)))}detailsFocusOut(){this.shadowRoot.querySelector("details").removeAttribute("open"),this.shadowRoot.querySelector("summary").removeEventListener("focus",this.detailsFocusOut.bind(this))}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{}))}}customElements.define(VocabTerm.tag,VocabTerm);export{VocabTerm};
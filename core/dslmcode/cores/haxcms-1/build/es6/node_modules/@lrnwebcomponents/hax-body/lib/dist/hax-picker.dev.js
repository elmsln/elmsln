Object.defineProperty(exports,"__esModule",{value:!0}),exports.HaxPicker=void 0;var e=require("lit");require("@lrnwebcomponents/simple-toolbar/lib/simple-button-grid.js");var t=require("./hax-ui-styles.js"),r=require("./hax-store.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _templateObject3_2681ea80ee4311eb83c08f751303bc5f(){var e=_taggedTemplateLiteral(['\n            <hax-tray-button\n              show-text-label\n              id="picker-item-','"\n              @click="','"\n              data-selected="','"\n              ?disabled="','"\n              label="','"\n              icon="','"\n              icon-position="top"\n            ></hax-tray-button>\n          ']);return _templateObject3_2681ea80ee4311eb83c08f751303bc5f=function _templateObject3_2681ea80ee4311eb83c08f751303bc5f(){return e},e}function _templateObject2_2681ea80ee4311eb83c08f751303bc5f(){var e=_taggedTemplateLiteral(['\n      <simple-button-grid cols="100px">\n        ',"\n      </simple-button-grid>\n    "]);return _templateObject2_2681ea80ee4311eb83c08f751303bc5f=function _templateObject2_2681ea80ee4311eb83c08f751303bc5f(){return e},e}function _templateObject_2681ea80ee4311eb83c08f751303bc5f(){var e=_taggedTemplateLiteral(["\n        simple-button-grid {\n          overflow-y: auto;\n          margin: var(--hax-ui-spacing-sm);\n          --simple-button-grid-cols: 100px;\n        }\n      "]);return _templateObject_2681ea80ee4311eb83c08f751303bc5f=function _templateObject_2681ea80ee4311eb83c08f751303bc5f(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var n=function(n){function HaxPicker(){var e;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HaxPicker),(e=_possibleConstructorReturn(this,_getPrototypeOf(HaxPicker).call(this)))._elements=[],e.selectionList=[],e.pickerType="gizmo",e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HaxPicker,e.LitElement),_createClass(HaxPicker,null,[{key:"styles",get:function get(){return[].concat(_toConsumableArray(t.HaxComponentStyles),[(0,e.css)(_templateObject_2681ea80ee4311eb83c08f751303bc5f())])}}]),_createClass(HaxPicker,[{key:"render",value:function render(){var t=this;return(0,e.html)(_templateObject2_2681ea80ee4311eb83c08f751303bc5f(),this.selectionList.map((function(n,o){return(0,e.html)(_templateObject3_2681ea80ee4311eb83c08f751303bc5f(),o,t._selected,o,r.HAXStore.activeGizmo&&r.HAXStore.activeGizmo.tag==n.tag,n.title,n.icon)})))}},{key:"buildOptions",value:function buildOptions(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"element",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gizmo";this.pickerType=n;var o=[];switch(n){case"gizmo":for(var i in e)e[i].__type=r,o.push({icon:e[i].gizmo.icon,title:e[i].gizmo.title,color:e[i].gizmo.color,tag:e[i].gizmo.tag});break;case"app":for(var i in e)o.push({icon:e[i].details.icon,title:e[i].details.title,color:e[i].details.color,tag:e[i].gizmo.tag});break;default:o=e}this._elements=e,this.selectionList=_toConsumableArray(o),setTimeout((function(){t.shadowRoot.querySelector("#picker-item-0").focus()}),50)}},{key:"_selected",value:function _selected(e){var t=e.target.getAttribute("data-selected");e.preventDefault(),e.stopPropagation(),"undefined"!==_typeof(this._elements[t])&&("gizmo"==this.pickerType?(this._elements[t].replace=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))):this.dispatchEvent(new CustomEvent("hax-app-picker-selection",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))),this.close()}},{key:"close",value:function close(){window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}],[{key:"tag",get:function get(){return"hax-picker"}},{key:"properties",get:function get(){return{_elements:{type:Array},selectionList:{type:Array},pickerType:{type:String,attribute:"picker-type"}}}}]),HaxPicker}();exports.HaxPicker=n,window.customElements.define(n.tag,n);
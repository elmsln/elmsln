import{html as e,PolymerElement as t}from"../../@polymer/polymer/polymer-element.js";import{Templatizer as r}from"../../@polymer/polymer/lib/legacy/templatizer-behavior.js";import{OptionalMutableDataBehavior as i}from"../../@polymer/polymer/lib/legacy/mutable-data-behavior.js";import{mixinBehaviors as o}from"../../@polymer/polymer/lib/legacy/class.js";
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class GrafittoFilter extends(o([r,i],t)){static get template(){return e` <div id="dom"><slot></slot></div> `}static get tag(){return"grafitto-filter"}static get properties(){return{...super.properties,items:{type:Array,value:[]},like:{type:String,value:""},where:{type:String,value:"name"},caseSensitive:{type:Boolean,value:!1,reflectToAttribute:!0},as:{type:String,value:"items"},filtered:{type:Array,computed:"_computeFiltered(items, where, like, caseSensitive)",observer:"_onFilter",notify:!0},f:{type:Function,notify:!0}}}static get observers(){return["_populateUserTemplate(filtered)"]}filter(){this.where=""}_computeFiltered(e,t,r,i){var o=null;o=i?new RegExp(r):new RegExp(r,"i");var l=[];if(this.f){var s=this.f.bind(this);l=e.filter(s)}else{var a=this._decomposeWhere.bind(this);l=e.filter((function(e){if("object"==typeof e){var r=a(t,e);return void 0===r&&""!=t&&console.warn("grafitto-filter was unable to find a property in '"+t+"'"),o.test(r)}return"string"==typeof e?o.test(e):"number"==typeof e?o.test(e.toString()):void 0}))}return l}_populateUserTemplate(e){this.ctor?this.__clone[this.as]=e:(this._userTemplate=this.querySelector("template"),this._userTemplate||console.warn("grafitto-filter requires a template to be provided in light-dom"),this.templatize(this._userTemplate),this.__clone=this.stamp(null),this.__clone[this.as]=e,this.appendChild(this.__clone.root))}_decomposeWhere(e,t){return e.split(".").reduce((function(e,t){return e&&e[t]}),t)}_onFilter(){this.dispatchEvent(new CustomEvent("filter",{bubbles:!0,cancelable:!0,composed:!0,detail:!0}))}}customElements.define(GrafittoFilter.tag,GrafittoFilter);export{GrafittoFilter};
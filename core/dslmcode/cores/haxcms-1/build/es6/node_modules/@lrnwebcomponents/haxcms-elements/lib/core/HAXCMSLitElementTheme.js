/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{css as t,LitElement as a,render as e,unsafeCSS as o}from"../../../../lit/index.js";import{HAXCMSTheme as r}from"./HAXCMSThemeWiring.js";import{ResponsiveUtilityBehaviors as i}from"../../../responsive-utility/lib/responsive-utility-behaviors.js";import{store as n}from"./haxcms-site-store.js";import{autorun as l,toJS as c}from"../../../../mobx/dist/mobx.esm.js";import"../../../simple-icon/lib/simple-icons.js";import{SimpleIconsetStore as d}from"../../../simple-icon/lib/simple-iconset.js";import{editableTableDisplayStyles as s}from"../../../editable-table/lib/editable-table-behaviors.js";import{learningComponentColors as b,iconFromPageType as h}from"../../../course-design/lib/learning-component.js";import{copyToClipboard as g}from"../../../utils/utils.js";class HAXCMSLitElementTheme extends(r(i(a))){constructor(){super(),this.editMode=!1,this.isLoggedIn=!1,this.__disposer=this.__disposer?this.__disposer:[],l((t=>{this.editMode=c(n.editMode),this.__disposer.push(t)})),l((t=>{c(n.activeItemContent);this.HAXCMSThemeSettings.autoScroll&&this.shadowRoot&&this.HAXCMSThemeSettings.scrollTarget&&this.HAXCMSThemeSettings.scrollTarget.scrollIntoView&&this.HAXCMSThemeSettings.scrollTarget.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"}),setTimeout((()=>{let t=this.querySelectorAll("h1,h2,h3,h4,h5,h6");t.length>0&&t.forEach((t=>{t.addEventListener("click",this.copyLink.bind(this)),t.addEventListener("pointerenter",this.hoverIntentEnter.bind(this)),t.addEventListener("pointerleave",this.hoverIntentLeave.bind(this))}))}),100),this.__disposer.push(t)}))}hoverIntentEnter(t){t.target.classList.add("haxcms-copyable")}hoverIntentLeave(t){t.target.classList.remove("haxcms-copyable")}HAXCMSGlobalStyleSheetContent(){let a=["red","blue","green","orange","purple"].map((a=>t`
        .haxcms-theme-element [data-style-decoration~="highlight"] {
          color: var(--haxcms-style-element-color, white) !important;
          background-color: var(
            --haxcms-style-element-background-color,
            black
          ) !important;
          font-weight: 400;
          word-wrap: break-word;
          padding: 4px 8px;
          text-transform: uppercase;
          text-decoration: none;
        }
        .haxcms-theme-element [data-style-decoration~="${o(a)}"] {
          --haxcms-style-element-background-color: var(
            --simple-colors-default-theme-${o(a)}-7,
            ${o(a)}
          );
        }
      `)),e=Object.keys(b).map((a=>{let e=b[a];return t`
          h1[data-instructional-action="${o(a)}"],
          h2[data-instructional-action="${o(a)}"],
          h3[data-instructional-action="${o(a)}"],
          h4[data-instructional-action="${o(a)}"],
          h5[data-instructional-action="${o(a)}"],
          h6[data-instructional-action="${o(a)}"] {
            --hax-action-color: var(
              --simple-colors-default-theme-${o(e)}-8,
              ${o(e)}
            );
            --hax-action-line-color: var(
              --simple-colors-default-theme-${o(e)}-8,
              ${o(e)}
            );
            --hax-action-accent-color: #eeeeee;
            --hax-action-border: var(
                --simple-colors-default-theme-${o(e)}-8,
                ${o(e)}
              )
              solid 3px;
          }

          h1[data-instructional-action="${o(a)}"]::after,
          h2[data-instructional-action="${o(a)}"]::after,
          h3[data-instructional-action="${o(a)}"]::after,
          h4[data-instructional-action="${o(a)}"]::after,
          h5[data-instructional-action="${o(a)}"]::after,
          h6[data-instructional-action="${o(a)}"]::after {
            -webkit-mask-image: url("${o(d.getIcon(h(a)))}");
          }
          hr[data-instructional-action="${o(a)}"] {
            --hax-action-color: var(
              --simple-colors-default-theme-${o(a)}-8,
              ${o(a)}
            );
            --hax-action-line-color: var(
              --simple-colors-default-theme-${o(e)}-8,
              ${o(a)}
            );
            --hax-action-accent-color: #eeeeee;
            --hax-action-border: var(
                --simple-colors-default-theme-${o(a)}-8,
                ${o(a)}
              )
              solid 3px;
          }

          hr[data-instructional-action="${o(a)}"]::after {
            -webkit-mask-image: url("${o(d.getIcon(h(a)))}");
          }
        `}));return[t`
        .haxcms-copyable {
          background-image: url("${o(d.getIcon("icons:link"))}");
          background-position: right;
          background-repeat: no-repeat;
          background-size: 36px;
        }
        [data-style-decoration] {
          --mark-red-bg: #fbe4e4;
          --mark-pink-bg: #f4dfeb;
          --mark-blue-bg: #ddebf1;
          --mark-purple-bg: #eae4f2;
          --mark-teal-bg: #ddedea;
          --mark-yellow-bg: #fbf3db;
          --mark-orange-bg: #faebdd;
          --mark-brown-bg: #e9e5e3;
          --mark-gray-bg: #ebeced;
        }
        [data-style-block-decoration] {
          --mark-red-bg-callout: hsla(0, 74%, 94%, 0.3);
          --mark-pink-bg-callout: rgba(244, 223, 235, 0.3);
          --mark-blue-bg-callout: rgba(221, 235, 241, 0.3);
          --mark-purple-bg-callout: rgba(234, 228, 242, 0.3);
          --mark-teal-bg-callout: rgba(221, 237, 234, 0.3);
          --mark-yellow-bg-callout: hsla(45, 80%, 92%, 0.3);
          --mark-orange-bg-callout: hsla(29, 74%, 92%, 0.3);
          --mark-brown-bg-callout: hsla(20, 12%, 90%, 0.3);
          --mark-gray-bg-callout: hsla(210, 5%, 93%, 0.3);
          padding: 16px 16px 16px 12px;
          border-radius: 3px;
          align-items: center;
          box-sizing: border-box;
          margin: 0.75em 0;
          border: 2px solid rgba(55, 53, 47, 0.09);
        }
        [data-style-block-decoration="callout-red"] {
          background-color: var(--mark-red-bg-callout);
        }

        [data-style-block-decoration="callout-pink"] {
          background-color: var(--mark-pink-bg-callout);
        }

        [data-style-block-decoration="callout-blue"] {
          background-color: var(--mark-blue-bg-callout);
        }

        [data-style-block-decoration="callout-purple"] {
          background-color: var(--mark-purple-bg-callout);
        }

        [data-style-block-decoration="callout-teal"] {
          background-color: var(--mark-teal-bg-callout);
        }

        [data-style-block-decoration="callout-yellow"] {
          background-color: var(--mark-yellow-bg-callout);
        }

        [data-style-block-decoration="callout-orange"] {
          background-color: var(--mark-orange-bg-callout);
        }

        [data-style-block-decoration="callout-brown"] {
          background-color: var(--mark-brown-bg-callout);
        }
        [data-style-block-decoration="callout-gray"] {
          background-color: var(--mark-gray-bg-callout);
        }
        [data-style-decoration="mark-blue"],
        [data-style-decoration="mark-brown"],
        [data-style-decoration="mark-gray"],
        [data-style-decoration="mark-orange"],
        [data-style-decoration="mark-pink"],
        [data-style-decoration="mark-purple"],
        [data-style-decoration="mark-red"],
        [data-style-decoration="mark-teal"],
        [data-style-decoration="mark-yellow"] {
          --bg-color: transparent;
          padding: 0 0.5rem;
          margin: 0 -0.5rem 0 -0.25rem;
          border-radius: 0.5rem;
          border-bottom-left-radius: 0.125rem;
          -webkit-box-decoration-break: clone;
          box-decoration-break: clone;
          background-color: transparent;
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #fff697 10.5%,
            #fdf59d 85.29%,
            var(--bg-color)
          );
        }

        [data-style-decoration="mark-pink"],
        [data-style-decoration="mark-purple"] {
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #f5b8d1 10.5%,
            #f9bcd3 85.29%,
            var(--bg-color)
          );
        }

        [data-style-decoration="mark-blue"],
        [data-style-decoration="mark-gray"] {
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #adedfc 10.5%,
            #adebfd 85.29%,
            var(--bg-color)
          );
        }

        [data-style-decoration="mark-orange"],
        [data-style-decoration="mark-red"] {
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #f5c4ff 10.5%,
            #e7a8fc 85.29%,
            var(--bg-color)
          );
        }

        [data-style-decoration="mark-teal"] {
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #d4eabc 10.5%,
            #d2eabc 85.29%,
            var(--bg-color)
          );
        }

        [data-style-decoration="mark-brown"] {
          background-image: linear-gradient(
            119deg,
            var(--bg-color),
            #96b8ec 10.5%,
            #a6c3f0 85.29%,
            var(--bg-color)
          );
        }
        [data-style-decoration="mark-red"] {
          background-color: var(--mark-red-bg);
        }

        [data-style-decoration="mark-pink"] {
          background-color: var(--mark-pink-bg);
        }

        [data-style-decoration="mark-blue"] {
          background-color: var(--mark-blue-bg);
        }

        [data-style-decoration="mark-purple"] {
          background-color: var(--mark-purple-bg);
        }

        [data-style-decoration="mark-teal"] {
          background-color: var(--mark-teal-bg);
        }

        [data-style-decoration="mark-yellow"] {
          background-color: var(--mark-yellow-bg);
        }

        [data-style-decoration="mark-orange"] {
          background-color: var(--mark-orange-bg);
        }

        [data-style-decoration="mark-brown"] {
          background-color: var(--mark-brown-bg);
        }

        [data-style-decoration="mark-gray"] {
          background-color: var(--mark-gray-bg);
        }
        hr[data-instructional-action] {
          border: none;
          border-top: 2px dashed var(--hax-action-line-color, blue);
          overflow: visible;
          text-align: center;
          height: 4px;
          padding: 0px;
          background-color: white;
        }

        hr[data-instructional-action]::before {
          background-color: var(--hax-action-accent-color, #aaa);
          height: 50px;
          width: 50px;
          margin: 0 auto;
          background-position: center;
          content: "";
          display: block;
          top: -28px;
          position: relative;
          z-index: 1;
          border: var(--hax-action-border, 2px solid blue);
          border-radius: 50%;
        }

        hr[data-instructional-action]::after {
          content: "";
          position: relative;
          z-index: 2;
          background-color: var(--hax-action-color, blue);
          mask-repeat: no-repeat;
          mask-size: contain;
          -webkit-mask-repeat: no-repeat;
          -webkit-mask-size: contain;
          padding: 18px;
          top: -54px;
        }
        h1[data-instructional-action],
        h2[data-instructional-action],
        h3[data-instructional-action],
        h4[data-instructional-action],
        h5[data-instructional-action],
        h6[data-instructional-action] {
          padding-left: 72px;
          line-height: 50px;
          min-height: 64px;
          position: relative;
        }

        h1[data-instructional-action]::before,
        h2[data-instructional-action]::before,
        h3[data-instructional-action]::before,
        h4[data-instructional-action]::before,
        h5[data-instructional-action]::before,    
        h6[data-instructional-action]::before {
          background-color: var(--hax-action-accent-color, #aaa);
          background-position: center;
          content: '';
          display: block;
          position: absolute;
          z-index: 1;
          border: var(--hax-action-border , 3px solid black);
          border-radius: 50%;
          left: 0px;
          margin: 5px;
          height: 40px;
          width: 40px;
        }

        h1[data-instructional-action]::after,
        h2[data-instructional-action]::after,
        h3[data-instructional-action]::after,
        h4[data-instructional-action]::after,
        h5[data-instructional-action]::after,    
        h6[data-instructional-action]::after {
          content: '';
          position: relative;
          z-index: 2;
          background-color: var(--hax-action-color, blue);
          mask-repeat: no-repeat;
          mask-size: contain;
          -webkit-mask-repeat: no-repeat;
          -webkit-mask-size: contain;
          padding: 12px;
          margin: 15px;
          position: absolute;
          left: 0px;
        }
        [data-instructional-action][data-id-emphasize] {
          background-color: var(--hax-action-color) !important;
          color: white;
        }
      `,a,...e,s]}copyLink(t){let a=t.target;a||(a=t.path[0]),!a.id&&a.parentNode&&a.parentNode.id&&(a=a.parentNode);void 0!==globalThis.safari?a.scrollIntoView():a.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});let e=globalThis.location.origin+globalThis.location.pathname+"#"+a.getAttribute("id");globalThis.history.pushState({},null,e),globalThis.dispatchEvent(new PopStateEvent("popstate")),g(e,"Anchor link copied!")}static get properties(){let t={};return super.properties&&(t=super.properties),{...t,hexColor:{type:String,attribute:"hex-color"},color:{type:String,reflect:!0},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},isLoggedIn:{type:Boolean,reflect:!0,attribute:"is-logged-in"},contentContainer:{type:Object},_location:{type:Object}}}static get styles(){let a=[];return super.styles&&(a=super.styles),[a,t`
        :host([edit-mode]) {
          opacity: 1;
        }
        :host([hidden]) {
          display: none;
        }
        [hidden] {
          display: none !important;
        }

        @media (prefers-reduced-motion: reduce) {
          * {
            transition: none !important;
          }
        }
        /**
        * Hide the slotted content during edit mode. This must be here to work.
        */
        :host([edit-mode]) #slot {
          display: none;
        }
        #slot {
          min-height: 50vh;
        }
      `]}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),null==this.contentContainer&&(this.contentContainer=this.shadowRoot.querySelector("#contentcontainer")),e(this.HAXCMSGlobalStyleSheetContent(),n.themeStyleElement),setTimeout((()=>{setTimeout((()=>{if(this._location&&this._location.hash){let t=this.querySelector(this._location.hash);if(t){void 0!==globalThis.safari?t.scrollIntoView():t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}}),0);let t=this.querySelectorAll("h1,h2,h3,h4,h5,h6");t.length>0&&t.forEach((t=>{t.addEventListener("click",this.copyLink.bind(this)),t.addEventListener("pointerenter",this.hoverIntentEnter.bind(this)),t.addEventListener("pointerleave",this.hoverIntentLeave.bind(this))}))}),1500)}updated(t){super.updated&&super.updated(t),t.forEach(((t,a)=>{"_location"==a&&(this._locationChanged(this[a],t),setTimeout((()=>{if(this._location&&this._location.hash){let t=this.querySelector(this._location.hash);if(t){void 0!==globalThis.safari?t.scrollIntoView():t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}}),0)),"color"==a&&this._colorChanged(this[a],t),"contentContainer"==a&&(this.dispatchEvent(new CustomEvent("content-container-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this[a]})),this._contentContainerChanged(this[a],t)),"isLoggedIn"==a&&this.dispatchEvent(new CustomEvent("is-logged-in-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this[a]})),"editMode"==a&&(this.dispatchEvent(new CustomEvent("edit-mode-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this[a]})),this._editModeChanged(this[a],t))}))}}export{HAXCMSLitElementTheme};
Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleTourManager=exports.TourStop=exports.SimpleTour=void 0;var t=require("lit"),e=require("lit"),o=require("lit/directives/unsafe-html.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _templateObject2_b34afcd0809211edaa2833647dc78c6c(){var t=_taggedTemplateLiteral(["",'\n          <h2 class="subheading" slot="body">\n            ',"\n          </h2>\n          ","",""]);return _templateObject2_b34afcd0809211edaa2833647dc78c6c=function _templateObject2_b34afcd0809211edaa2833647dc78c6c(){return t},t}function _templateObject_b34afcd0809211edaa2833647dc78c6c(){var t=_taggedTemplateLiteral(['<h1 class="title" slot="heading">\n        ',',\n        <span class="xofy"\n          >',"/",'</span\n        >\n      </h1>\n      <simple-icon-button-lite\n        id="close"\n        slot="heading"\n        @click="','"\n        label="Stop Tour"\n        icon="close"\n      >\n      </simple-icon-button-lite>\n      <simple-icon-button-lite\n        id="prev"\n        slot="nav"\n        @click="','"\n        ?disabled="','"\n        label="Prev"\n        icon="arrow-back"\n        show-text-label\n      >\n      </simple-icon-button-lite>\n      <simple-tooltip for="prev" position="top" slot="nav">\n        Previous Item\n      </simple-tooltip>\n      <simple-icon-button-lite\n        id="next"\n        slot="nav"\n        @click="','"\n        ?disabled="','"\n        label="Next"\n        icon="arrow-forward"\n        show-text-label\n      >\n      </simple-icon-button-lite>\n      <simple-tooltip for="close" slot="body"> Stop Tour </simple-tooltip>\n      <simple-tooltip for="next" position="top" slot="nav">\n        Next Item\n      </simple-tooltip>']);return _templateObject_b34afcd0809211edaa2833647dc78c6c=function _templateObject_b34afcd0809211edaa2833647dc78c6c(){return t},t}function _taggedTemplateLiteral(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}require("@lrnwebcomponents/simple-toolbar/simple-toolbar.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js"),require("./simple-popover-manager.js");var i=function(i){function SimpleTour(){var t;return _classCallCheck(this,SimpleTour),(t=function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}(this,_getPrototypeOf(SimpleTour).call(this))).stacks={},t.orientation="lr",t.active=null,t.tourInfo={},t.activeElementDelay=500,t.stop=-1,window.addEventListener("simple-tour-register",t.registerNewTourEvent.bind(_assertThisInitialized(t))),window.addEventListener("simple-tour-create-tour-stop",t.createTourStopEvent.bind(_assertThisInitialized(t))),t}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(SimpleTour,t.LitElement),function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(SimpleTour,[{key:"registerNewTourEvent",value:function registerNewTourEvent(t){this.registerNewTour(t.detail)}},{key:"registerNewTour",value:function registerNewTour(t){return this.stacks[t.key]||(this.stacks[t.key]=[]),this.tourInfo[t.key]||(this.tourInfo[t.key]=t),this.stacks[t.key]}},{key:"createTourStopEvent",value:function createTourStopEvent(t){this.createTourStop(t.detail.name,t.detail.target,t.detail.title,t.detail.description,t.detail.mode)}},{key:"createTourStop",value:function createTourStop(t,e,o,i,r){var s=new n;return s.target=e,s.title=o,s.description=i,s.mode=r,this.addStops(t,[s]),s}},{key:"removeTarget",value:function removeTarget(t,e){var o=this,i=[];this.stacks[t].forEach((function(t,o){t.target===e&&i.push(o)})),i.forEach((function(e){o.stacks[t].splice(e,1)}))}},{key:"addStops",value:function addStops(t,e){this.stacks[t]||(this.stacks[t]=[]),this.stacks[t]=this.stacks[t].concat(e)}},{key:"hasNext",value:function hasNext(){return this.stop<this.stacks[this.active].length-1}},{key:"hasPrev",value:function hasPrev(){return this.stop>0}},{key:"nextStop",value:function nextStop(t){this.stop<this.stacks[this.active].length-1&&(this.stop+=1)}},{key:"prevStop",value:function prevStop(t){this.stop>0&&(this.stop-=1)}},{key:"startTour",value:function startTour(t){this.active=t,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"stopTour",value:function stopTour(t){window.SimplePopoverManager.requestAvailability().setPopover(this,this,!1,this.orientation),this.stop=-1,this.active=null,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"tourButtons",value:function tourButtons(){return(0,t.html)(_templateObject_b34afcd0809211edaa2833647dc78c6c(),this.tourInfo[this.active].name,this.stop+1,this.stacks[this.active].length,this.stopTour.bind(this),this.prevStop.bind(this),!this.hasPrev(),this.nextStop.bind(this),!this.hasNext())}},{key:"scrollHere",value:function scrollHere(t){"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!0):t.scrollIntoView({behavior:"smooth",inline:"center"})}},{key:"managerReset",value:function managerReset(){this.stopTour()}},{key:"updated",value:function updated(i){var n=this;i.forEach((function(i,r){if("active"==r&&n.active&&(n.stop=0),"stop"==r&&-1!=n.stop||"active"==r&&n.active){(0,e.render)(document.createElement("div"),window.SimplePopoverManager.requestAvailability());var s=(0,t.html)(_templateObject2_b34afcd0809211edaa2833647dc78c6c(),n.tourButtons(),(0,o.unsafeHTML)("<span>"+n.stacks[n.active][n.stop].title+"</span>"),(0,o.unsafeHTML)('<p slot="body">'+n.stacks[n.active][n.stop].description+"</p>"),n.tourInfo[n.active].style?(0,o.unsafeHTML)("<style>"+n.tourInfo[n.active].style+"</style>"):"");(0,e.render)(s,window.SimplePopoverManager.requestAvailability()),window.SimplePopoverManager.requestAvailability().setPopover(n,n.stacks[n.active][n.stop].target,!0,n.orientation,n.active),n.scrollHere(n.stacks[n.active][n.stop].target);var a=n.stacks[n.active][n.stop].target,l=n.stacks[n.active][n.stop].target.getAttribute("part");a.setAttribute("part","simple-tour-active"),setTimeout((function(){null==l||"simple-tour-active"==l?a.removeAttribute("part"):a.setAttribute("part",l)}),n.activeElementDelay)}}))}}],[{key:"properties",get:function get(){return{stop:{type:Number},active:{type:String},stacks:{type:Object},activeElementDelay:{type:Number}}}}]),SimpleTour}();exports.SimpleTour=i;var n=function TourStop(){_classCallCheck(this,TourStop),this.target=null,this.title="Title",this.description="<p>Description</p>"};exports.TourStop=n,customElements.define("simple-tour",i),window.SimpleTourManager=window.SimpleTourManager||{},window.SimpleTourManager.requestAvailability=function(){return window.SimpleTourManager.instance||(window.SimpleTourManager.instance=document.createElement("simple-tour"),document.body.appendChild(window.SimpleTourManager.instance)),window.SimpleTourManager.instance};var r=window.SimpleTourManager.requestAvailability();exports.SimpleTourManager=r;
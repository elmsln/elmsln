Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleTourManager=exports.TourStop=exports.SimpleTour=void 0;var e=require("lit"),t=require("lit"),o=require("lit/directives/unsafe-html.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _templateObject2_063aefb0feba11eb8439e3eec9305af7(){var e=_taggedTemplateLiteral(["",'\n          <h2 class="subheading" slot="body">\n            ',"\n          </h2>\n          ","",""]);return _templateObject2_063aefb0feba11eb8439e3eec9305af7=function _templateObject2_063aefb0feba11eb8439e3eec9305af7(){return e},e}function _templateObject_063aefb0feba11eb8439e3eec9305af7(){var e=_taggedTemplateLiteral(['<h1 class="title" slot="heading">\n        ',',\n        <span class="xofy"\n          >',"/",'</span\n        >\n      </h1>\n      <simple-icon-button-lite\n        id="close"\n        slot="heading"\n        @click="','"\n        label="Stop Tour"\n        icon="close"\n      >\n      </simple-icon-button-lite>\n      <simple-icon-button-lite\n        id="prev"\n        slot="nav"\n        @click="','"\n        ?disabled="','"\n        label="Prev"\n        icon="arrow-back"\n        show-text-label\n      >\n      </simple-icon-button-lite>\n      <simple-tooltip for="prev" position="top" slot="nav">\n        Previous Item\n      </simple-tooltip>\n      <simple-icon-button-lite\n        id="next"\n        slot="nav"\n        @click="','"\n        ?disabled="','"\n        label="Next"\n        icon="arrow-forward"\n        show-text-label\n      >\n      </simple-icon-button-lite>\n      <simple-tooltip for="close" slot="body"> Stop Tour </simple-tooltip>\n      <simple-tooltip for="next" position="top" slot="nav">\n        Next Item\n      </simple-tooltip>']);return _templateObject_063aefb0feba11eb8439e3eec9305af7=function _templateObject_063aefb0feba11eb8439e3eec9305af7(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}require("@lrnwebcomponents/simple-toolbar/simple-toolbar.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js"),require("./simple-popover-manager.js");var i=function(i){function SimpleTour(){var e;return _classCallCheck(this,SimpleTour),(e=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(SimpleTour).call(this))).stacks={},e.orientation="lr",e.active=null,e.tourInfo={},e.activeElementDelay=500,e.stop=-1,window.addEventListener("simple-tour-register",e.registerNewTourEvent.bind(_assertThisInitialized(e))),window.addEventListener("simple-tour-create-tour-stop",e.createTourStopEvent.bind(_assertThisInitialized(e))),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SimpleTour,e.LitElement),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(SimpleTour,[{key:"registerNewTourEvent",value:function registerNewTourEvent(e){this.registerNewTour(e.detail)}},{key:"registerNewTour",value:function registerNewTour(e){return this.stacks[e.key]||(this.stacks[e.key]=[]),this.tourInfo[e.key]||(this.tourInfo[e.key]=e),this.stacks[e.key]}},{key:"createTourStopEvent",value:function createTourStopEvent(e){this.createTourStop(e.detail.name,e.detail.target,e.detail.title,e.detail.description,e.detail.mode)}},{key:"createTourStop",value:function createTourStop(e,t,o,i,r){var s=new n;return s.target=t,s.title=o,s.description=i,s.mode=r,this.addStops(e,[s]),s}},{key:"removeTarget",value:function removeTarget(e,t){var o=this,i=[];this.stacks[e].forEach((function(e,o){e.target===t&&i.push(o)})),i.forEach((function(t){o.stacks[e].splice(t,1)}))}},{key:"addStops",value:function addStops(e,t){this.stacks[e]||(this.stacks[e]=[]),this.stacks[e]=this.stacks[e].concat(t)}},{key:"hasNext",value:function hasNext(){return this.stop<this.stacks[this.active].length-1}},{key:"hasPrev",value:function hasPrev(){return this.stop>0}},{key:"nextStop",value:function nextStop(e){this.stop<this.stacks[this.active].length-1&&(this.stop+=1)}},{key:"prevStop",value:function prevStop(e){this.stop>0&&(this.stop-=1)}},{key:"startTour",value:function startTour(e){this.active=e,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"stopTour",value:function stopTour(e){window.SimplePopoverManager.requestAvailability().setPopover(this,this,!1,this.orientation),this.stop=-1,this.active=null,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"tourButtons",value:function tourButtons(){return(0,e.html)(_templateObject_063aefb0feba11eb8439e3eec9305af7(),this.tourInfo[this.active].name,this.stop+1,this.stacks[this.active].length,this.stopTour.bind(this),this.prevStop.bind(this),!this.hasPrev(),this.nextStop.bind(this),!this.hasNext())}},{key:"scrollHere",value:function scrollHere(e){"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(!0):e.scrollIntoView({behavior:"smooth",inline:"center"})}},{key:"managerReset",value:function managerReset(){this.stopTour()}},{key:"updated",value:function updated(i){var n=this;i.forEach((function(i,r){if("active"==r&&n.active&&(n.stop=0),"stop"==r&&-1!=n.stop||"active"==r&&n.active){(0,t.render)(document.createElement("div"),window.SimplePopoverManager.requestAvailability());var s=(0,e.html)(_templateObject2_063aefb0feba11eb8439e3eec9305af7(),n.tourButtons(),(0,o.unsafeHTML)("<span>"+n.stacks[n.active][n.stop].title+"</span>"),(0,o.unsafeHTML)('<p slot="body">'+n.stacks[n.active][n.stop].description+"</p>"),n.tourInfo[n.active].style?(0,o.unsafeHTML)("<style>"+n.tourInfo[n.active].style+"</style>"):"");(0,t.render)(s,window.SimplePopoverManager.requestAvailability()),window.SimplePopoverManager.requestAvailability().setPopover(n,n.stacks[n.active][n.stop].target,!0,n.orientation,n.active),n.scrollHere(n.stacks[n.active][n.stop].target);var a=n.stacks[n.active][n.stop].target,l=n.stacks[n.active][n.stop].target.getAttribute("part");a.setAttribute("part","simple-tour-active"),setTimeout((function(){null==l||"simple-tour-active"==l?a.removeAttribute("part"):a.setAttribute("part",l)}),n.activeElementDelay)}}))}}],[{key:"properties",get:function get(){return{stop:{type:Number},active:{type:String},stacks:{type:Object},activeElementDelay:{type:Number}}}}]),SimpleTour}();exports.SimpleTour=i;var n=function TourStop(){_classCallCheck(this,TourStop),this.target=null,this.title="Title",this.description="<p>Description</p>"};exports.TourStop=n,customElements.define("simple-tour",i),window.SimpleTourManager=window.SimpleTourManager||{},window.SimpleTourManager.requestAvailability=function(){return window.SimpleTourManager.instance||(window.SimpleTourManager.instance=document.createElement("simple-tour"),document.body.appendChild(window.SimpleTourManager.instance)),window.SimpleTourManager.instance};var r=window.SimpleTourManager.requestAvailability();exports.SimpleTourManager=r;
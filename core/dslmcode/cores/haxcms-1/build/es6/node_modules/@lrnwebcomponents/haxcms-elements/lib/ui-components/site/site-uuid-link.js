/**
 * Copyright 2022 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../../../../lit/index.js";import{store as n}from"../../core/haxcms-site-store.js";import{toJS as r}from"../../../../../mobx/dist/mobx.esm.js";class SiteUuidLink extends t{static get styles(){return[i`
        :host {
          display: inline;
        }
      `]}static get tag(){return"site-uuid-link"}constructor(){super(),this.uuid=null}render(){return e`
      <a href="${this.getLinkFromUUID(this.uuid)}" @click="${this.testOpen}">
        ${this.getTitleFromUUID(this.uuid)}
      </a>
    `}testOpen(t){if(this._haxstate)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1}getLinkFromUUID(t){if(t&&n.findItem(t)){return r(n.findItem(t)).slug}return""}getTitleFromUUID(t){if(t&&n.findItem(t)){return r(n.findItem(t)).title}return""}static get properties(){return{uuid:{type:String}}}static get haxProperties(){return{canScale:!1,canPosition:!1,canEditSource:!1,gizmo:{title:"HAX link",description:"A link to a specific resource in the site your working on.",icon:"icons:link",color:"grey",tags:["Other","haxcms","content","remote","reference","url","resource"],handles:[{type:"inline",text:"term"}],meta:{author:"HAXTheWeb core team"}},settings:{configure:[{property:"uuid",title:"Item",description:"Item to render for the link / title data",inputMethod:"textfield"}]}}}haxHooks(){return{editModeChanged:"haxeditModeChanged",activeElementChanged:"haxactiveElementChanged",setupActiveElementForm:"haxsetupActiveElementForm"}}haxeditModeChanged(t){this._haxstate=t}haxactiveElementChanged(t,e){e&&(this._haxstate=e)}haxsetupActiveElementForm(t){if(window.HAXCMS){const i=n.getManifestItems(!0);var e=[{text:"Select page",value:null}];i.forEach((t=>{if(t.id!=this.itemId){let n=t,r="- ";for(;n&&null!=n.parent;)n=i.find((t=>t.id==n.parent)),n&&(r="--"+r);e.push({text:r+t.title,value:t.id})}})),t.settings.configure.forEach(((i,n)=>{"uuid"===i.property&&(t.settings.configure[n].inputMethod="select",t.settings.configure[n].itemsList=e)}))}}}customElements.define(SiteUuidLink.tag,SiteUuidLink);export{SiteUuidLink};
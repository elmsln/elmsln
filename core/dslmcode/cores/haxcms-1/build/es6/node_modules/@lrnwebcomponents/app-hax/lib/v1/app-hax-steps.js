import{html as t,css as e,unsafeCSS as s}from"../../../../lit/index.js";import{SimpleColors as i}from"../../../simple-colors/simple-colors.js";import{autorun as a,toJS as o}from"../../../../mobx/dist/mobx.esm.js";import{store as n}from"./AppHaxStore.js";import{localStorageSet as p}from"../../../utils/utils.js";import"../../../../scrollable-component/index.js";import"../../../simple-icon/lib/simple-icon-lite.js";import{MicroFrontendRegistry as r}from"../../../micro-frontend-registry/micro-frontend-registry.js";import{enableServices as l}from"../../../micro-frontend-registry/lib/microServices.js";import"./app-hax-site-button.js";import"./app-hax-hat-progress.js";import"./app-hax-button.js";const c=new URL("../assets/images/Home.svg",import.meta.url).href,h=new URL("../assets/images/DisabledCircle.svg",import.meta.url).href,d=new URL("../assets/images/TransparentCircle.svg",import.meta.url).href,m=new URL("../assets/images/EnabledCircle.svg",import.meta.url).href,u={collection:["collections-theme","bootstrap-theme"],blog:["haxor-slevin"],course:["clean-one","clean-two","learn-two-theme"],website:["polaris-theme"],training:["training-theme"],import:["clean-one","clean-two","learn-two-theme"]};export class AppHaxSteps extends i{static get tag(){return"app-hax-steps"}constructor(){super(),this.unlockComingSoon=!1,this.unlockTerrible=!1,this.windowControllers=new AbortController,this.nameTyped="",this.stepRoutes=[],this._progressReady=!1,this.step=null,this.loaded=!1,this.themeNames=[],this.appSettings={},a((()=>{this.appSettings=o(n.appSettings);const t=o(n.site.structure);this.themeNames=Object.keys(this.appSettings.themes).filter((e=>t&&u[t]&&u[t].includes(e)))})),a((()=>{this.dark=o(n.darkMode)})),a((()=>{p("app-hax-step",o(n.step))})),a((()=>{p("app-hax-site",o(n.site)),this.step=n.stepTest(this.step)})),a((()=>{o(n.createSiteSteps)&&o(n.location)&&(this.step=n.stepTest(this.step))})),a((()=>{const t=o(n.routes);this.stepRoutes=t.filter((t=>t.step))}))}static get properties(){return{...super.properties,step:{type:Number,reflect:!0},stepRoutes:{type:Array},themeNames:{type:Array},unlockComingSoon:{type:Boolean,reflect:!0,attribute:"unlock-coming-soon"},unlockTerrible:{type:Boolean,reflect:!0,attribute:"unlock-terrible"},loaded:{type:Boolean,reflect:!0},appSettings:{type:Object},nameTyped:{type:String}}}chooseStructure(t){if(!t.target.comingSoon){const{value:e}=t.target;n.site.structure=e,"course"===e&&(n.site.type="own",n.site.theme="clean-one"),"blog"===e&&(n.site.type="own",n.site.theme="haxor-slevin"),"collection"===e&&(n.site.type="own",n.site.theme="collections-theme"),"website"===e&&(n.site.type="own",n.site.theme="polaris-theme"),"training"===e&&(n.site.type="own",n.site.theme="training-theme"),n.appEl.playSound("click2")}}chooseType(t){if(!t.target.comingSoon){const{type:e}=t.target;n.site.type=e,n.appEl.playSound("click2")}}async docxImport(t){if(!t.target.comingSoon){const{type:e}=t.target;import("../../../file-system-broker/lib/docx-file-system-broker.js").then((async t=>{l(["haxcms"]);const s=window.FileSystemBroker.requestAvailability(),i=await s.loadFile("docx"),a=new FormData;a.append("method","site"),a.append("type",o(n.site.structure)),a.append("upload",i),this.setProcessingVisual();const p=await r.call("@haxcms/docxToSite",a);n.toast("Processed!",300),200==p.status&&p.data&&""!=p.data.contents?(n.items=p.data.items,p.data.files&&(n.itemFiles=p.data.files),this.nameTyped=p.data.filename.replace(".docx","").replace("outline","").replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("File did not return valid HTML structure"))}))}}async evoImport(t){if(!t.target.comingSoon){const{type:e}=t.target;import("../../../file-system-broker/file-system-broker.js").then((async t=>{l(["haxcms"]);const s=window.FileSystemBroker.requestAvailability(),i=await s.loadFile("zip"),a=new FormData;a.append("method","site"),a.append("type",o(n.site.structure)),a.append("upload",i),this.setProcessingVisual();const p=await r.call("@haxcms/evolutionToSite",a,null,null,"?jwt="+o(n.AppHaxAPI.jwt));n.toast("Processed!",300),200==p.status&&p.data&&""!=p.data.contents?(n.items=p.data.items,this.nameTyped=p.data.filename.replace(".zip","").replace("outline","").replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("File did not return valid HTML structure"))}))}}async gbImport(t){if(!t.target.comingSoon){const{type:e}=t.target;let s=window.prompt("URL for the Gitbook repo");l(["haxcms"]),this.setProcessingVisual();const i=await r.call("@haxcms/gitbookToSite",{md:s});n.toast("Processed!",300),200==i.status&&i.data&&""!=i.data.contents?(n.items=i.data.items,i.data.files&&(n.itemFiles=i.data.files),this.nameTyped=i.data.filename.replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("Repo did not return valid structure"))}}async importFromURL(t){const{type:e,prompt:s,callback:i,param:a}=t.target;if(!t.target.comingSoon){let t=window.prompt(s);l(["haxcms"]),this.setProcessingVisual();const o={};o[a]=t;const p=await r.call(i,o);n.toast("Processed!",300),200==p.status&&p.data&&""!=p.data.contents?(n.items=p.data.items,p.data.files&&(n.itemFiles=p.data.files),this.nameTyped=p.data.filename.replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("Repo did not return valid structure"))}}async notionImport(t){if(!t.target.comingSoon){const{type:e}=t.target;let s=window.prompt("URL for the Github Notion repo");l(["haxcms"]),this.setProcessingVisual();const i=await r.call("@haxcms/notionToSite",{repoUrl:s});n.toast("Processed!",300),200==i.status&&i.data&&""!=i.data.contents?(n.items=i.data.items,i.data.files&&(n.itemFiles=i.data.files),this.nameTyped=i.data.filename.replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("Repo did not return valid structure"))}}async pressbooksImport(t){if(!t.target.comingSoon){const{type:e}=t.target;import("../../../file-system-broker/lib/docx-file-system-broker.js").then((async t=>{l(["haxcms"]);const s=window.FileSystemBroker.requestAvailability(),i=await s.loadFile("html"),a=new FormData;a.append("method","site"),a.append("type",o(n.site.structure)),a.append("upload",i),this.setProcessingVisual();const p=await r.call("@haxcms/pressbooksToSite",a);n.toast("Processed!",300),200==p.status&&p.data&&""!=p.data.contents?(n.items=p.data.items,p.data.files&&(n.itemFiles=p.data.files),this.nameTyped=p.data.filename.replace(".html","").replace("outline","").replace(/\s/g,"").replace(/-/g,"").toLowerCase(),setTimeout((()=>{this.shadowRoot.querySelector("#sitename").value=this.nameTyped,this.shadowRoot.querySelector("#sitename").select()}),800),n.site.type=e,n.site.theme="clean-one",n.appEl.playSound("click2")):(n.appEl.playSound("error"),n.toast("File did not return valid HTML structure"))}))}}setProcessingVisual(){let t=document.createElement("simple-icon-lite");t.icon="hax:loading",t.style.setProperty("--simple-icon-height","40px"),t.style.setProperty("--simple-icon-width","40px"),t.style.height="150px",t.style.marginLeft="8px",n.toast("Processing",6e4,{hat:"construction",slot:t})}chooseTheme(t){if(!t.target.comingSoon){const{value:e}=t.target;n.site.theme=e,n.appEl.playSound("click2")}}chooseName(){if(""!==this.nameTyped){const t=this.shadowRoot.querySelector("#sitename").value;n.site.name=t,n.appEl.playSound("click2")}}progressReady(t){t.detail&&(this._progressReady=!0,5===this.step&&setTimeout((()=>{this.shadowRoot.querySelector("app-hax-hat-progress").process()}),300))}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{if(4===this.step&&"step"===e&&this.shadowRoot&&(this.shadowRoot.querySelector("#sitename").value=o(n.site.name)),5===this.step&&"step"===e&&this.shadowRoot&&this._progressReady&&setTimeout((()=>{this.shadowRoot.querySelector("app-hax-hat-progress").process()}),600),"step"===e&&(n.step=this.step),"unlockTerrible"===e&&this[e]){Object.keys(u).forEach((t=>{u[t]=[...u[t],"terrible-themes","terrible-productionz-themes","terrible-outlet-themes","terrible-best-themes","terrible-resume-themes"]}));const t=o(n.site.structure);this.themeNames=Object.keys(this.appSettings.themes).filter((e=>t&&u[t]&&u[t].includes(e)))}}))}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.maintainScroll.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("popstate",this.popstateListener.bind(this),{signal:this.windowControllers.signal})}disconnectedCallback(){this.windowControllers.abort(),super.disconnectedCallback()}popstateListener(t){if("popstate"===t.type&&null===t.state)try{setTimeout((()=>{const e=t.target.document.location.pathname.split("/").pop();if(e.includes("createSite")){const t=parseInt(e.replace("createSite-step-",""));t<n.stepTest(t)?this.shadowRoot.querySelector("#link-step-"+t).click():t>n.stepTest(t)&&(n.toast("Please select an option"),this.step=n.stepTest(t),this.shadowRoot.querySelector("#link-step-"+this.step).click())}}),0)}catch(t){}}maintainScroll(){this.shadowRoot&&this.step&&(this.scrollToThing(`#step-${this.step}`,{behavior:"instant",block:"start",inline:"nearest"}),setTimeout((()=>{this.scrollToThing(`#step-${this.step}`,{behavior:"instant",block:"start",inline:"nearest"})}),100))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),setTimeout((()=>{null===this.step&&(this.step=1),this.scrollToThing(`#step-${this.step}`,{behavior:"instant",block:"start",inline:"nearest"})}),100),a((()=>{if(o(n.createSiteSteps)&&o(n.appReady)){const t=o(n.location);t.route&&t.route.step&&t.route.name&&setTimeout((()=>{this.scrollToThing("#".concat(t.route.name),{behavior:"smooth",block:"start",inline:"nearest"}),4===t.route.step&&4===n.stepTest(4)&&setTimeout((()=>{this.shadowRoot.querySelector("#sitename").focus(),this.scrollToThing("#step-4",{behavior:"instant",block:"start",inline:"nearest"})}),800)}),300)}})),a((()=>{if(this.shadowRoot&&o(n.createSiteSteps)&&o(n.appReady)){const t=o(n.activeItem);t&&t.name&&t.step&&!this.__overrideProgression&&this.shadowRoot.querySelector("#link-".concat(t.name)).click()}}))}scrollToThing(t,e){const s=void 0!==window.safari;this.shadowRoot.querySelector(".carousel-with-snapping-item.active-step")&&this.shadowRoot.querySelector(".carousel-with-snapping-item.active-step").classList.remove("active-step"),s?this.shadowRoot.querySelector(t).scrollIntoView():this.shadowRoot.querySelector(t).scrollIntoView(e),this.shadowRoot.querySelector(t).classList.add("active-step")}static get styles(){return[...super.styles,e`
        :host {
          display: block;
        }
        scrollable-component {
          --scrollbar-width: 0px;
          --scrollbar-height: 0px;
          --scrollbar-padding: 0;
          --viewport-overflow-x: hidden;
          overflow: hidden;
        }
        #grid-container {
          display: grid;
          grid-template-columns: 200px 200px 200px;
          background: transparent;
        }
        .carousel-with-snapping-track {
          display: grid;
          grid-auto-flow: column;
          grid-gap: 30px;
        }
        .carousel-with-snapping-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: normal;
          scroll-snap-align: center;
          scroll-snap-stop: always;
          scrollbar-gutter: stable;
          width: var(--viewport-width);
          font-size: 1.5rem;
          text-align: center;
          overflow-x: hidden;
          max-height: 60vh;
          padding-top: 1vh;
        }
        #step-links {
          padding: 0;
          margin: 0;
        }
        ul,
        li {
          list-style: none;
        }
        li {
          vertical-align: middle;
          display: inline-flex;
          margin: 5px;
        }
        li.step {
          border-radius: 50%;
          background-color: transparent;
        }
        li a {
          font-size: 12px;
          color: var(--simple-colors-default-theme-grey-12, white);
          text-decoration: none;
          padding: 5px;
          width: 20px;
          height: 20px;
          line-height: 20px;
          margin: 0;
          display: block;
          border: 0;
          border-radius: 50%;
          background-repeat: no-repeat;
          background-size: 30px 30px;
          background-color: var(--simple-colors-default-theme-grey-1, white);
          background-image: url("${s(m)}");
          transition: 0.3s ease-in-out background, 0.3s ease-in-out color;
          transition-delay: 0.6s, 0.3s;
        }
        li a[disabled] {
          background-image: url("${s(h)}");
          pointer-events: none;
          color: var(--simple-colors-default-theme-grey-7, grey);
          user-select: none;
        }
        li[disabled] {
          background-color: grey;
        }
        li.active-step a {
          background-color: orange;
          background-image: url("${s(d)}");
        }
        app-hax-button {
          padding: 10px 0px 10px 0px;
          background: transparent;
        }
        #theme-container {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
        }
        img {
          pointer-events: none;
        }
        #themeContainer {
          width: 70vw;
          height: 55vh;
        }
        .theme-button {
          background-color: transparent;
          color: var(--simple-colors-default-theme-grey-12, white);
          border: none;
          margin: 8px;
          padding: 8px;
          width: 245px;
        }

        .theme-button div {
          font-family: "Press Start 2P", sans-serif;
          font-size: 14px;
          margin-top: 12px;
        }
        .theme-button:focus,
        .theme-button:hover {
          outline: 4px solid var(--app-hax-accent-color, var(--accent-color));
          outline-offset: 4px;
          background-color: transparent;
          border: none;
          cursor: pointer;
        }
        #sitename {
          font-family: "Press Start 2P", sans-serif;
          font-size: 32px;
          padding: 8px;
          width: 40vw;
        }
        #homebtn {
          --simple-icon-height: 30px;
          --simple-icon-width: 30px;
          border-radius: 50%;
          cursor: pointer;
          background-color: var(--simple-colors-default-theme-grey-1, white);
        }
        .homelnk {
          background-image: none;
          display: flex;
          padding: 0;
          margin: 0;
          height: 30px;
          width: 30px;
        }
        app-hax-site-button {
          justify-content: center;
          --app-hax-site-button-width: 35vw;
          --app-hax-site-button-min-width: 240px;
        }
        app-hax-hat-progress {
          height: 400px;
          width: 400px;
          display: block;
        }

        @media (max-width: 800px) {
          .theme-button {
            width: unset;
            padding: 0;
          }
          .theme-button div {
            font-size: 12px;
            margin-top: 8px;
          }
          .theme-button img {
            height: 70px;
          }
          app-hax-site-button {
            width: 320px;
            max-width: 60vw;
            --app-hax-site-button-font-size: 2.5vw;
          }
          #sitename {
            width: 70vw;
            font-size: 20px;
          }
          #grid-container {
            grid-template-columns: 150px 150px 150px;
          }
        }
        @media (max-height: 600px) {
          .carousel-with-snapping-item {
            padding-top: 4px;
            max-height: 57vh;
          }
          #sitename {
            width: 40vw;
            font-size: 14px;
          }
          app-hax-hat-progress {
            transform: scale(0.5);
            margin-top: -18vh;
          }
        }
        @media (max-width: 500px) {
          app-hax-hat-progress {
            transform: scale(0.5);
            margin-top: -15vh;
          }
        }
        @media (max-height: 400px) {
          .carousel-with-snapping-item {
            padding-top: 4px;
            max-height: 40vh;
          }
          app-hax-hat-progress {
            transform: scale(0.3);
          }
          .carousel-with-snapping-item.active-step app-hax-hat-progress {
            position: fixed;
            top: 20%;
            left: 20%;
          }
        }
      `]}progressFinished(t){t.detail&&(this.loaded=!0,n.appEl.playSound("success"),t.target.shadowRoot.querySelector(".game").focus(),this.scrollToThing(`#step-${this.step}`,{behavior:"instant",block:"start",inline:"nearest"}))}typeKey(){this.nameTyped=this.shadowRoot.querySelector("#sitename").value}keydown(t){[" ","/","\\","&","#","?","+","=","{","}","|","^","~","[","]","`",'"',"'"].includes(t.key)?(n.appEl.playSound("error"),n.toast(`"${t.key}" is not allowed. Use - or _`),t.preventDefault()):"Enter"===t.key?this.chooseName():["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)||n.appEl.playSound("click")}stepLinkClick(t){const e=parseInt(t.target.getAttribute("data-step"),10);this.step<e?t.preventDefault():null===t.target.getAttribute("data-step")?(n.createSiteSteps=!1,n.appMode="home",this.nameTyped="",n.siteReady=!1,n.site.structure=null,n.site.type=null,n.site.theme=null,n.site.name=null):this.step>e&&(this.nameTyped="",n.siteReady=!1,1===e?(n.site.structure=null,n.site.type=null,n.site.theme=null,n.site.name=null):2===e?(n.site.type=null,n.site.theme=null,n.site.name=null):3===e?(n.site.theme=null,n.site.name=null):4===e&&(n.site.name=null),this.step=e)}renderTypes(e){const s=o(n.site.structure);var i=t``;switch(s){case"collection":i=t` <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
            type="technology"
            ?coming-soon="${!this.unlockComingSoon}"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
            type="business"
            ?coming-soon="${!this.unlockComingSoon}"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
            type="art"
            ?coming-soon="${!this.unlockComingSoon}"
          ></app-hax-button>`;break;default:case"course":i=t` <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.chooseType}
            type="15w"
          ></app-hax-button>`;break;case"website":i=t` <app-hax-button
          tabindex="${2!==e?"-1":""}"
          @click=${this.chooseType}
          type="website"
        ></app-hax-button>`;break;case"training":i=t` <app-hax-button
          tabindex="${2!==e?"-1":""}"
          @click=${this.chooseType}
          type="training"
        ></app-hax-button>`;break;case"blog":i=t` <app-hax-button
          tabindex="${2!==e?"-1":""}"
          @click=${this.chooseType}
          type="blog"
        ></app-hax-button>`;break;case"import":i=t` <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.docxImport}
            type="docx"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.importFromURL}
            type="elms:ln"
            prompt="URL for the ELMS:LN site"
            callback="@haxcms/elmslnToSite"
            param="repoUrl"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.importFromURL}
            type="haxcms"
            prompt="URL for the HAXcms site"
            callback="@haxcms/haxcmsToSite"
            param="repoUrl"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.evoImport}
            type="evolution"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.importFromURL}
            type="notion"
            prompt="URL for the Notion git repo"
            callback="@haxcms/notionToSite"
            param="repoUrl"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.importFromURL}
            type="gitbook"
            prompt="URL for the Gitbook git repo"
            callback="@haxcms/gitbookToSite"
            param="md"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.importFromURL}
            type="html"
            prompt="URL for the html content"
            callback="@haxcms/htmlToSite"
            param="repoUrl"
          ></app-hax-button>
          <app-hax-button
            tabindex="${2!==e?"-1":""}"
            @click=${this.pressbooksImport}
            type="pressbooks"
            beta
          ></app-hax-button>`}return i}render(){return t`
      <div id="container">
        <ul id="step-links">
          <li>
            ${o(n.isNewUser)?t``:t`
                  <a href="home" class="homelnk" tabindex="-1">
                    <simple-icon-lite
                      tabindex="0"
                      src="${c}"
                      id="homebtn"
                      title="Site list"
                      @click="${this.stepLinkClick}"
                    ></simple-icon-lite>
                  </a>
                  <simple-tooltip for="homebtn" position="bottom"
                    >Site list</simple-tooltip
                  >
                `}
          </li>
          ${this.stepRoutes.map(((e,s)=>t`<li
                ?disabled="${this.step<e.step||5===this.step}"
                class="step ${this.step===e.step?"active-step":""}"
              >
                <a
                  href="${e.path}"
                  ?disabled="${this.step<e.step||5===this.step}"
                  tabindex="${this.step<=e.step?"-1":"0"}"
                  @click="${this.stepLinkClick}"
                  id="link-${e.name}"
                  title="Step ${s+1}: ${e.label}"
                  data-step="${e.step}"
                  >${s+1}</a
                >
                <simple-tooltip for="link-${e.name}" position="bottom"
                  >Step ${s+1}: ${e.label}</simple-tooltip
                >
              </li>`))}
        </ul>
        <scrollable-component>
          <div class="carousel-with-snapping-track">
            <div class="carousel-with-snapping-item" id="step-1">
              <div class="step-wrapper">
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Blog"
                  value="blog"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Collection"
                  value="collection"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Course"
                  value="course"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Training"
                  value="training"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Website"
                  value="website"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
                <app-hax-site-button
                  tabindex="${1!==this.step?"-1":""}"
                  label="&gt; Import site from.."
                  value="import"
                  @click=${this.chooseStructure}
                ></app-hax-site-button>
              </div>
            </div>
            <div class="carousel-with-snapping-item" id="step-2">
              <div id="grid-container">${this.renderTypes(this.step)}</div>
            </div>
            <div class="carousel-with-snapping-item" id="step-3">
              <div id="themeContainer">
                ${this.appSettings&&this.appSettings.themes?this.themeNames.map((e=>t`
                        <button
                          aria-label="${this.appSettings.themes[e].name} theme"
                          value="${e}"
                          class="theme-button"
                          @click=${this.chooseTheme}
                          tabindex="${3!==this.step?"-1":""}"
                        >
                          <img
                            class="theme-img"
                            src="${this.appSettings.themes[e].thumbnail}"
                            alt=""
                            loading="lazy"
                            decoding="async"
                          />
                          <div>${this.appSettings.themes[e].name}</div>
                        </button>
                      `)):""}
              </div>
            </div>
            <div class="carousel-with-snapping-item" id="step-4">
              <input
                id="sitename"
                @input="${this.typeKey}"
                @keydown="${this.keydown}"
                maxlength="30"
                placeholder="${o(n.site.structure)} name.."
                tabindex="${4!==this.step?"-1":""}"
              />
              <app-hax-site-button
                class="sitenamebtn"
                tabindex="${4!==this.step?"-1":""}"
                label="&gt; Create journey"
                @click=${this.chooseName}
                ?disabled="${""===this.nameTyped}"
              >
              </app-hax-site-button>
            </div>
            <div class="carousel-with-snapping-item" id="step-5">
              <app-hax-hat-progress
                @progress-ready="${this.progressReady}"
                @promise-progress-finished="${this.progressFinished}"
                tabindex="${5!==this.step?"-1":""}"
              ></app-hax-hat-progress>
            </div>
          </div>
        </scrollable-component>
      </div>
    `}}customElements.define(AppHaxSteps.tag,AppHaxSteps);
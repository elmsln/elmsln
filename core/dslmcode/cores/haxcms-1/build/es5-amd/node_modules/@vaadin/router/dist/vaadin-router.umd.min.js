!function (e, t) {
  "object" == (typeof exports === "undefined" ? "undefined" : babelHelpers.typeof(exports)) && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t((e = "undefined" != typeof globalThis ? globalThis : e || self).Vaadin = e.Vaadin || {});
}(this, function (e) {
  "use strict";

  function t(e) {
    "@babel/helpers - typeof";

    return (t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e;
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
    })(e);
  }

  function n(e, t) {
    if (!babelHelpers.instanceof(e, t)) throw new TypeError("Cannot call a class as a function");
  }

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
    }
  }

  function o(e, t, n) {
    return t && r(e.prototype, t), n && r(e, n), e;
  }

  function a(e) {
    return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
      return e.__proto__ || Object.getPrototypeOf(e);
    })(e);
  }

  function i(e, t) {
    return (i = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e;
    })(e, t);
  }

  function c(e) {
    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e;
  }

  function u(e) {
    var t = function () {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }();

    return function () {
      var n,
          r,
          o = a(e);

      if (t) {
        var i = a(this).constructor;
        n = Reflect.construct(o, arguments, i);
      } else n = o.apply(this, arguments);

      return !(r = n) || "object" != babelHelpers.typeof(r) && "function" != typeof r ? c(this) : r;
    };
  }

  function l(e, t, n) {
    return (l = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
      var r = function (e, t) {
        for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = a(e));) {
          ;
        }

        return e;
      }(e, t);

      if (r) {
        var o = Object.getOwnPropertyDescriptor(r, t);
        return o.get ? o.get.call(n) : o.value;
      }
    })(e, t, n || e);
  }

  function s(e) {
    return function (e) {
      if (Array.isArray(e)) return f(e);
    }(e) || function (e) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);
    }(e) || function (e, t) {
      if (!e) return;
      if ("string" == typeof e) return f(e, t);
      var n = Object.prototype.toString.call(e).slice(8, -1);
      "Object" === n && e.constructor && (n = e.constructor.name);
      if ("Map" === n || "Set" === n) return Array.from(e);
      if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return f(e, t);
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }

  function f(e, t) {
    (null == t || t > e.length) && (t = e.length);

    for (var n = 0, r = new Array(t); n < t; n++) {
      r[n] = e[n];
    }

    return r;
  }

  function h(e) {
    return e = e || [], Array.isArray(e) ? e : [e];
  }

  function d(e) {
    return "[Vaadin.Router] ".concat(e);
  }

  var p = "module",
      v = "nomodule",
      _ = [p, v];

  function m(e) {
    if (!e.match(/.+\.[m]?js$/)) throw new Error(d('Unsupported type for bundle "'.concat(e, '": .js or .mjs expected.')));
  }

  function g(e) {
    if (!e || !C(e.path)) throw new Error(d('Expected route config to be an object with a "path" string property, or an array of such objects'));
    var t = e.bundle,
        n = ["component", "redirect", "bundle"];
    if (!(k(e.action) || Array.isArray(e.children) || k(e.children) || E(t) || n.some(function (t) {
      return C(e[t]);
    }))) throw new Error(d('Expected route config "'.concat(e.path, '" to include either "').concat(n.join('", "'), '" ') + 'or "action" function but none found.'));
    if (t) if (C(t)) m(t);else {
      if (!_.some(function (e) {
        return e in t;
      })) throw new Error(d('Expected route bundle to include either "' + v + '" or "' + p + '" keys, or both'));

      _.forEach(function (e) {
        return e in t && m(t[e]);
      });
    }
    e.redirect && ["bundle", "component"].forEach(function (t) {
      t in e && console.warn(d('Route config "'.concat(e.path, '" has both "redirect" and "').concat(t, '" properties, ') + 'and "redirect" will always override the latter. Did you mean to only use "'.concat(t, '"?')));
    });
  }

  function y(e) {
    h(e).forEach(function (e) {
      return g(e);
    });
  }

  function w(e, t) {
    var n = document.head.querySelector('script[src="' + e + '"][async]');
    return n || ((n = document.createElement("script")).setAttribute("src", e), t === p ? n.setAttribute("type", p) : t === v && n.setAttribute(v, ""), n.async = !0), new Promise(function (e, t) {
      n.onreadystatechange = n.onload = function (t) {
        n.__dynamicImportLoaded = !0, e(t);
      }, n.onerror = function (e) {
        n.parentNode && n.parentNode.removeChild(n), t(e);
      }, null === n.parentNode ? document.head.appendChild(n) : n.__dynamicImportLoaded && e();
    });
  }

  function b(e, t) {
    return !window.dispatchEvent(new CustomEvent("vaadin-router-".concat(e), {
      cancelable: "go" === e,
      detail: t
    }));
  }

  function E(e) {
    return "object" === t(e) && !!e;
  }

  function k(e) {
    return "function" == typeof e;
  }

  function C(e) {
    return "string" == typeof e;
  }

  function x(e) {
    var t = new Error(d("Page not found (".concat(e.pathname, ")")));
    return t.context = e, t.code = 404, t;
  }

  var R = new function e() {
    n(this, e);
  }();

  function O(e) {
    if (!e.defaultPrevented && 0 === e.button && !(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      for (var t = e.target, n = e.composedPath ? e.composedPath() : e.path || [], r = 0; r < n.length; r++) {
        var o = n[r];

        if (o.nodeName && "a" === o.nodeName.toLowerCase()) {
          t = o;
          break;
        }
      }

      for (; t && "a" !== t.nodeName.toLowerCase();) {
        t = t.parentNode;
      }

      if (t && "a" === t.nodeName.toLowerCase()) if (!t.target || "_self" === t.target.toLowerCase()) if (!t.hasAttribute("download")) if (!t.hasAttribute("router-ignore")) if (t.pathname !== window.location.pathname || "" === t.hash) if ((t.origin || function (e) {
        var t = e.port,
            n = e.protocol,
            r = "http:" === n && "80" === t || "https:" === n && "443" === t ? e.hostname : e.host;
        return "".concat(n, "//").concat(r);
      }(t)) === window.location.origin) {
        var a = t;
        b("go", {
          pathname: a.pathname,
          search: a.search,
          hash: a.hash
        }) && (e.preventDefault(), e && "click" === e.type && window.scrollTo(0, 0));
      }
    }
  }

  var A = {
    activate: function activate() {
      window.document.addEventListener("click", O);
    },
    inactivate: function inactivate() {
      window.document.removeEventListener("click", O);
    }
  };

  function j(e) {
    if ("vaadin-router-ignore" !== e.state) {
      var t = window.location;
      b("go", {
        pathname: t.pathname,
        search: t.search,
        hash: t.hash
      });
    }
  }

  /Trident/.test(navigator.userAgent) && !k(window.PopStateEvent) && (window.PopStateEvent = function (e, t) {
    t = t || {};
    var n = document.createEvent("Event");
    return n.initEvent(e, Boolean(t.bubbles), Boolean(t.cancelable)), n.state = t.state || null, n;
  }, window.PopStateEvent.prototype = window.Event.prototype);

  var P = {
    activate: function activate() {
      window.addEventListener("popstate", j);
    },
    inactivate: function inactivate() {
      window.removeEventListener("popstate", j);
    }
  },
      L = W,
      U = V,
      I = function I(e, t) {
    return D(V(e, t));
  },
      T = D,
      S = K,
      B = "/",
      N = "./",
      M = new RegExp(["(\\\\.)", "(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"), "g");

  function V(e, t) {
    for (var n, r = [], o = 0, a = 0, i = "", c = t && t.delimiter || B, u = t && t.delimiters || N, l = !1; null !== (n = M.exec(e));) {
      var s = n[0],
          f = n[1],
          h = n.index;
      if (i += e.slice(a, h), a = h + s.length, f) i += f[1], l = !0;else {
        var d = "",
            p = e[a],
            v = n[2],
            _ = n[3],
            m = n[4],
            g = n[5];

        if (!l && i.length) {
          var y = i.length - 1;
          u.indexOf(i[y]) > -1 && (d = i[y], i = i.slice(0, y));
        }

        i && (r.push(i), i = "", l = !1);
        var w = "" !== d && void 0 !== p && p !== d,
            b = "+" === g || "*" === g,
            E = "?" === g || "*" === g,
            k = d || c,
            C = _ || m;
        r.push({
          name: v || o++,
          prefix: d,
          delimiter: k,
          optional: E,
          repeat: b,
          partial: w,
          pattern: C ? H(C) : "[^" + F(k) + "]+?"
        });
      }
    }

    return (i || a < e.length) && r.push(i + e.substr(a)), r;
  }

  function D(e) {
    for (var n = new Array(e.length), r = 0; r < e.length; r++) {
      "object" === t(e[r]) && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$"));
    }

    return function (t, r) {
      for (var o = "", a = r && r.encode || encodeURIComponent, i = 0; i < e.length; i++) {
        var c = e[i];

        if ("string" != typeof c) {
          var u,
              l = t ? t[c.name] : void 0;

          if (Array.isArray(l)) {
            if (!c.repeat) throw new TypeError('Expected "' + c.name + '" to not repeat, but got array');

            if (0 === l.length) {
              if (c.optional) continue;
              throw new TypeError('Expected "' + c.name + '" to not be empty');
            }

            for (var s = 0; s < l.length; s++) {
              if (u = a(l[s], c), !n[i].test(u)) throw new TypeError('Expected all "' + c.name + '" to match "' + c.pattern + '"');
              o += (0 === s ? c.prefix : c.delimiter) + u;
            }
          } else if ("string" != typeof l && "number" != typeof l && "boolean" != typeof l) {
            if (!c.optional) throw new TypeError('Expected "' + c.name + '" to be ' + (c.repeat ? "an array" : "a string"));
            c.partial && (o += c.prefix);
          } else {
            if (u = a(String(l), c), !n[i].test(u)) throw new TypeError('Expected "' + c.name + '" to match "' + c.pattern + '", but got "' + u + '"');
            o += c.prefix + u;
          }
        } else o += c;
      }

      return o;
    };
  }

  function F(e) {
    return e.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
  }

  function H(e) {
    return e.replace(/([=!:$/()])/g, "\\$1");
  }

  function $(e) {
    return e && e.sensitive ? "" : "i";
  }

  function K(e, t, n) {
    for (var r = (n = n || {}).strict, o = !1 !== n.start, a = !1 !== n.end, i = F(n.delimiter || B), c = n.delimiters || N, u = [].concat(n.endsWith || []).map(F).concat("$").join("|"), l = o ? "^" : "", s = 0 === e.length, f = 0; f < e.length; f++) {
      var h = e[f];
      if ("string" == typeof h) l += F(h), s = f === e.length - 1 && c.indexOf(h[h.length - 1]) > -1;else {
        var d = h.repeat ? "(?:" + h.pattern + ")(?:" + F(h.delimiter) + "(?:" + h.pattern + "))*" : h.pattern;
        t && t.push(h), h.optional ? h.partial ? l += F(h.prefix) + "(" + d + ")?" : l += "(?:" + F(h.prefix) + "(" + d + "))?" : l += F(h.prefix) + "(" + d + ")";
      }
    }

    return a ? (r || (l += "(?:" + i + ")?"), l += "$" === u ? "$" : "(?=" + u + ")") : (r || (l += "(?:" + i + "(?=" + u + "))?"), s || (l += "(?=" + i + "|" + u + ")")), new RegExp(l, $(n));
  }

  function W(e, t, n) {
    return babelHelpers.instanceof(e, RegExp) ? function (e, t) {
      if (!t) return e;
      var n = e.source.match(/\((?!\?)/g);
      if (n) for (var r = 0; r < n.length; r++) {
        t.push({
          name: r,
          prefix: null,
          delimiter: null,
          optional: !1,
          repeat: !1,
          partial: !1,
          pattern: null
        });
      }
      return e;
    }(e, t) : Array.isArray(e) ? function (e, t, n) {
      for (var r = [], o = 0; o < e.length; o++) {
        r.push(W(e[o], t, n).source);
      }

      return new RegExp("(?:" + r.join("|") + ")", $(n));
    }(e, t, n) : function (e, t, n) {
      return K(V(e, n), t, n);
    }(e, t, n);
  }

  L.parse = U, L.compile = I, L.tokensToFunction = T, L.tokensToRegExp = S;
  var q = Object.prototype.hasOwnProperty,
      z = new Map();

  function Q(e) {
    try {
      return decodeURIComponent(e);
    } catch (t) {
      return e;
    }
  }

  function J(e, t, n, r, o) {
    var a,
        i,
        c = 0,
        u = e.path || "";
    return "/" === u.charAt(0) && (n && (u = u.substr(1)), n = !0), {
      next: function next(l) {
        if (e === l) return {
          done: !0
        };
        var s = e.__children = e.__children || e.children;
        if (!a && (a = function (e, t, n, r, o) {
          n = !!n;
          var a = "".concat(e, "|").concat(n),
              i = z.get(a);

          if (!i) {
            var c = [];
            i = {
              keys: c,
              pattern: L(e, c, {
                end: n,
                strict: "" === e
              })
            }, z.set(a, i);
          }

          var u = i.pattern.exec(t);
          if (!u) return null;

          for (var l = Object.assign({}, o), s = 1; s < u.length; s++) {
            var f = i.keys[s - 1],
                h = f.name,
                d = u[s];
            void 0 === d && q.call(l, h) || (f.repeat ? l[h] = d ? d.split(f.delimiter).map(Q) : [] : l[h] = d ? Q(d) : d);
          }

          return {
            path: u[0],
            keys: (r || []).concat(i.keys),
            params: l
          };
        }(u, t, !s, r, o))) return {
          done: !1,
          value: {
            route: e,
            keys: a.keys,
            params: a.params,
            path: a.path
          }
        };
        if (a && s) for (; c < s.length;) {
          if (!i) {
            var f = s[c];
            f.parent = e;
            var h = a.path.length;
            h > 0 && "/" === t.charAt(h) && (h += 1), i = J(f, t.substr(h), n, a.keys, a.params);
          }

          var d = i.next(l);
          if (!d.done) return {
            done: !1,
            value: d.value
          };
          i = null, c++;
        }
        return {
          done: !0
        };
      }
    };
  }

  function G(e) {
    if (k(e.route.action)) return e.route.action(e);
  }

  z.set("|false", {
    keys: [],
    pattern: /(?:)/
  });

  var X = function () {
    function e(t) {
      var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
      if (n(this, e), Object(t) !== t) throw new TypeError("Invalid routes");
      this.baseUrl = r.baseUrl || "", this.errorHandler = r.errorHandler, this.resolveRoute = r.resolveRoute || G, this.context = Object.assign({
        resolver: this
      }, r.context), this.root = Array.isArray(t) ? {
        path: "",
        __children: t,
        parent: null,
        __synthetic: !0
      } : t, this.root.parent = null;
    }

    return o(e, [{
      key: "getRoutes",
      value: function value() {
        return s(this.root.__children);
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        y(e);
        var t = s(h(e));
        this.root.__children = t;
      }
    }, {
      key: "addRoutes",
      value: function value(e) {
        var t;
        return y(e), (t = this.root.__children).push.apply(t, s(h(e))), this.getRoutes();
      }
    }, {
      key: "removeRoutes",
      value: function value() {
        this.setRoutes([]);
      }
    }, {
      key: "resolve",
      value: function value(e) {
        var t = this,
            n = Object.assign({}, this.context, C(e) ? {
          pathname: e
        } : e),
            r = J(this.root, this.__normalizePathname(n.pathname), this.baseUrl),
            o = this.resolveRoute,
            a = null,
            i = null,
            c = n;

        function u(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : a.value.route,
              l = null === (arguments.length > 2 ? arguments[2] : void 0) && a.value.route;
          return a = i || r.next(l), i = null, e || !a.done && function (e, t) {
            for (var n = t; n;) {
              if ((n = n.parent) === e) return !0;
            }

            return !1;
          }(t, a.value.route) ? a.done ? Promise.reject(x(n)) : (function (e, t) {
            var n = t.route,
                r = t.path;

            if (n && !n.__synthetic) {
              var o = {
                path: r,
                route: n
              };

              if (e.chain) {
                if (n.parent) for (var a = e.chain.length; a-- && e.chain[a].route && e.chain[a].route !== n.parent;) {
                  e.chain.pop();
                }
              } else e.chain = [];

              e.chain.push(o);
            }
          }(c = Object.assign(c ? {
            chain: c.chain ? c.chain.slice(0) : []
          } : {}, n, a.value), a.value), Promise.resolve(o(c)).then(function (n) {
            return null !== n && void 0 !== n && n !== R ? (c.result = n.result || n, c) : u(e, t, n);
          })) : (i = a, Promise.resolve(R));
        }

        return n.next = u, Promise.resolve().then(function () {
          return u(!0, t.root);
        }).catch(function (e) {
          var n = function (e) {
            var t = "Path '".concat(e.pathname, "' is not properly resolved due to an error."),
                n = (e.route || {}).path;
            return n && (t += " Resolution had failed on route: '".concat(n, "'")), t;
          }(c);

          if (e ? console.warn(n) : e = new Error(n), e.context = e.context || c, babelHelpers.instanceof(e, DOMException) || (e.code = e.code || 500), t.errorHandler) return c.result = t.errorHandler(e), c;
          throw e;
        });
      }
    }, {
      key: "__normalizePathname",
      value: function value(e) {
        if (!this.baseUrl) return e;

        var t = this.__effectiveBaseUrl,
            n = this.constructor.__createUrl(e, t).href;

        return n.slice(0, t.length) === t ? n.slice(t.length) : void 0;
      }
    }, {
      key: "__effectiveBaseUrl",
      get: function get() {
        return this.baseUrl ? this.constructor.__createUrl(this.baseUrl, document.baseURI || document.URL).href.replace(/[^\/]*$/, "") : "";
      }
    }], [{
      key: "__createUrl",
      value: function value(e, t) {
        return new URL(e, t);
      }
    }]), e;
  }();

  X.pathToRegexp = L;
  var Y = X.pathToRegexp,
      Z = new Map();

  function ee(e, t) {
    var n = e.get(t);
    if (n && n.length > 1) throw new Error('Duplicate route with name "'.concat(t, '".') + " Try seting unique 'name' route properties.");
    return n && n[0];
  }

  function te(e) {
    var t = e.path;
    return void 0 !== (t = Array.isArray(t) ? t[0] : t) ? t : "";
  }

  function ne(e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (!babelHelpers.instanceof(e, X)) throw new TypeError("An instance of Resolver is expected");
    var n = new Map();
    return function (r, o) {
      var a = ee(n, r);
      if (!(a || (n.clear(), function e(t, n, r) {
        var o = n.name || n.component;
        if (o && (t.has(o) ? t.get(o).push(n) : t.set(o, [n])), Array.isArray(r)) for (var a = 0; a < r.length; a++) {
          var i = r[a];
          i.parent = n, e(t, i, i.__children || i.children);
        }
      }(n, e.root, e.root.__children), a = ee(n, r)))) throw new Error('Route "'.concat(r, '" not found'));
      var i = Z.get(a.fullPath);

      if (!i) {
        for (var c = te(a), u = a.parent; u;) {
          var l = te(u);
          l && (c = l.replace(/\/$/, "") + "/" + c.replace(/^\//, "")), u = u.parent;
        }

        for (var s = Y.parse(c), f = Y.tokensToFunction(s), h = Object.create(null), d = 0; d < s.length; d++) {
          C(s[d]) || (h[s[d].name] = !0);
        }

        i = {
          toPath: f,
          keys: h
        }, Z.set(c, i), a.fullPath = c;
      }

      var p = i.toPath(o, t) || "/";

      if (t.stringifyQueryParams && o) {
        for (var v = {}, _ = Object.keys(o), m = 0; m < _.length; m++) {
          var g = _[m];
          i.keys[g] || (v[g] = o[g]);
        }

        var y = t.stringifyQueryParams(v);
        y && (p += "?" === y.charAt(0) ? y : "?".concat(y));
      }

      return p;
    };
  }

  var re = [];

  function oe(e) {
    re.forEach(function (e) {
      return e.inactivate();
    }), e.forEach(function (e) {
      return e.activate();
    }), re = e;
  }

  var ae = function ae(e) {
    var t = getComputedStyle(e).getPropertyValue("animation-name");
    return t && "none" !== t;
  },
      ie = function ie(e, t) {
    e.addEventListener("animationend", function n() {
      e.removeEventListener("animationend", n), t();
    });
  };

  function ce(e, t) {
    return e.classList.add(t), new Promise(function (n) {
      if (ae(e)) {
        var r = e.getBoundingClientRect(),
            o = "height: ".concat(r.bottom - r.top, "px; width: ").concat(r.right - r.left, "px");
        e.setAttribute("style", "position: absolute; ".concat(o)), ie(e, function () {
          e.classList.remove(t), e.removeAttribute("style"), n();
        });
      } else e.classList.remove(t), n();
    });
  }

  function ue(e) {
    return null !== e && void 0 !== e;
  }

  function le(e, t) {
    var n = e.pathname,
        r = void 0 === n ? "" : n,
        o = e.search,
        a = void 0 === o ? "" : o,
        i = e.hash,
        c = void 0 === i ? "" : i,
        u = e.chain,
        l = void 0 === u ? [] : u,
        s = e.params,
        f = void 0 === s ? {} : s,
        h = e.redirectFrom,
        d = e.resolver,
        p = l.map(function (e) {
      return e.route;
    });
    return {
      baseUrl: d && d.baseUrl || "",
      pathname: r,
      search: a,
      hash: c,
      routes: p,
      route: t || p.length && p[p.length - 1] || null,
      params: f,
      redirectFrom: h,
      getUrl: function getUrl() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        return pe(_e.pathToRegexp.compile(ve(p))(Object.assign({}, f, e)), d);
      }
    };
  }

  function se(e, t) {
    var n = Object.assign({}, e.params);
    return {
      redirect: {
        pathname: t,
        from: e.pathname,
        params: n
      }
    };
  }

  function fe(e, t, n) {
    if (k(e)) return e.apply(n, t);
  }

  function he(e, t, n) {
    return function (r) {
      return r && (r.cancel || r.redirect) ? r : n ? fe(n[e], t, n) : void 0;
    };
  }

  function de(e) {
    if (e && e.length) for (var t = e[0].parentNode, n = 0; n < e.length; n++) {
      t.removeChild(e[n]);
    }
  }

  function pe(e, t) {
    var n = t.__effectiveBaseUrl;
    return n ? t.constructor.__createUrl(e.replace(/^\//, ""), n).pathname : e;
  }

  function ve(e) {
    return e.map(function (e) {
      return e.path;
    }).reduce(function (e, t) {
      return t.length ? e.replace(/\/$/, "") + "/" + t.replace(/^\//, "") : e;
    }, "");
  }

  var _e = function (e) {
    !function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && i(e, t);
    }(s, X);
    var r = u(s);

    function s(e, t) {
      var o;
      n(this, s);
      var a = document.head.querySelector("base"),
          i = a && a.getAttribute("href");

      (o = r.call(this, [], Object.assign({
        baseUrl: i && X.__createUrl(i, document.URL).pathname.replace(/[^\/]*$/, "")
      }, t))).resolveRoute = function (e) {
        return o.__resolveRoute(e);
      };

      var u = s.NavigationTrigger;
      return s.setTriggers.apply(s, Object.keys(u).map(function (e) {
        return u[e];
      })), o.baseUrl, o.ready, o.ready = Promise.resolve(e), o.location, o.location = le({
        resolver: c(o)
      }), o.__lastStartedRenderId = 0, o.__navigationEventHandler = o.__onNavigationEvent.bind(c(o)), o.setOutlet(e), o.subscribe(), o.__createdByRouter = new WeakMap(), o.__addedByRouter = new WeakMap(), o;
    }

    return o(s, [{
      key: "__resolveRoute",
      value: function value(e) {
        var t = this,
            n = e.route,
            r = Promise.resolve();
        k(n.children) && (r = r.then(function () {
          return n.children(function (e) {
            var t = Object.assign({}, e);
            return delete t.next, t;
          }(e));
        }).then(function (e) {
          ue(e) || k(n.children) || (e = n.children), function (e, t) {
            if (!Array.isArray(e) && !E(e)) throw new Error(d('Incorrect "children" value for the route '.concat(t.path, ": expected array or object, but got ").concat(e)));
            t.__children = [];

            for (var n = h(e), r = 0; r < n.length; r++) {
              g(n[r]), t.__children.push(n[r]);
            }
          }(e, n);
        }));
        var o = {
          redirect: function redirect(t) {
            return se(e, t);
          },
          component: function component(e) {
            var n = document.createElement(e);
            return t.__createdByRouter.set(n, !0), n;
          }
        };
        return r.then(function () {
          if (t.__isLatestRender(e)) return fe(n.action, [e, o], n);
        }).then(function (e) {
          return ue(e) && (babelHelpers.instanceof(e, HTMLElement) || e.redirect || e === R) ? e : C(n.redirect) ? o.redirect(n.redirect) : n.bundle ? (t = n.bundle, C(t) ? w(t) : Promise.race(_.filter(function (e) {
            return e in t;
          }).map(function (e) {
            return w(t[e], e);
          }))).then(function () {}, function () {
            throw new Error(d("Bundle not found: ".concat(n.bundle, ". Check if the file name is correct")));
          }) : void 0;
          var t;
        }).then(function (e) {
          return ue(e) ? e : C(n.component) ? o.component(n.component) : void 0;
        });
      }
    }, {
      key: "setOutlet",
      value: function value(e) {
        e && this.__ensureOutlet(e), this.__outlet = e;
      }
    }, {
      key: "getOutlet",
      value: function value() {
        return this.__outlet;
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        return this.__previousContext = void 0, this.__urlForName = void 0, l(a(s.prototype), "setRoutes", this).call(this, e), t || this.__onNavigationEvent(), this.ready;
      }
    }, {
      key: "render",
      value: function value(e, t) {
        var n = this,
            r = ++this.__lastStartedRenderId,
            o = Object.assign({
          search: "",
          hash: ""
        }, C(e) ? {
          pathname: e
        } : e, {
          __renderId: r
        });
        return this.ready = this.resolve(o).then(function (e) {
          return n.__fullyResolveChain(e);
        }).then(function (e) {
          if (n.__isLatestRender(e)) {
            var o = n.__previousContext;
            if (e === o) return n.__updateBrowserHistory(o, !0), n.location;
            if (n.location = le(e), t && n.__updateBrowserHistory(e, 1 === r), b("location-changed", {
              router: n,
              location: n.location
            }), e.__skipAttach) return n.__copyUnchangedElements(e, o), n.__previousContext = e, n.location;

            n.__addAppearingContent(e, o);

            var a = n.__animateIfNeeded(e);

            return n.__runOnAfterEnterCallbacks(e), n.__runOnAfterLeaveCallbacks(e, o), a.then(function () {
              if (n.__isLatestRender(e)) return n.__removeDisappearingContent(), n.__previousContext = e, n.location;
            });
          }
        }).catch(function (e) {
          if (r === n.__lastStartedRenderId) throw t && n.__updateBrowserHistory(o), de(n.__outlet && n.__outlet.children), n.location = le(Object.assign(o, {
            resolver: n
          })), b("error", Object.assign({
            router: n,
            error: e
          }, o)), e;
        }), this.ready;
      }
    }, {
      key: "__fullyResolveChain",
      value: function value(e) {
        var t = this,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e;
        return this.__findComponentContextAfterAllRedirects(n).then(function (r) {
          var o = r !== n ? r : e,
              a = pe(ve(r.chain), r.resolver) === r.pathname;
          return function e(t) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : t.route,
                r = arguments.length > 2 ? arguments[2] : void 0;
            return t.next(void 0, n, r).then(function (r) {
              return null === r || r === R ? a ? t : null !== n.parent ? e(t, n.parent, r) : r : r;
            });
          }(r).then(function (e) {
            if (null === e || e === R) throw x(o);
            return e && e !== R && e !== r ? t.__fullyResolveChain(o, e) : t.__amendWithOnBeforeCallbacks(r);
          });
        });
      }
    }, {
      key: "__findComponentContextAfterAllRedirects",
      value: function value(e) {
        var n = this,
            r = e.result;
        return babelHelpers.instanceof(r, HTMLElement) ? (function (e, t) {
          t.location = le(e);
          var n = e.chain.map(function (e) {
            return e.route;
          }).indexOf(e.route);
          e.chain[n].element = t;
        }(e, r), Promise.resolve(e)) : r.redirect ? this.__redirect(r.redirect, e.__redirectCount, e.__renderId).then(function (e) {
          return n.__findComponentContextAfterAllRedirects(e);
        }) : babelHelpers.instanceof(r, Error) ? Promise.reject(r) : Promise.reject(new Error(d('Invalid route resolution result for path "'.concat(e.pathname, '". ') + 'Expected redirect object or HTML element, but got: "'.concat(function (e) {
          if ("object" !== t(e)) return String(e);
          var n = Object.prototype.toString.call(e).match(/ (.*)\]$/)[1];
          return "Object" === n || "Array" === n ? "".concat(n, " ").concat(JSON.stringify(e)) : n;
        }(r), '". ') + "Double check the action return value for the route.")));
      }
    }, {
      key: "__amendWithOnBeforeCallbacks",
      value: function value(e) {
        var t = this;
        return this.__runOnBeforeCallbacks(e).then(function (n) {
          return n === t.__previousContext || n === e ? n : t.__fullyResolveChain(n);
        });
      }
    }, {
      key: "__runOnBeforeCallbacks",
      value: function value(e) {
        var t = this,
            n = this.__previousContext || {},
            r = n.chain || [],
            o = e.chain,
            a = Promise.resolve(),
            i = function i() {
          return {
            cancel: !0
          };
        },
            c = function c(t) {
          return se(e, t);
        };

        if (e.__divergedChainIndex = 0, e.__skipAttach = !1, r.length) {
          for (var u = 0; u < Math.min(r.length, o.length) && r[u].route === o[u].route && (r[u].path === o[u].path || r[u].element === o[u].element) && this.__isReusableElement(r[u].element, o[u].element); u = ++e.__divergedChainIndex) {
            ;
          }

          if (e.__skipAttach = o.length === r.length && e.__divergedChainIndex == o.length && this.__isReusableElement(e.result, n.result), e.__skipAttach) {
            for (var l = o.length - 1; l >= 0; l--) {
              a = this.__runOnBeforeLeaveCallbacks(a, e, {
                prevent: i
              }, r[l]);
            }

            for (var s = 0; s < o.length; s++) {
              a = this.__runOnBeforeEnterCallbacks(a, e, {
                prevent: i,
                redirect: c
              }, o[s]), r[s].element.location = le(e, r[s].route);
            }
          } else for (var f = r.length - 1; f >= e.__divergedChainIndex; f--) {
            a = this.__runOnBeforeLeaveCallbacks(a, e, {
              prevent: i
            }, r[f]);
          }
        }

        if (!e.__skipAttach) for (var h = 0; h < o.length; h++) {
          h < e.__divergedChainIndex ? h < r.length && r[h].element && (r[h].element.location = le(e, r[h].route)) : (a = this.__runOnBeforeEnterCallbacks(a, e, {
            prevent: i,
            redirect: c
          }, o[h]), o[h].element && (o[h].element.location = le(e, o[h].route)));
        }
        return a.then(function (n) {
          if (n) {
            if (n.cancel) return t.__previousContext.__renderId = e.__renderId, t.__previousContext;
            if (n.redirect) return t.__redirect(n.redirect, e.__redirectCount, e.__renderId);
          }

          return e;
        });
      }
    }, {
      key: "__runOnBeforeLeaveCallbacks",
      value: function value(e, t, n, r) {
        var o = this,
            a = le(t);
        return e.then(function (e) {
          if (o.__isLatestRender(t)) return he("onBeforeLeave", [a, n, o], r.element)(e);
        }).then(function (e) {
          if (!(e || {}).redirect) return e;
        });
      }
    }, {
      key: "__runOnBeforeEnterCallbacks",
      value: function value(e, t, n, r) {
        var o = this,
            a = le(t, r.route);
        return e.then(function (e) {
          if (o.__isLatestRender(t)) return he("onBeforeEnter", [a, n, o], r.element)(e);
        });
      }
    }, {
      key: "__isReusableElement",
      value: function value(e, t) {
        return !(!e || !t) && (this.__createdByRouter.get(e) && this.__createdByRouter.get(t) ? e.localName === t.localName : e === t);
      }
    }, {
      key: "__isLatestRender",
      value: function value(e) {
        return e.__renderId === this.__lastStartedRenderId;
      }
    }, {
      key: "__redirect",
      value: function value(e, t, n) {
        if (t > 256) throw new Error(d("Too many redirects when rendering ".concat(e.from)));
        return this.resolve({
          pathname: this.urlForPath(e.pathname, e.params),
          redirectFrom: e.from,
          __redirectCount: (t || 0) + 1,
          __renderId: n
        });
      }
    }, {
      key: "__ensureOutlet",
      value: function value() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.__outlet;
        if (!babelHelpers.instanceof(e, Node)) throw new TypeError(d("Expected router outlet to be a valid DOM Node (but got ".concat(e, ")")));
      }
    }, {
      key: "__updateBrowserHistory",
      value: function value(e, t) {
        var n = e.pathname,
            r = e.search,
            o = void 0 === r ? "" : r,
            a = e.hash,
            i = void 0 === a ? "" : a;

        if (window.location.pathname !== n || window.location.search !== o || window.location.hash !== i) {
          var c = t ? "replaceState" : "pushState";
          window.history[c](null, document.title, n + o + i), window.dispatchEvent(new PopStateEvent("popstate", {
            state: "vaadin-router-ignore"
          }));
        }
      }
    }, {
      key: "__copyUnchangedElements",
      value: function value(e, t) {
        for (var n = this.__outlet, r = 0; r < e.__divergedChainIndex; r++) {
          var o = t && t.chain[r].element;

          if (o) {
            if (o.parentNode !== n) break;
            e.chain[r].element = o, n = o;
          }
        }

        return n;
      }
    }, {
      key: "__addAppearingContent",
      value: function value(e, t) {
        var n = this;
        this.__ensureOutlet(), this.__removeAppearingContent();

        var r = this.__copyUnchangedElements(e, t);

        this.__appearingContent = [], this.__disappearingContent = Array.from(r.children).filter(function (t) {
          return n.__addedByRouter.get(t) && t !== e.result;
        });

        for (var o = r, a = e.__divergedChainIndex; a < e.chain.length; a++) {
          var i = e.chain[a].element;
          i && (o.appendChild(i), this.__addedByRouter.set(i, !0), o === r && this.__appearingContent.push(i), o = i);
        }
      }
    }, {
      key: "__removeDisappearingContent",
      value: function value() {
        this.__disappearingContent && de(this.__disappearingContent), this.__disappearingContent = null, this.__appearingContent = null;
      }
    }, {
      key: "__removeAppearingContent",
      value: function value() {
        this.__disappearingContent && this.__appearingContent && (de(this.__appearingContent), this.__disappearingContent = null, this.__appearingContent = null);
      }
    }, {
      key: "__runOnAfterLeaveCallbacks",
      value: function value(e, t) {
        if (t) for (var n = t.chain.length - 1; n >= e.__divergedChainIndex && this.__isLatestRender(e); n--) {
          var r = t.chain[n].element;
          if (r) try {
            var o = le(e);
            fe(r.onAfterLeave, [o, {}, t.resolver], r);
          } finally {
            this.__disappearingContent.indexOf(r) > -1 && de(r.children);
          }
        }
      }
    }, {
      key: "__runOnAfterEnterCallbacks",
      value: function value(e) {
        for (var t = e.__divergedChainIndex; t < e.chain.length && this.__isLatestRender(e); t++) {
          var n = e.chain[t].element || {},
              r = le(e, e.chain[t].route);
          fe(n.onAfterEnter, [r, {}, e.resolver], n);
        }
      }
    }, {
      key: "__animateIfNeeded",
      value: function value(e) {
        for (var t, n = (this.__disappearingContent || [])[0], r = (this.__appearingContent || [])[0], o = [], a = e.chain, i = a.length; i > 0; i--) {
          if (a[i - 1].route.animate) {
            t = a[i - 1].route.animate;
            break;
          }
        }

        if (n && r && t) {
          var c = E(t) && t.leave || "leaving",
              u = E(t) && t.enter || "entering";
          o.push(ce(n, c)), o.push(ce(r, u));
        }

        return Promise.all(o).then(function () {
          return e;
        });
      }
    }, {
      key: "subscribe",
      value: function value() {
        window.addEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "unsubscribe",
      value: function value() {
        window.removeEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "__onNavigationEvent",
      value: function value(e) {
        var t = e ? e.detail : window.location,
            n = t.pathname,
            r = t.search,
            o = t.hash;
        C(this.__normalizePathname(n)) && (e && e.preventDefault && e.preventDefault(), this.render({
          pathname: n,
          search: r,
          hash: o
        }, !0));
      }
    }, {
      key: "urlForName",
      value: function value(e, t) {
        return this.__urlForName || (this.__urlForName = ne(this)), pe(this.__urlForName(e, t), this);
      }
    }, {
      key: "urlForPath",
      value: function value(e, t) {
        return pe(s.pathToRegexp.compile(e)(t), this);
      }
    }], [{
      key: "setTriggers",
      value: function value() {
        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        oe(t);
      }
    }, {
      key: "go",
      value: function value(e) {
        var t = C(e) ? this.__createUrl(e, "http://a") : e;
        return b("go", {
          pathname: t.pathname,
          search: t.search,
          hash: t.hash
        });
      }
    }]), s;
  }(),
      me = /\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,
      ge = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;

  function ye(e, t) {
    if ("function" == typeof e) {
      var n = me.exec(e.toString());
      if (n) try {
        e = new Function(n[1]);
      } catch (e) {
        console.log("vaadin-development-mode-detector: uncommentAndRun() failed", e);
      }
      return e(t);
    }
  }

  window.Vaadin = window.Vaadin || {};

  var we = function we(e, t) {
    if (window.Vaadin.developmentMode) return ye(e, t);
  };

  function be() {}

  void 0 === window.Vaadin.developmentMode && (window.Vaadin.developmentMode = function () {
    try {
      return !!localStorage.getItem("vaadin.developmentmode.force") || ["localhost", "127.0.0.1"].indexOf(window.location.hostname) >= 0 && (ge ? !function () {
        if (ge) {
          var e = Object.keys(ge).map(function (e) {
            return ge[e];
          }).filter(function (e) {
            return e.productionMode;
          });
          if (e.length > 0) return !0;
        }

        return !1;
      }() : !ye(function () {
        return !0;
      }));
    } catch (e) {
      return !1;
    }
  }());
  var Ee, ke, Ce, xe;
  window.Vaadin = window.Vaadin || {}, window.Vaadin.registrations = window.Vaadin.registrations || [], window.Vaadin.registrations.push({
    is: "@vaadin/router",
    version: "1.7.4"
  }), we(be), _e.NavigationTrigger = {
    POPSTATE: P,
    CLICK: A
  }, X.__ensureUrlAvailableOrPolyfilled = function () {
    if (void 0 === Ee) {
      try {
        var e = new URL("b", "http://a");
        e.pathname = "c", Ee = "http://a/c" === e.href;
      } catch (e) {
        Ee = !1;
      }

      if (!Ee && (ke = document.implementation.createHTMLDocument("url"), Ce = ke.createElement("base"), ke.head.appendChild(Ce), !(xe = ke.createElement("a")).origin)) {
        Object.defineProperty(xe, "origin", {
          get: function get() {
            var e = xe.protocol,
                t = xe.port,
                n = "http:" === e && "80" === t || "https:" === e && "443" === t ? xe.hostname : xe.host;
            return "".concat(e, "//").concat(n);
          }
        });
        var t = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(xe), "pathname").get;
        Object.defineProperty(xe, "pathname", {
          get: function get() {
            var e = t.apply(xe);
            return "/" !== e.charAt(0) ? "/" + e : e;
          }
        });
      }
    }
  }, X.__createUrl = function (e, t) {
    return X.__ensureUrlAvailableOrPolyfilled(), Ee ? new URL(e, t) : (Ce.href = t, xe.href = e.replace(/ /g, "%20"), xe.href = xe.href, xe);
  }, e.Resolver = X, e.Router = _e, Object.defineProperty(e, "__esModule", {
    value: !0
  });
});
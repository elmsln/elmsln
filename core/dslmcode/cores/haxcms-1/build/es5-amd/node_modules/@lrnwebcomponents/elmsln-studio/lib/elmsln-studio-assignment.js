define(["exports", "require", "../../../lit/index.js", "./elmsln-studio-styles.js", "./elmsln-studio-utilities.js", "../../lrndesign-avatar/lrndesign-avatar.js", "../../rich-text-editor/rich-text-editor.js", "../../rich-text-editor/lib/toolbars/rich-text-editor-toolbar-full.js"], function (_exports, _require, _index, _elmslnStudioStyles, _elmslnStudioUtilities, _lrndesignAvatar, _richTextEditor, _richTextEditorToolbarFull) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.ElmslnStudioAssignment = void 0;
  _require = _interopRequireWildcard(_require);

  var _templateObject_613f16d0942811ecb1937969798b231a, _templateObject2_613f16d0942811ecb1937969798b231a, _templateObject3_613f16d0942811ecb1937969798b231a, _templateObject4_613f16d0942811ecb1937969798b231a, _templateObject5_613f16d0942811ecb1937969798b231a, _templateObject6_613f16d0942811ecb1937969798b231a, _templateObject7_613f16d0942811ecb1937969798b231a, _templateObject8_613f16d0942811ecb1937969798b231a, _templateObject9_613f16d0942811ecb1937969798b231a, _templateObject10_613f16d0942811ecb1937969798b231a, _templateObject11_613f16d0942811ecb1937969798b231a, _templateObject12_613f16d0942811ecb1937969798b231a, _templateObject13_613f16d0942811ecb1937969798b231a, _templateObject14_613f16d0942811ecb1937969798b231a, _templateObject15_613f16d0942811ecb1937969798b231a, _templateObject16_613f16d0942811ecb1937969798b231a, _templateObject17_613f16d0942811ecb1937969798b231a, _templateObject18_613f16d0942811ecb1937969798b231a, _templateObject19_613f16d0942811ecb1937969798b231a, _templateObject20_613f16d0942811ecb1937969798b231a, _templateObject21_613f16d0942811ecb1937969798b231a, _templateObject22_613f16d0942811ecb1937969798b231a, _templateObject23_613f16d0942811ecb1937969798b231a, _templateObject24_613f16d0942811ecb1937969798b231a;

  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || babelHelpers.typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { babelHelpers.defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = babelHelpers.getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = babelHelpers.getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return babelHelpers.possibleConstructorReturn(this, result); }; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  /**
   * `elmsln-studio-assignment`
   * Studio App for ELMS:LN
   *
   * @customElement elmsln-studio-assignment
   * @lit-html
   * @lit-element
   * @demo demo/portfolio.html
   */
  var ElmslnStudioAssignment = /*#__PURE__*/function (_ElmslnStudioUtilitie) {
    babelHelpers.inherits(ElmslnStudioAssignment, _ElmslnStudioUtilitie);

    var _super = _createSuper(ElmslnStudioAssignment);

    // life cycle
    function ElmslnStudioAssignment() {
      var _this;

      babelHelpers.classCallCheck(this, ElmslnStudioAssignment);
      _this = _super.call(this);
      _this.__sources = [];
      _this.__links = [];
      _this.__editorConfig = [{
        label: "Basic Inline Operations",
        type: "button-group",
        buttons: [{
          command: "bold",
          icon: "editor:format-bold",
          label: "Bold",
          toggles: true,
          type: "rich-text-editor-button"
        }, {
          command: "italic",
          icon: "editor:format-italic",
          label: "Italics",
          toggles: true,
          type: "rich-text-editor-button"
        }, {
          command: "removeFormat",
          icon: "editor:format-clear",
          label: "Erase Format",
          type: "rich-text-editor-button"
        }]
      }, {
        label: "Links",
        type: "button-group",
        buttons: [{
          type: "rich-text-editor-link"
        }]
      }, {
        label: "Lists and Indents",
        type: "button-group",
        buttons: [{
          command: "insertOrderedList",
          icon: "editor:format-list-numbered",
          label: "Ordered List",
          toggles: true,
          type: "rich-text-editor-button"
        }, {
          command: "insertUnorderedList",
          icon: "editor:format-list-bulleted",
          label: "Unordered List",
          toggles: true,
          type: "rich-text-editor-button"
        }]
      }];
      return _this;
    }

    babelHelpers.createClass(ElmslnStudioAssignment, [{
      key: "render",
      value: // render function
      function render() {
        return this.assignments && !this.assignment ? this.message404("Assignment", "Assignments", "/assignments") : (0, _index.html)(_templateObject_613f16d0942811ecb1937969798b231a || (_templateObject_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n          ", " ", "\n          <div\n            id=\"primary\"\n            class=\"view-assignment ", "\"\n          >\n            <article id=\"assignment\">\n              <h1>\n                <span class=\"lesson-name\">\n                  ", "\n                </span>\n                <span class=\"assignment-name\">\n                  ", "\n                </span>\n              </h1>\n              ", "\n              <p class=\"assignment-body\">\n                ", "\n              </p>\n              ", "\n              ", " ", " ", " ", "\n            </article>\n          </div>\n          ", "\n        "])), this.breadcrumb, this.alert, this.assignmentStatus.toLowerCase().replace(/\s/, "-"), !this.assignment ? (0, _index.html)(_templateObject2_613f16d0942811ecb1937969798b231a || (_templateObject2_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["<em>Lesson</em>"]))) : this.assignment.lesson, !this.assignment ? (0, _index.html)(_templateObject3_613f16d0942811ecb1937969798b231a || (_templateObject3_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["<em>Assignment</em>"]))) : this.assignment.assignment, !(this.assignment || {}).date ? "" : (0, _index.html)(_templateObject4_613f16d0942811ecb1937969798b231a || (_templateObject4_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                    <p class=\"assignment-date\">\n                      Due\n                      <local-time\n                        month=\"long\"\n                        day=\"numeric\"\n                        year=\"numeric\"\n                        hour=\"2-digit\"\n                        minute=\"2-digit\"\n                        second=\"2-digit\"\n                        time-zone-name=\"short\"\n                        datetime=\"", "\"\n                        >", "\n                      </local-time>\n                    </p>\n                  "])), this.assignment.date, this.dateFormat(this.assignment.date)), !this.assignment ? this.loading("grey") : this.assignment.body, !(this.assignment || {}).rubric ? "" : this.rubricTable(this.assignment.rubric), this.sources, this.links, this.bodytext, this.actions, this.nav);
      } // properties available to the custom element for data binding

    }, {
      key: "firstUpdated",
      value: function firstUpdated(changedProperties) {
        if (babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment.prototype), "firstUpdated", this)) babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment.prototype), "firstUpdated", this).call(this, changedProperties);
        new Promise(function (res, rej) {
          return _require.default(["../../../@vaadin/vaadin-upload/vaadin-upload.js"], res, rej);
        });
        this.fetchData("profile");
        this.fetchData("assignments");
      }
    }, {
      key: "updated",
      value: function updated(changedProperties) {
        var _this2 = this;

        if (babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment.prototype), "updated", this)) babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment.prototype), "updated", this).call(this, changedProperties);
        changedProperties.forEach(function (oldValue, propName) {
          if (propName == "submission") {
            _this2.__links = _this2.submission && _this2.submission.links ? _this2.submission.links : [];
            _this2.__sources = _this2.submission && _this2.submission.sources ? _this2.submission.sources : [];
          }
        });
      }
    }, {
      key: "actions",
      get: function get() {
        return !this.editable ? (0, _index.html)(_templateObject5_613f16d0942811ecb1937969798b231a || (_templateObject5_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral([""]))) : (0, _index.html)(_templateObject6_613f16d0942811ecb1937969798b231a || (_templateObject6_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n          <section id=\"actions\">\n            <elmsln-studio-button class=\"delete\" icon=\"delete\" path=\"\"\n              >Delete</elmsln-studio-button\n            >\n            <span class=\"spacer\"></span>\n            <elmsln-studio-button class=\"save\" path=\"\"\n              >Save Draft</elmsln-studio-button\n            >\n            <elmsln-studio-button class=\"submit\" icon=\"done\" path=\"\"\n              ><span slot=\"before\">Submit Assignment</span>\n            </elmsln-studio-button>\n          </section>\n        "])));
      }
    }, {
      key: "alert",
      get: function get() {
        var _this3 = this;

        var getAlert = function getAlert(message, date) {
          var icon = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
          return (0, _index.html)(_templateObject7_613f16d0942811ecb1937969798b231a || (_templateObject7_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral([" <p\n            id=\"alert\"\n            class=\"", "\"\n          >\n            ", "\n            ", "\n            ", "\n          </p>\n          <simple-tooltip for=\"alert-avatar\">\n            ", "\n          </simple-tooltip>"])), _this3.assignmentStatus.toLowerCase().replace(/\s/, "-"), !icon ? "" : (0, _index.html)(_templateObject8_613f16d0942811ecb1937969798b231a || (_templateObject8_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                  <simple-icon-lite\n                    id=\"alert-avatar\"\n                    accent-color=\"", "\"\n                    icon=\"", "\"\n                  >\n                  </simple-icon-lite>\n                "])), _this3.getStatusColor(_this3.submission, _this3.assignment || {}), _this3.getStatusIcon(_this3.submission, _this3.assignment || {})), message, date ? (0, _index.html)(_templateObject9_613f16d0942811ecb1937969798b231a || (_templateObject9_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                  <local-time\n                    month=\"long\"\n                    day=\"numeric\"\n                    year=\"numeric\"\n                    hour=\"2-digit\"\n                    minute=\"2-digit\"\n                    second=\"2-digit\"\n                    time-zone-name=\"short\"\n                    datetime=\"", "\"\n                  >\n                    ", "\n                  </local-time>\n                "])), date, _this3.dateFormat(date)) : "", _this3.assignmentStatus);
        },
            alertMessage = this.getStatus(this.submission, this.assignment || {}, this.tooLate ? getAlert("Assignment closed for submission on ", this.assignment.hideDate) : getAlert("Assignment is overdue!"), getAlert("Assignment submitted late on ", (this.submission || {}).date), getAlert("Assignment submitted on ", (this.submission || {}).date), this.tooEarly ? getAlert("Assignment will open for submission on", this.assignment.showDate, false) : "");

        return alertMessage;
      }
    }, {
      key: "assignmentStatus",
      get: function get() {
        return this.getStatusMessage(this.submission, this.assignment || {});
      }
    }, {
      key: "bodytext",
      get: function get() {
        var body = !(this.submission || {}).body ? "" : this.submission.body.trim(),
            bodyEmpty = body == "" && !this.editable;
        return !this.assignment || bodyEmpty ? "" : (0, _index.html)(_templateObject10_613f16d0942811ecb1937969798b231a || (_templateObject10_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n          <section id=\"text\">\n            <h2 class=\"sr-only\">Text</h2>\n            ", "\n          </section>\n        "])), !this.editable ? body : (0, _index.html)(_templateObject11_613f16d0942811ecb1937969798b231a || (_templateObject11_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                  <rich-text-editor-toolbar-full\n                    show=\"always\"\n                    id=\"toolbar\"\n                    controls=\"editor\"\n                    .config=\"", "\"\n                    sticky\n                  >\n                  </rich-text-editor-toolbar-full>\n                  <rich-text-editor\n                    id=\"editor\"\n                    toolbar=\"toolbar\"\n                    type=\"rich-text-editor-toolbar-full\"\n                  >\n                    ", "\n                  </rich-text-editor>\n                "])), this.__editorConfig, body || (0, _index.html)(_templateObject12_613f16d0942811ecb1937969798b231a || (_templateObject12_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["<p>Add text</p>"])))));
      }
    }, {
      key: "breadcrumb",
      get: function get() {
        return (0, _index.html)(_templateObject13_613f16d0942811ecb1937969798b231a || (_templateObject13_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n      <div id=\"breadcrumb\">\n        <elmsln-studio-link href=\"assignments\">Assignments</elmsln-studio-link>\n        <span> > </span>\n        <span>\n          ", "\n        </span>\n      </div>\n    "])), !this.assignment ? (0, _index.html)(_templateObject14_613f16d0942811ecb1937969798b231a || (_templateObject14_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["<em>Assignment</em>"]))) : this.assignment.assignment);
      }
    }, {
      key: "editable",
      get: function get() {
        return !(this.submission || {}).date && !this.tooEarly && !this.tooLate;
      }
    }, {
      key: "links",
      get: function get() {
        var _this4 = this;

        var linksEmpty = (this.__links || []).length < 1 && !this.editable;
        return !this.assignment || linksEmpty ? "" : (0, _index.html)(_templateObject15_613f16d0942811ecb1937969798b231a || (_templateObject15_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n          <section id=\"links\">\n            <h2 class=\"sr-only\">Links</h2>\n            <ul id=\"linklist\">\n              ", "\n              ", "\n            </ul>\n          </section>\n        "])), (this.__links || []).map(function (link, i) {
          return (0, _index.html)(_templateObject16_613f16d0942811ecb1937969798b231a || (_templateObject16_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                  <li>\n                    <a id=\"link-", "\" href=\"link.url\" class=\"link ", "\">\n                      ", " (", ")\n                    </a>\n                    ", "\n                  </li>\n                "])), i, link.type, link.text, link.url, !_this4.editable ? "" : (0, _index.html)(_templateObject17_613f16d0942811ecb1937969798b231a || (_templateObject17_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                          <button\n                            aria-controls=\"source-", "\"\n                            @click=\"", "\"\n                          >\n                            <span class=\"sr-only\">delete link</span>\n                            <simple-icon-lite icon=\"delete\"></simple-icon-lite>\n                          </button>\n                        "])), i, function (e) {
            return _this4._removeLink(i);
          }));
        }), !this.editable ? "" : (0, _index.html)(_templateObject18_613f16d0942811ecb1937969798b231a || (_templateObject18_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                    <li>\n                      <label for=\"linktext\" class=\"sr-only\">Text</label>\n                      <input\n                        id=\"linktext\"\n                        @change=\"", "\"\n                        placeholder=\"link text\"\n                        type=\"text\"\n                      />\n                      <label for=\"linkurl\" class=\"sr-only\">URL</label>\n                      <input\n                        id=\"linkurl\"\n                        @change=\"", "\"\n                        placeholder=\"url\"\n                        required\n                        type=\"url\"\n                      />\n                      <button\n                        id=\"linkbutton\"\n                        aria-controls=\"linklist\"\n                        aria-describedby=\"linktext linkurl\"\n                        @click=\"", "\"\n                        ?disabled=\"", "\"\n                      >\n                        <span class=\"sr-only\">add link</span>\n                        <simple-icon-lite icon=\"add\"></simple-icon-lite>\n                      </button>\n                      <simple-tooltip for=\"linkbutton\"\n                        >Add this link.</simple-tooltip\n                      >\n                    </li>\n                  "])), function (e) {
          return _this4.__newLinkText = _this4._getFieldVal("linktext");
        }, function (e) {
          return _this4.__newLinkUrl = _this4._getFieldVal("linkurl");
        }, this._addLink, !this.__newLinkUrl));
      }
    }, {
      key: "nav",
      get: function get() {
        var prevLabel = (this.prevAssign || {}).assignment || "",
            nextLabel = (this.nextAssign || {}).assignment || "",
            prevHref = (this.prevAssign || {}).id ? "assignments/".concat(this.prevAssign.id) : undefined,
            nextHref = (this.nextAssign || {}).id ? "assignments/".concat(this.nextAssign.id) : undefined;
        return this.prevNextNav(prevLabel, prevHref, nextLabel, nextHref);
      }
    }, {
      key: "newLinkType",
      get: function get() {
        return this._getLinkType(this.__newLinkUrl);
      }
    }, {
      key: "nextAssign",
      get: function get() {
        var temp = this.assignment ? this.assignment.next : undefined;
        return temp ? (this.assignments || {})[temp] : undefined;
      }
    }, {
      key: "prevAssign",
      get: function get() {
        var temp = this.assignment ? this.assignment.prev : undefined;
        return temp ? (this.assignments || {})[temp] : undefined;
      }
    }, {
      key: "sources",
      get: function get() {
        var _this5 = this;

        var sourcesEmpty = (this.__sources || []).length < 1 && !this.editable;
        return !this.assignment || sourcesEmpty ? "" : (0, _index.html)(_templateObject19_613f16d0942811ecb1937969798b231a || (_templateObject19_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n          <section id=\"uploads\">\n            <h2 class=\"sr-only\">Uploads</h2>\n            <ul id=\"uploadlist\">\n              ", "\n              ", "\n            </ul>\n          </section>\n        "])), (this.__sources || []).map(function (source, i) {
          return (0, _index.html)(_templateObject20_613f16d0942811ecb1937969798b231a || (_templateObject20_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                  <li\n                    id=\"source-", "\"\n                    style=\"background-image: url(", ")\"\n                  >\n                    ", "\n                  </li>\n                "])), i, source.src, !_this5.editable ? "" : (0, _index.html)(_templateObject21_613f16d0942811ecb1937969798b231a || (_templateObject21_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral([" <button\n                          aria-controls=\"source-", "\"\n                          class=\"delete-upload\"\n                          @click=\"", "\"\n                        >\n                          <span class=\"sr-only\"\n                            >delete ", "</span\n                          >\n                          <simple-icon-lite icon=\"delete\"></simple-icon-lite>\n                        </button>"])), i, function (e) {
            return _this5._removeUpload(i);
          }, source.alt || source.src));
        }), !this.editable ? (0, _index.html)(_templateObject22_613f16d0942811ecb1937969798b231a || (_templateObject22_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["<div></div>"]))) : (0, _index.html)(_templateObject23_613f16d0942811ecb1937969798b231a || (_templateObject23_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n                    <li>\n                      <vaadin-upload\n                        id=\"add-upload\"\n                        @upload-before=\"", "\"\n                      >\n                        <button slot=\"add-button\">\n                          <simple-icon-lite icon=\"add\"></simple-icon-lite>\n                          <span class=\"sr-only\">Upload Files...</span>\n                        </button>\n                        <span slot=\"drop-label\"\n                          ><span class=\"sr-only\">Drop files here.</span></span\n                        >\n                      </vaadin-upload>\n                      <span class=\"spacer\"></span>\n                      <simple-tooltip for=\"add-upload\"\n                        >Upload or drop files.</simple-tooltip\n                      >\n                    </li>\n                  "])), this._addUpload));
      }
    }, {
      key: "tooEarly",
      get: function get() {
        return this.assignment && this.assignment.showDate && this.isEarly(this.assignment.showDate);
      }
    }, {
      key: "submittedLate",
      get: function get() {
        return (this.submission || {}).date && this.assignment && this.isLate(this.assignment.date, this.submission.date);
      }
    }, {
      key: "tooLate",
      get: function get() {
        return this.assignment && this.assignment.hideDate && this.isLate(this.assignment.hideDate);
      }
    }, {
      key: "_addLink",
      value: function _addLink(i) {
        if (this.__newLinkUrl) {
          var links = this.__links.slice(0);

          links.push({
            text: this.__newLinkText,
            url: this.__newLinkUrl,
            type: this.newLinkType
          });
          this.__links = links;

          this._setFieldVal("linkurl");

          this._setFieldVal("linktext");
        }
      }
    }, {
      key: "_addUpload",
      value: function _addUpload(e) {
        console.log("_addUpload", e);
        /*let source = {}, 
          sources = this.__sources.slice(0);
        sources.splice(i,0,source);
        this.__sources = sources;*/
      }
    }, {
      key: "_getFieldVal",
      value: function _getFieldVal(id) {
        return this.shadowRoot && this.shadowRoot.querySelector("#".concat(id)) ? this.shadowRoot.querySelector("#".concat(id)).value : undefined;
      }
    }, {
      key: "_getLinkType",
      value: function _getLinkType() {
        var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var ext = url.match(/\.\w+$/);
        return ext && ext[0] ? ext[0].toLowerCase().replace(/\./, "") : undefined;
      }
    }, {
      key: "_removeLink",
      value: function _removeLink(i) {
        var links = this.__links.slice(0);

        links.splice(i, 1);
        this.__links = links;
      }
    }, {
      key: "_removeUpload",
      value: function _removeUpload(i) {
        var sources = this.__sources.slice(0);

        sources.splice(i, 1);
        this.__sources = sources;
      }
    }, {
      key: "_setFieldVal",
      value: function _setFieldVal(id, val) {
        if (this.shadowRoot && this.shadowRoot.querySelector("#".concat(id))) this.shadowRoot.querySelector("#".concat(id)).value = "";
      }
    }], [{
      key: "styles",
      get: function get() {
        return [].concat(babelHelpers.toConsumableArray(babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment), "styles", this)), [(0, _index.css)(_templateObject24_613f16d0942811ecb1937969798b231a || (_templateObject24_613f16d0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n          flex-wrap: wrap;\n        }\n        h1 {\n          text-align: center;\n          margin-bottom: calc(0.25 * var(--elmsln-studio-margin, 20px));\n        }\n        #breadcrumb {\n          margin: 0 0 var(--elmsln-studio-margin, 20px);\n          flex: 1 0 100%;\n          --elmsln-studio-link-Color: var(\n            --simple-colors-fixed-theme-light-blue-8\n          );\n          --elmsln-studio-link-focus-Color: var(\n            --simple-colors-fixed-theme-light-blue-9\n          );\n        }\n        #breadcrumb > * {\n          display: inline;\n        }\n        #alert {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin: 0;\n          font-size: calc(1 * var(--elmsln-studio-FontSize, 16px));\n          background-color: var(\n            --elmsln-studio-assignment-backgroundColor,\n            #ffffff\n          );\n          border: 1px solid var(--elmsln-studio-assignment-borderColor, #eaeaea);\n          border-bottom: none;\n        }\n        #alert simple-icon-lite {\n          width: calc(1.5 * var(--elmsln-studio-FontSize, 16px));\n          height: calc(1.5 * var(--elmsln-studio-FontSize, 16px));\n        }\n        #alert > * {\n          margin: 0 0.25em;\n        }\n        .submitted {\n          --elmsln-studio-assignment-color: var(\n            --simple-colors-default-theme-green-8,\n            #00762e\n          );\n        }\n        .submitted-late {\n          --elmsln-studio-assignment-backgroundColor: #fff8e4;\n          --elmsln-studio-assignment-borderColor: var(\n            --simple-colors-default-theme-amber-8,\n            #876800\n          );\n          --elmsln-studio-assignment-color: var(\n            --simple-colors-default-theme-amber-8,\n            #876800\n          );\n        }\n        .overdue {\n          --elmsln-studio-assignment-backgroundColor: #ffeeee;\n          --elmsln-studio-assignment-borderColor: var(\n            --simple-colors-default-theme-red-8,\n            #ac0000\n          );\n          --elmsln-studio-assignment-color: var(\n            --simple-colors-default-theme-red-8,\n            #ac0000\n          );\n        }\n        .assignment-name,\n        .assignment-name,\n        .assignment-date {\n          font-weight: normal;\n          display: block;\n        }\n        .assignment-name {\n          font-size: calc(1.75 * var(--elmsln-studio-FontSize, 16px));\n          color: #95989a;\n        }\n        #project-buttons,\n        .submission-header {\n          position: relative;\n          height: 40px;\n          margin-top: -40px;\n        }\n        section {\n          border-top: 2px solid #eaeaea;\n          padding: calc(0.5 * var(--elmsln-studio-margin, 20px)) 0\n            var(--elmsln-studio-margin, 20px);\n        }\n        h2 {\n          margin: calc(2 * var(--elmsln-studio-margin, 20px)) auto;\n          text-align: center;\n        }\n        .assignment-name {\n          font-size: calc(1.5 * var(--elmsln-studio-FontSize, 16px));\n          color: #555555;\n        }\n        .assignment-date {\n          margin: 0 0 calc(1 * var(--elmsln-studio-margin, 20px));\n          text-align: center;\n          font-size: var(--elmsln-studio-FontSize, 16px);\n          color: #95989a;\n        }\n        .assignment-body {\n          color: #95989a;\n          line-height: 160%;\n          margin: calc(0.5 * var(--elmsln-studio-margin, 20px)) auto\n            var(--elmsln-studio-margin, 20px);\n        }\n        ul {\n          list-style-type: none;\n          padding-left: 0;\n        }\n        #uploadlist {\n          display: flex;\n          justify-content: flex-start;\n          flex-wrap: wrap;\n        }\n        #uploadlist li {\n          flex: 0 0 150px;\n          height: calc(32px + 150px);\n          background-position: center;\n          background-size: cover;\n          margin: calc(0.5 * var(--elmsln-studio-margin, 20px));\n        }\n        #uploadlist li:last-child {\n          display: flex;\n          flex: 1 0 auto;\n        }\n        #uploadlist button {\n          width: 150px;\n          height: 150px;\n          border: 1px solid #eaeaea;\n          transition: all 0.5s ease-in-out;\n        }\n        #uploadlist button.delete-upload {\n          background-color: rgba(255, 255, 255, 0.6);\n          opacity: 0;\n        }\n        #uploadlist button:focus,\n        #uploadlist button:hover {\n          opacity: 1;\n          border: 1px solid blue;\n        }\n        vaadin-upload {\n          flex: 0 1 auto;\n        }\n        #linklist li {\n          display: flex;\n          align-items: center;\n          padding-left: -1em;\n          justify-content: space-between;\n          margin: calc(0.5 * var(--elmsln-studio-margin, 20px)) 0;\n        }\n        #linklist .link,\n        #linkurl {\n          flex: 1 1 auto;\n        }\n        #linklist button {\n          flex: 0 1 auto;\n        }\n        #linklist input {\n          line-height: 2em;\n          margin: 0 calc(0.5 * var(--elmsln-studio-margin, 20px)) 0 0;\n          font-size: calc(1 * var(--elmsln-studio-FontSize, 16px));\n        }\n        #editor {\n          border: 1px solid #eaeaea;\n        }\n        #actions {\n          display: flex;\n          align-items: stretch;\n          justify-content: space-between;\n        }\n        .submit {\n          flex: 0 0 auto;\n          text-align: right;\n          --elmsln-studio-button-icon-color: var(\n            --simple-colors-default-theme-green-7\n          );\n        }\n        .save {\n          flex: 0 0 auto;\n          margin: 0 calc(0.5 * var(--elmsln-studio-margin, 20px));\n        }\n        .delete {\n          flex: 0 0 auto;\n          --elmsln-studio-button-icon-color: var(\n            --simple-colors-default-theme-red-7\n          );\n        }\n        .spacer {\n          flex: 1 1 auto;\n        }\n        #actions elmsln-studio-button:hover,\n        #actions elmsln-studio-button:focus-within {\n          text-decoration: underline;\n        }\n        @media screen and (min-width: 600px) {\n          #primary,\n          #alert {\n            max-width: calc(1000px - 2 * var(--elmsln-studio-margin, 20px));\n            margin: 0 auto;\n            border: 1px solid\n              var(--elmsln-studio-assignment-borderColor, #eaeaea);\n            padding: var(--elmsln-studio-margin, 20px);\n          }\n          #alert {\n            padding: calc(0.25 * var(--elmsln-studio-margin, 20px))\n              var(--elmsln-studio-margin, 20px);\n            border-bottom: 1px solid\n              var(--elmsln-studio-assignment-borderColor, #eaeaea);\n          }\n        }\n      "])))]);
      }
    }, {
      key: "properties",
      get: function get() {
        return _objectSpread(_objectSpread({}, babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioAssignment), "properties", this)), {}, {
          /**
           * all assignments
           */
          assignments: {
            type: Object
          },

          /**
           * assignment by id
           */
          assignment: {
            type: Object
          },

          /**
           * submission by id
           */
          submission: {
            type: Object
          },
          __sources: {
            type: Array
          },
          __links: {
            type: Array
          },
          __newLinkUrl: {
            type: String
          },
          __newLinkText: {
            type: String
          },

          /**
           * rich text editor toolbar config
           */
          __editorConfig: {
            type: Array
          }
        });
      }
      /**
       * Store the tag name to make it easier to obtain directly.
       * @notice function name must be here for tooling to operate correctly
       */

    }, {
      key: "tag",
      get: function get() {
        return "elmsln-studio-assignment";
      }
    }]);
    return ElmslnStudioAssignment;
  }((0, _elmslnStudioUtilities.ElmslnStudioUtilities)((0, _elmslnStudioStyles.ElmslnStudioStyles)(_index.LitElement)));

  _exports.ElmslnStudioAssignment = ElmslnStudioAssignment;
  customElements.define("elmsln-studio-assignment", ElmslnStudioAssignment);
});
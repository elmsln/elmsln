define(["exports", "../../../../@polymer/polymer/polymer-element.js", "../../../../@polymer/iron-ajax/iron-ajax.js", "../../../simple-icon/simple-icon.js", "../../../simple-icon/lib/simple-icons.js", "../../../simple-icon/lib/simple-icon-button.js", "../../../hax-iconset/lib/simple-hax-iconset.js", "../../../../@polymer/iron-list/iron-list.js", "../../../../@polymer/polymer/lib/elements/dom-if.js", "../../../../@polymer/paper-item/paper-item-shared-styles.js", "../../../lrnsys-button/lrnsys-button.js", "../../../elmsln-loading/elmsln-loading.js", "../../../materializecss-styles/materializecss-styles.js"], function (_exports, _polymerElement, _ironAjax, _simpleIcon, _simpleIcons, _simpleIconButton, _simpleHaxIconset, _ironList, _domIf, _paperItemSharedStyles, _lrnsysButton, _elmslnLoading, _materializecssStyles) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LrnappBlockRecentProject = void 0;

  var _templateObject_b3d4c640809211edaa2833647dc78c6c;

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = babelHelpers.getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = babelHelpers.getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return babelHelpers.possibleConstructorReturn(this, result); }; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  var LrnappBlockRecentProject = /*#__PURE__*/function (_PolymerElement) {
    babelHelpers.inherits(LrnappBlockRecentProject, _PolymerElement);

    var _super = _createSuper(LrnappBlockRecentProject);

    function LrnappBlockRecentProject() {
      babelHelpers.classCallCheck(this, LrnappBlockRecentProject);
      return _super.apply(this, arguments);
    }

    babelHelpers.createClass(LrnappBlockRecentProject, [{
      key: "_getHasProject",
      value:
      /**
       * Generate the correct boolean for having a project.
       */
      function _getHasProject(project) {
        if (babelHelpers.typeof(project.id) !== (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          return true;
        }

        return false;
      }
      /**
       * Swap off the loading with project data.
       */

    }, {
      key: "handleResponse",
      value: function handleResponse(e) {
        this.$.loading.hidden = true;
        this.project = this.response.data;
      }
      /**
       * Generate an array.
       */

    }, {
      key: "_toArray",
      value: function _toArray(obj) {
        if (obj == null) {
          return [];
        }

        return Object.keys(obj).map(function (key) {
          return obj[key];
        });
      }
    }], [{
      key: "template",
      get: function get() {
        return (0, _polymerElement.html)(_templateObject_b3d4c640809211edaa2833647dc78c6c || (_templateObject_b3d4c640809211edaa2833647dc78c6c = babelHelpers.taggedTemplateLiteral(["\n      <style include=\"materializecss-styles paper-item-styles\">\n        [hidden] {\n          display: none !important;\n        }\n        :host {\n          display: block;\n        }\n        #loading {\n          width: 100%;\n          z-index: 1000;\n          opacity: 0.8;\n          text-align: center;\n          align-content: center;\n          justify-content: center;\n          background-color: white;\n        }\n        a {\n          display: block;\n        }\n        button {\n          padding: 0;\n          margin: 0;\n          min-width: 1rem;\n          text-transform: unset;\n          background-color: transparent;\n          border: none;\n        }\n        .project-card {\n          width: 100%;\n          box-shadow: 0 5px 5px rgba(0, 0, 0, 0.7);\n          min-width: 15em;\n          max-width: 20em;\n          margin: 0 1em;\n        }\n        .button-contents {\n          display: flex;\n          align-content: center;\n        }\n        .assignment-row {\n          border: 1px solid #000000;\n          background-color: #ffffff;\n        }\n        .assignment-row .assignment-row-button.active {\n          background-color: var(--paper-amber-50);\n          font-weight: bold;\n        }\n        .assignment-row:hover .assignment-operations {\n          display: block;\n          overflow: visible;\n          margin: 0.2em;\n        }\n        .assignment-row-button {\n          width: 100%;\n          justify-content: flex-start;\n          height: 3em;\n          text-transform: none;\n        }\n        .assignment-title {\n          display: inline-flex;\n          align-items: center;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          line-height: 1em;\n        }\n        .status-indicator {\n          border-right: 1px solid grey;\n          padding: 0.5em;\n          margin: 0 0.5em 0 0;\n          display: inline-flex;\n          line-height: 3em;\n          height: 3em;\n          justify-content: center;\n          align-items: center;\n        }\n        .whole-project {\n          width: 100%;\n          margin: 0;\n          padding: 0;\n        }\n      </style>\n      <iron-ajax\n        auto=\"\"\n        url=\"{{sourcePath}}\"\n        handle-as=\"json\"\n        last-response=\"{{response}}\"\n        on-response=\"handleResponse\"\n      ></iron-ajax>\n      <div id=\"loading\">\n        <h3>Loading..</h3>\n        <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n      </div>\n      <template is=\"dom-if\" if=\"[[hasProject]]\">\n        <a tabindex=\"-1\" href$=\"[[basePath]]lrnapp-studio-kanban\">\n          <button class=\"whole-project ferpa-protect\">\n            <div\n              id$=\"project-[[project.id]]\"\n              class=\"project-card grey lighten-3\"\n              heading=\"{{project.attributes.title}}\"\n            >\n              <div class=\"card-content\">\n                <iron-list\n                  items=\"[[_toArray(project.relationships.assignments)]]\"\n                  as=\"assignment\"\n                  mutable-data\n                >\n                  <template>\n                    <div class=\"assignment-row\" id=\"assignment\">\n                      <lrnsys-button\n                        inner-class=\"no-left-padding\"\n                        class=\"assignment-row-button\"\n                        button-class=\"assignment-row-button\"\n                        id$=\"assignment-[[project.id]]-[[assignment.id]]\"\n                        hover-class=\"amber lighten-5\"\n                        href$=\"[[basePath]]lrnapp-studio-kanban\"\n                      >\n                        <span class=\"button-contents\">\n                          <div\n                            class$=\"status-indicator [[assignment.metadata.relatedSubmissions.complete.color]]\"\n                          >\n                            <simple-icon\n                              icon=\"[[assignment.metadata.relatedSubmissions.complete.icon]]\"\n                            ></simple-icon>\n                          </div>\n                          <div class=\"assignment-title\">\n                            [[assignment.title]]\n                          </div>\n                        </span>\n                      </lrnsys-button>\n                    </div>\n                  </template>\n                </iron-list>\n              </div>\n            </div>\n          </button>\n        </a>\n      </template>\n      <template is=\"dom-if\" if=\"[[!hasProject]]\">\n        <lrnsys-button\n          inner-class=\"no-left-padding\"\n          button-class=\"assignment-row-button\"\n          class=\"assignment-row-button\"\n          href$=\"[[basePath]]lrnapp-studio-kanban\"\n          hover-class=\"amber lighten-5\"\n        >\n          <span class=\"button-contents\">\n            <div class=\"status-indicator\">\n              <simple-icon icon=\"assignment\"></simple-icon>\n            </div>\n            <div class=\"assignment-title\">Tap to start your first project!</div>\n          </span>\n        </lrnsys-button>\n      </template>\n    "])));
      }
    }, {
      key: "tag",
      get: function get() {
        return "lrnapp-block-recent-project";
      }
    }, {
      key: "properties",
      get: function get() {
        return {
          elmslnCourse: {
            type: String
          },
          elmslnSection: {
            type: String
          },
          basePath: {
            type: String
          },
          csrfToken: {
            type: String
          },
          endPoint: {
            type: String
          },
          sourcePath: {
            type: String,
            notify: true
          },
          response: {
            type: Object,
            notify: true
          },
          project: {
            type: Object,
            notify: true
          },
          hasProject: {
            type: Boolean,
            notify: true,
            reflectToAttribute: true,
            computed: "_getHasProject(project)"
          }
        };
      }
    }]);
    return LrnappBlockRecentProject;
  }(_polymerElement.PolymerElement);

  _exports.LrnappBlockRecentProject = LrnappBlockRecentProject;
  customElements.define(LrnappBlockRecentProject.tag, LrnappBlockRecentProject);
});
define(["exports", "../../../lit-element/lit-element.js", "../../hax-body-behaviors/lib/HAXFields.js", "../../simple-icon/simple-icon.js", "../../simple-fields/simple-fields.js", "./hax-store.js", "../../../mobx/dist/mobx.esm.js"], function (_exports, _litElement, _HAXFields, _simpleIcon, _simpleFields, _haxStore, _mobxEsm) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.HaxPreferencesDialog = void 0;

  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { babelHelpers.defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

  function _templateObject2_918bdab0283d11ebb1b32b35e9ea01b8() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <h3 class=\"title\">\n        <simple-icon icon=\"hax:settings\" contrast=\"4\" dark></simple-icon>\n        ", "\n      </h3>\n      <div style=\"height: 100%; overflow: auto;\" class=\"pref-container\">\n        <simple-fields\n          id=\"settingsform\"\n          .schematizer=\"", "\"\n          .elementizer=\"", "\"\n        >\n        </simple-fields>\n      </div>\n      <a href=\"", "\" rel=\"noopener\" id=\"reportghissue\" target=\"_blank\"\n        >Report an issue with HAX</a\n      >\n    "]);

    _templateObject2_918bdab0283d11ebb1b32b35e9ea01b8 = function _templateObject2_918bdab0283d11ebb1b32b35e9ea01b8() {
      return data;
    };

    return data;
  }

  function _templateObject_918bdab0283d11ebb1b32b35e9ea01b8() {
    var data = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n        .title {\n          position: relative;\n          padding: 16px;\n          outline: 0;\n          font-weight: 600;\n          text-align: left;\n          margin: 0;\n          background-color: var(--hax-color-menu-heading-bg, #eeeeee);\n          color: var(--hax-color-menu-heading-color, black);\n          font-size: 18px;\n          line-height: 18px;\n          font-family: \"Noto Serif\", serif;\n        }\n        .pref-container {\n          text-align: left;\n          padding: 16px;\n        }\n        #reportghissue {\n          color: #81a3a9;\n          font-size: 18px;\n          padding: 16px;\n          font-style: italic;\n        }\n      "]);

    _templateObject_918bdab0283d11ebb1b32b35e9ea01b8 = function _templateObject_918bdab0283d11ebb1b32b35e9ea01b8() {
      return data;
    };

    return data;
  }

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = babelHelpers.getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = babelHelpers.getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return babelHelpers.possibleConstructorReturn(this, result); }; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

  /**
   * `hax-preferences-dialog`
   * @element hax-preferences-dialog
   * `Export dialog with all export options and settings provided.`
   */
  var HaxPreferencesDialog = /*#__PURE__*/function (_LitElement) {
    babelHelpers.inherits(HaxPreferencesDialog, _LitElement);

    var _super = _createSuper(HaxPreferencesDialog);

    babelHelpers.createClass(HaxPreferencesDialog, null, [{
      key: "styles",

      /**
       * LitElement constructable styles enhancement
       */
      get: function get() {
        return [(0, _litElement.css)(_templateObject_918bdab0283d11ebb1b32b35e9ea01b8())];
      }
    }]);

    function HaxPreferencesDialog() {
      var _this;

      babelHelpers.classCallCheck(this, HaxPreferencesDialog);
      _this = _super.call(this);
      _this.ghLink = "https://github.com/elmsln/issues/issues/new?body=URL%20base:%20" + window.location.pathname + "&title=[hax] Bug%20report%20from%20preference%20panel";
      _this.title = "Advanced settings"; // JSON schema object needs delayed to ensure page repaints the form

      _this.schema = [{
        property: "haxRayMode",
        title: "X-Ray vision",
        description: "Visualizes the HTML tag powering the area of the page",
        inputMethod: "boolean",
        value: false
      }, {
        property: "haxVoiceCommands",
        title: "Voice commands",
        description: "Experimental: Voice based control system",
        inputMethod: "boolean",
        value: false
      }];
      _this.schemaValues = {
        haxRayMode: false,
        haxVoiceCommands: false
      };
      (0, _mobxEsm.autorun)(function () {
        _this.globalPreferences = (0, _mobxEsm.toJS)(_haxStore.HAXStore.globalPreferences);
        _this.schemaValues = (0, _mobxEsm.toJS)(_haxStore.HAXStore.globalPreferences);
      });
      return _this;
    }

    babelHelpers.createClass(HaxPreferencesDialog, [{
      key: "render",
      value: function render() {
        return (0, _litElement.html)(_templateObject2_918bdab0283d11ebb1b32b35e9ea01b8(), this.title, _HAXFields.HaxSchematizer, _HAXFields.HaxElementizer, this.ghLink);
      }
    }, {
      key: "firstUpdated",
      value: function firstUpdated(changedProperties) {
        this.shadowRoot.querySelector("#settingsform").fields = babelHelpers.toConsumableArray(this.schema);
        this.shadowRoot.querySelector("#settingsform").value = _objectSpread({}, this.schemaValues);
        this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed", this.__valueChangedEvent.bind(this));
      }
    }, {
      key: "__valueChangedEvent",
      value: function __valueChangedEvent(e) {
        if (e.detail.value) {
          _haxStore.HAXStore.globalPreferences = _objectSpread({}, e.detail.value);
        }
      }
      /**
       * force an update of settings
       */

    }, {
      key: "reloadPreferencesForm",
      value: function reloadPreferencesForm() {
        this.shadowRoot.querySelector("#settingsform").fields = babelHelpers.toConsumableArray(this.schema);
        this.shadowRoot.querySelector("#settingsform").value = _objectSpread({}, this.schemaValues);
      }
    }], [{
      key: "tag",
      get: function get() {
        return "hax-preferences-dialog";
      }
    }, {
      key: "properties",
      get: function get() {
        return {
          /**
           * github link
           */
          ghLink: {
            type: String
          },

          /**
           * Title.
           */
          title: {
            type: String
          },

          /**
           * Schema that has all of inputs / manages state
           */
          schema: {
            type: Object
          },

          /**
           * Preferences managed for everything global about HAX.
           */
          globalPreferences: {
            type: Object
          }
        };
      }
    }]);
    return HaxPreferencesDialog;
  }(_litElement.LitElement);

  _exports.HaxPreferencesDialog = HaxPreferencesDialog;
  window.customElements.define(HaxPreferencesDialog.tag, HaxPreferencesDialog);
});
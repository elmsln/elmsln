define(["exports", "../../../../page-contents-menu/page-contents-menu.js", "../../core/utils/HAXCMSThemeParts.js", "../../core/haxcms-site-store.js", "../../../../../mobx/dist/mobx.esm.js", "../../../../../lit/index.js"], function (_exports, _pageContentsMenu, _HAXCMSThemeParts2, _haxcmsSiteStore, _mobxEsm, _index) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.SiteMenuContent = void 0;

  var _templateObject_c3510200809211edaa2833647dc78c6c, _templateObject2_c3510200809211edaa2833647dc78c6c;

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = babelHelpers.getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = babelHelpers.getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return babelHelpers.possibleConstructorReturn(this, result); }; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  var SiteMenuContent = /*#__PURE__*/function (_HAXCMSThemeParts) {
    babelHelpers.inherits(SiteMenuContent, _HAXCMSThemeParts);

    var _super = _createSuper(SiteMenuContent);

    function SiteMenuContent() {
      var _this;

      babelHelpers.classCallCheck(this, SiteMenuContent);
      _this = _super.call(this);
      _this.hierarchyTags = ["h1", "h2", "h3", "h4", "h5", "h6", "relative-heading", "video-player"];
      _this.fallbackText = {
        "video-player": "Video"
      };
      _this.hideIfEmpty = true;
      _this.__disposer = _this.__disposer ? _this.__disposer : [];
      (0, _mobxEsm.autorun)(function (reaction) {
        _this.contentContainer = _haxcmsSiteStore.store.themeElement; // target container if we have a fixed UI layout

        if (_this.contentContainer && _this.contentContainer.HAXCMSThemeSettings && _this.contentContainer.HAXCMSThemeSettings.scrollTarget) {
          _this.contentContainer.HAXCMSThemeSettings.scrollTarget.addEventListener("scroll", _this._applyScrollDetect.bind(babelHelpers.assertThisInitialized(_this)));
        }

        setTimeout(function () {
          _this.updateMenu();
        }, 10);

        _this.__disposer.push(reaction);
      });
      (0, _mobxEsm.autorun)(function (reaction) {
        // forces a menu rebuild on content change
        var content = (0, _mobxEsm.toJS)(_haxcmsSiteStore.store.activeItemContent);
        setTimeout(function () {
          _this.updateMenu();
        }, 10);

        _this.__disposer.push(reaction);
      });
      return _this;
    }
    /**
     * wrap the base render function in a part that demonstrates edit mode
     */


    babelHelpers.createClass(SiteMenuContent, [{
      key: "render",
      value: function render() {
        return (0, _index.html)(_templateObject_c3510200809211edaa2833647dc78c6c || (_templateObject_c3510200809211edaa2833647dc78c6c = babelHelpers.taggedTemplateLiteral(["\n      <div .part=\"", "\">\n        ", "\n      </div>\n    "])), this.editMode ? "edit-mode-active" : "", babelHelpers.get(babelHelpers.getPrototypeOf(SiteMenuContent.prototype), "render", this).call(this));
      }
    }], [{
      key: "tag",
      get: function get() {
        return "site-menu-content";
      }
    }, {
      key: "styles",
      get: function get() {
        return [].concat(babelHelpers.toConsumableArray(babelHelpers.get(babelHelpers.getPrototypeOf(SiteMenuContent), "styles", this)), [(0, _index.css)(_templateObject2_c3510200809211edaa2833647dc78c6c || (_templateObject2_c3510200809211edaa2833647dc78c6c = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          --page-contents-menu-link-hover: var(\n            --haxcms-color,\n            var(--simple-colors-default-theme-purple-7)\n          );\n        }\n        .contents {\n          max-height: 80vh;\n          border-bottom: 2px solid lightgray;\n          max-width: 240px;\n        }\n        @media screen and (max-width: 600px) {\n          .indent-1,\n          .indent-2,\n          .indent-3,\n          .indent-4,\n          .indent-5,\n          .indent-6 {\n            padding-left: 0;\n          }\n        }\n        :host([hide-if-empty][is-empty]) {\n          display: none !important;\n        }\n        :host([mobile]) .item {\n          max-width: 240px;\n        }\n        :host([mobile]) simple-popover {\n          --simple-popover-max-height: 200px;\n          --simple-popover-max-width: 240px;\n          overflow: hidden;\n          top: 0px !important;\n        }\n      "])))]);
      }
    }]);
    return SiteMenuContent;
  }((0, _HAXCMSThemeParts2.HAXCMSThemeParts)(_pageContentsMenu.PageContentsMenu));

  _exports.SiteMenuContent = SiteMenuContent;
  customElements.define(SiteMenuContent.tag, SiteMenuContent);
});
define(["exports", "../../../lit-element/lit-element.js", "./elmsln-studio-styles.js", "./elmsln-studio-utilities.js", "../../lrndesign-gallery/lrndesign-gallery.js", "../../hax-iconset/hax-iconset.js", "./elmsln-studio-link.js", "./elmsln-studio-button.js"], function (_exports, _litElement, _elmslnStudioStyles, _elmslnStudioUtilities, _lrndesignGallery, _haxIconset, _elmslnStudioLink, _elmslnStudioButton) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.ElmslnStudioPortfolio = void 0;

  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { babelHelpers.defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

  function _templateObject11_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n        h1 {\n          text-align: center;\n        }\n        lrndesign-avatar,\n        .student-name,\n        .project-name,\n        .assignment-name,\n        .submission-date {\n          font-weight: normal;\n          display: block;\n        }\n        .student-name {\n          font-size: calc(2 * var(--elmsln-studio-FontSize, 16px));\n          font-weight: bold;\n          color: #4b4b4b;\n        }\n        .project-name {\n          font-size: calc(1.75 * var(--elmsln-studio-FontSize, 16px));\n          color: #95989a;\n        }\n        .submission-header {\n          position: relative;\n        }\n        .submission-header elmsln-studio-button {\n          color: #95989a;\n          font-size: var(--elmsln-studio-FontSize, 16px);\n          text-transform: uppercase;\n          position: absolute;\n          right: 0;\n          top: 0;\n        }\n        .submission-header elmsln-studio-button:focus,\n        .submission-header elmsln-studio-button:hover {\n          color: #4b4b4b;\n        }\n        .submission-header elmsln-studio-button.has-discussions {\n          color: var(--simple-colors-default-theme-light-blue-3);\n        }\n        .submission-header elmsln-studio-button.has-discussions:focus,\n        .submission-header elmsln-studio-button.has-discussions:hover {\n          color: var(--simple-colors-default-theme-light-blue-5);\n        }\n        section {\n          border-top: 2px solid #eaeaea;\n          padding: calc(0.5 * var(--elmsln-studio-margin, 20px)) 0\n            var(--elmsln-studio-margin, 20px);\n        }\n        .view-discussion section {\n          opacity: 0.4;\n        }\n        .view-discussion section.section-discussion {\n          border: 4px solid #95989a;\n          padding: calc(0.5 * var(--elmsln-studio-margin, 20px))\n            calc(0.5 * var(--elmsln-studio-margin, 20px))\n            var(--elmsln-studio-margin, 20px);\n          opacity: 1;\n        }\n        h2 {\n          margin: calc(2 * var(--elmsln-studio-margin, 20px)) auto;\n          text-align: center;\n        }\n        .assignment-name {\n          font-size: calc(1.5 * var(--elmsln-studio-FontSize, 16px));\n          color: #555555;\n        }\n        .submission-date {\n          font-size: var(--elmsln-studio-FontSize, 16px);\n          color: #95989a;\n        }\n        .submission-body {\n          color: #95989a;\n          line-height: 160%;\n          margin: calc(0.5 * var(--elmsln-studio-margin, 20px)) auto\n            var(--elmsln-studio-margin, 20px);\n        }\n        .submission-body:first-child {\n          margin-top: 0;\n        }\n        .submission-body:last-child {\n          margin-bottom: 0;\n        }\n        .submission-links {\n          list-style: none;\n          padding-inline-start: 0;\n        }\n        .submission-links > li {\n          display: flex;\n          align-items: flex-start;\n          justify-content: flex-start;\n        }\n        .submission-links a:link,\n        .submission-links a:visited {\n          font-size: calc(1.5 * var(--elmsln-studio-FontSize, 16px));\n          font-weight: bold;\n          color: #000;\n          text-decoration: none;\n        }\n        .submission-links a:focus,\n        .submission-links a:hover {\n          text-decoration: underline;\n        }\n        .submission-links iron-icon {\n          margin-right: 0.5em;\n        }\n        .submission-links a:focus iron-icon,\n        .submission-links a:hover iron-icon {\n          text-decoration: none;\n        }\n        .callout {\n          font-size: calc(0.75 * var(--elmsln-studio-FontSize, 16px));\n          border: 1px solid #eaeaea;\n          padding: 0;\n        }\n        .discussion-label {\n          text-align: left;\n          font-size: calc(1 * var(--elmsln-studio-FontSize, 16px));\n          margin: var(--elmsln-studio-margin, 20px) 0\n            calc(0.25 * var(--elmsln-studio-margin, 20px));\n        }\n        .callout > * {\n          padding: calc(0.25 * var(--elmsln-studio-margin, 20px))\n            calc(0.5 * var(--elmsln-studio-margin, 20px));\n        }\n        .callout .callout-label {\n          font-size: calc(1 * var(--elmsln-studio-FontSize, 16px));\n          font-weight: normal;\n          display: flex;\n          align-items: center;\n          justify-content: flex-start;\n          margin: 0;\n          color: #4b4b4b;\n          border-bottom: 1px solid #eaeaea;\n        }\n        .callout .callout-label iron-icon {\n          margin-right: 1em;\n        }\n        .comment-textarea {\n          flex: 1 0 100%;\n          height: 100px;\n          overflow-x: auto;\n          border: none;\n          resize: none;\n          border-bottom: 1px solid #eaeaea;\n        }\n        .comment-form {\n          display: flex;\n          justify-content: flex-end;\n          flex-wrap: wrap;\n        }\n        .callout .comment-form {\n          width: calc(100% - var(--elmsln-studio-margin, 20px));\n        }\n        .comment-submit {\n          border: none;\n          text-align: center;\n          display: inline;\n          background-color: #4b4b4b;\n          color: #fff;\n          margin: calc(0.25 * var(--elmsln-studio-margin, 20px)) 0;\n        }\n        .comment-submit:focus,\n        .comment-submit:hover {\n          background-color: var(--simple-colors-default-theme-grey11, #222);\n        }\n        #threads {\n          background-color: #eaeaea;\n          padding: 1px;\n        }\n        .thread {\n          width: 100%;\n          transition: all 0.5s ease-in-out;\n        }\n        .comment {\n          background-color: white;\n          margin: 1px;\n          padding: calc(0.5 * var(--elmsln-studio-margin, 20px)) 0;\n        }\n        .comment-reply {\n          margin-left: calc(1 * var(--elmsln-studio-margin, 20px));\n        }\n        .comment-header,\n        .comment-footer {\n          display: flex;\n          align-items: stretch;\n          justify-content: space-between;\n        }\n        .comment-header,\n        .comment-body {\n          padding: 0 calc(0.5 * var(--elmsln-studio-margin, 20px));\n        }\n        .comment-header > div {\n          margin: 0 calc(0.5 * var(--elmsln-studio-margin, 20px));\n          flex: 1 1 auto;\n        }\n        .comment-name {\n          margin: 0 0 calc(0.25 * var(--elmsln-studio-margin, 20px));\n          font-size: var(--elmsln-studio-FontSize, 16px);\n          font-size: calc(1.25 * var(--elmsln-studio-FontSize, 16px));\n          font-weight: bold;\n          color: #4b4b4b;\n        }\n        .comment-date {\n          margin: 0;\n          font-size: calc(0.75 * var(--elmsln-studio-FontSize, 16px));\n          font-weight: normal;\n          color: #95989a;\n        }\n        .comment-body {\n          line-height: 160%;\n          font-size: calc(0.8 * var(--elmsln-studio-FontSize, 16px));\n          color: #95989a;\n        }\n        .comment-header iron-icon {\n          color: var(--simple-colors-default-theme-grey-4);\n        }\n        .comment-read iron-icon {\n          color: var(--simple-colors-default-theme-light-blue-7);\n        }\n        .comment-footer {\n          justify-content: flex-end;\n          padding: 0;\n        }\n        @media screen and (min-width: 600px) {\n          :host {\n            display: flex;\n            align-items: flex-start;\n            justify-content: space-between;\n          }\n          #primary.view-discussion {\n            flex: 0 0 calc(50% - var(--elmsln-studio-margin, 20px));\n          }\n          #primary {\n            flex: 1 0 100%;\n          }\n          #secondary {\n            flex: 0 0 calc(50% - var(--elmsln-studio-margin, 20px));\n          }\n        }\n      "]);

    _templateObject11_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject11_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject10_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <div\n        id=\"", "\"\n        class=\"comment ", "\"\n        aria-describedby=\"", "\"\n      >\n        <div class=\"comment-header ", "\">\n          <lrndesign-avatar\n            accent-color=\"", "\"\n            initials=\"", "\"\n            .src=\"", "\"\n            two-chars\n          >\n          </lrndesign-avatar>\n          <div>\n            <p class=\"comment-name\">", "</p>\n            <p class=\"comment-date\">", "</p>\n          </div>\n          <iron-icon icon=\"thumb-up\"></iron-icon>\n        </div>\n        <div class=\"comment-body\">\n          <p>", "</p>\n        </div>\n        <div class=\"comment-footer\" ?hidden=\"", "\">\n          <button\n            controls=\"reply-to-", "-div\"\n            @click=\"", "\"\n          >\n            Reply\n            <iron-icon icon=\"arrow-forward\"></iron-icon>\n          </button>\n          ", "\n        </div>\n      </div>\n    "]);

    _templateObject10_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject10_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject9_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n              <label class=\"sr-only\" for=\"", "\">", "</label>\n            "]);

    _templateObject9_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject9_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject8_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <div id=\"", "-div\" ?hidden=", " class=\"comment-form\">\n        ", "\n        <textarea\n          id=\"", "\"\n          aria-desccribedby=\"", "\"\n          class=\"comment-textarea\"\n        ></textarea>\n        <button\n          controls=\"", "\"\n          @click=\"", "\"\n          class=\"comment-submit\"\n        >\n          <iron-icon icon=\"send\" aria-hidden=\"true\"></iron-icon>\n          Submit\n        </button>\n      </div>\n    "]);

    _templateObject8_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject8_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject7_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                <div class=\"thread\">\n                  ", "\n                  ", "\n                </div>\n              "]);

    _templateObject7_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject7_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject6_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                            ", "\n                          "]);

    _templateObject6_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject6_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject5_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                            <lrndesign-gallery\n                              class=\"submission-image\"\n                              layout=\"grid\"\n                              .sources=\"", "\"\n                            ></lrndesign-gallery>\n                          "]);

    _templateObject5_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject5_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject4_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                                  <li>\n                                    <elmsln-studio-link\n                                      href=\"", "\"\n                                      target=\"_blank\"\n                                    >\n                                      <iron-icon\n                                        aria-hidden=\"true\"\n                                        icon=\"", "\"\n                                      ></iron-icon>\n                                      ", "\n                                    </elmsln-studio-link>\n                                  </li>\n                                "]);

    _templateObject4_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject4_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject3_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                            <ul class=\"submission-links\">\n                              ", "\n                            </ul>\n                          "]);

    _templateObject3_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject3_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject2_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                  <section\n                    class=\"", "\"\n                  >\n                    <div class=\"submission-header\">\n                      <h2 id=\"sub-", "\">\n                        <span class=\"assignment-name\">", "</span>\n                        <span class=\"submission-date\"\n                          >Submitted: ", "</span\n                        >\n                      </h2>\n                      <elmsln-studio-button\n                        class=\"view-discussion-button ", "\"\n                        aria-describedby=\"sub-", "\"\n                        icon=\"communication:comment\"\n                        path=\"", "&comment=show\"\n                      >\n                        <span class=\"sr-only\">View Comments</span>\n                      </elmsln-studio-button>\n                    </div>\n                    <div class=\"submission-body\">\n                      ", "\n                    </div>\n                  </section>\n                "]);

    _templateObject2_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject2_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  function _templateObject_343e3bc0c5f311ea81c635a4a0b7726b() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <div\n        id=\"primary\"\n        ?hidden=\"", "\"\n        class=\"", "\"\n      >\n        <article>\n          <!--div class=\"close-view\" hidden>\n            <button class=\"close-view-button\">\n              <iron-icon aria-hidden=\"true\" icon=\"close\"></iron-icon>\n              <span>Close</span>\n            </button>\n          </div-->\n          <h1>\n            <lrndesign-avatar\n              accent-color=\"", "\"\n              aria-hidden=\"true\"\n              label=\"", "\"\n              .src=\"", "\"\n              two-chars\n            >\n            </lrndesign-avatar>\n            <span class=\"student-name\">", "</span>\n            <span class=\"project-name\">", "</span>\n          </h1>\n          ", "\n        </article>\n      </div>\n      <div\n        id=\"secondary\"\n        ?hidden=", "\n      >\n        <aside>\n          <div class=\"instructions callout\">\n            <h2 class=\"callout-label\">\n              <iron-icon icon=\"info\" aria-hidden=\"true\"></iron-icon>\n              Directions for Assignment\n            </h2>\n            <div>\n              <ul>\n                <li>Step 1. Do something.</li>\n                <li>Step 2. Do another thing.</li>\n                <li>Step 3. Do something else.</li>\n                <li>Step 4. Do ALL THE THINGS!</li>\n              </ul>\n            </div>\n          </div>\n          <h2 class=\"discussion-label\">\n            Discussion for Submission\n          </h2>\n          <div class=\"discussion callout\">\n            <label class=\"callout-label\" for=\"feedback\">\n              <iron-icon\n                icon=\"communication:comment\"\n                aria-hidden=\"true\"\n              ></iron-icon>\n              Feedback\n            </label>\n            ", "\n          </div>\n          <div id=\"threads\">\n            ", "\n          </div>\n        </aside>\n      </div>\n    "]);

    _templateObject_343e3bc0c5f311ea81c635a4a0b7726b = function _templateObject_343e3bc0c5f311ea81c635a4a0b7726b() {
      return data;
    };

    return data;
  }

  /**
   * `elmsln-studio-portfolio`
   * Studio App for ELMS:LN
   *
   * @customElement elmsln-studio-portfolio
   * @lit-html
   * @lit-element
   * @demo demo/portfolio.html
   */
  var ElmslnStudioPortfolio =
  /*#__PURE__*/
  function (_ElmslnStudioUtilitie) {
    babelHelpers.inherits(ElmslnStudioPortfolio, _ElmslnStudioUtilitie);
    babelHelpers.createClass(ElmslnStudioPortfolio, [{
      key: "render",
      // render function
      value: function render() {
        var _this2 = this;

        return (0, _litElement.html)(_templateObject_343e3bc0c5f311ea81c635a4a0b7726b(), !this.portfolio, this.comment && this.comment !== "" ? "view-discussion" : "", this.accentColor(this.fullName(this.portfolio)), this.fullName(this.portfolio), this.portfolio && this.portfolio.avatar ? this.portfolio.avatar : undefined, this.fullName(this.portfolio), this.portfolio.project, !this.portfolio ? "" : (this.portfolio.submissions || []).map(function (s) {
          return (0, _litElement.html)(_templateObject2_343e3bc0c5f311ea81c635a4a0b7726b(), _this2.submissionFilter === s.id ? "section-discussion" : "", s.id, s.assignment, _this2.dateFormat(s.date), s.feedback.length < 1 ? "" : "has-discussions", s.id, s.link, s.links && s.links.length > 0 ? (0, _litElement.html)(_templateObject3_343e3bc0c5f311ea81c635a4a0b7726b(), s.links.map(function (link) {
            return (0, _litElement.html)(_templateObject4_343e3bc0c5f311ea81c635a4a0b7726b(), link.url, link.type === "pdf" ? "hax:file-pdf" : "link", link.text || link.url);
          })) : s.sources && s.sources.length > 0 ? (0, _litElement.html)(_templateObject5_343e3bc0c5f311ea81c635a4a0b7726b(), s.sources) : (0, _litElement.html)(_templateObject6_343e3bc0c5f311ea81c635a4a0b7726b(), s.body));
        }), !this.portfolio || !this.comment || this.comment === "", this.makeWrite("feedback", "sub-".concat(this.submission.id)), (this.submission.feedback || []).map(function (f) {
          return (0, _litElement.html)(_templateObject7_343e3bc0c5f311ea81c635a4a0b7726b(), _this2.makeComment(f), f.replies.map(function (r) {
            return _this2.makeComment(r);
          }));
        }));
      }
    }, {
      key: "makeWrite",
      value: function makeWrite(id) {
        var _this3 = this;

        var describedby = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        var hidden = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
        var label = arguments.length > 3 ? arguments[3] : undefined;
        return (0, _litElement.html)(_templateObject8_343e3bc0c5f311ea81c635a4a0b7726b(), id, hidden, label ? (0, _litElement.html)(_templateObject9_343e3bc0c5f311ea81c635a4a0b7726b(), id, label) : "", id, describedby, id, function (e) {
          return _this3._handleComment(id, describedby);
        });
      }
    }, {
      key: "makeComment",
      value: function makeComment(c) {
        var _this4 = this;

        return (0, _litElement.html)(_templateObject10_343e3bc0c5f311ea81c635a4a0b7726b(), c.id, c.feedbackId ? "comment-reply" : "", c.feedbackId || "", c.feedbackId ? "comment-read" : "", this.accentColor(this.fullName(c)), this.fullName(c), c.avatar, this.fullName(c), this.dateFormat(c.date), c.body, c.feedbackId, c.id, function (e) {
          return _this4._handleReply("reply-to-".concat(c.id));
        }, this.makeWrite("reply-to-".concat(c.id), c.id, true, "Write Reply"));
      } // properties available to the custom element for data binding

    }], [{
      key: "styles",
      get: function get() {
        return [].concat(babelHelpers.toConsumableArray(babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioPortfolio), "styles", this)), [(0, _litElement.css)(_templateObject11_343e3bc0c5f311ea81c635a4a0b7726b())]);
      }
    }, {
      key: "properties",
      get: function get() {
        return _objectSpread({}, babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioPortfolio), "properties", this), {
          portfolio: {
            type: Object
          },
          submission: {
            type: Object
          },
          comment: {
            type: String,
            attribute: "comment"
          },
          submissionFilter: {
            type: String,
            attribute: "submission-filter"
          }
        });
      }
      /**
       * Store the tag name to make it easier to obtain directly.
       * @notice function name must be here for tooling to operate correctly
       */

    }, {
      key: "tag",
      get: function get() {
        return "elmsln-studio-portfolio";
      } // life cycle

    }]);

    function ElmslnStudioPortfolio() {
      var _this;

      babelHelpers.classCallCheck(this, ElmslnStudioPortfolio);
      _this = babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(ElmslnStudioPortfolio).call(this));
      _this.portfolio = {};
      _this.submission = {};
      _this.submissionFilter = "";
      _this.comment = "";
      _this.tag = ElmslnStudioPortfolio.tag;
      return _this;
    }
    /**
     * life cycle, element is afixed to the DOM
     */


    babelHelpers.createClass(ElmslnStudioPortfolio, [{
      key: "connectedCallback",
      value: function connectedCallback() {
        babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioPortfolio.prototype), "connectedCallback", this).call(this);
      }
    }, {
      key: "_handleReply",
      value: function _handleReply(replyform) {
        var form = this.shadowRoot.querySelector("#".concat(replyform, "-div")),
            button = this.shadowRoot.querySelector("[controls=".concat(replyform, "]"));
        console.log("_handleComment", replyform, form, button);
      }
    }, {
      key: "_handleComment",
      value: function _handleComment(id, target) {
        var form = this.shadowRoot.querySelector("#".concat(id)),
            parent = this.shadowRoot.querySelector("#".concat(target));
        console.log("_handleComment", id, target, form, parent);
      }
    }, {
      key: "updated",
      value: function updated(changedProperties) {
        if (babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioPortfolio.prototype), "updated", this)) babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioPortfolio.prototype), "updated", this).call(this, changedProperties);
        changedProperties.forEach(function (oldValue, propName) {});
        console.log("portfolio", this.portfolio, this.feedback);
      }
    }]);
    return ElmslnStudioPortfolio;
  }((0, _elmslnStudioUtilities.ElmslnStudioUtilities)((0, _elmslnStudioStyles.ElmslnStudioStyles)(_litElement.LitElement)));

  _exports.ElmslnStudioPortfolio = ElmslnStudioPortfolio;
  customElements.define("elmsln-studio-portfolio", ElmslnStudioPortfolio);
});
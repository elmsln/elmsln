define(["exports","../../../../@polymer/polymer/polymer-element.js","../../../secure-request/secure-request.js","../../../../@polymer/polymer/lib/legacy/polymer.dom.js","../../../../@polymer/polymer/lib/elements/dom-repeat.js","../../../../@polymer/polymer/lib/elements/dom-if.js","../../../../@polymer/paper-dialog/paper-dialog.js","../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../../../@polymer/paper-input/paper-input.js","../../../../@polymer/paper-button/paper-button.js","../../../../@polymer/iron-ajax/iron-ajax.js","./lrnapp-studio-submission-edit-add-asset.js","./lrnapp-studio-submission-media-editoverlay.js"],function(_exports,_polymerElement,_secureRequest,_polymerDom,_domRepeat,_domIf,_paperDialog,_paperDialogScrollable,_paperInput,_paperButton,_ironAjax,_lrnappStudioSubmissionEditAddAsset,_lrnappStudioSubmissionMediaEditoverlay){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.LrnappStudioSubmissionEditVideo=void 0;function _templateObject_c05da1b0734911eaac0dbb5c5350affd(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: flex;\n          position: relative;\n          align-items: stretch;\n        }\n\n        lrnapp-studio-submission-media-editoverlay,\n        lrnapp-studio-submission-edit-add-asset {\n          background: lightgray;\n          display: flex;\n          align-items: center;\n          margin-right: 1em;\n        }\n\n        iframe {\n          display: block;\n        }\n\n        .videosfield__create {\n          display: block;\n          height: 250px;\n          width: 300px;\n        }\n\n        paper-dialog {\n          width: 50%;\n          width: 50vmax;\n          padding: 1em;\n        }\n      </style>\n\n      <dom-repeat items=\"[[videos]]\" as=\"video\">\n        <template>\n          <lrnapp-studio-submission-media-editoverlay\n            on-deleted=\"_videoDelete\"\n            data-index$=\"[[index]]\"\n          >\n            <iframe\n              class=\"videosfield__iframe\"\n              src$=\"[[video.video_src]]\"\n            ></iframe>\n          </lrnapp-studio-submission-media-editoverlay>\n        </template>\n      </dom-repeat>\n\n      <lrnapp-studio-submission-edit-add-asset\n        icon=\"av:video-library\"\n        on-click=\"_openDialog\"\n      ></lrnapp-studio-submission-edit-add-asset>\n\n      <paper-dialog id=\"dialog\">\n        <h2>Add Video</h2>\n        <paper-dialog-scrollable>\n          <paper-input label=\"Video URL\" value=\"{{newvideo}}\"></paper-input>\n        </paper-dialog-scrollable>\n        <div class=\"buttons\">\n          <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n          <paper-button dialog-confirm=\"\" on-click=\"_addImage\"\n            >Add Video</paper-button\n          >\n        </div>\n      </paper-dialog>\n\n      <template is=\"dom-if\" if=\"[[videoGenerateSourceUrl]]\">\n        <!-- Generate Video Source Url for preview -->\n        <iron-ajax\n          id=\"videoGenerateSourceUrl\"\n          url=\"[[videoGenerateSourceUrl]]\"\n          method=\"POST\"\n          body=\"[[newvideo]]\"\n          content-type=\"application/json\"\n          handle-as=\"json\"\n          on-response=\"_addImage\"\n        ></iron-ajax>\n      </template>\n    "],["\n      <style>\n        :host {\n          display: flex;\n          position: relative;\n          align-items: stretch;\n        }\n\n        lrnapp-studio-submission-media-editoverlay,\n        lrnapp-studio-submission-edit-add-asset {\n          background: lightgray;\n          display: flex;\n          align-items: center;\n          margin-right: 1em;\n        }\n\n        iframe {\n          display: block;\n        }\n\n        .videosfield__create {\n          display: block;\n          height: 250px;\n          width: 300px;\n        }\n\n        paper-dialog {\n          width: 50%;\n          width: 50vmax;\n          padding: 1em;\n        }\n      </style>\n\n      <dom-repeat items=\"[[videos]]\" as=\"video\">\n        <template>\n          <lrnapp-studio-submission-media-editoverlay\n            on-deleted=\"_videoDelete\"\n            data-index\\$=\"[[index]]\"\n          >\n            <iframe\n              class=\"videosfield__iframe\"\n              src$=\"[[video.video_src]]\"\n            ></iframe>\n          </lrnapp-studio-submission-media-editoverlay>\n        </template>\n      </dom-repeat>\n\n      <lrnapp-studio-submission-edit-add-asset\n        icon=\"av:video-library\"\n        on-click=\"_openDialog\"\n      ></lrnapp-studio-submission-edit-add-asset>\n\n      <paper-dialog id=\"dialog\">\n        <h2>Add Video</h2>\n        <paper-dialog-scrollable>\n          <paper-input label=\"Video URL\" value=\"{{newvideo}}\"></paper-input>\n        </paper-dialog-scrollable>\n        <div class=\"buttons\">\n          <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n          <paper-button dialog-confirm=\"\" on-click=\"_addImage\"\n            >Add Video</paper-button\n          >\n        </div>\n      </paper-dialog>\n\n      <template is=\"dom-if\" if=\"[[videoGenerateSourceUrl]]\">\n        <!-- Generate Video Source Url for preview -->\n        <iron-ajax\n          id=\"videoGenerateSourceUrl\"\n          url=\"[[videoGenerateSourceUrl]]\"\n          method=\"POST\"\n          body=\"[[newvideo]]\"\n          content-type=\"application/json\"\n          handle-as=\"json\"\n          on-response=\"_addImage\"\n        ></iron-ajax>\n      </template>\n    "]);_templateObject_c05da1b0734911eaac0dbb5c5350affd=function _templateObject_c05da1b0734911eaac0dbb5c5350affd(){return data};return data}var LrnappStudioSubmissionEditVideo=/*#__PURE__*/function(_SecureRequestXhr){babelHelpers.inherits(LrnappStudioSubmissionEditVideo,_SecureRequestXhr);function LrnappStudioSubmissionEditVideo(){babelHelpers.classCallCheck(this,LrnappStudioSubmissionEditVideo);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(LrnappStudioSubmissionEditVideo).apply(this,arguments))}babelHelpers.createClass(LrnappStudioSubmissionEditVideo,[{key:"_openDialog",value:function _openDialog(e){this.$.dialog.open()}},{key:"_addImage",value:function _addImage(e){var video_url=this.newvideo,normalizedEvent=(0,_polymerDom.dom)(e),tagname=normalizedEvent.localTarget.tagName;// find out if the component that called this function
// if it's the iron-ajax then that means we have what we
// need to add this new video to the array.
if("IRON-AJAX"===tagname){var video_src=e.detail.response.data;// make sure we upgrade from NULL to an array if needed
if("[object Array]"!=Object.prototype.toString.call(this.videos)){this.videos=[]}this.push("videos",{video_url:this.newvideo,video_src:video_src});this.newvideo=""}// if it wasn't iron ajax, then we need to go get the
// newvideo's source url from the api
else{this.shadowRoot.querySelector("#videoGenerateSourceUrl").generateRequest()}}},{key:"_videoDelete",value:function _videoDelete(e){var normalizedEvent=(0,_polymerDom.dom)(e),deleteIndex=normalizedEvent.localTarget.getAttribute("data-index");this.splice("videos",deleteIndex,1)}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(LrnappStudioSubmissionEditVideo.prototype),"ready",this).call(this);var url=this.generateUrl("/api/video/generate-source-url");this.set("videoGenerateSourceUrl",url)}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_c05da1b0734911eaac0dbb5c5350affd())}},{key:"tag",get:function get(){return"lrnapp-studio-submission-edit-video"}},{key:"properties",get:function get(){return{videos:{type:Array,notify:!0},selectedPage:{type:String,value:"0"},newvideo:{type:String,value:""},videoGenerateSourceUrl:{type:String,value:null}}}}]);return LrnappStudioSubmissionEditVideo}((0,_secureRequest.SecureRequestXhr)(_polymerElement.PolymerElement));_exports.LrnappStudioSubmissionEditVideo=LrnappStudioSubmissionEditVideo;window.customElements.define(LrnappStudioSubmissionEditVideo.tag,LrnappStudioSubmissionEditVideo)});
define(["exports", "../../../../@polymer/polymer/polymer-element.js", "../../../../@polymer/polymer/lib/utils/render-status.js", "../../../../@polymer/polymer/lib/legacy/polymer.dom.js", "../../../../@polymer/iron-ajax/iron-ajax.js", "../../../../@polymer/paper-item/paper-item.js", "../../../../@polymer/polymer/lib/elements/dom-if.js", "../../../simple-modal/lib/simple-modal-template.js", "../../../../@polymer/paper-listbox/paper-listbox.js", "../../../../@polymer/polymer/lib/elements/dom-repeat.js", "../../../../@polymer/paper-dropdown-menu/paper-dropdown-menu.js", "../elmsln-base-deps.js", "../../../../@polymer/app-layout/app-toolbar/app-toolbar.js", "../../../../@polymer/iron-list/iron-list.js", "../../../../@polymer/iron-pages/iron-pages.js", "../../../../@polymer/paper-dialog/paper-dialog.js", "../../../../@polymer/app-route/app-location.js", "../../../../@polymer/app-route/app-route.js", "../../../../@polymer/paper-button/paper-button.js", "../../../../@polymer/paper-toast/paper-toast.js", "../../../elmsln-loading/elmsln-loading.js", "../../../lrndesign-course-banner/lrndesign-course-banner.js", "../../../lrn-icon/lrn-icon.js", "../../../lrnsys-button/lrnsys-button.js", "../../../lrndesign-avatar/lrndesign-avatar.js", "../../../lrnsys-layout/lib/lrnsys-dialog.js", "../../../responsive-grid/lib/responsive-grid-col.js", "../../../responsive-grid/lib/responsive-grid-row.js", "../../../materializecss-styles/materializecss-styles.js", "./lrnapp-cis-course-card.js"], function (_exports, _polymerElement, _renderStatus, _polymerDom, _ironAjax, _paperItem, _domIf, _simpleModalTemplate, _paperListbox, _domRepeat, _paperDropdownMenu, _elmslnBaseDeps, _appToolbar, _ironList, _ironPages, _paperDialog, _appLocation, _appRoute, _paperButton, _paperToast, _elmslnLoading, _lrndesignCourseBanner, _lrnIcon, _lrnsysButton, _lrndesignAvatar, _lrnsysDialog, _responsiveGridCol, _responsiveGridRow, _materializecssStyles, _lrnappCisCourseCard) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LrnappCis = void 0;

  function _templateObject_a346c870a11d11eaa169d9d604127774() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <style include=\"materializecss-styles\">\n        :host {\n          display: block;\n          align-content: center;\n        }\n        #loading {\n          width: 100%;\n          z-index: 1000;\n          opacity: 0.9;\n          padding: 4em 0 0 0;\n          text-align: center;\n          align-content: center;\n          justify-content: center;\n          height: 100vh;\n          position: absolute;\n          background-color: white;\n        }\n        #dialog {\n          width: 80vw;\n        }\n        iron-selector {\n          line-height: 1em;\n        }\n        iron-selector lrnsys-button {\n          display: inline-flex;\n        }\n        paper-button.coursecard-wrapper {\n          margin: 0;\n          padding: 0;\n        }\n        paper-button.coursecard-wrapper:focus {\n          outline: blue solid 1px;\n        }\n        lrnapp-cis-course-card {\n          padding: 0;\n          margin: 1em;\n          height: 15em;\n          width: 14em;\n        }\n        .courses-grid {\n          margin: 0 auto;\n          width: 95%;\n        }\n        .iron-selected .display-mode {\n          background-color: #ff6f00;\n          color: white;\n        }\n        .iron-list-container {\n          display: flex;\n          flex-direction: column;\n          min-height: 50vh;\n        }\n        iron-list {\n          flex: 1 1 auto;\n        }\n        .dialog-header {\n          height: unset !important;\n          padding: 0 !important;\n        }\n        .course-dialog-heading.lrndesign-course-banner {\n          font-size: 1em;\n          height: 4em !important;\n        }\n        #coursedetails {\n          margin-top: 1em;\n        }\n        #confirm {\n          max-width: 400px;\n          max-height: 300px;\n        }\n        .buttons {\n          text-align: center;\n        }\n        .buttons paper-button {\n          width: 10em;\n          height: 4em;\n        }\n        .dialog-body {\n          padding: 1em;\n          font-size: 1.8em;\n          text-align: center;\n          margin: 0 auto;\n        }\n        .dialog-body lrn-icon.service-confirm-icon {\n          width: 5em;\n          height: 5em;\n        }\n        .dialog-body responsive-grid-col {\n          height: 4.5em;\n        }\n        .dialog-body lrndesign-avatar.service-confirm-icon {\n          display: inline-block;\n        }\n      </style>\n      <iron-ajax\n        auto=\"\"\n        url=\"[[sourcePath]]\"\n        params=\"\"\n        handle-as=\"json\"\n        last-response=\"{{_cisResponse}}\"\n        on-response=\"_handleResponse\"\n      ></iron-ajax>\n      <iron-ajax\n        url=\"[[courseDataPath]]\"\n        params=\"[[_courseDataParams]]\"\n        handle-as=\"json\"\n        id=\"courserequest\"\n        last-response=\"{{_courseResponse}}\"\n        on-response=\"_handleCourseResponse\"\n      ></iron-ajax>\n      <iron-ajax\n        url=\"[[makeServicePath]]\"\n        params=\"\"\n        handle-as=\"json\"\n        id=\"makeservice\"\n        last-response=\"{{_makeServiceResponse}}\"\n        on-response=\"_handleMakeServiceResponse\"\n      ></iron-ajax>\n      <div id=\"loading\">\n        <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n        <h3>Loading..</h3>\n      </div>\n      <app-toolbar class=\"\">\n        <span main-title=\"\"></span>\n        <span\n          top-item=\"\"\n          style=\"text-align:right;font-size:.5em;padding-right:1em;\"\n          >Displaying [[courses.length]] of [[originalCourses.length]]</span\n        >\n        <paper-dropdown-menu label=\"Course\" hidden$=\"[[!courses]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.course}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(originalCourses)]]\"\n              as=\"course\"\n            >\n              <paper-item item-id=\"[[course.id]]\"\n                >[[course.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        <paper-dropdown-menu label=\"Program\" hidden$=\"[[!programs]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.program}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(programs)]]\"\n              as=\"program\"\n            >\n              <paper-item item-id=\"[[program.id]]\"\n                >[[program.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        <paper-dropdown-menu label=\"Academic home\" hidden$=\"[[!academics]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.academic}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(academics)]]\"\n              as=\"academic\"\n            >\n              <paper-item item-id=\"[[academic.id]]\"\n                >[[academic.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </app-toolbar>\n      <div class=\"courses-grid\">\n        <iron-pages\n          selected=\"{{data.page}}\"\n          attr-for-selected=\"name\"\n          fallback-selection=\"courses\"\n          role=\"main\"\n        >\n          <div class=\"iron-list-container\" name=\"courses\">\n            <iron-list id=\"ironlist\" items=\"[[courses]]\" as=\"course\" grid=\"\">\n              <template>\n                <paper-button\n                  data-course-id$=\"[[course.id]]\"\n                  class=\"coursecard-wrapper\"\n                  on-click=\"_loadCourseUrl\"\n                >\n                  <lrnapp-cis-course-card\n                    elevation=\"2\"\n                    data-course-id$=\"[[course.id]]\"\n                    name=\"[[course.attributes.name]]\"\n                    image=\"[[course.attributes.image]]\"\n                    title=\"[[course.attributes.title]]\"\n                    color=\"[[course.attributes.color]]\"\n                  >\n                  </lrnapp-cis-course-card>\n                </paper-button>\n              </template>\n            </iron-list>\n          </div>\n        </iron-pages>\n      </div>\n      <app-location\n        route=\"{{route}}\"\n        query-params=\"{{queryParams}}\"\n      ></app-location>\n      <app-route\n        route=\"{{route}}\"\n        pattern=\"[[endPoint]]/:page\"\n        data=\"{{data}}\"\n        tail=\"{{tail}}\"\n        query-params=\"{{queryParams}}\"\n      >\n      </app-route>\n      <paper-dialog id=\"dialog\" with-backdrop>\n        <h2>Course details</h2>\n        <paper-dialog-scrollable>\n          <div class=\"dialog-header\">\n            <lrndesign-course-banner\n              image=\"[[activeCourse.attributes.image]]\"\n              name=\"[[activeCourse.attributes.name]]\"\n              title=\"[[activeCourse.attributes.title]]\"\n              color=\"[[activeCourse.attributes.color]] darken-4\"\n            >\n            </lrndesign-course-banner>\n          </div>\n          <div>\n            <div id=\"loadingCourse\" class=\"loading\">\n              <h3>Loading..</h3>\n              <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n            </div>\n          </div>\n          <div id=\"coursedetails\">\n            <responsive-grid-row gutter=\"5\">\n              <responsive-grid-col xl=\"6\" lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n                <div class=\"column\">\n                  <h4>Details</h4>\n                  <ul>\n                    <li\n                      hidden$=\"[[!activeCourse.relationships.academic.attributes.name]]\"\n                    >\n                      Academic unit:\n                      [[activeCourse.relationships.academic.attributes.name]]\n                    </li>\n                    <li\n                      hidden$=\"[[!activeCourse.relationships.program.attributes.name]]\"\n                    >\n                      Program:\n                      [[activeCourse.relationships.program.attributes.name]]\n                    </li>\n                  </ul>\n                  <h4>Learning Network</h4>\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[activeCourse.topology.Network]]\"\n                    as=\"service\"\n                  >\n                    <template is=\"dom-if\" if=\"[[!service._exists]]\">\n                      <lrnsys-button\n                        raised=\"\"\n                        on-click=\"_makeService\"\n                        color=\"grey lighten-4\"\n                        icon-class=\"grey lighten-5\"\n                        data-machine-name$=\"[[service.machine_name]]\"\n                      >\n                        <lrn-icon\n                          data-machine-name$=\"[[service.machine_name]]\"\n                          icon=\"[[service.icon]]\"\n                          class=\"elmsln-hover-icon\"\n                        ></lrn-icon>\n                        <span data-machine-name$=\"[[service.machine_name]]\"\n                          >Make the [[service.title]] service</span\n                        >\n                      </lrnsys-button>\n                    </template>\n                    <template is=\"dom-if\" if=\"[[service._exists]]\">\n                      <lrnsys-button\n                        raised=\"\"\n                        href=\"[[service.url]]\"\n                        hover-class=\"[[service.color]] lighten-4\"\n                      >\n                        <lrn-icon\n                          icon=\"[[service.icon]]\"\n                          class=\"elmsln-hover-icon\"\n                        ></lrn-icon>\n                        <span>[[service.title]]</span>\n                      </lrnsys-button>\n                    </template>\n                  </template>\n                </div>\n              </responsive-grid-col>\n              <responsive-grid-col xl=\"6\" lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n                <div class=\"column\">\n                  <h4>Operations</h4>\n                  <template is=\"dom-if\" if=\"[[activeCourse.meta.canUpdate]]\">\n                    <lrnsys-button\n                      raised=\"\"\n                      href=\"[[activeCourse.uris.edit]]\"\n                      label=\"Edit\"\n                      hover-class=\"green lighten-4\"\n                      icon=\"create\"\n                    ></lrnsys-button>\n                    <lrnsys-button\n                      raised=\"\"\n                      href=\"[[activeCourse.uris.addOffering]]\"\n                      label=\"Add offering\"\n                      hover-class=\"amber lighten-3\"\n                      icon=\"icons:add\"\n                    ></lrnsys-button>\n                  </template>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.offerings]]\"\n                    label=\"Offerings\"\n                    hover-class=\"amber lighten-4\"\n                    icon=\"social:people\"\n                  ></lrnsys-button>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.sync]]\"\n                    label=\"Sync Roster\"\n                    hover-class=\"amber lighten-4\"\n                    icon=\"notification:sync\"\n                  ></lrnsys-button>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.uri]]\"\n                    label=\"Course page (legacy)\"\n                    hover-class=\"brown lighten-4\"\n                    icon=\"delete\"\n                  ></lrnsys-button>\n                  <template is=\"dom-if\" if=\"[[activeCourse.meta.canDelete]]\">\n                    <div\n                      style=\"padding: 1em;width: 100%;margin: .5em 0;display: block;background-color:#FF2222;color:#ffffff;border: 1px solid #222222;\"\n                    >\n                      <h4>Danger zone</h4>\n                      <lrnsys-button\n                        raised=\"\"\n                        href=\"[[activeCourse.uris.delete]]\"\n                        label=\"Delete\"\n                        hover-class=\"red lighten-1\"\n                        color=\"red lighten-3\"\n                        icon=\"delete\"\n                      ></lrnsys-button>\n                    </div>\n                  </template>\n                </div>\n              </responsive-grid-col>\n            </responsive-grid-row>\n            <p>[[activeCourse.attributes.body]]</p>\n          </div>\n        </paper-dialog-scrollable>\n      </paper-dialog>\n      <lrnsys-dialog id=\"confirm\">\n        <div class=\"dialog-header\" slot=\"header\">\n          Add this to the\n          <strong>[[activeCourse.attributes.title]]</strong> network?\n        </div>\n        <div class=\"dialog-body\">\n          <responsive-grid-row gutter=\"5\">\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"1\" lg=\"1\" md=\"1\" sm=\"1\" xs=\"1\"\n              >Add</responsive-grid-col\n            >\n            <responsive-grid-col xl=\"2\" lg=\"2\" md=\"2\" sm=\"2\" xs=\"2\"\n              ><lrn-icon\n                icon=\"[[_activeService.icon]]\"\n                class$=\"[[_activeService.color]]-text elmsln-hover-icon service-confirm-icon\"\n              ></lrn-icon\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\"\n              ><strong>[[_activeService.title]]</strong></responsive-grid-col\n            >\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n          </responsive-grid-row>\n          <responsive-grid-row gutter=\"5\">\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"1\" lg=\"1\" md=\"1\" sm=\"1\" xs=\"1\"\n              >To</responsive-grid-col\n            >\n            <responsive-grid-col xl=\"2\" lg=\"2\" md=\"2\" sm=\"2\" xs=\"2\"\n              ><lrndesign-avatar\n                class=\"service-confirm-icon\"\n                label=\"[[activeCourse.attributes.name]]\"\n                jdenticon=\"\"\n                color=\"[[activeCourse.attributes.color]] darken-4\"\n              >\n              </lrndesign-avatar\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\"\n              ><strong\n                >[[activeCourse.attributes.title]]</strong\n              ></responsive-grid-col\n            >\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n          </responsive-grid-row>\n          <div style=\"margin-top:1em;\">This will take a few moments.</div>\n        </div>\n        <div class=\"buttons\">\n          <paper-button\n            raised=\"\"\n            dialog-confirm=\"\"\n            autofocus=\"\"\n            on-click=\"_confirmBuild\"\n            class=\"green\"\n            >Let's do it!</paper-button\n          >\n          <paper-button dialog-dismiss=\"\" class=\"red-text\"\n            >Oops, go back.</paper-button\n          >\n        </div>\n      </lrnsys-dialog>\n      <paper-toast id=\"toast\"></paper-toast>\n    "], ["\n      <style include=\"materializecss-styles\">\n        :host {\n          display: block;\n          align-content: center;\n        }\n        #loading {\n          width: 100%;\n          z-index: 1000;\n          opacity: 0.9;\n          padding: 4em 0 0 0;\n          text-align: center;\n          align-content: center;\n          justify-content: center;\n          height: 100vh;\n          position: absolute;\n          background-color: white;\n        }\n        #dialog {\n          width: 80vw;\n        }\n        iron-selector {\n          line-height: 1em;\n        }\n        iron-selector lrnsys-button {\n          display: inline-flex;\n        }\n        paper-button.coursecard-wrapper {\n          margin: 0;\n          padding: 0;\n        }\n        paper-button.coursecard-wrapper:focus {\n          outline: blue solid 1px;\n        }\n        lrnapp-cis-course-card {\n          padding: 0;\n          margin: 1em;\n          height: 15em;\n          width: 14em;\n        }\n        .courses-grid {\n          margin: 0 auto;\n          width: 95%;\n        }\n        .iron-selected .display-mode {\n          background-color: #ff6f00;\n          color: white;\n        }\n        .iron-list-container {\n          display: flex;\n          flex-direction: column;\n          min-height: 50vh;\n        }\n        iron-list {\n          flex: 1 1 auto;\n        }\n        .dialog-header {\n          height: unset !important;\n          padding: 0 !important;\n        }\n        .course-dialog-heading.lrndesign-course-banner {\n          font-size: 1em;\n          height: 4em !important;\n        }\n        #coursedetails {\n          margin-top: 1em;\n        }\n        #confirm {\n          max-width: 400px;\n          max-height: 300px;\n        }\n        .buttons {\n          text-align: center;\n        }\n        .buttons paper-button {\n          width: 10em;\n          height: 4em;\n        }\n        .dialog-body {\n          padding: 1em;\n          font-size: 1.8em;\n          text-align: center;\n          margin: 0 auto;\n        }\n        .dialog-body lrn-icon.service-confirm-icon {\n          width: 5em;\n          height: 5em;\n        }\n        .dialog-body responsive-grid-col {\n          height: 4.5em;\n        }\n        .dialog-body lrndesign-avatar.service-confirm-icon {\n          display: inline-block;\n        }\n      </style>\n      <iron-ajax\n        auto=\"\"\n        url=\"[[sourcePath]]\"\n        params=\"\"\n        handle-as=\"json\"\n        last-response=\"{{_cisResponse}}\"\n        on-response=\"_handleResponse\"\n      ></iron-ajax>\n      <iron-ajax\n        url=\"[[courseDataPath]]\"\n        params=\"[[_courseDataParams]]\"\n        handle-as=\"json\"\n        id=\"courserequest\"\n        last-response=\"{{_courseResponse}}\"\n        on-response=\"_handleCourseResponse\"\n      ></iron-ajax>\n      <iron-ajax\n        url=\"[[makeServicePath]]\"\n        params=\"\"\n        handle-as=\"json\"\n        id=\"makeservice\"\n        last-response=\"{{_makeServiceResponse}}\"\n        on-response=\"_handleMakeServiceResponse\"\n      ></iron-ajax>\n      <div id=\"loading\">\n        <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n        <h3>Loading..</h3>\n      </div>\n      <app-toolbar class=\"\">\n        <span main-title=\"\"></span>\n        <span\n          top-item=\"\"\n          style=\"text-align:right;font-size:.5em;padding-right:1em;\"\n          >Displaying [[courses.length]] of [[originalCourses.length]]</span\n        >\n        <paper-dropdown-menu label=\"Course\" hidden\\$=\"[[!courses]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.course}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(originalCourses)]]\"\n              as=\"course\"\n            >\n              <paper-item item-id=\"[[course.id]]\"\n                >[[course.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        <paper-dropdown-menu label=\"Program\" hidden\\$=\"[[!programs]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.program}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(programs)]]\"\n              as=\"program\"\n            >\n              <paper-item item-id=\"[[program.id]]\"\n                >[[program.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        <paper-dropdown-menu label=\"Academic home\" hidden\\$=\"[[!academics]]\">\n          <paper-listbox\n            slot=\"dropdown-content\"\n            class=\"dropdown-content\"\n            selected=\"{{queryParams.academic}}\"\n            attr-for-selected=\"item-id\"\n          >\n            <paper-item>-- Any --</paper-item>\n            <template\n              is=\"dom-repeat\"\n              items=\"[[_toArray(academics)]]\"\n              as=\"academic\"\n            >\n              <paper-item item-id=\"[[academic.id]]\"\n                >[[academic.attributes.name]]</paper-item\n              >\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </app-toolbar>\n      <div class=\"courses-grid\">\n        <iron-pages\n          selected=\"{{data.page}}\"\n          attr-for-selected=\"name\"\n          fallback-selection=\"courses\"\n          role=\"main\"\n        >\n          <div class=\"iron-list-container\" name=\"courses\">\n            <iron-list id=\"ironlist\" items=\"[[courses]]\" as=\"course\" grid=\"\">\n              <template>\n                <paper-button\n                  data-course-id\\$=\"[[course.id]]\"\n                  class=\"coursecard-wrapper\"\n                  on-click=\"_loadCourseUrl\"\n                >\n                  <lrnapp-cis-course-card\n                    elevation=\"2\"\n                    data-course-id\\$=\"[[course.id]]\"\n                    name=\"[[course.attributes.name]]\"\n                    image=\"[[course.attributes.image]]\"\n                    title=\"[[course.attributes.title]]\"\n                    color=\"[[course.attributes.color]]\"\n                  >\n                  </lrnapp-cis-course-card>\n                </paper-button>\n              </template>\n            </iron-list>\n          </div>\n        </iron-pages>\n      </div>\n      <app-location\n        route=\"{{route}}\"\n        query-params=\"{{queryParams}}\"\n      ></app-location>\n      <app-route\n        route=\"{{route}}\"\n        pattern=\"[[endPoint]]/:page\"\n        data=\"{{data}}\"\n        tail=\"{{tail}}\"\n        query-params=\"{{queryParams}}\"\n      >\n      </app-route>\n      <paper-dialog id=\"dialog\" with-backdrop>\n        <h2>Course details</h2>\n        <paper-dialog-scrollable>\n          <div class=\"dialog-header\">\n            <lrndesign-course-banner\n              image=\"[[activeCourse.attributes.image]]\"\n              name=\"[[activeCourse.attributes.name]]\"\n              title=\"[[activeCourse.attributes.title]]\"\n              color=\"[[activeCourse.attributes.color]] darken-4\"\n            >\n            </lrndesign-course-banner>\n          </div>\n          <div>\n            <div id=\"loadingCourse\" class=\"loading\">\n              <h3>Loading..</h3>\n              <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n            </div>\n          </div>\n          <div id=\"coursedetails\">\n            <responsive-grid-row gutter=\"5\">\n              <responsive-grid-col xl=\"6\" lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n                <div class=\"column\">\n                  <h4>Details</h4>\n                  <ul>\n                    <li\n                      hidden\\$=\"[[!activeCourse.relationships.academic.attributes.name]]\"\n                    >\n                      Academic unit:\n                      [[activeCourse.relationships.academic.attributes.name]]\n                    </li>\n                    <li\n                      hidden\\$=\"[[!activeCourse.relationships.program.attributes.name]]\"\n                    >\n                      Program:\n                      [[activeCourse.relationships.program.attributes.name]]\n                    </li>\n                  </ul>\n                  <h4>Learning Network</h4>\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[activeCourse.topology.Network]]\"\n                    as=\"service\"\n                  >\n                    <template is=\"dom-if\" if=\"[[!service._exists]]\">\n                      <lrnsys-button\n                        raised=\"\"\n                        on-click=\"_makeService\"\n                        color=\"grey lighten-4\"\n                        icon-class=\"grey lighten-5\"\n                        data-machine-name\\$=\"[[service.machine_name]]\"\n                      >\n                        <lrn-icon\n                          data-machine-name\\$=\"[[service.machine_name]]\"\n                          icon=\"[[service.icon]]\"\n                          class=\"elmsln-hover-icon\"\n                        ></lrn-icon>\n                        <span data-machine-name\\$=\"[[service.machine_name]]\"\n                          >Make the [[service.title]] service</span\n                        >\n                      </lrnsys-button>\n                    </template>\n                    <template is=\"dom-if\" if=\"[[service._exists]]\">\n                      <lrnsys-button\n                        raised=\"\"\n                        href=\"[[service.url]]\"\n                        hover-class=\"[[service.color]] lighten-4\"\n                      >\n                        <lrn-icon\n                          icon=\"[[service.icon]]\"\n                          class=\"elmsln-hover-icon\"\n                        ></lrn-icon>\n                        <span>[[service.title]]</span>\n                      </lrnsys-button>\n                    </template>\n                  </template>\n                </div>\n              </responsive-grid-col>\n              <responsive-grid-col xl=\"6\" lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n                <div class=\"column\">\n                  <h4>Operations</h4>\n                  <template is=\"dom-if\" if=\"[[activeCourse.meta.canUpdate]]\">\n                    <lrnsys-button\n                      raised=\"\"\n                      href=\"[[activeCourse.uris.edit]]\"\n                      label=\"Edit\"\n                      hover-class=\"green lighten-4\"\n                      icon=\"create\"\n                    ></lrnsys-button>\n                    <lrnsys-button\n                      raised=\"\"\n                      href=\"[[activeCourse.uris.addOffering]]\"\n                      label=\"Add offering\"\n                      hover-class=\"amber lighten-3\"\n                      icon=\"icons:add\"\n                    ></lrnsys-button>\n                  </template>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.offerings]]\"\n                    label=\"Offerings\"\n                    hover-class=\"amber lighten-4\"\n                    icon=\"social:people\"\n                  ></lrnsys-button>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.sync]]\"\n                    label=\"Sync Roster\"\n                    hover-class=\"amber lighten-4\"\n                    icon=\"notification:sync\"\n                  ></lrnsys-button>\n                  <lrnsys-button\n                    raised=\"\"\n                    href=\"[[activeCourse.uris.uri]]\"\n                    label=\"Course page (legacy)\"\n                    hover-class=\"brown lighten-4\"\n                    icon=\"delete\"\n                  ></lrnsys-button>\n                  <template is=\"dom-if\" if=\"[[activeCourse.meta.canDelete]]\">\n                    <div\n                      style=\"padding: 1em;width: 100%;margin: .5em 0;display: block;background-color:#FF2222;color:#ffffff;border: 1px solid #222222;\"\n                    >\n                      <h4>Danger zone</h4>\n                      <lrnsys-button\n                        raised=\"\"\n                        href=\"[[activeCourse.uris.delete]]\"\n                        label=\"Delete\"\n                        hover-class=\"red lighten-1\"\n                        color=\"red lighten-3\"\n                        icon=\"delete\"\n                      ></lrnsys-button>\n                    </div>\n                  </template>\n                </div>\n              </responsive-grid-col>\n            </responsive-grid-row>\n            <p>[[activeCourse.attributes.body]]</p>\n          </div>\n        </paper-dialog-scrollable>\n      </paper-dialog>\n      <lrnsys-dialog id=\"confirm\">\n        <div class=\"dialog-header\" slot=\"header\">\n          Add this to the\n          <strong>[[activeCourse.attributes.title]]</strong> network?\n        </div>\n        <div class=\"dialog-body\">\n          <responsive-grid-row gutter=\"5\">\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"1\" lg=\"1\" md=\"1\" sm=\"1\" xs=\"1\"\n              >Add</responsive-grid-col\n            >\n            <responsive-grid-col xl=\"2\" lg=\"2\" md=\"2\" sm=\"2\" xs=\"2\"\n              ><lrn-icon\n                icon=\"[[_activeService.icon]]\"\n                class\\$=\"[[_activeService.color]]-text elmsln-hover-icon service-confirm-icon\"\n              ></lrn-icon\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\"\n              ><strong>[[_activeService.title]]</strong></responsive-grid-col\n            >\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n          </responsive-grid-row>\n          <responsive-grid-row gutter=\"5\">\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"1\" lg=\"1\" md=\"1\" sm=\"1\" xs=\"1\"\n              >To</responsive-grid-col\n            >\n            <responsive-grid-col xl=\"2\" lg=\"2\" md=\"2\" sm=\"2\" xs=\"2\"\n              ><lrndesign-avatar\n                class=\"service-confirm-icon\"\n                label=\"[[activeCourse.attributes.name]]\"\n                jdenticon=\"\"\n                color=\"[[activeCourse.attributes.color]] darken-4\"\n              >\n              </lrndesign-avatar\n            ></responsive-grid-col>\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\"\n              ><strong\n                >[[activeCourse.attributes.title]]</strong\n              ></responsive-grid-col\n            >\n            <responsive-grid-col\n              xl=\"3\"\n              lg=\"3\"\n              md=\"3\"\n              sm=\"3\"\n              xs=\"3\"\n            ></responsive-grid-col>\n          </responsive-grid-row>\n          <div style=\"margin-top:1em;\">This will take a few moments.</div>\n        </div>\n        <div class=\"buttons\">\n          <paper-button\n            raised=\"\"\n            dialog-confirm=\"\"\n            autofocus=\"\"\n            on-click=\"_confirmBuild\"\n            class=\"green\"\n            >Let's do it!</paper-button\n          >\n          <paper-button dialog-dismiss=\"\" class=\"red-text\"\n            >Oops, go back.</paper-button\n          >\n        </div>\n      </lrnsys-dialog>\n      <paper-toast id=\"toast\"></paper-toast>\n    "]);

    _templateObject_a346c870a11d11eaa169d9d604127774 = function _templateObject_a346c870a11d11eaa169d9d604127774() {
      return data;
    };

    return data;
  }

  /**
   `lrnapp-cis`
   A learning application for visualizing course information and listing.
  
  @demo ../../demo/index.html
  
  @microcopy - the mental model for this app
   - cis - Course Information System
   -
  
  */
  var LrnappCis =
  /*#__PURE__*/
  function (_PolymerElement) {
    babelHelpers.inherits(LrnappCis, _PolymerElement);

    function LrnappCis() {
      babelHelpers.classCallCheck(this, LrnappCis);
      return babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(LrnappCis).apply(this, arguments));
    }

    babelHelpers.createClass(LrnappCis, [{
      key: "_routeChanged",
      // If the current route is outside the scope of our app
      // then allow the website to break out of the single page
      // application routing
      value: function _routeChanged(route, endPoint) {
        if (typeof route.path === "string") {
          if (typeof endPoint === "string") {
            // ignore "home page" as well since that's our path
            if (route.path.startsWith(endPoint) || route.path == "/") {
              return;
            }
          }

          this.$.loading.hidden = false; // reload the page which since route changed will load that page

          window.location.reload();
        }
      }
      /**
       * Change route from deeper in the app.
       */

    }, {
      key: "_routeChange",
      value: function _routeChange(e) {
        var details = e.detail;

        if (babelHelpers.typeof(details.queryParams.course) !== (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          this.set("queryParams.course", details.queryParams.course);
        }

        if (babelHelpers.typeof(details.queryParams.academic) !== (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          this.set("queryParams.academic", details.queryParams.academic);
        }

        if (babelHelpers.typeof(details.queryParams.program) !== (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          this.set("queryParams.program", details.queryParams.program);
        }

        if (babelHelpers.typeof(details.data.page) !== (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          this.set("data.page", details.data.page);
        }
      }
      /**
       * Simple way to convert from object to array.
       */

    }, {
      key: "_toArray",
      value: function _toArray(obj) {
        if (obj == null) {
          return [];
        }

        return Object.keys(obj).map(function (key) {
          return obj[key];
        });
      }
      /**
       * Handle course response for additional details about the item
       */

    }, {
      key: "_handleMakeServiceResponse",
      value: function _handleMakeServiceResponse(event) {
        // get the CIS response's data and convert to array ahead of time
        var response = this._makeServiceResponse;

        var activeCourse = this.__addServiceLinks(response.data.course);

        this.set("activeCourse", []);
        this.set("activeCourse", activeCourse);
        this.$.toast.show(response.message);
      }
      /**
       * Handle course response for additional details about the item
       */

    }, {
      key: "_handleCourseResponse",
      value: function _handleCourseResponse(event) {
        // get the CIS response's data and convert to array ahead of time
        var activeCourse = this._courseResponse.data.course;

        this.__addServiceLinks(activeCourse);

        this.set("activeCourse", []);
        this.set("activeCourse", activeCourse);
        this.$.loadingCourse.hidden = true;
      }
      /**
       * Helper to mash up services that exist with those that could.
       */

    }, {
      key: "__addServiceLinks",
      value: function __addServiceLinks(courseObject) {
        // ensure there's a part for the Network people can request
        if (babelHelpers.typeof(courseObject.topology.Network) === (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
          courseObject.topology.Network = {};
        } // loop our services to see what we should add as options


        for (var key in this.services) {
          // if it's not in the topology that means it can be added
          if (babelHelpers.typeof(courseObject.topology.Network[this.services[key].attributes.machine_name]) === (typeof undefined === "undefined" ? "undefined" : babelHelpers.typeof(undefined))) {
            // if we get a miss that means we should add a "Add this" version
            courseObject.topology.Network[this.services[key].attributes.machine_name] = {
              color: this.services[key].attributes.color,
              distro: this.services[key].attributes.distro,
              icon: this.services[key].attributes.icon,
              machine_name: this.services[key].attributes.machine_name,
              title: this.services[key].attributes.title,
              url: this.services[key].attributes.url,
              weight: this.services[key].attributes.weight,
              _exists: false
            };
          }
        } // convert to array after keys in place for the object


        courseObject.topology.Network = this._toArray(courseObject.topology.Network); // sort items based on weight of the things in the network
        // so we have a consistent order to things

        courseObject.topology.Network.sort(function (a, b) {
          return a.weight - b.weight;
        });
        return courseObject;
      }
      /**
       * Handle response for the whole courses object.
       */

    }, {
      key: "_handleResponse",
      value: function _handleResponse(event) {
        var course = {};
        var program = {};
        var academic = {};
        var tmp = {
          courses: [],
          programs: [],
          academics: []
        };
        var programs = [];
        var academics = []; // get the CIS response's data and convert to array ahead of time

        var courses = this._toArray(this._cisResponse.data.courses);

        this.set("services", this._toArray(this._cisResponse.data.services)); // original = active off the bat then we apply filters later to chang this

        this.set("originalCourses", courses); // figure out courses, programs and academics

        for (var index = 0; index < courses.length; index++) {
          course = courses[index];
          program = courses[index].relationships.program;
          academic = courses[index].relationships.academic;
          tmp.programs[program.id] = program;
          tmp.academics[academic.id] = academic;
          tmp.courses[course.id] = course;
        } // this is stupid but we have to normalize the IDs or else dom repeats will be screwed up


        tmp.programs.forEach(function (element) {
          programs.push(element);
        }); // this is stupid but we have to normalize the IDs or else dom repeats will be screwed up

        tmp.academics.forEach(function (element) {
          academics.push(element);
        });
        this.$.loading.hidden = true;
        this.set("academics", academics);
        this.set("programs", programs);
      }
      /**
       * Request a new service to kick off.
       */

    }, {
      key: "_makeService",
      value: function _makeService(e) {
        var normalizedEvent = (0, _polymerDom.dom)(e);
        var active = normalizedEvent.localTarget.getAttribute("data-machine-name");
        var network = this.activeCourse.topology.Network;
        var service = network.filter(function (service) {
          if (service.machine_name !== active) {
            return false;
          }

          return true;
        }); // if we found one, make it the top level item

        if (service.length > 0) {
          service = service.pop();
          this.$.makeservice.params = {
            course: this.activeCourse.attributes.machine_name,
            service: service.machine_name
          };
          this._activeService = service; // confirm via paper prompt

          this.$.confirm.toggleDialog();
        } else {
          console.log("that was not a valid service..");
        }
      }
      /**
       * Confirm of build.
       */

    }, {
      key: "_confirmBuild",
      value: function _confirmBuild(e) {
        this.$.makeservice.generateRequest();
      }
      /**
       * lifecycle
       */

    }, {
      key: "connectedCallback",
      value: function connectedCallback() {
        babelHelpers.get(babelHelpers.getPrototypeOf(LrnappCis.prototype), "connectedCallback", this).call(this);
        (0, _renderStatus.afterNextRender)(this, function () {
          this.addEventListener("route-change", this._routeChange.bind(this));
        });
      }
      /**
       * lifecycle
       */

    }, {
      key: "disconnectedCallback",
      value: function disconnectedCallback() {
        // listen for focus event to have fired
        this.removeEventListener("route-change", this._routeChange.bind(this));
        babelHelpers.get(babelHelpers.getPrototypeOf(LrnappCis.prototype), "disconnectedCallback", this).call(this);
      }
      /**
       * Handle tap on paper-button above to redirect to the correct course url.
       */

    }, {
      key: "_loadCourseUrl",
      value: function _loadCourseUrl(e) {
        // reset dialog to appear to be loading
        this.$.loadingCourse.hidden = false;
        var normalizedEvent = (0, _polymerDom.dom)(e);
        var local = normalizedEvent.localTarget; // this will have the id of the current course

        var active = local.getAttribute("data-course-id"); // find the course by it's unique id and filter just to it

        var findCourse = this.originalCourses.filter(function (course) {
          if (course.id !== active) {
            return false;
          }

          return true;
        }); // if we found one, make it the top level item

        if (findCourse.length > 0) {
          findCourse = findCourse.pop();
        }

        this.activeCourse = findCourse; // formulate the post data

        this._courseDataParams = {
          id: this.activeCourse.id
        }; // @todo look at query cache mechanism to skip calls
        // if they've already happened. lrnapp-book has some stuff to do this

        this.$.courserequest.generateRequest();
        this.$.dialog.toggle();
      }
      /**
       * Compute the active list of courses
       */

    }, {
      key: "_coursesCompute",
      value: function _coursesCompute(originalCourses, queryParams) {
        var _this = this;

        // if we don't have an original courses object to work with then we need to bail
        if (typeof originalCourses === "undefined") {
          return [];
        } // define vars


        var root = this;
        var filteredCourses = []; // filter the courses by the query params

        filteredCourses = originalCourses.filter(function (course) {
          if (typeof root.queryParams.course !== "undefined") {
            if (course.id !== root.queryParams.course) {
              return false;
            }
          }

          if (typeof root.queryParams.program !== "undefined") {
            if (course.relationships.program.id !== root.queryParams.program) {
              return false;
            }
          }

          if (typeof root.queryParams.academic !== "undefined") {
            if (course.relationships.academic.id !== root.queryParams.academic) {
              return false;
            }
          }

          return true;
        }); // delay and repaint, can help with refresh issues

        setTimeout(function () {
          _this.$.ironlist.fire("iron-resize");
        }, 200);
        return filteredCourses;
      }
      /**
       * highjack shadowDom
       */

    }, {
      key: "_attachDom",
      value: function _attachDom(dom) {
        this.appendChild(dom);
      }
    }], [{
      key: "template",
      get: function get() {
        return (0, _polymerElement.html)(_templateObject_a346c870a11d11eaa169d9d604127774());
      }
    }, {
      key: "tag",
      get: function get() {
        return "lrnapp-cis";
      }
    }, {
      key: "properties",
      get: function get() {
        var _ref;

        return _ref = {
          elmslnCourse: {
            type: String
          },
          elmslnSection: {
            type: String
          },
          basePath: {
            type: String
          },
          csrfToken: {
            type: String
          },
          endPoint: {
            type: String
          },

          /**
           * The load initial data
           */
          _cisResponse: {
            type: Object
          },

          /**
           * Load individual course data
           */
          _courseResponse: {
            type: Object
          },

          /**
           * Load service creation response
           */
          _makeServiceResponse: {
            type: Object
          },

          /**
           * The courses to render; potentially filtered
           */
          courses: {
            type: Array,
            value: [],
            computed: "_coursesCompute(originalCourses, queryParams)"
          },

          /**
           * The original courses array; used to filter against
           */
          originalCourses: {
            type: Array,
            value: [],
            notify: true
          },

          /**
           * The programs to render
           */
          programs: {
            type: Array,
            value: []
          },

          /**
           * The academics to render
           */
          academics: {
            type: Array,
            value: []
          },

          /**
           * sourcePath for data.
           */
          sourcePath: {
            type: String
          },

          /**
           * pathway to access info about a single course.
           */
          courseDataPath: {
            type: String
          },

          /**
           * pathway to creating new service instances
           */
          makeServicePath: {
            type: String
          }
        }, babelHelpers.defineProperty(_ref, "endPoint", {
          type: String,
          value: "/"
        }), babelHelpers.defineProperty(_ref, "basePath", {
          type: String,
          value: "/"
        }), babelHelpers.defineProperty(_ref, "activeCourse", {
          type: Array,
          value: null
        }), babelHelpers.defineProperty(_ref, "queryParams", {
          type: Object,
          notify: true
        }), _ref;
      }
    }, {
      key: "observers",
      get: function get() {
        return ["_routeChanged(route, endPoint)"];
      }
    }]);
    return LrnappCis;
  }(_polymerElement.PolymerElement);

  _exports.LrnappCis = LrnappCis;
  window.customElements.define(LrnappCis.tag, LrnappCis);
});
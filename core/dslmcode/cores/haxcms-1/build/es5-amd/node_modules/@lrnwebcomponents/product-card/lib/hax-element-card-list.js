define(["exports", "require", "../../../lit-element/lit-element.js", "../../utils/utils.js", "../../../@material/mwc-button/mwc-button.js", "../../simple-modal/simple-modal.js", "../../hexagon-loader/hexagon-loader.js", "../product-card.js"], function (_exports, _require, _litElement, _utils, _mwcButton, _simpleModal, _hexagonLoader, _productCard) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.HAXElementCardList = void 0;
  _require = babelHelpers.interopRequireWildcard(_require);

  function _templateObject8_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n          min-height: 100px;\n        }\n        :host([loading]) {\n          border: 1px solid var(--simple-colors-default-theme-grey-6);\n        }\n        product-card {\n          display: block;\n          max-width: 100%;\n          overflow-x: auto;\n          --mdc-theme-on-primary: var(--simple-colors-default-theme-grey-1);\n          --mdc-theme-primary: var(--simple-colors-default-theme-accent-8);\n        }\n        product-card[hidden] {\n          display: none;\n        }\n        product-card div[slot=\"details-collapse-content\"] {\n          max-height: 125px;\n          overflow-y: auto;\n        }\n        product-card label[slot=\"card-header\"] {\n          float: right;\n          line-height: 1.5em;\n        }\n        mwc-button {\n          text-transform: unset;\n          margin-bottom: 5px;\n        }\n        .sr-only {\n          position: absolute;\n          left: -9999999999px;\n          width: 0;\n          overflow: hidden;\n        }\n        .grid {\n          display: grid;\n          align-items: stretch;\n          grid-template-columns: var(--hax-element-card--cols, repeat(2, 1fr));\n          grid-gap: var(--hax-element-card--gridGap, 15px);\n          overflow-x: auto;\n          padding: 2px;\n        }\n        hexagon-loader {\n          float: right;\n          margin: -60px 0 0 0;\n        }\n        .loaderText {\n          position: absolute;\n          top: 0;\n          right: 0;\n        }\n        .checkbox {\n          height: 36px;\n          width: 36px;\n        }\n      "]);

    _templateObject8_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject8_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject7_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                              <mwc-button\n                                data-tag=\"", "\"\n                                outlined\n                                @click=\"", "\"\n                                >Pop up demo</mwc-button\n                              >\n                              <div class=\"demo\">\n                                ", "\n                              </div>\n                              <code-sample copy-clipboard-button>\n                                <template>\n                                  ", "\n                                </template>\n                              </code-sample>\n                            "]);

    _templateObject7_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject7_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject6_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                          ", "\n                        "]);

    _templateObject6_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject6_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject5_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                                <li>\n                                  <strong>", ":</strong>\n                                  <span>", "</span>\n                                </li>\n                              "]);

    _templateObject5_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject5_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject4_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                            ", "\n                          "]);

    _templateObject4_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject4_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject3_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                              ", ",\n                            "]);

    _templateObject3_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject3_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject2_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n                <product-card\n                  .slot=\"col-", "\"\n                  ?disabled=\"", "\"\n                  ?hidden=\"", "\"\n                  ?has-demo=\"", "\"\n                  heading=\"", "\"\n                  icon=\"", "\"\n                  subheading=\"", "\"\n                  accent-color=\"", "\"\n                  @product-card-demo-show=\"", "\"\n                  @product-card-demo-hide=\"", "\"\n                >\n                  <label slot=\"card-header\">\n                    <span class=\"sr-only\"\n                      >", "</span\n                    >\n                    <input\n                      class=\"checkbox\"\n                      type=\"checkbox\"\n                      ?checked=\"", "\"\n                      @change=\"", "\"\n                    />\n                  </label>\n                  <div slot=\"details-collapse-header\">Details</div>\n                  <div slot=\"details-collapse-content\">\n                    <ul>\n                      <li>\n                        <strong>Tags:</strong> ", "\n                      </li>\n                      <li><strong>Tag name:</strong> <code>", "</code></li>\n                      <li>\n                        <strong>Developer usage:</strong>\n                        <code>import \"", "\";</code>\n                      </li>\n                      ", "\n                    </ul>\n                  </div>\n                  <div slot=\"demo-collapse-header\">Demo</div>\n                  <div slot=\"demo-collapse-content\">\n                    ", "\n                  </div>\n                </product-card>\n              "]);

    _templateObject2_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject2_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  function _templateObject_ef40bf80bbc911ea9e97cd18177e1df1() {
    var data = babelHelpers.taggedTemplateLiteral(["\n          <p class=\"loaderText\" ?hidden=\"", "\">\n            <strong\n              >Scanning Web Component Registry for more HAX elements..</strong\n            ><hexagon-loader\n              item-count=\"4\"\n              color=\"orange\"\n              ?loading=\"", "\"\n              size=\"small\"\n            ></hexagon-loader>\n          </p>\n          <div\n            class=\"grid\"\n            style=\"--hax-element-card--cols: repeat(", ", 1fr)\"\n          >\n            ", "\n          </div>\n        "]);

    _templateObject_ef40bf80bbc911ea9e97cd18177e1df1 = function _templateObject_ef40bf80bbc911ea9e97cd18177e1df1() {
      return data;
    };

    return data;
  }

  var HAXElementCardList =
  /*#__PURE__*/
  function (_LitElement) {
    babelHelpers.inherits(HAXElementCardList, _LitElement);

    function HAXElementCardList() {
      var _this;

      babelHelpers.classCallCheck(this, HAXElementCardList);
      _this = babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(HAXElementCardList).call(this));
      _this.showCardList = false;
      _this.list = [];
      _this.filteredTags = [];
      _this.value = {};
      _this.cols = 2;
      _this._layout = "1-1-1";
      window.SimpleModal.requestAvailability();
      return _this;
    }

    babelHelpers.createClass(HAXElementCardList, [{
      key: "render",
      value: function render() {
        var _this2 = this;

        return !this.showCardList ? "" : (0, _litElement.html)(_templateObject_ef40bf80bbc911ea9e97cd18177e1df1(), !this.loading, this.loading, this.cols, this.productList.map(function (el, i) {
          return (0, _litElement.html)(_templateObject2_ef40bf80bbc911ea9e97cd18177e1df1(), _this2.__getCol(i), !el.status, !(_this2.filteredTags && _this2.filteredTags.includes(el.tag)), el.schema.demoSchema, el.schema.gizmo.title, el.schema.gizmo.icon, el.schema.gizmo.description, el.schema.gizmo.color, function (e) {
            return _this2.toggleShowDemo(e, i);
          }, function (e) {
            return _this2.toggleShowDemo(e, i);
          }, el.status ? "Enabled" : "Disabled", el.status, function (e) {
            return _this2.elementStatusChange(el);
          }, el.schema.gizmo.groups.map(function (group) {
            return (0, _litElement.html)(_templateObject3_ef40bf80bbc911ea9e97cd18177e1df1(), group);
          }), el.tag, el.file, el.schema.gizmo.meta ? (0, _litElement.html)(_templateObject4_ef40bf80bbc911ea9e97cd18177e1df1(), Object.keys(el.schema.gizmo.meta).map(function (mel) {
            return (0, _litElement.html)(_templateObject5_ef40bf80bbc911ea9e97cd18177e1df1(), _this2.capFirst(mel), el.schema.gizmo.meta[mel]);
          })) : "", el.schema.demoSchema && el.showDemo ? (0, _litElement.html)(_templateObject6_ef40bf80bbc911ea9e97cd18177e1df1(), el.schema.demoSchema.map(function (demoItem) {
            return (0, _litElement.html)(_templateObject7_ef40bf80bbc911ea9e97cd18177e1df1(), demoItem.tag, _this2._viewDemo, _this2._haxElementToNode(demoItem), _this2._haxElementToNode(demoItem));
          })) : "");
        }));
      }
      /**
       * updated list with status based on current value
       *
       * @readonly
       * @memberof HAXElementCardList
       */

    }, {
      key: "_viewDemo",
      value: function _viewDemo(e) {
        if (e.target && e.target.nextElementSibling) {
          window.dispatchEvent(new CustomEvent("simple-modal-show", {
            bubbles: true,
            composed: true,
            cancelable: false,
            detail: {
              title: "Demo of " + e.target.getAttribute("data-tag"),
              styles: {
                "--simple-modal-width": "75vw",
                "--simple-modal-max-width": "75vw"
              },
              elements: {
                content: e.target.nextElementSibling
              },
              invokedBy: e.target,
              clone: true,
              modal: true
            }
          }));
        }
      }
      /**
       * Effectively event binding to the expanded state
       */

    }, {
      key: "toggleShowDemo",
      value: function toggleShowDemo(e, index) {
        this.list[index].showDemo = e.detail.expanded;
        this.requestUpdate();
      }
      /**
       * Wrap our call so that we can dynamically import code sample since it has a dep tree
       */

    }, {
      key: "_haxElementToNode",
      value: function _haxElementToNode(schema) {
        if (schema && schema.tag) {
          new Promise(function (res, rej) {
            return _require.default(["../../code-sample/code-sample.js"], res, rej);
          });
          return (0, _utils.haxElementToNode)(schema);
        }

        return "";
      }
    }, {
      key: "capFirst",
      value: function capFirst(s) {
        return s.charAt(0).toUpperCase() + s.slice(1);
      }
    }, {
      key: "elementStatusChange",
      value: function elementStatusChange(el, status) {
        if (!status) status = !el.status;
        el.status = status;

        this._updateItem(el.tag, el.file, status); // send up so list can update


        this.dispatchEvent(new CustomEvent("value-changed", {
          detail: this
        }));
        this.requestUpdate();
      }
    }, {
      key: "__getCol",
      value: function __getCol(i) {
        i++;

        while (i > this.cols) {
          i = i - this.cols;
        }

        return i;
      }
    }, {
      key: "_updateItem",
      value: function _updateItem(tag, file) {
        var status = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

        if (!status) {
          delete this.value[tag];
        } else {
          this.value[tag] = file;
        }
      }
      /**
       * LitElement life cycle - property changed
       */

    }, {
      key: "updated",
      value: function updated(changedProperties) {
        var _this3 = this;

        changedProperties.forEach(function (oldValue, propName) {
          if (propName == "list") _this3.dispatchEvent(new CustomEvent("hax-element-card-list-changed", {
            detail: {
              bubbles: true,
              value: _this3[propName]
            }
          }));

          if (propName == "cols") {
            switch (_this3[propName]) {
              case 3:
                _this3._layout = "1-1-1";
                break;

              case 4:
                _this3._layout = "1-1-1-1";
                break;

              case 5:
                _this3._layout = "1-1-1-1-1";
                break;

              case 6:
                _this3._layout = "1-1-1-1-1-1";
                break;

              default:
                _this3._layout = "1-1";
                break;
            }
          }
        });
      }
    }, {
      key: "productList",
      get: function get() {
        var _this4 = this;

        return this.list.map(function (item) {
          return {
            tag: item.tag,
            file: item.file,
            schema: item.schema,
            showDemo: item.showDemo,
            status: _this4.value[item.tag] ? true : false
          };
        });
      }
    }], [{
      key: "tag",
      get: function get() {
        return "hax-element-card-list";
      }
    }, {
      key: "styles",
      get: function get() {
        return [(0, _litElement.css)(_templateObject8_ef40bf80bbc911ea9e97cd18177e1df1())];
      }
    }, {
      key: "properties",
      get: function get() {
        return {
          list: {
            type: Array
          },
          enabled: {
            type: Object
          },
          filteredTags: {
            type: Object
          },
          cols: {
            type: Number
          },
          value: {
            type: Object
          },
          hidden: {
            type: Boolean
          },
          loading: {
            type: Boolean,
            reflect: true
          },
          showCardList: {
            type: Boolean
          },
          _layout: {
            type: String
          }
        };
      }
    }]);
    return HAXElementCardList;
  }(_litElement.LitElement);

  _exports.HAXElementCardList = HAXElementCardList;
  customElements.define(HAXElementCardList.tag, HAXElementCardList);
});
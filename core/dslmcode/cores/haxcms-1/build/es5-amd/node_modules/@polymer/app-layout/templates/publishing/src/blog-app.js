define(["../../../../app-route/app-location.js", "../../../../app-route/app-route.js", "../../../../iron-flex-layout/iron-flex-layout.js", "../../../../iron-pages/iron-pages.js", "../../../../iron-selector/iron-selector.js", "../../../../paper-fab/paper-fab.js", "../../../../paper-icon-button/paper-icon-button.js", "../../../../paper-styles/shadow.js", "../../../app-drawer-layout/app-drawer-layout.js", "../../../app-drawer/app-drawer.js", "../../../app-scroll-effects/app-scroll-effects.js", "../../../app-header/app-header.js", "../../../app-header-layout/app-header-layout.js", "../../../app-toolbar/app-toolbar.js", "./app-icons.js", "./article-headline.js", "./article-detail.js", "./two-columns-grid.js", "../../../helpers/helpers.js", "../../../../polymer/lib/legacy/polymer-fn.js", "../../../../polymer/lib/utils/html-tag.js"], function (_appLocation, _appRoute, _ironFlexLayout, _ironPages, _ironSelector, _paperFab, _paperIconButton, _shadow, _appDrawerLayout, _appDrawer, _appScrollEffects, _appHeader, _appHeaderLayout, _appToolbar, _appIcons, _articleHeadline, _articleDetail, _twoColumnsGrid, _helpers, _polymerFn, _htmlTag) {
  "use strict";

  var _templateObject_5fb76b30809211edaa2833647dc78c6c;

  (0, _polymerFn.Polymer)({
    _template: (0, _htmlTag.html)(_templateObject_5fb76b30809211edaa2833647dc78c6c || (_templateObject_5fb76b30809211edaa2833647dc78c6c = babelHelpers.taggedTemplateLiteral(["\n    <style>\n\n      :host {\n        --app-primary-color: #404040;\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n      }\n\n      app-drawer {\n        --app-drawer-content-container: {\n          background-color: var(--app-primary-color);\n          overflow-x: hidden;\n        };\n      }\n\n      app-drawer app-header {\n        background-color: var(--app-primary-color);\n      }\n\n      .nav-menu {\n        background-color: var(--app-primary-color);\n        color: #fff;\n      }\n\n      a {\n        text-decoration: none;\n        color: inherit;\n        font-size: inherit;\n      }\n\n      .nav-menu > a {\n        display: block;\n        padding: 12px 16px;\n        font-size: 20px;\n        font-weight: 500;\n      }\n\n      .nav-menu > a.iron-selected {\n        background-color: #888;\n      }\n\n      .main-header {\n        border-bottom: 1px solid #ddd;\n        background-color: #fff;\n        color: #444;\n      }\n\n      .title-toolbar {\n        @apply --layout-center-center;\n        box-sizing: border-box;\n      }\n\n      .nav-title-toolbar {\n        color: #fff;\n        width: 100vw;\n      }\n\n      .main-title-toolbar {\n        width: 100%;\n      }\n\n      .title {\n        padding-bottom: 40px;\n        font-size: 60px;\n        font-weight: 800;\n      }\n\n      .category-page {\n        min-height: 100vh;\n      }\n\n      article-headline {\n        @apply --shadow-transition;\n        @apply --shadow-elevation-2dp;\n        cursor: pointer;\n      }\n\n      article-detail {\n        max-width: 736px;\n        margin: 64px auto;\n        background-color: #fff;\n        @apply --shadow-elevation-2dp;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      @media (max-width: 580px) {\n\n        /* make title smaller to fit on screen */\n        .title {\n          font-size: 40px;\n          padding-bottom: 16px;\n        }\n\n      }\n\n      /* narrow layout */\n      @media (max-width: 808px) {\n\n        article-detail {\n          max-width: none;\n          margin: 0;\n        }\n\n      }\n\n    </style>\n\n    <!-- setup routes -->\n    <app-location route=\"{{route}}\" use-hash-as-path></app-location>\n    <app-route route=\"{{route}}\" pattern=\"/:category\" data=\"{{categoryData}}\" tail=\"{{subRoute}}\"></app-route>\n    <app-route route=\"{{subRoute}}\" pattern=\"/:page\" data=\"{{pageData}}\" tail=\"{{subsubRoute}}\"></app-route>\n    <app-route route=\"{{subsubRoute}}\" pattern=\"/:id\" data=\"{{idData}}\"></app-route>\n\n    <app-drawer-layout drawer-width=\"288px\" responsive-width=\"1280px\" narrow=\"{{narrow}}\">\n\n      <!-- nav panel -->\n      <app-drawer id=\"drawer\" slot=\"drawer\">\n        <app-header-layout has-scrolling-region>\n\n          <app-header fixed slot=\"header\">\n\n            <!-- top toolbar -->\n            <app-toolbar></app-toolbar>\n\n            <!-- bottom toolbar -->\n            <app-toolbar class=\"title-toolbar nav-title-toolbar\">\n              <div class=\"title\">ZUPERK\xDCLBLOG</div>\n            </app-toolbar>\n\n          </app-header>\n\n          <!-- nav menu -->\n          <iron-selector class=\"nav-menu\" selected=\"[[categoryData.category]]\" attr-for-selected=\"name\" on-iron-activate=\"_drawerSelected\">\n            <template is=\"dom-repeat\" items=\"[[articles]]\">\n              <a name=\"[[item.name]]\" href=\"#/[[item.name]]/list\">{{item.title}}</a>\n            </template>\n          </iron-selector>\n\n        </app-header-layout>\n      </app-drawer>\n\n      <!-- main panel -->\n      <app-header-layout>\n\n        <app-header fixed effects=\"waterfall\" class=\"main-header\" slot=\"header\">\n\n          <!-- top toolbar -->\n          <app-toolbar>\n            <!-- menu button -->\n            <paper-icon-button drawer-toggle icon=\"app:menu\" hidden$=\"[[_shouldHideMenuButton(pageData.page, narrow)]]\"></paper-icon-button>\n\n            <!-- back button -->\n            <a href=\"#/[[categoryData.category]]/list\" hidden$=\"[[_equal(pageData.page, 'list')]]\">\n              <paper-icon-button icon=\"app:arrow-back\"></paper-icon-button>\n            </a>\n          </app-toolbar>\n\n          <!-- bottom toolbar -->\n          <app-toolbar class=\"title-toolbar main-title-toolbar\">\n            <div class=\"title\">ZUPERK\xDCLBLOG</div>\n          </app-toolbar>\n\n        </app-header>\n\n        <!-- list/detail pages -->\n        <iron-pages selected=\"[[pageData.page]]\" attr-for-selected=\"name\">\n\n          <!-- list page -->\n          <iron-pages name=\"list\" selected=\"[[categoryData.category]]\" attr-for-selected=\"name\">\n\n            <template is=\"dom-repeat\" items=\"[[articles]]\" as=\"category\">\n              <section class=\"category-page\" name=\"[[category.name]]\">\n                <!-- 2-columns grid -->\n                <two-columns-grid column-width=\"396\" gutter=\"4\">\n                  <template is=\"dom-repeat\" items=\"[[category.items]]\" as=\"article\">\n                    <article-headline href=\"#/[[category.name]]/detail/[[article.id]]\" article=\"[[article]]\"></article-headline>\n                  </template>\n                </two-columns-grid>\n              </section>\n            </template>\n\n          </iron-pages>\n\n          <!-- detail page -->\n          <article-detail name=\"detail\" article=\"[[article]]\"></article-detail>\n        </iron-pages>\n\n      </app-header-layout>\n\n    </app-drawer-layout>\n"], ["\n    <style>\n\n      :host {\n        --app-primary-color: #404040;\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n      }\n\n      app-drawer {\n        --app-drawer-content-container: {\n          background-color: var(--app-primary-color);\n          overflow-x: hidden;\n        };\n      }\n\n      app-drawer app-header {\n        background-color: var(--app-primary-color);\n      }\n\n      .nav-menu {\n        background-color: var(--app-primary-color);\n        color: #fff;\n      }\n\n      a {\n        text-decoration: none;\n        color: inherit;\n        font-size: inherit;\n      }\n\n      .nav-menu > a {\n        display: block;\n        padding: 12px 16px;\n        font-size: 20px;\n        font-weight: 500;\n      }\n\n      .nav-menu > a.iron-selected {\n        background-color: #888;\n      }\n\n      .main-header {\n        border-bottom: 1px solid #ddd;\n        background-color: #fff;\n        color: #444;\n      }\n\n      .title-toolbar {\n        @apply --layout-center-center;\n        box-sizing: border-box;\n      }\n\n      .nav-title-toolbar {\n        color: #fff;\n        width: 100vw;\n      }\n\n      .main-title-toolbar {\n        width: 100%;\n      }\n\n      .title {\n        padding-bottom: 40px;\n        font-size: 60px;\n        font-weight: 800;\n      }\n\n      .category-page {\n        min-height: 100vh;\n      }\n\n      article-headline {\n        @apply --shadow-transition;\n        @apply --shadow-elevation-2dp;\n        cursor: pointer;\n      }\n\n      article-detail {\n        max-width: 736px;\n        margin: 64px auto;\n        background-color: #fff;\n        @apply --shadow-elevation-2dp;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      @media (max-width: 580px) {\n\n        /* make title smaller to fit on screen */\n        .title {\n          font-size: 40px;\n          padding-bottom: 16px;\n        }\n\n      }\n\n      /* narrow layout */\n      @media (max-width: 808px) {\n\n        article-detail {\n          max-width: none;\n          margin: 0;\n        }\n\n      }\n\n    </style>\n\n    <!-- setup routes -->\n    <app-location route=\"{{route}}\" use-hash-as-path></app-location>\n    <app-route route=\"{{route}}\" pattern=\"/:category\" data=\"{{categoryData}}\" tail=\"{{subRoute}}\"></app-route>\n    <app-route route=\"{{subRoute}}\" pattern=\"/:page\" data=\"{{pageData}}\" tail=\"{{subsubRoute}}\"></app-route>\n    <app-route route=\"{{subsubRoute}}\" pattern=\"/:id\" data=\"{{idData}}\"></app-route>\n\n    <app-drawer-layout drawer-width=\"288px\" responsive-width=\"1280px\" narrow=\"{{narrow}}\">\n\n      <!-- nav panel -->\n      <app-drawer id=\"drawer\" slot=\"drawer\">\n        <app-header-layout has-scrolling-region>\n\n          <app-header fixed slot=\"header\">\n\n            <!-- top toolbar -->\n            <app-toolbar></app-toolbar>\n\n            <!-- bottom toolbar -->\n            <app-toolbar class=\"title-toolbar nav-title-toolbar\">\n              <div class=\"title\">ZUPERK\xDCLBLOG</div>\n            </app-toolbar>\n\n          </app-header>\n\n          <!-- nav menu -->\n          <iron-selector class=\"nav-menu\" selected=\"[[categoryData.category]]\" attr-for-selected=\"name\" on-iron-activate=\"_drawerSelected\">\n            <template is=\"dom-repeat\" items=\"[[articles]]\">\n              <a name=\"[[item.name]]\" href=\"#/[[item.name]]/list\">{{item.title}}</a>\n            </template>\n          </iron-selector>\n\n        </app-header-layout>\n      </app-drawer>\n\n      <!-- main panel -->\n      <app-header-layout>\n\n        <app-header fixed effects=\"waterfall\" class=\"main-header\" slot=\"header\">\n\n          <!-- top toolbar -->\n          <app-toolbar>\n            <!-- menu button -->\n            <paper-icon-button drawer-toggle icon=\"app:menu\" hidden\\$=\"[[_shouldHideMenuButton(pageData.page, narrow)]]\"></paper-icon-button>\n\n            <!-- back button -->\n            <a href=\"#/[[categoryData.category]]/list\" hidden\\$=\"[[_equal(pageData.page, 'list')]]\">\n              <paper-icon-button icon=\"app:arrow-back\"></paper-icon-button>\n            </a>\n          </app-toolbar>\n\n          <!-- bottom toolbar -->\n          <app-toolbar class=\"title-toolbar main-title-toolbar\">\n            <div class=\"title\">ZUPERK\xDCLBLOG</div>\n          </app-toolbar>\n\n        </app-header>\n\n        <!-- list/detail pages -->\n        <iron-pages selected=\"[[pageData.page]]\" attr-for-selected=\"name\">\n\n          <!-- list page -->\n          <iron-pages name=\"list\" selected=\"[[categoryData.category]]\" attr-for-selected=\"name\">\n\n            <template is=\"dom-repeat\" items=\"[[articles]]\" as=\"category\">\n              <section class=\"category-page\" name=\"[[category.name]]\">\n                <!-- 2-columns grid -->\n                <two-columns-grid column-width=\"396\" gutter=\"4\">\n                  <template is=\"dom-repeat\" items=\"[[category.items]]\" as=\"article\">\n                    <article-headline href=\"#/[[category.name]]/detail/[[article.id]]\" article=\"[[article]]\"></article-headline>\n                  </template>\n                </two-columns-grid>\n              </section>\n            </template>\n\n          </iron-pages>\n\n          <!-- detail page -->\n          <article-detail name=\"detail\" article=\"[[article]]\"></article-detail>\n        </iron-pages>\n\n      </app-header-layout>\n\n    </app-drawer-layout>\n"]))),
    is: 'blog-app',
    properties: {
      /**
       * Articles data.
       */
      articles: Object,
      route: Object,
      subRoute: Object,
      subsubRoute: {
        type: Object,
        observer: '_subsubrouteChanged'
      },
      categoryData: Object,
      pageData: Object,
      idData: Object,
      _scrollPositionMap: {
        type: Object,
        value: function value() {
          return {};
        }
      }
    },
    observers: ['_updateArticle(articles, categoryData.category, idData.id)'],
    attached: function attached() {
      this.async(function () {
        if (!this.route.path) {
          this.set('route.path', '/art/list');
        }
      });
    },
    _equal: function _equal(value1, value2) {
      return value1 === value2;
    },
    _updateArticle: function _updateArticle(articles, category, id) {
      if (!articles) {
        return;
      }

      for (var i = 0, cat; cat = articles[i]; i++) {
        if (cat.name === category) {
          for (var j = 0, article; article = cat.items[j]; j++) {
            if (article.id === id) {
              this.article = article;
              return;
            }
          }
        }
      }
    },
    _drawerSelected: function _drawerSelected() {
      if (!this.$.drawer.persistent) this.$.drawer.close();
    },
    _shouldHideMenuButton: function _shouldHideMenuButton(page, narrow) {
      return page === 'detail' || !narrow;
    },

    /**
     * Preserves the document scroll position, so
     * it can be restored when returning to a page.
     */
    _subsubrouteChanged: function _subsubrouteChanged(subroute, oldSubroute) {
      var map = this._scrollPositionMap;

      if (oldSubroute != null && oldSubroute.prefix != null) {
        // Don't reset the scroll position in the detail page.
        if (oldSubroute.prefix.indexOf('detail') == -1) {
          map[oldSubroute.prefix] = window.pageYOffset;
        }
      }

      if (map[subroute.prefix] != null) {
        (0, _helpers.scroll)({
          top: map[subroute.prefix],
          behavior: 'silent'
        });
      } else if (this.isAttached) {
        (0, _helpers.scroll)({
          top: 0,
          behavior: 'silent'
        });
      }
    }
  });
});
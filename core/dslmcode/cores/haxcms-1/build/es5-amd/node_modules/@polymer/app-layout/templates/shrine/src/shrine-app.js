define(["../../../../app-route/app-location.js", "../../../../app-route/app-route.js", "../../../../iron-flex-layout/iron-flex-layout.js", "../../../../iron-media-query/iron-media-query.js", "../../../../paper-icon-button/paper-icon-button.js", "../../../../paper-tabs/paper-tabs.js", "../../../../iron-icons/iron-icons.js", "../../../../iron-pages/iron-pages.js", "../../../app-layout.js", "../../../app-scroll-effects/app-scroll-effects.js", "./shrine-list.js", "./shrine-detail.js", "../../../helpers/helpers.js", "../../../../polymer/lib/legacy/polymer-fn.js", "../../../../polymer/lib/utils/html-tag.js"], function (_appLocation, _appRoute, _ironFlexLayout, _ironMediaQuery, _paperIconButton, _paperTabs, _ironIcons, _ironPages, _appLayout, _appScrollEffects, _shrineList, _shrineDetail, _helpers, _polymerFn, _htmlTag) {
  "use strict";

  var _templateObject_0fd235c0942811ecb1937969798b231a;

  (0, _polymerFn.Polymer)({
    _template: (0, _htmlTag.html)(_templateObject_0fd235c0942811ecb1937969798b231a || (_templateObject_0fd235c0942811ecb1937969798b231a = babelHelpers.taggedTemplateLiteral(["\n    <style>\n\n      :host {\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n      }\n\n      app-header {\n        background-color: rgba(255, 255, 255, 0.95);\n        --app-header-shadow: {\n          box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);\n          height: 10px;\n          bottom: -10px;\n        };\n      }\n\n      app-header:not([shadow]) {\n        border-bottom: 1px solid #ddd;\n      }\n\n      app-drawer {\n        --app-drawer-content-container: {\n          background-color: #f3f3f3;\n        };\n      }\n\n      #mainToolbar {\n        height: 110px;\n      }\n\n      paper-icon-button {\n        color: #000;\n        --paper-icon-button-ink-color: #31f0ef;\n      }\n\n      .navItem {\n        @apply --layout-self-start;\n        margin-top: 13px;\n        width: 88px;\n      }\n\n      .spacer {\n        @apply --layout;\n        @apply --layout-flex-auto;\n        @apply --layout-center-center;\n      }\n\n      .logo {\n        width: 120px;\n        height: 40px;\n        background-size: 100% 100%;\n      }\n\n      .leftItem [icon] {\n        display: none;\n      }\n\n\n      shrine-detail {\n        height: calc(100vh - 65px);\n      }\n\n      :host([page=detail]) #mainToolbar {\n        height: 64px;\n      }\n\n      :host([page=detail]) paper-tabs {\n        display: none;\n      }\n\n      :host([page=detail]) .leftItem [icon=arrow-back] {\n        display: block;\n      }\n\n      :host([page=detail]) .leftItem [icon=menu] {\n        display: none;\n      }\n\n      paper-tabs {\n        --paper-tabs-selection-bar-color: #31f0ef;\n        margin-left: -55px;\n        color: #31f0ef;\n        font-size: 13px;\n      }\n\n      paper-tab {\n        @apply --layout-flex-none;\n        padding: 0;\n        --paper-tab-ink: #31f0ef;\n      }\n\n      paper-tab a {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        text-decoration: none;\n        text-transform: uppercase;\n        color: #7c7c7c;\n        font-weight: 500;\n        padding: 0 20px;\n        height: 100%;\n      }\n\n      .list {\n        margin-left: 20px;\n        margin-right: 20px;\n      }\n\n      .list a {\n        display: block;\n        line-height: 40px;\n        text-decoration: none;\n        text-transform: uppercase;\n        color: #7c7c7c;\n      }\n\n      .list a.active {\n        color: black;\n        font-weight: bold;\n      }\n\n      .profileBar {\n        margin-bottom: 40px;\n      }\n\n      .profilePic {\n        border-radius: 50% 50%;\n      }\n\n      .profileName {\n        @apply --layout-flex;\n        margin-left: 20px;\n        font-size: 14px;\n        font-weight: 500;\n        color: #0a3142;\n      }\n\n      [icon=settings] {\n        width: 35px;\n        height: 35px;\n        color: #0a3142;\n      }\n\n      /**\n       * Desktop small, tablet\n       */\n      @media (max-width: 1200px) {\n        .logo {\n          width: 89px;\n          height: 17px;\n        }\n\n        #mainToolbar {\n          height: 64px;\n        }\n\n        shrine-detail {\n          height: auto;\n        }\n      }\n\n      /**\n       * Phone\n       */\n      @media (max-width: 400px) {\n        .leftItem [icon=menu] {\n          display: block;\n        }\n\n        paper-tabs {\n          display: none;\n        }\n      }\n\n    </style>\n\n    <app-location route=\"{{route}}\" use-hash-as-path></app-location>\n    <app-route route=\"{{route}}\" pattern=\":section\" data=\"{{sectionData}}\" tail=\"{{subRoute}}\"></app-route>\n    <app-route route=\"{{subRoute}}\" pattern=\"/:id\" data=\"{{idData}}\" active=\"{{onDetailPage}}\"></app-route>\n\n    <iron-media-query query=\"max-width: 400px\" query-matches=\"{{smallScreen}}\"></iron-media-query>\n\n    <app-drawer-layout drawer-width=\"288px\" force-narrow>\n      <!-- navigation drawer for small screen sizes -->\n      <app-drawer slot=\"drawer\" id=\"drawer\" swipe-open=\"[[smallScreen]]\">\n        <template is=\"dom-if\" if=\"[[smallScreen]]\">\n          <app-toolbar class=\"profileBar\">\n            <img class=\"profilePic\" src=\"//app-layout-assets.appspot.com/assets/shrine/profile_pic.jpg\" width=\"30\" height=\"30\">\n            <div class=\"profileName\">Stella</div>\n            <paper-icon-button icon=\"settings\" aria-label=\"Settings\"></paper-icon-button>\n          </app-toolbar>\n          <div class=\"list\">\n            <template is=\"dom-repeat\" items=\"[[sections]]\" as=\"section\" initial-count=\"1\">\n              <a href=\"#[[section]]\" class$=\"[[_getSectionClass(index, selectedTab)]]\">[[section]]</a>\n            </template>\n          </div>\n        </template>\n      </app-drawer>\n\n      <app-header-layout id=\"headerLayout\">\n        <!-- main header -->\n        <app-header slot=\"header\" effects=\"waterfall\" fixed=\"[[smallScreen]]\" condenses=\"[[!smallScreen]]\" reveals=\"[[!smallScreen]]\">\n          <app-toolbar id=\"mainToolbar\">\n            <div class=\"navItem leftItem\">\n              <paper-icon-button icon=\"menu\" drawer-toggle alt=\"Toogle navigation menu\"></paper-icon-button>\n              <a href=\"#[[sectionData.section]]\" tabindex=\"-1\"><paper-icon-button icon=\"arrow-back\" alt=\"Back to the home\"></paper-icon-button></a>\n            </div>\n            <div class=\"spacer\">\n              <img src=\"//app-layout-assets.appspot.com/assets/shrine/shrine_logo.svg\" class=\"logo\" alt=\"SHRINE\">\n            </div>\n            <div class=\"navItem\">\n              <paper-icon-button icon=\"shopping-cart\" aria-label=\"Shopping cart\"></paper-icon-button>\n              <paper-icon-button icon=\"more-vert\" aria-label=\"More options\"></paper-icon-button>\n            </div>\n          </app-toolbar>\n          <template is=\"dom-if\" if=\"[[_shouldShowTabs(onDetailPage, smallScreen)]]\">\n            <paper-tabs selected=\"[[selectedTab]]\" scrollable sticky$=\"[[_shouldShowTabs(onDetailPage, smallScreen)]]\">\n              <template is=\"dom-repeat\" items=\"[[sections]]\" as=\"section\">\n                <paper-tab>\n                  <a href=\"#[[section]]\">[[section]]</a>\n                </paper-tab>\n              </template>\n            </paper-tabs>\n          </template>\n        </app-header>\n\n        <iron-pages selected=\"[[page]]\" attr-for-selected=\"name\">\n          <!-- detail of item -->\n          <template is=\"dom-if\" if=\"[[_equal(page, 'detail')]]\">\n            <shrine-detail name=\"detail\" section=\"[[sectionData.section]]\" related-items=\"[[items]]\" item=\"[[_getDetailItem(items, idData.id)]]\">\n            </shrine-detail>\n          </template>\n          <!-- list of items -->\n          <template is=\"dom-if\" if=\"[[_equal(page, 'list')]]\">\n            <shrine-list name=\"list\" section=\"[[sectionData.section]]\" items=\"[[_getItemsCopy(items, sectionData.section)]]\" featured-item=\"[[_getFeaturedItem(featuredItems, sectionData.section)]]\">\n            </shrine-list>\n          </template>\n        </iron-pages>\n\n      </app-header-layout>\n    </app-drawer-layout>\n"], ["\n    <style>\n\n      :host {\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n      }\n\n      app-header {\n        background-color: rgba(255, 255, 255, 0.95);\n        --app-header-shadow: {\n          box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);\n          height: 10px;\n          bottom: -10px;\n        };\n      }\n\n      app-header:not([shadow]) {\n        border-bottom: 1px solid #ddd;\n      }\n\n      app-drawer {\n        --app-drawer-content-container: {\n          background-color: #f3f3f3;\n        };\n      }\n\n      #mainToolbar {\n        height: 110px;\n      }\n\n      paper-icon-button {\n        color: #000;\n        --paper-icon-button-ink-color: #31f0ef;\n      }\n\n      .navItem {\n        @apply --layout-self-start;\n        margin-top: 13px;\n        width: 88px;\n      }\n\n      .spacer {\n        @apply --layout;\n        @apply --layout-flex-auto;\n        @apply --layout-center-center;\n      }\n\n      .logo {\n        width: 120px;\n        height: 40px;\n        background-size: 100% 100%;\n      }\n\n      .leftItem [icon] {\n        display: none;\n      }\n\n\n      shrine-detail {\n        height: calc(100vh - 65px);\n      }\n\n      :host([page=detail]) #mainToolbar {\n        height: 64px;\n      }\n\n      :host([page=detail]) paper-tabs {\n        display: none;\n      }\n\n      :host([page=detail]) .leftItem [icon=arrow-back] {\n        display: block;\n      }\n\n      :host([page=detail]) .leftItem [icon=menu] {\n        display: none;\n      }\n\n      paper-tabs {\n        --paper-tabs-selection-bar-color: #31f0ef;\n        margin-left: -55px;\n        color: #31f0ef;\n        font-size: 13px;\n      }\n\n      paper-tab {\n        @apply --layout-flex-none;\n        padding: 0;\n        --paper-tab-ink: #31f0ef;\n      }\n\n      paper-tab a {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        text-decoration: none;\n        text-transform: uppercase;\n        color: #7c7c7c;\n        font-weight: 500;\n        padding: 0 20px;\n        height: 100%;\n      }\n\n      .list {\n        margin-left: 20px;\n        margin-right: 20px;\n      }\n\n      .list a {\n        display: block;\n        line-height: 40px;\n        text-decoration: none;\n        text-transform: uppercase;\n        color: #7c7c7c;\n      }\n\n      .list a.active {\n        color: black;\n        font-weight: bold;\n      }\n\n      .profileBar {\n        margin-bottom: 40px;\n      }\n\n      .profilePic {\n        border-radius: 50% 50%;\n      }\n\n      .profileName {\n        @apply --layout-flex;\n        margin-left: 20px;\n        font-size: 14px;\n        font-weight: 500;\n        color: #0a3142;\n      }\n\n      [icon=settings] {\n        width: 35px;\n        height: 35px;\n        color: #0a3142;\n      }\n\n      /**\n       * Desktop small, tablet\n       */\n      @media (max-width: 1200px) {\n        .logo {\n          width: 89px;\n          height: 17px;\n        }\n\n        #mainToolbar {\n          height: 64px;\n        }\n\n        shrine-detail {\n          height: auto;\n        }\n      }\n\n      /**\n       * Phone\n       */\n      @media (max-width: 400px) {\n        .leftItem [icon=menu] {\n          display: block;\n        }\n\n        paper-tabs {\n          display: none;\n        }\n      }\n\n    </style>\n\n    <app-location route=\"{{route}}\" use-hash-as-path></app-location>\n    <app-route route=\"{{route}}\" pattern=\":section\" data=\"{{sectionData}}\" tail=\"{{subRoute}}\"></app-route>\n    <app-route route=\"{{subRoute}}\" pattern=\"/:id\" data=\"{{idData}}\" active=\"{{onDetailPage}}\"></app-route>\n\n    <iron-media-query query=\"max-width: 400px\" query-matches=\"{{smallScreen}}\"></iron-media-query>\n\n    <app-drawer-layout drawer-width=\"288px\" force-narrow>\n      <!-- navigation drawer for small screen sizes -->\n      <app-drawer slot=\"drawer\" id=\"drawer\" swipe-open=\"[[smallScreen]]\">\n        <template is=\"dom-if\" if=\"[[smallScreen]]\">\n          <app-toolbar class=\"profileBar\">\n            <img class=\"profilePic\" src=\"//app-layout-assets.appspot.com/assets/shrine/profile_pic.jpg\" width=\"30\" height=\"30\">\n            <div class=\"profileName\">Stella</div>\n            <paper-icon-button icon=\"settings\" aria-label=\"Settings\"></paper-icon-button>\n          </app-toolbar>\n          <div class=\"list\">\n            <template is=\"dom-repeat\" items=\"[[sections]]\" as=\"section\" initial-count=\"1\">\n              <a href=\"#[[section]]\" class\\$=\"[[_getSectionClass(index, selectedTab)]]\">[[section]]</a>\n            </template>\n          </div>\n        </template>\n      </app-drawer>\n\n      <app-header-layout id=\"headerLayout\">\n        <!-- main header -->\n        <app-header slot=\"header\" effects=\"waterfall\" fixed=\"[[smallScreen]]\" condenses=\"[[!smallScreen]]\" reveals=\"[[!smallScreen]]\">\n          <app-toolbar id=\"mainToolbar\">\n            <div class=\"navItem leftItem\">\n              <paper-icon-button icon=\"menu\" drawer-toggle alt=\"Toogle navigation menu\"></paper-icon-button>\n              <a href=\"#[[sectionData.section]]\" tabindex=\"-1\"><paper-icon-button icon=\"arrow-back\" alt=\"Back to the home\"></paper-icon-button></a>\n            </div>\n            <div class=\"spacer\">\n              <img src=\"//app-layout-assets.appspot.com/assets/shrine/shrine_logo.svg\" class=\"logo\" alt=\"SHRINE\">\n            </div>\n            <div class=\"navItem\">\n              <paper-icon-button icon=\"shopping-cart\" aria-label=\"Shopping cart\"></paper-icon-button>\n              <paper-icon-button icon=\"more-vert\" aria-label=\"More options\"></paper-icon-button>\n            </div>\n          </app-toolbar>\n          <template is=\"dom-if\" if=\"[[_shouldShowTabs(onDetailPage, smallScreen)]]\">\n            <paper-tabs selected=\"[[selectedTab]]\" scrollable sticky\\$=\"[[_shouldShowTabs(onDetailPage, smallScreen)]]\">\n              <template is=\"dom-repeat\" items=\"[[sections]]\" as=\"section\">\n                <paper-tab>\n                  <a href=\"#[[section]]\">[[section]]</a>\n                </paper-tab>\n              </template>\n            </paper-tabs>\n          </template>\n        </app-header>\n\n        <iron-pages selected=\"[[page]]\" attr-for-selected=\"name\">\n          <!-- detail of item -->\n          <template is=\"dom-if\" if=\"[[_equal(page, 'detail')]]\">\n            <shrine-detail name=\"detail\" section=\"[[sectionData.section]]\" related-items=\"[[items]]\" item=\"[[_getDetailItem(items, idData.id)]]\">\n            </shrine-detail>\n          </template>\n          <!-- list of items -->\n          <template is=\"dom-if\" if=\"[[_equal(page, 'list')]]\">\n            <shrine-list name=\"list\" section=\"[[sectionData.section]]\" items=\"[[_getItemsCopy(items, sectionData.section)]]\" featured-item=\"[[_getFeaturedItem(featuredItems, sectionData.section)]]\">\n            </shrine-list>\n          </template>\n        </iron-pages>\n\n      </app-header-layout>\n    </app-drawer-layout>\n"]))),
    is: 'shrine-app',
    properties: {
      sections: {
        type: Array,
        value: function value() {
          return ['feature', 'latest', 'fashion', 'furniture', 'beauty', 'food', 'travel'];
        }
      },
      selectedTab: {
        type: Number,
        computed: '_computeSelectedTab(sections, sectionData.section)'
      },
      items: {
        type: Array
      },
      featuredItems: {
        type: Array
      },
      page: {
        type: String,
        computed: '_computePage(onDetailPage)',
        reflectToAttribute: true
      },
      route: Object,
      subRoute: Object,
      sectionData: Object,
      idData: Object,
      onDetailPage: Boolean
    },
    observers: ['_hashDidChange(route.path, items, featuredItems)'],
    attached: function attached() {
      this.async(function () {
        if (!this.route.path) {
          this.set('route.path', 'feature');
        }
      });
    },
    _computeSelectedTab: function _computeSelectedTab(sections, section) {
      return sections.indexOf(section);
    },
    _getItemsCopy: function _getItemsCopy(items) {
      return items ? items.slice() : [];
    },
    _getFeaturedItem: function _getFeaturedItem(featuredItems, section) {
      if (featuredItems && section) {
        return featuredItems.filter(function (item) {
          return item.category.toLowerCase() === section;
        }).pop();
      }

      return '';
    },
    _getDetailItem: function _getDetailItem(items, id) {
      if (items) {
        return items[id];
      }
    },
    _computePage: function _computePage(onDetailPage) {
      return onDetailPage ? 'detail' : 'list';
    },
    _hashDidChange: function _hashDidChange() {
      (0, _helpers.scroll)({
        top: 0,
        behavior: 'silent'
      });
      this.$.headerLayout.resetLayout();
      this.$.drawer.close();
    },
    _equal: function _equal(a, b) {
      return a === b;
    },
    _getSectionClass: function _getSectionClass(index, selectedTab) {
      return index === selectedTab ? 'active' : '';
    },
    _shouldShowTabs: function _shouldShowTabs(onDetailPage, smallScreen) {
      return !onDetailPage && !smallScreen;
    }
  });
});
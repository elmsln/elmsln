define(["exports","./document-wait.js"],function(_exports,_documentWait){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.CustomStyleInterfaceInterface=_exports.default=_exports.CustomStyleProvider=void 0,_documentWait=babelHelpers.interopRequireDefault(_documentWait),_exports.CustomStyleProvider=void 0;const SEEN_MARKER="__seenByShadyCSS",CACHED_STYLE="__shadyCSSCachedStyle";let transformFn=null,validateFn=null;class CustomStyleInterface{constructor(){this.customStyles=[],this.enqueued=!1,(0,_documentWait.default)(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&validateFn&&(this.enqueued=!0,(0,_documentWait.default)(validateFn))}addCustomStyle(style){style[SEEN_MARKER]||(style[SEEN_MARKER]=!0,this.customStyles.push(style),this.enqueueDocumentValidation())}getStyleForCustomStyle(customStyle){if(customStyle[CACHED_STYLE])return customStyle[CACHED_STYLE];let style;return style=customStyle.getStyle?customStyle.getStyle():customStyle}processStyles(){const cs=this.customStyles;for(let i=0;i<cs.length;i++){const customStyle=cs[i];if(customStyle[CACHED_STYLE])continue;const style=this.getStyleForCustomStyle(customStyle);if(style){const styleToTransform=style.__appliedElement||style;transformFn&&transformFn(styleToTransform),customStyle[CACHED_STYLE]=styleToTransform}}return cs}}_exports.default=CustomStyleInterface,CustomStyleInterface.prototype.addCustomStyle=CustomStyleInterface.prototype.addCustomStyle,CustomStyleInterface.prototype.getStyleForCustomStyle=CustomStyleInterface.prototype.getStyleForCustomStyle,CustomStyleInterface.prototype.processStyles=CustomStyleInterface.prototype.processStyles,Object.defineProperties(CustomStyleInterface.prototype,{transformCallback:{get:()=>transformFn,set(fn){transformFn=fn}},validateCallback:{get:()=>validateFn,set(fn){let needsEnqueue=!1;validateFn||(needsEnqueue=!0),validateFn=fn,needsEnqueue&&this.enqueueDocumentValidation()}}});_exports.CustomStyleInterfaceInterface={}});